<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Using the HBase Handler</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="dcterms.created" content="2016-06-08T07:49:17Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Integrating Oracle GoldenGate for Big Data" />
<meta name="dcterms.identifier" content="E65148-03" />
<meta name="dcterms.isVersionOf" content="GADBD" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-85A82B2E-CD51-463A-8674-3D686C3C0EC0.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-74F65F52-7ED9-4E66-8F94-3706392F7B6A.htm" title="Next" type="text/html" />
<link rel="alternate" href="E65148-03.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="E65148-03.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="E65148-03.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr"><a id="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390"></a> <span id="PAGE" style="display:none;">6/15</span> <!-- End Header --><a id="GADBD397"></a>
<h1 id="GADBD-GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390" class="sect1"><span class="enumeration_chapter">3</span> Using the HBase Handler</h1>
<div>
<p>The Oracle GoldenGate for Big Data Handler for HBase allows you to populate HBase tables from existing Oracle GoldenGate supported sources.</p>
<p>This chapter contains the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390.htm#GUID-6C50AC04-A637-4165-9BAD-A5AE96FF1D52">Overview</a></p>
</li>
<li>
<p><a href="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390.htm#GUID-40D7CABD-C611-40DB-BB47-853EBB7C6FCB">HBase Handler Certification Matrix</a></p>
</li>
<li>
<p><a href="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390.htm#GUID-E5071D39-6E49-44A1-AF25-3C226CC21094">Detailed Functionality</a></p>
</li>
<li>
<p><a href="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390.htm#GUID-1AF0C143-9D6A-41D7-94F2-BC0D76D72018">Runtime Prerequisites</a></p>
</li>
<li>
<p><a href="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390.htm#GUID-C1AD7142-9B27-4FFA-8CB8-A40E9A523703">Metadata Change Events</a></p>
</li>
<li>
<p><a href="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390.htm#GUID-5247718A-478B-4296-B791-76A8D05A2E52">Common Pitfalls</a></p>
</li>
</ul>
</div>
<a id="GADBD398"></a>
<div class="props_rev_3"><a id="GUID-6C50AC04-A637-4165-9BAD-A5AE96FF1D52"></a>
<h2 id="GADBD-GUID-6C50AC04-A637-4165-9BAD-A5AE96FF1D52" class="sect2"><span class="enumeration_section">3.1</span> Overview</h2>
<div>
<div class="section">
<p>HBase is an open source Big Data application that emulates much of the functionality of a relational database management system (RDBMS). Hadoop is specifically designed to store large amounts of unstructured data. Conversely, data stored in databases and being replicated through Oracle GoldenGate is highly structured. HBase provides a method of maintaining the important structure of data, while taking advantage of the horizontal scaling that is offered by the Hadoop Distributed File System (HDFS).</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD400"></a>
<div class="props_rev_3"><a id="GUID-40D7CABD-C611-40DB-BB47-853EBB7C6FCB"></a>
<h2 id="GADBD-GUID-40D7CABD-C611-40DB-BB47-853EBB7C6FCB" class="sect2"><span class="enumeration_section">3.2</span> HBase Handler Certification Matrix</h2>
<div>
<div class="section">
<p>Cloudera HBase 5.4.<span class="italic">x</span> and later did not fully adopt the Apache HBase 1.0.0 client interface so it is not fully in sync with the Apache HBase code line to provide reverse compatibility in that HBase client interface. This means that Cloudera HBase broke binary compatibility with the new HBase 1.0.0 interface resulting in <code>NoSuchMethodError</code> when integrating with the Oracle GoldenGate for Big Data HBase Handler. This can be solved one of the following two ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>Configure the HBase Handler to use the 0.98.x HBase interface by setting the HBase Handler configuration property, <code>hBase98Compatible</code>, to <code>true</code>.</p>
</li>
<li>
<p>Alternatively, you can use the Apache HBase client libraries when connecting to CDH 5.4.<span class="italic">x</span> and later HBase.</p>
</li>
</ul>
<p>The 12.2.0.1 Oracle GoldenGate for Big Data HBase Handler is designed to work with the following:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-40D7CABD-C611-40DB-BB47-853EBB7C6FCB__GUID-D3973A0E-6649-4203-A87B-1F872CC83261">
<table class="cellalignment145" summary="Two column table describing the HBase distribution and versions.">
<thead align="left">
<tr>
<th class="cellalignment156" id="d7622e113">Distribution</th>
<th class="cellalignment157" id="d7622e116">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment156" id="d7622e121" headers="d7622e113">
<p>Apache HBase</p>
</td>
<td class="cellalignment157" headers="d7622e121 d7622e116">
<p>0.98.<span class="italic">x</span> and 0.96.<span class="italic">x</span> when you set the <code>hBase98Compatible</code> property to true</p>
<p>1.1.<span class="italic">x</span> and 1.0.<span class="italic">x</span></p>
</td>
</tr>
<tr>
<td class="cellalignment156" id="d7622e144" headers="d7622e113">
<p>Hortonworks Data Platform (HDP) including Apache HBase</p>
</td>
<td class="cellalignment157" headers="d7622e144 d7622e116">
<p>HDP 2.4 (HBase 1.1.2)</p>
<p>HDP 2.3 (HBase 1.1.1)</p>
<p>HDP 2.2 (HBase 0.98.4) when you set the <code>hBase98Compatible</code> property to <code>true</code>.</p>
</td>
</tr>
<tr>
<td class="cellalignment156" id="d7622e161" headers="d7622e113">
<p>Cloudera Apache Hadoop (CDH)</p>
</td>
<td class="cellalignment157" headers="d7622e161 d7622e116">
<p>CDH 5.7.<span class="italic">x</span> (HBase 1.2.0) when you set the <code>hBase98Compatible</code> property to <code>true</code>.</p>
<p>CDH 5.6.<span class="italic">x</span> (HBase 1.0.0) when you set the <code>hBase98Compatible</code> property to <code>true</code>.</p>
<p>CDH 5.5.<span class="italic">x</span> (HBase 1.0.0) when you set the <code>hBase98Compatible</code> property to <code>true</code>.</p>
<p>CDH 5.4.<span class="italic">x</span> (HBase 1.0.0) when you set the <code>hBase98Compatible</code> property to <code>true</code>.</p>
<p>CDH 5.3.<span class="italic">x</span> (HBase 0.98.6) when you set the <code>hBase98Compatible</code> property to <code>true</code>.</p>
<p>CDH 5.2.<span class="italic">x</span> (HBase 0.98.6) when you set the <code>hBase98Compatible</code> property to <code>true</code>.</p>
<p>CDH 5.1.<span class="italic">x</span> (HBase 9.98.1) when you set the <code>hBase98Compatible</code> property to <code>true</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD402"></a><a id="GADBD403"></a><a id="GADBD404"></a><a id="GADBD405"></a><a id="GADBD401"></a>
<div class="props_rev_3"><a id="GUID-E5071D39-6E49-44A1-AF25-3C226CC21094"></a>
<h2 id="GADBD-GUID-E5071D39-6E49-44A1-AF25-3C226CC21094" class="sect2"><span class="enumeration_section">3.3</span> Detailed Functionality</h2>
<div>
<div class="section">
<p>The HBase Handler takes operations from the source trail file and creates corresponding tables in HBase, and then loads change capture data into those tables.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">HBase Table Names</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Table names created in an HBase map to the corresponding table name of the operation from the source trail file. It is case-sensitive.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">HBase Table Namespace</p>
</div>
<!-- class="section" -->
<div class="section">
<p>For two part table names (schema name and table name), the schema name maps to the HBase table namespace. For a three part table name like <code>Catalog.Schema.MyTable</code>, the create HBase namespace would be <code>Catalog_Schema</code>. HBase table namespaces are case sensitive. A NULL schema name is supported and maps to the default HBase namespace.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">HBase Row Key</p>
</div>
<!-- class="section" -->
<div class="section">
<p>HBase has a similar concept of the database primary keys called the HBase row key. The HBase row key is the unique identifier for a table row. HBase only supports a single row key per row and it cannot be empty or NULL. The HBase Handler maps the primary key value into the HBase row key value. If the source table has multiple primary keys, then the primary key values are concatenated, separated by a pipe delimiter (|).You can configure the HBase row key delimiter.</p>
<p>The source table <span class="italic">must</span> have at least one primary key column. Replication of a table without a primary key causes the HBase Handler to abend.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">HBase Column Family</p>
</div>
<!-- class="section" -->
<div class="section">
<p>HBase has the concept of a column family. A column family is a grouping mechanism for column data. Only a single column family is supported. Every HBase column must belong to a single column family. The HBase Handler provides a single column family per table that defaults to <code>cf</code>. The column family name is configurable by you. However, once a table is created with a specific column family name, reconfiguration of the column family name in the HBase example without first modify or dropping the table results in an abend of the Oracle GoldenGate Extract and Replicat processes.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD406"></a>
<div class="props_rev_3"><a id="GUID-1AF0C143-9D6A-41D7-94F2-BC0D76D72018"></a>
<h2 id="GADBD-GUID-1AF0C143-9D6A-41D7-94F2-BC0D76D72018" class="sect2"><span class="enumeration_section">3.4</span> Runtime Prerequisites</h2>
<div>
<div class="section">
<p>HBase must be up and running either collocated with the HBase Handler process or on a machine that is network connectable from the machine hosting the HBase Handler process. Additionally the underlying HDFS single instance or clustered instance serving as the repository for HBase data must be up and running.</p>
</div>
<!-- class="section" --></div>
<a id="GADBD407"></a>
<div class="props_rev_3"><a id="GUID-5E080B12-1659-47A4-B915-92A28D1C223B"></a>
<h3 id="GADBD-GUID-5E080B12-1659-47A4-B915-92A28D1C223B" class="sect3"><span class="enumeration_section">3.4.1</span> Classpath Configuration</h3>
<div>
<div class="section">
<p>You must include two things in the <code>gg.classpath</code> configuration variable in order for the HBase Handler to connect to HBase and stream data. The first is the <code>hbase-site.xml</code> file and the second are the HBase client jars. The HBase client jars must match the version of HBase to which the HBase Handler is connecting. The HBase client jars are <span class="italic">not</span> shipped with the Oracle GoldenGate for Big Data product.</p>
<p><a href="GUID-0923A020-5800-4B8F-8EFA-05AF9061629B.htm#GUID-0923A020-5800-4B8F-8EFA-05AF9061629B">HBase Handler Client Dependencies</a> includes the listing of required HBase client jars by version.</p>
<p>The default location of the <code>hbase-site.xml</code> file is <span class="italic"><code>HBase_Home</code></span><code>/conf</code>.</p>
<p>The default location of the HBase client JARs is <span class="italic"><code>HBase_Home</code></span><code>/lib/*</code>.</p>
<p>If the HBase Handler is running on Windows, follow the Windows classpathing syntax.</p>
<p>The <code>gg.classpath</code> must be configured exactly as described. Pathing to the <code>hbase-site.xml</code> should simply contain the path with no wild card appended. The inclusion of the * wildcard in the path to the <code>hbase-site.xml</code> file will cause it not to be accessible. Conversely, pathing to the dependency jars should include the * wild card character in order to include all of the jar files in that directory in the associated classpath. Do not use <code>*.jar</code>. An example of a correctly configured <code>gg.classpath</code> variable is the following:</p>
<p><code>gg.classpath=/var/lib/hbase/lib/*:/var/lib/hbase/conf</code></p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD408"></a>
<div class="props_rev_3"><a id="GUID-4A4A10F7-BA18-4AF0-B656-512789123786"></a>
<h3 id="GADBD-GUID-4A4A10F7-BA18-4AF0-B656-512789123786" class="sect3"><span class="enumeration_section">3.4.2</span> Pluggable Formatters</h3>
<div>
<div class="section">
<p>Pluggable formatters are not applicable to the HBase Handler. Data is streamed to HBase using the proprietary HBase client interface.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD410"></a><a id="GADBD409"></a>
<div class="props_rev_3"><a id="GUID-041AEA7E-E0EA-4FA6-B632-C058AA40DA7E"></a>
<h3 id="GADBD-GUID-041AEA7E-E0EA-4FA6-B632-C058AA40DA7E" class="sect3"><span class="enumeration_section">3.4.3</span> HBase Handler Configuration</h3>
<div>
<div class="tblformal" id="GUID-041AEA7E-E0EA-4FA6-B632-C058AA40DA7E__GUID-D804E272-991E-421B-992F-E0DBFACB6184">
<p class="titleintable">Table 3-1 HBase Handler Configuration Parameters</p>
<table class="cellalignment145" title="HBase Handler Configuration Parameters" summary="HBase Handler Configuration Parameters">
<thead align="left">
<tr>
<th class="cellalignment158" id="d7622e446">Parameters</th>
<th class="cellalignment159" id="d7622e449">Required/ Optional</th>
<th class="cellalignment160" id="d7622e452">Legal Values</th>
<th class="cellalignment161" id="d7622e455">Default</th>
<th class="cellalignment162" id="d7622e458">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment158" id="d7622e463" headers="d7622e446">
<p><code>gg.handlerlist</code></p>
</td>
<td class="cellalignment159" headers="d7622e463 d7622e449">
<p>Required</p>
</td>
<td class="cellalignment160" headers="d7622e463 d7622e452">
<p>Any string</p>
</td>
<td class="cellalignment161" headers="d7622e463 d7622e455">
<p>None</p>
</td>
<td class="cellalignment162" headers="d7622e463 d7622e458">
<p>Provides a name for the HBase Handler. The HBase Handler name is then becomes part of the property names listed in this table.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e480" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>type=hbase</code></p>
</td>
<td class="cellalignment159" headers="d7622e480 d7622e449">
<p>Required</p>
</td>
<td class="cellalignment160" headers="d7622e480 d7622e452">
<p><code>-</code></p>
</td>
<td class="cellalignment161" headers="d7622e480 d7622e455">
<p><code>-</code></p>
</td>
<td class="cellalignment162" headers="d7622e480 d7622e458">
<p>Selects the HBase Handler for streaming change data capture into HBase</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e504" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>hBaseColumnFamilyName</code></p>
</td>
<td class="cellalignment159" headers="d7622e504 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e504 d7622e452">
<p>Any String legal for an HBase column family name</p>
</td>
<td class="cellalignment161" headers="d7622e504 d7622e455">
<p><code>cf</code></p>
</td>
<td class="cellalignment162" headers="d7622e504 d7622e458">
<p>Column family is a grouping mechanism for columns in HBase. The HBase Handler only supports a single column family in the 12.2 release.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e527" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name</code></span><code>.includeTokens</code></p>
</td>
<td class="cellalignment159" headers="d7622e527 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e527 d7622e452">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment161" headers="d7622e527 d7622e455">
<p><code>false</code></p>
</td>
<td class="cellalignment162" headers="d7622e527 d7622e458">
<p>True indicates that token values will be included in the output to HBase. False means token values will be not be included.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e554" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>keyValueDelimiter</code></p>
</td>
<td class="cellalignment159" headers="d7622e554 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e554 d7622e452">
<p>Any string</p>
</td>
<td class="cellalignment161" headers="d7622e554 d7622e455">
<p><code>=</code></p>
</td>
<td class="cellalignment162" headers="d7622e554 d7622e458">
<p>Provides a delimiter between key values in a map. For example, <code>key=value,key1=value1,key2=value2</code>. Tokens are mapped values. Configuration value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e583" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>keyValuePairDelimiter</code></p>
</td>
<td class="cellalignment159" headers="d7622e583 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e583 d7622e452">
<p>Any string</p>
</td>
<td class="cellalignment161" headers="d7622e583 d7622e455">
<p><code>,</code></p>
</td>
<td class="cellalignment162" headers="d7622e583 d7622e458">
<p>Provides a delimiter between key value pairs in a map. For example, <code>key=value,key1=value1,key2=value2key=value,key1=value1,key2=value2</code>. Tokens are mapped values. Configuration value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e612" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>encoding</code></p>
</td>
<td class="cellalignment159" headers="d7622e612 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e612 d7622e452">
<p>Any encoding name or alias supported by Java.<a href="#fntarg_1" id="fnsrc_1"><sup>1</sup></a> For a list of supported options, visit the Oracle Java Documentation website at</p>
<p><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html" target="_blank"><code>https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html</code></a></p>
</td>
<td class="cellalignment161" headers="d7622e612 d7622e455">
<p>The native system encoding of the machine hosting the Oracle GoldenGate process</p>
</td>
<td class="cellalignment162" headers="d7622e612 d7622e458">
<p>Determines the encoding of values written the HBase. HBase values are written as bytes.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e651" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>pkUpdateHandling</code></p>
</td>
<td class="cellalignment159" headers="d7622e651 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e651 d7622e452">
<p><code>abend</code> | <code>update</code> | <code>delete-insert</code></p>
</td>
<td class="cellalignment161" headers="d7622e651 d7622e455">
<p><code>abend</code></p>
</td>
<td class="cellalignment162" headers="d7622e651 d7622e458">
<p>Provides configuration for how the HBase Handler should handle update operations that change a primary key. Primary key operations can be problematic for the HBase Handler and require special consideration by you.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>abend</code> - indicates the process will abend</p>
</li>
<li>
<p><code>update</code> - indicates the process will treat this as a normal update</p>
</li>
<li>
<p><code>delete-insert</code> - indicates the process will treat this as a delete and an insert. The full before image is required for this feature to work properly. This can be achieved by using full supplemental logging in Oracle Database. Without full before and after row images the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e697" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>nullValueRepresentation</code></p>
</td>
<td class="cellalignment159" headers="d7622e697 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e697 d7622e452">
<p>Any string</p>
</td>
<td class="cellalignment161" headers="d7622e697 d7622e455">
<p><code>NULL</code></p>
</td>
<td class="cellalignment162" headers="d7622e697 d7622e458">
<p>Allows you to configure what will be sent to HBase in the case of a NULL column value. The default is <code>NULL</code>. Configuration value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e726" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>authType</code></p>
</td>
<td class="cellalignment159" headers="d7622e726 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e726 d7622e452">
<p><code>kerberos</code></p>
</td>
<td class="cellalignment161" headers="d7622e726 d7622e455">
<p>None</p>
</td>
<td class="cellalignment162" headers="d7622e726 d7622e458">
<p>Setting this property to <code>kerberos</code> enables Kerberos authentication.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e752" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>kerberosKeytabFile</code></p>
</td>
<td class="cellalignment159" headers="d7622e752 d7622e449">
<p>Optional (Required if <code>authType=kerberos</code>)</p>
</td>
<td class="cellalignment160" headers="d7622e752 d7622e452">
<p>Relative or absolute path to a Kerberos <code>keytab</code> file</p>
</td>
<td class="cellalignment161" headers="d7622e752 d7622e455">
<p>-</p>
</td>
<td class="cellalignment162" headers="d7622e752 d7622e458">
<p>The <code>keytab</code> file allows the HDFS Handler to access a password to perform a <code>kinit</code> operation for Kerberos security.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e787" headers="d7622e446">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>kerberosPrincipal</code></p>
</td>
<td class="cellalignment159" headers="d7622e787 d7622e449">
<p>Optional (Required if <code>authType=kerberos</code>)</p>
</td>
<td class="cellalignment160" headers="d7622e787 d7622e452">
<p>A legal Kerberos principal name (for example, <code>user/FQDN@MY.REALM</code>)</p>
</td>
<td class="cellalignment161" headers="d7622e787 d7622e455">
<p>-</p>
</td>
<td class="cellalignment162" headers="d7622e787 d7622e458">
<p>The Kerberos principal name for Kerberos authentication.</p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e815" headers="d7622e446">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.hBase98Compatible&nbsp;</code></p>
</td>
<td class="cellalignment159" headers="d7622e815 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e815 d7622e452">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment161" headers="d7622e815 d7622e455">
<p><code>false</code></p>
</td>
<td class="cellalignment162" headers="d7622e815 d7622e458">
<p>Set this configuration property to <code>true</code> to enable integration with the HBase 0.98.<span class="italic">x</span> and 0.96.<span class="italic">x</span> releases. You can use this &nbsp;to solve compatibility problems with Cloudera CDH 5.7.<span class="italic">x</span>, 5.6.<span class="italic">x</span>, 5.5.<span class="italic">x</span> and 5.4.<span class="italic">x</span>. For more information, see <a href="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390.htm#GUID-40D7CABD-C611-40DB-BB47-853EBB7C6FCB">HBase Handler Certification Matrix</a></p>
</td>
</tr>
<tr>
<td class="cellalignment158" id="d7622e864" headers="d7622e446">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.rowkeyDelimiter&nbsp;</code></p>
</td>
<td class="cellalignment159" headers="d7622e864 d7622e449">
<p>Optional</p>
</td>
<td class="cellalignment160" headers="d7622e864 d7622e452">
<p>Any string</p>
</td>
<td class="cellalignment161" headers="d7622e864 d7622e455">
<p>|</p>
</td>
<td class="cellalignment162" headers="d7622e864 d7622e458">
<p>Configures the delimiter between primary key values from the source table when generating the HBase <code>rowkey</code>. This property supports <code>CDATA[]</code> wrapping of the value to preserve whitespace if the user wishes to delimit incoming primary key values with a character or characters determined to be whitespace.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD411"></a>
<div class="props_rev_3"><a id="GUID-B2CADBEA-30C3-4D32-A692-DA4C02E86C12"></a>
<h3 id="GADBD-GUID-B2CADBEA-30C3-4D32-A692-DA4C02E86C12" class="sect3"><span class="enumeration_section">3.4.4</span> Sample Configuration</h3>
<div>
<div class="section">
<p>The following is sample configuration for the HBase Handler from the Java Adapter properties file:</p>
<pre dir="ltr">
gg.handlerlist=hbase
gg.handler.hbase.type=hbase
gg.handler.hbase.mode=tx
gg.handler.hbase.hBaseColumnFamilyName=cf
gg.handler.hbase.includeTokens=true
gg.handler.hbase.keyValueDelimiter=CDATA[=]
gg.handler.hbase.keyValuePairDelimiter=CDATA[,]
gg.handler.hbase.encoding=UTF-8
gg.handler.hbase.pkUpdateHandling=abend
gg.handler.hbase.nullValueRepresentation=CDATA[NULL]
gg.handler.hbase.authType=none
</pre>
<p>A sample Replicat configuration and a Java Adapter properties file for an HBase integration can be found at the following directory:</p>
<p><span class="italic"><code>GoldenGate_install_directory</code></span><code>/AdapterExamples/big-data/hbase</code></p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD412"></a>
<div class="props_rev_3"><a id="GUID-DFFDFC5B-3331-455F-9504-1BD25CD102A4"></a>
<h3 id="GADBD-GUID-DFFDFC5B-3331-455F-9504-1BD25CD102A4" class="sect3"><span class="enumeration_section">3.4.5</span> Troubleshooting the HBase Handler</h3>
<div>
<div class="section">
<p>Troubleshooting of the HBase Handler begins with the contents for the Java <code>log4j</code> file. Follow the directions in the Java Logging Configuration to configure the runtime to correctly generate the Java <code>log4j</code> log file.</p>
</div>
<!-- class="section" --></div>
<a id="GADBD413"></a>
<div class="props_rev_3"><a id="GUID-EC21D0C0-BBB1-490A-B5B2-35A0B48DCCCB"></a>
<h4 id="GADBD-GUID-EC21D0C0-BBB1-490A-B5B2-35A0B48DCCCB" class="sect4"><span class="enumeration_section">3.4.5.1</span> Java Classpath</h4>
<div>
<p>Issues with the Java classpath are one of the most common problems. An indication of a classpath problem is a <code>ClassNotFoundException</code> in the Java <code>log4j</code> log file. The Java <code>log4j</code> log file can be used to troubleshoot this issue. Setting the log level to <code>DEBUG</code> allows for logging of each of the jars referenced in the <code>gg.classpath</code> object to be logged to the log file. You can make sure that all of the required dependency jars are resolved. Simply enable <code>DEBUG</code> level logging and search the log file for messages like the following:</p>
<pre dir="ltr">
2015-09-29 13:04:26 DEBUG ConfigClassPath:74 -  ...adding to classpath:
 url="file:/ggwork/hbase/hbase-1.0.1.1/lib/hbase-server-1.0.1.1.jar"
</pre></div>
</div>
<a id="GADBD414"></a>
<div class="props_rev_3"><a id="GUID-49F1BAC9-C2ED-4019-9B35-CDEF24ABBD24"></a>
<h4 id="GADBD-GUID-49F1BAC9-C2ED-4019-9B35-CDEF24ABBD24" class="sect4"><span class="enumeration_section">3.4.5.2</span> HBase Connection Properties</h4>
<div>
<p>The contents of the HDFS <code>hbase-site.xml</code> file (including default settings) are output to the Java <code>log4j</code> log file when the logging level is set to <code>DEBUG</code> or <code>TRACE</code>. This will show the connection properties to HBase. Search for the following in the Java <code>log4j</code> log file.</p>
<pre dir="ltr">
2015-09-29 13:04:27 DEBUG HBaseWriter:449 - Begin - HBase configuration object contents for connection troubleshooting. 
Key: [hbase.auth.token.max.lifetime] Value: [604800000].
</pre>
<p>A common error is for the <code>hbase-site.xml</code> file to be either not included in the classpath or a pathing error to the <code>hbase-site.xml</code>. In this case the HBase Handler will not be able to establish a connection to HBase and the Oracle GoldenGate process will abend. The following error will be reported in the Java <code>log4j</code> log.</p>
<pre dir="ltr">
2015-09-29 12:49:29 ERROR HBaseHandler:207 - Failed to initialize the HBase handler.
org.apache.hadoop.hbase.ZooKeeperConnectionException: Can't connect to ZooKeeper
</pre>
<p>Verify that the classpath correctly includes the <code>hbase-site.xml</code> file and that HBase is running.</p>
</div>
</div>
<a id="GADBD415"></a>
<div class="props_rev_3"><a id="GUID-DDF4317B-1232-4AAF-936C-895CC99D8504"></a>
<h4 id="GADBD-GUID-DDF4317B-1232-4AAF-936C-895CC99D8504" class="sect4"><span class="enumeration_section">3.4.5.3</span> Logging of Handler Configuration</h4>
<div>
<p>The Java <code>log4j</code> log file contains information on the configuration state of the HBase Handler. This information is output at the <code>INFO</code> log level. Sample output appears as follows:</p>
<pre dir="ltr">
2015-09-29 12:45:53 INFO HBaseHandler:194 - **** Begin HBase Handler - Configuration Summary ****
  Mode of operation is set to tx.
  HBase data will be encoded using the native system encoding.
  In the event of a primary key update, the HBase Handler will ABEND.
  HBase column data will use the column family name [cf].
  The HBase Handler will not include tokens in the HBase data.
  The HBase Handler has been configured to use [=] as the delimiter between keys and values.
  The HBase Handler has been configured to use [,] as the delimiter between key values pairs.
  The HBase Handler has been configured to output [NULL] for null values.
Hbase Handler Authentication type has been configured to use [none]
</pre></div>
</div>
</div>
<a id="GADBD416"></a>
<div class="props_rev_3"><a id="GUID-C56CC944-B51D-4FD1-9F53-FA62B7FAA835"></a>
<h3 id="GADBD-GUID-C56CC944-B51D-4FD1-9F53-FA62B7FAA835" class="sect3"><span class="enumeration_section">3.4.6</span> Performance Considerations</h3>
<div>
<div class="section">
<p>At each transaction commit, the HBase Handler performs a flush call to flush any buffered data to the HBase region server. This must be done to maintain write durability. Flushing to the HBase region server is an expensive call and performance can be greatly improved by employing the Java Adapter batching functionality if using the Extract process, or by using the native Replicat <code>GROUPTRANSOPS</code> batching functionality. The result is similar in both cases. The Extract process batch functionality uses Java Adapter based grouping controlled in the Java Adapter Properties file. The Replicat based batching uses the <code>GROUPTRANSOPS</code> configuration syntax in the Replicat configuration file.</p>
<p>Operations from multiple transactions are grouped together into a larger transaction, and it is only at the end of the grouped transaction that transaction commit is executed.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD417"></a>
<div class="props_rev_3"><a id="GUID-7A6E554F-F38B-4896-9118-3C18E75C3B54"></a>
<h3 id="GADBD-GUID-7A6E554F-F38B-4896-9118-3C18E75C3B54" class="sect3"><span class="enumeration_section">3.4.7</span> Security</h3>
<div>
<div class="section">
<p>HBase connectivity can be secured using Kerberos authentication. Follow the associated documentation for the HBase release to secure the HBase cluster. The Oracle GoldenGate HBase Handler can connect to Kerberos secured cluster. The HBase <code>hbase-site.xml</code> should be in handlers classpath with "<code>hbase.security.authentication</code>" property set to <code>kerberos</code> and "<code>hbase.security.authorization</code>" property set to <code>true</code>.</p>
<p>Additionally, you must set the following properties in the Oracle GoldenGate HBase Handler Java configuration file:</p>
<pre dir="ltr">
gg.handler.{name}.authType=kerberos
gg.handler.{name}.keberosPrincipalName={legal Kerberos principal name}
gg.handler.{name}.kerberosKeytabFile={path to a keytab file that contains the password for the Kerberos principal so that the Oracle GoldenGate HDFS handler can programmatically perform the Kerberos kinit operations to obtain a Kerberos ticket}.
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<a id="GADBD418"></a>
<div class="props_rev_3"><a id="GUID-C1AD7142-9B27-4FFA-8CB8-A40E9A523703"></a>
<h2 id="GADBD-GUID-C1AD7142-9B27-4FFA-8CB8-A40E9A523703" class="sect2"><span class="enumeration_section">3.5</span> Metadata Change Events</h2>
<div>
<div class="section">
<p>Oracle GoldenGate 12.2 includes metadata in trail and can handle metadata change events at runtime. The HBase Handler can handle metadata change events at runtime as well. One of the most common scenarios is the addition of a new column. The result in HBase will be that the new column and its associated data will begin being streamed to HBase after the metadata change event.</p>
<div class="infobox-note" id="GUID-C1AD7142-9B27-4FFA-8CB8-A40E9A523703__GUID-91B469E0-63E9-4825-899D-E56F2A55CD87">
<p class="notep1">Note:</p>
<p>Oracle GoldenGate 12.2 metadata change events are only written to the trail by Oracle Database.</p>
</div>
<p>It is important to understand that in order to enable metadata change events the entire Replication chain must be upgraded to Oracle GoldenGate 12.2. The 12.2 HBase Handler can work with trail files produced by Oracle GoldenGate 12.1 and greater. However, these trail files do not include metadata in trail and therefore metadata change events cannot be handled at runtime.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD419"></a>
<div class="props_rev_3"><a id="GUID-5247718A-478B-4296-B791-76A8D05A2E52"></a>
<h2 id="GADBD-GUID-5247718A-478B-4296-B791-76A8D05A2E52" class="sect2"><span class="enumeration_section">3.6</span> Common Pitfalls</h2>
<div>
<div class="section">
<p>HBase has been experiencing changes to the client interface in the last few releases. HBase 1.0.0 introduced a new recommended client interface and the 12.2 HBase Handler has moved to the new interface to keep abreast of the most current changes. However, this does create a backward compatibility issue. The HBase Handler is not compatible with HBase versions older than 1.0.0. If an Oracle GoldenGate integration is required with 0.99.x or older version of HBase, this can be accomplished using the 12.1.2.1.x HBase Handler. Contact Oracle Support to obtain a ZIP file of the 12.1.2.1.x HBase Handler.</p>
<p>Common errors on the initial setup of the HBase Handler are classpathing issues. The typical indicator of such a problem is occurrences of the ClassNotFoundException in the Java <code>log4j</code> log file. The HBase client jars do <span class="italic">not</span> ship with the Oracle GoldenGate for Big Data product. You must resolve the required HBase client jars. Appendix (a reference here) includes the listing of HBase client jars for each supported version. Either the <code>hbase-site.xml</code> or one or more of the required client jars are not included in the classpath. For instructions on configuring the classpath of the HBase Handler, see section <a href="GUID-3EC975E2-1F9A-4AB3-B3F6-7B4ADFEED390.htm#GUID-5E080B12-1659-47A4-B915-92A28D1C223B">Classpath Configuration</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="p"><a href="#fnsrc_1" id="fntarg_1"><sup>1</sup></a>
<p>For more Java information, see <span class="italic">Java Internalization Support</span> at <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/intl/" target="_blank"><code>https://docs.oracle.com/javase/8/docs/technotes/guides/intl/</code></a>.</p>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment135">
<tr>
<td class="cellalignment142">
<table class="cellalignment140">
<tr>
<td class="cellalignment139"><a href="GUID-85A82B2E-CD51-463A-8674-3D686C3C0EC0.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment139"><a href="GUID-74F65F52-7ED9-4E66-8F94-3706392F7B6A.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2015, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment144">
<table class="cellalignment138">
<tr>
<td class="cellalignment139"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment139"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
