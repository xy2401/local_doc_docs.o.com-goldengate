<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Overview</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This chapter describes Oracle GoldenGate for Big Data, how to set up its environment, use it with Replicat and Extract, logging data, and other configuration details. It contains the following sections:" />
<meta name="dcterms.created" content="2016-06-08T07:49:17Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Integrating Oracle GoldenGate for Big Data" />
<meta name="dcterms.identifier" content="E65148-03" />
<meta name="dcterms.isVersionOf" content="GADBD" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-700619FB-D6EA-40F0-8614-8EA5292935EA.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-85A82B2E-CD51-463A-8674-3D686C3C0EC0.htm" title="Next" type="text/html" />
<link rel="alternate" href="E65148-03.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="E65148-03.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="E65148-03.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr"><a id="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9"></a> <span id="PAGE" style="display:none;">4/15</span> <!-- End Header --><a id="GADBD111"></a><a id="GADBD110"></a>
<h1 id="GADBD-GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9" class="sect1"><span class="enumeration_chapter">1</span> Overview</h1>
<div>
<div><span>This chapter describes Oracle GoldenGate for Big Data, how to set up its environment, use it with Replicat and Extract, logging data, and other configuration details. It contains the following sections:</span></div>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-7FF8E7C6-04A7-42D0-B9D2-8A2CE569DB55">Overview</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-640A1CE0-7F5C-421C-B693-A74C6223F3B2">Java Environment Setup</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-EFE66950-4544-4453-AF0F-BAE454C6C415">Properties Files</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-DBE3C8BB-27CF-4746-8896-CE31A49C0E5D">Transaction Grouping</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-CA47435E-3815-47D2-B747-21775752B186">Running with Replicat</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-BBF36535-BFDD-41B6-BB11-08E846CF02F0">Running with Extract</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-3C7F3F19-D2E1-4962-9FB0-A0B9CB326B99">Logging</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-733A5B06-8C1E-4DCB-81E8-99698CAE3D95">Metadata Change Events</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-76DEDBEB-6230-4F75-979B-76AB39F84746">Configuration Property CDATA[] Wrapping</a></p>
</li>
<li>
<p><a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-8622DB66-C2A2-4700-9CB7-02D891DE66E8">Using Regular Expression Search and Replace</a></p>
</li>
</ul>
</div>
<a id="GADBD112"></a>
<div class="props_rev_3"><a id="GUID-7FF8E7C6-04A7-42D0-B9D2-8A2CE569DB55"></a>
<h2 id="GADBD-GUID-7FF8E7C6-04A7-42D0-B9D2-8A2CE569DB55" class="sect2"><span class="enumeration_section">1.1</span> Overview</h2>
<div>
<div class="section">
<p>The Oracle GoldenGate for Big Data integrations run as pluggable functionality into the Oracle GoldenGate Java Delivery framework, also referred to as the Java Adapters framework. This functionality extends the Java Delivery functionality. Oracle recommends that you review the Java Delivery documentation in the Oracle GoldenGate Application Adapters Guide. Much of the Big Data functionality employs and extends the Java Delivery functionality.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD113"></a>
<div class="sect2"><a id="GUID-640A1CE0-7F5C-421C-B693-A74C6223F3B2"></a>
<h2 id="GADBD-GUID-640A1CE0-7F5C-421C-B693-A74C6223F3B2" class="sect2"><span class="enumeration_section">1.2</span> Java Environment Setup</h2>
<div>
<p>The Oracle GoldenGate for Big Data integrations create an instance of the Java virtual machine at runtime. Oracle GoldenGate for Big Data requires Java 7. It is recommended that you set the <code>JAVA_HOME</code> environment variable to point to Java 7 installation directory. Additionally, the Java Delivery process needs to load the <code>libjvm.so</code> (<code>libjvm.dll</code> on Windows) and <code>libjsig.so</code> (<code>libjsig.dll</code> on Windows) Java shared libraries. These libraries are installed as part of the JRE. The location of these shared libraries need to be resolved and the appropriate environmental variable set to resolve the dynamic libraries needs to be set so the libraries can be loaded at runtime (that is, <code>LD_LIBRARY_PATH</code>, <code>PATH</code>, or <code>LIBPATH</code>).</p>
</div>
</div>
<a id="GADBD114"></a>
<div class="props_rev_3"><a id="GUID-EFE66950-4544-4453-AF0F-BAE454C6C415"></a>
<h2 id="GADBD-GUID-EFE66950-4544-4453-AF0F-BAE454C6C415" class="sect2"><span class="enumeration_section">1.3</span> Properties Files</h2>
<div>
<p>There are two Oracle GoldenGate properties files required to run the Oracle GoldenGate Java Deliver user exit (alternatively called the Oracle GoldenGate Java Adapter). It is the Oracle GoldenGate Java Delivery that hosts Java integrations including the Big Data integrations. The Oracle GoldenGate Java Delivery can run with either the Oracle GoldenGate Replicat or Extract process, although running with the Replicat process is considered the better practice. A Replicat or Extract properties file is required in order to run the Replicat or Extract process. The required naming convention for the Replicat or Extract file name is the <span class="italic"><code>process_name.</code></span><code>prm</code>. You exit syntax in the Replicat or Extract properties file provides the name and location of the Java Adapter Properties file. It is the Java Adapter Properties file where the configuration properties for the Java adapter include Big Data integrations. Both properties files are required to run Oracle GoldenGate for Big Data integrations. Alternatively the Java Adapters Properties can be resolved using the default syntax, <span class="italic"><code>process_name.</code></span><code>properties</code>. It you use the default naming for the Java Adapter Properties file then the name of the Java Adapter Properties file can be omitted from the Replicat or Extract properties file.</p>
<p>Samples of the properties files for Oracle GoldenGate for Big Data integrations can be found in the subdirectories of the following directory:</p>
<p><span class="italic"><code>GoldenGate_install_dir</code></span><code>/AdapterExamples/big-data</code></p>
</div>
</div>
<a id="GADBD115"></a>
<div class="props_rev_3"><a id="GUID-DBE3C8BB-27CF-4746-8896-CE31A49C0E5D"></a>
<h2 id="GADBD-GUID-DBE3C8BB-27CF-4746-8896-CE31A49C0E5D" class="sect2"><span class="enumeration_section">1.4</span> Transaction Grouping</h2>
<div>
<p>The principal way to improve performance in Oracle GoldenGate for Big Data integrations is by the use of transaction grouping. In transaction grouping, the operations of multiple transactions are grouped together in a single larger transaction. The application of a larger grouped transaction is typically much more efficient than the application of individual smaller transactions. Transaction grouping is possible with both the Replicat and Extract processes and will be discussed in the following sections detailing running with Replicat or Extract.</p>
</div>
</div>
<a id="GADBD116"></a>
<div class="props_rev_3"><a id="GUID-CA47435E-3815-47D2-B747-21775752B186"></a>
<h2 id="GADBD-GUID-CA47435E-3815-47D2-B747-21775752B186" class="sect2"><span class="enumeration_section">1.5</span> Running with Replicat</h2>
<div>
<p>This section explains how to run the Java Adapter with the Oracle GoldenGate Replicat process.</p>
</div>
<a id="GADBD117"></a>
<div class="props_rev_3"><a id="GUID-E66655C4-2161-43B3-A3FE-7D52AE7D6898"></a>
<h3 id="GADBD-GUID-E66655C4-2161-43B3-A3FE-7D52AE7D6898" class="sect3"><span class="enumeration_section">1.5.1</span> Replicat Configuration</h3>
<div>
<div class="section">
<p>The following is an example of a Replicat process properties file for Java Adapter.</p>
<pre dir="ltr">
REPLICAT hdfs
TARGETDB LIBFILE libggjava.so SET property=dirprm/hdfs.properties 
--SOURCEDEFS ./dirdef/dbo.def 
DDL INCLUDE ALL
GROUPTRANSOPS 1000
MAPEXCLUDE dbo.excludetable
MAP dbo.*, TARGET dbo.*;
</pre>
<p>The following is explanation of the Replicat configuration entries:</p>
<p><code>REPLICAT hdfs</code> - The name of the Replicat process.</p>
<p><code>TARGETDB LIBFILE libggjava.so SET property=dirprm/hdfs.properties</code> - Names the target database as you exit <code>libggjava.so</code> and sets the Java Adapters Property file to <code>dirprm/hdfs.properties</code></p>
<p><code>--SOURCEDEFS ./dirdef/dbo.def</code> - Sets a source database definitions file. Commented out because Oracle GoldenGate 12.2.0.1 trail files provide metadata in trail.</p>
<p><code>GROUPTRANSOPS 1000</code> - To group 1000 transactions from the source trail files into a single target transaction. This is the default and improves the performance of Big Data integrations.</p>
<p><code>MAPEXCLUDE dbo.excludetable</code> - To identify tables to exclude.</p>
<p><code>MAP dbo.*, TARGET dbo.*;</code> - Shows the mapping of input to output tables.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD118"></a>
<div class="props_rev_3"><a id="GUID-3C73BA3D-6949-4E91-8308-230B17C7DE51"></a>
<h3 id="GADBD-GUID-3C73BA3D-6949-4E91-8308-230B17C7DE51" class="sect3"><span class="enumeration_section">1.5.2</span> Adding the Replicat Process</h3>
<div>
<div class="section">
<p>The command to add and start the Replicat process in <code>ggsci</code> is the following:</p>
<pre dir="ltr">
ADD REPLICAT hdfs, EXTTRAIL ./dirdat/gg
START hdfs
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD119"></a>
<div class="props_rev_3"><a id="GUID-D0CFCD1C-1C81-455A-AA99-D87F2A78F17C"></a>
<h3 id="GADBD-GUID-D0CFCD1C-1C81-455A-AA99-D87F2A78F17C" class="sect3"><span class="enumeration_section">1.5.3</span> Replicat Grouping</h3>
<div>
<div class="section">
<p>The Replicat process provides the Replicat configuration property <code>GROUPTRANSOPS</code> to control transaction grouping. By default, the Replicat process implements transaction grouping of 1000 source transactions into a single target transaction. If you want to turn off transaction grouping then the <code>GROUPTRANSOPS</code> Replicat property should be set to <code>1</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD120"></a>
<div class="props_rev_3"><a id="GUID-5F6DE2B2-7036-43DC-B637-5A39385BDE12"></a>
<h3 id="GADBD-GUID-5F6DE2B2-7036-43DC-B637-5A39385BDE12" class="sect3"><span class="enumeration_section">1.5.4</span> Replicat Checkpointing</h3>
<div>
<div class="section">
<p><code>CHECKPOINTTABLE</code> and <code>NODBCHECKPOINT</code> are not applicable for Java Delivery with Replicat. Beside Replicat checkpoint file (<code>.cpr</code>), additional checkpoint file (<code>dirchk/&lt;group&gt;.cpj</code>) will be created that contains information similar to <code>CHECKPOINTTABLE</code> in Replicat for RDBMS.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD121"></a>
<div class="props_rev_3"><a id="GUID-7EE49031-4122-4CA5-B715-00FBD7D0CBEB"></a>
<h3 id="GADBD-GUID-7EE49031-4122-4CA5-B715-00FBD7D0CBEB" class="sect3"><span class="enumeration_section">1.5.5</span> Unsupported Replicat Features</h3>
<div>
<div class="section">
<p>The following Replicat features are not supported in this release:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>BATCHSQL</code></p>
</li>
<li>
<p><code>SQLEXEC</code></p>
</li>
<li>
<p>Stored procedure</p>
</li>
<li>
<p>Conflict resolution and detection (CDR)</p>
</li>
<li>
<p><code>REPERROR</code></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD122"></a>
<div class="props_rev_3"><a id="GUID-5DEF7AEE-0622-4ECB-8E81-489D2C044A48"></a>
<h3 id="GADBD-GUID-5DEF7AEE-0622-4ECB-8E81-489D2C044A48" class="sect3"><span class="enumeration_section">1.5.6</span> Mapping Functionality</h3>
<div>
<div class="section">
<p>The Oracle GoldenGate Replicat process supports mapping functionality to custom target schemas. This functionality is not available using the Oracle GoldenGate Extract process. You must use the Metadata Provider functionality to define a target schema or schemas and then use the standard Replicat mapping syntax in the Replicat configuration file to define the mapping. Refer to the Oracle GoldenGate Replicat documentation to understand the Replicat mapping syntax in the Replication configuration file. For instructions on setting up the Metadata Provider, see <a href="GUID-F90702A9-0FFB-42D2-9261-89E2BB952C65.htm#GUID-F90702A9-0FFB-42D2-9261-89E2BB952C65">Using the Metadata Provider</a>.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="GADBD123"></a>
<div class="props_rev_3"><a id="GUID-BBF36535-BFDD-41B6-BB11-08E846CF02F0"></a>
<h2 id="GADBD-GUID-BBF36535-BFDD-41B6-BB11-08E846CF02F0" class="sect2"><span class="enumeration_section">1.6</span> Running with Extract</h2>
<div>
<p>This section explains how to run Java Adapter with the Oracle GoldenGate Extract process.</p>
</div>
<a id="GADBD124"></a>
<div class="props_rev_3"><a id="GUID-E124F8A1-93A3-40EE-984B-918DCABF52EF"></a>
<h3 id="GADBD-GUID-E124F8A1-93A3-40EE-984B-918DCABF52EF" class="sect3"><span class="enumeration_section">1.6.1</span> Extract Configuration</h3>
<div>
<div class="section">
<p>The following</p>
<pre dir="ltr">
EXTRACT hdfs
discardfile ./dirrpt/avro1.dsc, purge 
--SOURCEDEFS ./dirdef/dbo.def
CUSEREXIT libjavaue.so CUSEREXIT PASSTHRU, INCLUDEUPDATEBEFORES, PARAMS "dirprm/hdfs.props" 
GETUPDATEBEFORES 
TABLE dbo.*;
</pre>
<p>The following is explanation of the Replicat configuration entries:</p>
<p><code>EXTRACT hdfs</code> - The Extract process name.</p>
<p><code>discardfile ./dirrpt/avro1.dsc, purge</code> - Set the discard file</p>
<p><code>--SOURCEDEFS ./dirdef/dbo.def</code> - Source definitions are not required for 12.2 trial files.</p>
<p><code>CUSEREXIT libjavaue.so CUSEREXIT PASSTHRU, INCLUDEUPDATEBEFORES, PARAMS "dirprm/hdfs.props"</code> - Set you exit shared library, and point to the Java Adapter Properties file</p>
<p><code>GETUPDATEBEFORES</code> - Get update before images.</p>
<p><code>TABLE dbo.*;</code> - Select which tables to replicate or exclude to filter.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD125"></a>
<div class="props_rev_3"><a id="GUID-988DA11B-C509-451C-A592-000D6D54CC8F"></a>
<h3 id="GADBD-GUID-988DA11B-C509-451C-A592-000D6D54CC8F" class="sect3"><span class="enumeration_section">1.6.2</span> Adding the Extract Process</h3>
<div>
<div class="section">
<pre dir="ltr">
ADD EXTRACT hdfs, EXTTRAILSOURCE ./dirdat/gg
START hdfs
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD126"></a>
<div class="props_rev_3"><a id="GUID-A80D7BEA-3917-40D0-B64E-0A6D199280BC"></a>
<h3 id="GADBD-GUID-A80D7BEA-3917-40D0-B64E-0A6D199280BC" class="sect3"><span class="enumeration_section">1.6.3</span> Extract Grouping</h3>
<div>
<div class="section">
<p>The Extract process provides no functionality for transaction grouping. However, transaction grouping is still possible when integrating Java Delivery with the Extract process. The Java Delivery layer enables transaction grouping with configuration in the Java Adapter properties file.</p>
<ol>
<li>
<p><code>gg.handler.name.mode</code></p>
<p>To enable grouping, the value of this property must be set to tx.</p>
</li>
<li>
<p><code>gg.handler.name.maxGroupSize</code></p>
<p>Controls the maximum number of operations that can be held by an operation group - irrespective of whether the operation group holds operations from a single transaction or multiple transactions.</p>
<p>The operation group will send a transaction commit and end the group as soon as this number of operations is reached. This property leads to splitting of transactions across multiple operation groups.</p>
</li>
<li>
<p><code>gg.handler.name.minGroupSize</code></p>
<p>This is the minimum number of operations that must exist in a group before the group can end.</p>
<p>This property helps to avoid groups that are too small by grouping multiple small transactions into one operation group so that it can be more efficiently processed.</p>
<div class="infobox-note" id="GUID-A80D7BEA-3917-40D0-B64E-0A6D199280BC__GUID-36B871C9-AF56-4AE2-A741-00979613AE65">
<p class="notep1">Note:</p>
<p><code>maxGroupSize</code> should always be greater than or equal to <code>minGroupSize</code>; that is, <code>maxGroupSize &gt;= minGroupSize</code>.</p>
</div>
</li>
</ol>
<div class="infobox-note" id="GUID-A80D7BEA-3917-40D0-B64E-0A6D199280BC__GUID-719769D5-AB0D-40D5-BE20-6087DB689AC2">
<p class="notep1">Note:</p>
<p>It is <span class="italic">not</span> recommended to use the Java layer transaction grouping when running Java Delivery with the Replicat process. If running with the Replicat process, you should use Replicat transaction grouping controlled by the <code>GROUPTRANSOPS</code> Replicat property.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="GADBD127"></a>
<div class="props_rev_3"><a id="GUID-3C7F3F19-D2E1-4962-9FB0-A0B9CB326B99"></a>
<h2 id="GADBD-GUID-3C7F3F19-D2E1-4962-9FB0-A0B9CB326B99" class="sect2"><span class="enumeration_section">1.7</span> Logging</h2>
<div>
<div class="section">
<p>Logging is essential to troubleshooting Oracle GoldenGate for Big Data integrations with Big Data targets. This section covers how Oracle GoldenGate for Big Data integration log and the best practices for logging.</p>
</div>
<!-- class="section" --></div>
<a id="GADBD128"></a>
<div class="props_rev_3"><a id="GUID-E0BBE930-9076-47FA-A820-A51A51D92313"></a>
<h3 id="GADBD-GUID-E0BBE930-9076-47FA-A820-A51A51D92313" class="sect3"><span class="enumeration_section">1.7.1</span> Extract or Replicat Process Logging</h3>
<div>
<div class="section">
<p>Oracle GoldenGate for Big Data integrations leverage the Java Delivery functionality described in the <a class="olink GADBD" target="_blank" href="../GADBD/toc.htm"><span class="italic">Oracle GoldenGate Application Adapters Guide</span></a>. In this setup, either a Oracle GoldenGate Replicat or Extract process loads a user exit shared library. This shared library then loads a Java virtual machine to thereby interface with targets providing a Java interface. So the flow of data is as follows:</p>
<p>Extract Process &gt; User Exit &gt; Java Layer</p>
<p>or</p>
<p>Replicat Process &gt;User Exit &gt; Java Layer</p>
<p>It is important that all layers log correctly so that users can review the logs to troubleshoot new installations and integrations. Additionally, if a customer has a problem that requires contacting Oracle Support, the log files are a key piece of information to be provided to Oracle Support so that the problem can be efficiently resolved.</p>
<p>A running Replicat or Extract process creates or appends log files into the <code>&lt;GG Home&gt;/dirrpt</code> directory that adheres to the following naming convention: &lt;Replicat or Extract process name&gt;.rpt. If a problem is encountered when deploying a new Oracle GoldenGate process, this is likely the first log file to examine for problems. The Java layer provides much of the heavy lifting for integrations with Big Data applications. Therefore are many things that can go wrong in the Java layer when performing the initial setup of a Oracle GoldenGate Big Data integration. You therefore need to understand how to control logging in the Java layer.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD129"></a>
<div class="props_rev_3"><a id="GUID-17B3FDE5-20A2-4665-82AC-24E032CB3EED"></a>
<h3 id="GADBD-GUID-17B3FDE5-20A2-4665-82AC-24E032CB3EED" class="sect3"><span class="enumeration_section">1.7.2</span> Java Layer Logging</h3>
<div>
<div class="section">
<p>The Oracle GoldenGate for Big Data product provides flexibility for logging from the Java layer. The recommended best practice is to use Log4j logging to log from the Java layer. Enabling simple Log4j logging requires the setting of two configuration values in the Java Adapters configuration file.</p>
<pre dir="ltr">
gg.log=log4j
gg.log.level=INFO
</pre>
<p>These <code>gg.log</code> settings will result in a Log4j file to be created in the <span class="italic"><code>GoldenGate_Home</code></span><code>/dirrpt</code> directory that adheres to this naming convention, <span class="italic"><code>Replicat or Extract process name_log level</code></span><code>_log4j.log</code>. The supported Log4j log levels are in the following list in order of increasing logging granularity.</p>
<ul style="list-style-type: disc;">
<li>
<p>OFF</p>
</li>
<li>
<p>FATAL</p>
</li>
<li>
<p>ERROR</p>
</li>
<li>
<p>WARN</p>
</li>
<li>
<p>INFO</p>
</li>
<li>
<p>DEBUG</p>
</li>
<li>
<p>TRACE</p>
</li>
</ul>
<p>Selection of a logging level will include all of the coarser logging levels as well (that is, selection of <code>WARN</code> means that log messages of <code>FATAL</code>, <code>ERROR</code> and <code>WARN</code> will be written to the log file). The Log4j logging can additionally be controlled by separate Log4j properties files. These separate Log4j properties files can be enabled by editing the <code>bootoptions</code> property in the Java Adapter Properties file. Three example Log4j properties files are included with the installation and, are included in the classpath:</p>
<pre dir="ltr">
log4j-default.properties
log4j-debug.properites
log4j-trace.properties
</pre>
<p>Any one of these files can be modifying the <code>bootoptions</code> as follows:</p>
<p><code>javawriter.bootoptions=-Xmx512m -Xms64m -Djava.class.path=.:ggjava/ggjava.jar -Dlog4j.configuration=samplelog4j.properties</code></p>
<p>You can use their own customized Log4j properties file to control logging. The customized Log4j properties file must be available in the Java classpath so that it can be located and loaded by the JVM. The contents of a sample custom Log4j properties file is the following:</p>
<pre dir="ltr">
# Root logger option 
log4j.rootLogger=INFO, file 
 
# Direct log messages to a log file 
log4j.appender.file=org.apache.log4j.RollingFileAppender 
 
log4j.appender.file.File=sample.log 
log4j.appender.file.MaxFileSize=1GB 
log4j.appender.file.MaxBackupIndex=10 
log4j.appender.file.layout=org.apache.log4j.PatternLayout 
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n
</pre>
<p>There are two important requirements when you use a custom Log4j properties file. First, the path to the custom Log4j properties file must be included in the <code>javawriter.bootoptions</code> property. Logging initializes immediately when the JVM is initialized while the contents of the <code>gg.classpath</code> property is actually appended to the <code>classloader</code> after the logging is initialized. Second, the <code>classpath</code> to correctly load a properties file must be the directory containing the properties file without wildcards appended.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="GADBD130"></a>
<div class="props_rev_3"><a id="GUID-733A5B06-8C1E-4DCB-81E8-99698CAE3D95"></a>
<h2 id="GADBD-GUID-733A5B06-8C1E-4DCB-81E8-99698CAE3D95" class="sect2"><span class="enumeration_section">1.8</span> Metadata Change Events</h2>
<div>
<div class="section">
<p>A new feature of Oracle GoldenGate 12.2 is to propagate metadata change events from the source database to the trail file. This functionality is limited to Oracle Database replication sources for the 12.2 release. Refer to the Oracle GoldenGate for Oracle Database documentation for information on how to enable this functionality.</p>
<p>The Oracle GoldenGate for Big Data Handlers and Formatters provide functionality to take action when a metadata change event is encountered. The ability to take action in the case of metadata change events depends on the metadata change events being available in the source trail file. Oracle GoldenGate 12.2 supports metadata in trail and the propagation of DDL data from a source Oracle Database. If the source trail file does not have metadata in trail and DDL data (metadata change events) then it is not possible for Oracle GoldenGate for Big Data to provide and metadata change event handling.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD131"></a>
<div class="props_rev_3"><a id="GUID-76DEDBEB-6230-4F75-979B-76AB39F84746"></a>
<h2 id="GADBD-GUID-76DEDBEB-6230-4F75-979B-76AB39F84746" class="sect2"><span class="enumeration_section">1.9</span> Configuration Property <code>CDATA[]</code> Wrapping</h2>
<div>
<div class="section">
<p>The Big Data Handlers and Formatters support the configuration of many parameters in the Java properties file the value of which may be interpreted as white space. The configuration handling of the Java Adapter is such that it will trim white space from configuration values from the Java configuration file. This behavior of trimming whitespace may be desirable for some configuration values and undesirable for other configuration values. The default functionality of trimming the whitespace was left in place. New functionality was added whereby you can wrap white space values inside of special syntax in order to preserve the whites pace for selected configuration variables. Oracle for Big Data borrows the XML syntax of <code>CDATA[]</code> to preserve white space. Values that would be considered to be white space can be wrapped inside of <code>CDATA[]</code>.</p>
<p>The following is an example attempting to set a new-line delimiter for the Delimited Text Formatter:</p>
<p><code>gg.handler.{name}.format.lineDelimiter=\n</code></p>
<p>This configuration will not be successful. The new-line character is interpreted as white space and will be trimmed from the configuration value. Therefore the <code>gg.handler</code> setting effectively results in the line delimiter being set to an empty string.</p>
<p>In order to preserve the configuration of the new-line character simply wrap the character in the <code>CDATA[]</code> wrapper as follows:</p>
<p><code>gg.handler.{name}.format.lineDelimiter=CDATA[\n]</code></p>
<p>Configuring the parameter with the <code>CDATA[]</code> wrapping will preserve the white space and the line delimiter will now be a new-line character. Parameters that support <code>CDATA[]</code> wrapping are explicitly listed in this documentation.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect2"><a id="GUID-8622DB66-C2A2-4700-9CB7-02D891DE66E8"></a>
<h2 id="GADBD-GUID-8622DB66-C2A2-4700-9CB7-02D891DE66E8" class="sect2"><span class="enumeration_section">1.10</span> Using Regular Expression Search and Replace</h2>
<div>
<p>You can perform more powerful search and replace operations of both schema data (catalog names, schema names, table names, and column names) and column value data, which are separately configured. Regular expressions (regex) are characters that customize a search string through pattern matching. You can match a string against a pattern or extract parts of the match. Oracle GoldenGate for Big Data uses the standard Oracle Java regular expressions package, <code>java.util.regex</code>. For more information, see "Regular Expressions&rdquo; in the Base Definitions volume at&nbsp;<a href="http://www.unix.org/version4/" target="_blank"><span class="bold">The Single UNIX Specification, Version 4</span></a>.</p>
</div>
<div class="sect3"><a id="GUID-42D15793-255C-4FEF-87EE-BC2558D704C7"></a>
<h3 id="GADBD-GUID-42D15793-255C-4FEF-87EE-BC2558D704C7" class="sect3"><span class="enumeration_section">1.10.1</span> Using Schema Data Replace</h3>
<div>
<p>You can replace schema data using the <code>gg.schemareplaceregex</code> and <code>gg.schemareplacestring</code> parameters. Use <code>gg.schemareplaceregex</code> to set a regular expression, and then use it to search catalog names, schema names, table names, and column names for corresponding matches. Matches are then replaced with the content of the <code>gg.schemareplacestring</code> value. The default value of <code>gg.schemareplacestring</code> is an empty string or <code>""</code>.</p>
<p>For example, some system table names start with a dollar sign like <code>$mytable</code>. You may want to replicate these tables even though most Big Data targets do not allow dollar signs in table names. To remove the dollar sign, you could configure the following replace strings:</p>
<pre dir="ltr">
gg.schemareplaceregex=[$] 
gg.schemareplacestring= 
</pre>
<p>The resulting example of searched and replaced table name is <code>mytable</code>. These parameters also support <code>CDATA[]</code> wrapping to preserve whitespace in the value of configuration values. So the equivalent of the preceding example using <code>CDATA[]</code> wrapping use is:</p>
<pre dir="ltr">
gg.schemareplaceregex=CDATA[[$]]
gg.schemareplacestring=CDATA[]
</pre>
<p>The schema search and replace functionality only supports a single search regular expression and a single replacement string.</p>
</div>
</div>
<div class="sect3"><a id="GUID-FEFB536A-FC46-4DB0-82CF-4D1C70901A6D"></a>
<h3 id="GADBD-GUID-FEFB536A-FC46-4DB0-82CF-4D1C70901A6D" class="sect3"><span class="enumeration_section">1.10.2</span> Using Content Data Replace</h3>
<div>
<p>You can replace content data using the <code>gg.contentreplaceregex</code> and <code>gg.contentreplacestring</code> parameters to search the column values using the configured regular expression and replace matches with the replacement string. For example, this is useful to replace line feed characters in column values. If the delimited text formatter is used then line feeds occurring in the data will be incorrectly interpreted as line delimiters by analytic tools.</p>
<p>You can configure <span class="italic">n</span> number of content replacement regex search values. The regex search and replacements are done in the order of configuration. Configured values must follow a given order as follows:</p>
<pre dir="ltr">
gg.conentreplaceregex=<span class="italic">some_regex</span>
gg.conentreplacestring=<span class="italic">some_value</span>
gg.conentreplaceregex1=<span class="italic">some_regex</span>
gg.conentreplacestring1=<span class="italic">some_value</span>
gg.conentreplaceregex2=<span class="italic">some_regex</span>
gg.conentreplacestring2=<span class="italic">some_value</span>
</pre>
<p>Configuring a subscript of 3 without a subscript of 2 would cause the subscript 3 configuration to be ignored.</p>
<div class="infobox-note" id="GUID-FEFB536A-FC46-4DB0-82CF-4D1C70901A6D__GUID-2AB4EACF-F1FE-4458-B6D3-8E34E607C1E5">
<p class="notep1">Attention</p>
<p>&nbsp;Regular express searches and replacements require computer processing and can reduce the performance of the Oracle GoldenGate for Big Data process.</p>
</div>
<p>To replace line feeds with a blank character you could use the following parameter configurations:</p>
<pre dir="ltr">
gg.contentreplaceregex=[\n] 
gg.contentreplacestring=CDATA[ ]
</pre>
<p>This changes the column value from:</p>
<pre dir="ltr">
this is 
me
</pre>
<p>to&nbsp;:</p>
<pre dir="ltr">
this is me
</pre>
<p>Both values support <code>CDATA</code> wrapping. The second value must be wrapped in a <code>CDATA[]</code> wrapper because a single blank space will be interpreted as whitespace and trimmed by the Oracle GoldenGate for Big Data configuration layer. In addition, you can configure multiple search a replace strings. For example, you may also want to trim leading and trailing white space out of column values in addition to trimming line feeds from:</p>
<pre dir="ltr">
^\\s+|\\s+$
</pre>
<pre dir="ltr">
gg.contentreplaceregex1=^\\s+|\\s+$ 
gg.contentreplacestring1=CDATA[]
</pre>
<p>to:</p>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-8FC9506F-0630-46F5-AF0D-8FFAF6EDCC2D"></a>
<h2 id="GADBD-GUID-8FC9506F-0630-46F5-AF0D-8FFAF6EDCC2D" class="sect2"><span class="enumeration_section">1.11</span> Using Identities in Oracle GoldenGate Credential Store</h2>
<div>
<p>The Oracle GoldenGate credential store manages user IDs and their encrypted passwords (together known as credentials) that are used by Oracle GoldenGate processes to interact with the local database. The credential store eliminates the need to specify user names and clear-text passwords in the Oracle GoldenGate parameter files. An optional alias can be used in the parameter file instead of the user ID to map to a userid-password pair in the credential store. The credential store is implemented as an autologin wallet within the Oracle Credential Store Framework (CSF). The use of an LDAP directory is not supported for the Oracle GoldenGate credential store. The autologin wallet supports automated restarts of Oracle GoldenGate processes without requiring human intervention to supply the necessary passwords.</p>
<p>In Oracle GoldenGate for Big Data, you specify the alias and domain in the property file not the actual user ID or password.</p>
<p>User credentials are maintained in secure wallet storage</p>
</div>
<div class="sect3"><a id="GUID-92B42F23-8D3F-455F-9F88-D8F989C22B0C"></a>
<h3 id="GADBD-GUID-92B42F23-8D3F-455F-9F88-D8F989C22B0C" class="sect3"><span class="enumeration_section">1.11.1</span> Creating a Credential Store</h3>
<div>
<p>You can create a credential store for your Big Data environment.</p>
<p>Run the GGSCI <code>ADD CREDENTIALSTORE</code> command to create a file called <code>cwallet.sso</code> in the <code>dircrd/</code> subdirectory of your Oracle GoldenGate installation directory (the default).</p>
<p>You can the location of the credential store (<code>cwallet.sso</code> file by specifying the desired location with the <code>CREDENTIALSTORELOCATION</code> parameter in the <code>GLOBALS</code> file.</p>
<p>For more information about credential store commands, see <span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span>.</p>
<div class="infobox-note" id="GUID-92B42F23-8D3F-455F-9F88-D8F989C22B0C__GUID-D5CA3C10-B0FB-47C8-B5C0-F6A910402FB2">
<p class="notep1">Note:</p>
<p>Only one credential store can be used for each Oracle GoldenGate instance.</p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-5AC09023-B4B5-4409-8853-E2EC9031EB2B"></a>
<h3 id="GADBD-GUID-5AC09023-B4B5-4409-8853-E2EC9031EB2B" class="sect3"><span class="enumeration_section">1.11.2</span> Adding Users to a Credential Store</h3>
<div>
<p>After you create a credential store for your Big Data environment, you can added users to the store.</p>
<p>Run the GGSCI <code>ALTER CREDENTIALSTORE ADD USER <span class="codeinlineitalic">userid</span> PASSWORD <span class="codeinlineitalic">password</span> [ALIAS <span class="codeinlineitalic">alias</span>] [DOMAIN <span class="codeinlineitalic">domain</span>]</code> command to create each user, where:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code>userid</code></span> is the user name. Only one instance of a user name can exist in the credential store unless the <code>ALIAS</code> or <code>DOMAIN</code> option is used.</p>
</li>
<li>
<p><span class="italic"><code>password</code></span> is the user's password. The password is echoed (not obfuscated) when this option is used. If this option is omitted, the command prompts for the password, which is obfuscated as it is typed (recommended because it is more secure).</p>
</li>
<li>
<p><span class="italic"><code>alias</code></span> is an alias for the user name. The alias substitutes for the credential in parameters and commands where a login credential is required. If the <code>ALIAS</code> option is omitted, the alias defaults to the user name.</p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">
ALTER CREDENTIALSTORE ADD USER scott PASSWORD tiger ALIAS scsm2 domain ggadapters
</pre>
<p>For more information about credential store commands, see <span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span>.</p>
</div>
</div>
<div class="sect3"><a id="GUID-1ED89557-936D-4251-A2D4-B8D7A4F6694A"></a>
<h3 id="GADBD-GUID-1ED89557-936D-4251-A2D4-B8D7A4F6694A" class="sect3"><span class="enumeration_section">1.11.3</span> Configuring Properties to Access the Credential Store</h3>
<div>
<p>The Oracle GoldenGate Java Adapter properties file requires specific syntax to resolve user name and password entries in the Credential Store at runtime. For resolving a user name the syntax is the following:</p>
<pre dir="ltr">
ORACLEWALLETUSERNAME <span class="italic">alias</span> <span class="italic">domain_name</span>
</pre>
<p>For resolving a password the syntax required is the following:</p>
<pre dir="ltr">
ORACLEWALLETPASSWORD <span class="italic">alias</span> <span class="italic">domain_name</span>
</pre>
<p>The following example illustrate how to configure a Credential Store entry with an alias of <code>myalias</code> and a domain of <code>mydomain</code>.</p>
<div class="infobox-note" id="GUID-1ED89557-936D-4251-A2D4-B8D7A4F6694A__GUID-A98D31A9-D072-4E05-A894-E2702F9A9750">
<p class="notep1">Note:</p>
<p>With HDFS Hive JDBCthe user name and password is encrypted.</p>
</div>
<pre dir="ltr">
gg.handler.hdfs.hiveJdbcUsername=ORACLEWALLETUSERNAME[myalias mydomain] 
gg.handler.hdfs.hiveJdbcPassword=ORACLEWALLETPASSWORD[myalias mydomain]
</pre>
<p>Although the Credential Store is intended to store user name and password pair type credentials, you can apply this functionality more generically. Consider the user name and password entries as accessible values in the Credential Store. Any configuration parameter resolved in the Java Adapter layer (not accessed in the C user exit layer) can be resolved from the Credential Store. This feature is developed to allow you more flexibility to be creative in how you protect sensitive configuration entries.</p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment135">
<tr>
<td class="cellalignment142">
<table class="cellalignment140">
<tr>
<td class="cellalignment139"><a href="GUID-700619FB-D6EA-40F0-8614-8EA5292935EA.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment139"><a href="GUID-85A82B2E-CD51-463A-8674-3D686C3C0EC0.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2015, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment144">
<table class="cellalignment138">
<tr>
<td class="cellalignment139"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment139"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
