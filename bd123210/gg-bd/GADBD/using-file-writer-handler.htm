<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Using the File Writer Handler</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system." />
<meta name="dcterms.created" content="2018-09-04T10:47:42Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Using Oracle GoldenGate for Big Data" />
<meta name="dcterms.identifier" content="E89845-03" />
<meta name="dcterms.isVersionOf" content="GADBD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2015, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/bd123210/gg-bd/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="using-elasticsearch-handler.htm" title="Previous" type="text/html" />
<link rel="Next" href="using-flume-handler.htm" title="Next" type="text/html" />
<link rel="alternate" href="GADBD.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>

                    <script>var w=window;if(w.performance||w.mozPerformance||w.msPerformance||w.webkitPerformance){var d=document;AKSB=w.AKSB||{},AKSB.q=AKSB.q||[],AKSB.mark=AKSB.mark||function(e,_){AKSB.q.push(["mark",e,_||(new Date).getTime()])},AKSB.measure=AKSB.measure||function(e,_,t){AKSB.q.push(["measure",e,_,t||(new Date).getTime()])},AKSB.done=AKSB.done||function(e){AKSB.q.push(["done",e])},AKSB.mark("firstbyte",(new Date).getTime()),AKSB.prof={custid:"322179",ustr:"",originlat:"0",clientrtt:"1",ghostip:"23.212.3.15",ipv6:false,pct:"10",clientip:"45.78.37.67",requestid:"29ac519b",region:"32996",protocol:"",blver:14,akM:"dsca",akN:"ae",akTT:"O",akTX:"1",akTI:"29ac519b",ai:"206465",ra:"false",pmgn:"",pmgi:"",pmp:"",qc:""},function(e){var _=d.createElement("script");_.async="async",_.src=e;var t=d.getElementsByTagName("script"),t=t[t.length-1];t.parentNode.insertBefore(_,t)}(("https:"===d.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/aksb.min.js")}</script>
                    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51"></a> <span id="PAGE" style="display:none;">8/33</span> <!-- End Header -->
<h1 id="GADBD-GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" class="sect1"><span class="enumeration_chapter">5</span> Using the File Writer Handler</h1>
<div>
<p>Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-EE4DAEB2-B685-4092-B04D-75C8BDCBE3B2">Overview</a><br />
Learn how to use the File Writer Handler and the event handlers to transform data.</li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-8F494242-8365-4569-9FAC-D2921DCFBC91">Using the HDFS Event Handler</a><br />
Learn how to use the HDFS Event Handler to load files generated by the File Writer Handler into HDFS.</li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-ECEE8316-BCD9-47F8-91D9-AE10AFC22B7C">Using the Optimized Row Columnar Event Handler</a><br />
Learn how to use the Optimized Row Columnar (ORC) Event Handler to generate data files in ORC format.</li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160">Using the Oracle Cloud Infrastructure Event Handler</a><br />
Learn how to use the Oracle Cloud Infrastructure Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Object Store.</li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-1396E75A-5095-425A-BFA2-30C4524262FC">Using the Oracle Cloud Infrastructure Classic Event Handler</a><br />
Learn how to use the Oracle Cloud Infrastructure Classic Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Classic Object Store.</li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-5BE451BB-196E-4A9D-9F70-C0432851A322">Using the Parquet Event Handler</a><br />
Learn how to use the Parquet Event Handler to load files generated by the File Writer Handler into HDFS.</li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-9CEECD8E-9FBE-4E6C-B676-250406ECC811">Using the S3 Event Handler</a><br />
Learn how to use the S3 Event Handler, which provides the interface to Amazon S3 web services.</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-EE4DAEB2-B685-4092-B04D-75C8BDCBE3B2"></a>
<h2 id="GADBD-GUID-EE4DAEB2-B685-4092-B04D-75C8BDCBE3B2" class="sect2"><span class="enumeration_section">5.1</span> Overview</h2>
<div>
<p>Learn how to use the File Writer Handler and the event handlers to transform data.</p>
<div class="section">
<p>The File Writer Handler supports generating data files in delimited text, XML, JSON, Avro, and Avro Object Container File formats. It is intended to fulfill an extraction, load, and transform use case. Data files are staged on your local file system. Then when writing to a data file is complete, you can use a third party application to read the file to perform additional processing.</p>
<p>The File Writer Handler also supports the event handler framework. The event handler framework allows data files generated by the File Writer Handler to be transformed into other formats, such as Optimized Row Columnar (ORC) or Parquet. Data files can be loaded into third party applications, such as HDFS or Amazon S3. The event handler framework is extensible allowing more event handlers performing different transformations or loading to different targets to be developed. Additionally, you can develop a custom event handler for your big data environment.</p>
<p><span>Oracle GoldenGate for Big Data</span> provides two handlers to write to HDFS. Oracle recommends that you use the HDFS Handler or the File Writer Handler in the following situations:</p>
<dl>
<dt class="dlterm"><a id="GUID-EE4DAEB2-B685-4092-B04D-75C8BDCBE3B2__GUID-E1C33E30-6998-41AC-9191-8FB5A982B6CA"><!-- --></a>The HDFS Event Handler is designed to stream data directly to HDFS.</dt>
<dd>
<p>No post write processing is occurring in HDFS. The HDFS Event Handler does not change the contents of the file, it simply uploads the existing file to HDFS.</p>
<p>Analytical tools are accessing data written to HDFS in real time including data in files that are open and actively being written to.</p>
</dd>
<dt class="dlterm"><a id="GUID-EE4DAEB2-B685-4092-B04D-75C8BDCBE3B2__GUID-7AC55FBC-4F12-4A39-A2C4-56FFE29F04E3"><!-- --></a>The File Writer Handler is designed to stage data to the local file system and then to load completed data files to HDFS when writing for a file is complete.</dt>
<dd>
<p>Analytic tools are not accessing data written to HDFS in real time.</p>
<p>Post write processing is occurring in HDFS to transform, reformat, merge, and move the data to a final location.</p>
<p>You want to write data files to HDFS in ORC or Parquet format.</p>
</dd>
</dl>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-DB974983-DD3B-400A-8C4F-36A148A9F997">Detailing the Functionality</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12">Configuring the File Writer Handler</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-106C2184-05BB-4C2E-A706-5AC76D262642">Review a Sample Configuration</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-DB974983-DD3B-400A-8C4F-36A148A9F997"></a>
<h3 id="GADBD-GUID-DB974983-DD3B-400A-8C4F-36A148A9F997" class="sect3"><span class="enumeration_section">5.1.1</span> Detailing the Functionality</h3>
<div>
<div class="section">
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-F347E852-5B72-4BA8-82B4-4AA8B8BF28BB">Using File Roll Events</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-FA1F520A-FB49-4B45-A488-C701578DFCBD">Automatic Directory Creation</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-89F45F9E-1B22-4FBB-9AAB-B167EF648DA7">About the Active Write Suffix</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-EB6DC91C-BD14-4E97-8A5B-DCAA31A96BCB">Maintenance of State</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-B9AF4E9E-396C-4F77-98FA-0BF2CE560386">Using Templated Strings</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-EE4DAEB2-B685-4092-B04D-75C8BDCBE3B2" title="Learn how to use the File Writer Handler and the event handlers to transform data.">Overview</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-F347E852-5B72-4BA8-82B4-4AA8B8BF28BB"></a>
<h4 id="GADBD-GUID-F347E852-5B72-4BA8-82B4-4AA8B8BF28BB" class="sect4"><span class="enumeration_section">5.1.1.1</span> Using File Roll Events</h4>
<div>
<div class="section">
<p>A <span class="bold">file roll event</span> occurs when writing to a specific data file is completed. No more data is written to that specific data file.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Finalize Action Operation</p>
<p>You can configure the finalize action operation to clean up a specific data file after a successful file roll action using the <code class="codeph">finalizeaction</code> parameter with the following options:</p>
<dl>
<dt class="dlterm"><a id="GUID-F347E852-5B72-4BA8-82B4-4AA8B8BF28BB__GUID-9FD5FDDF-87AE-4FDE-B13C-B77C659C29A5"><!-- --></a><code class="codeph">none</code></dt>
<dd>
<p>Leave the data file in place (removing any active write suffix, see <a href="using-file-writer-handler.htm#GUID-89F45F9E-1B22-4FBB-9AAB-B167EF648DA7">About the Active Write Suffix</a>).</p>
</dd>
<dt class="dlterm"><a id="GUID-F347E852-5B72-4BA8-82B4-4AA8B8BF28BB__GUID-8E9FF766-4FF6-4FB8-8B61-0DB943D3F4CF"><!-- --></a><code class="codeph">delete</code></dt>
<dd>
<p>Delete the data file (such as, if the data file has been converted to another format or loaded to a third party application).</p>
</dd>
<dt class="dlterm"><a id="GUID-F347E852-5B72-4BA8-82B4-4AA8B8BF28BB__GUID-6C13E30C-D908-40E4-9FF0-8E57A6619CCA"><!-- --></a><code class="codeph">move</code></dt>
<dd>
<p>Maintain the file name (removing any active write suffix), but move the file to the directory resolved using the <code class="codeph">movePathMappingTemplate</code> property.</p>
</dd>
<dt class="dlterm"><a id="GUID-F347E852-5B72-4BA8-82B4-4AA8B8BF28BB__GUID-960FE015-FA01-408F-8929-6D0A6FAB57B5"><!-- --></a><code class="codeph">rename</code></dt>
<dd>
<p>Maintain the current directory, but rename the data file using the <code class="codeph">fileRenameMappingTemplate</code> property.</p>
</dd>
<dt class="dlterm"><a id="GUID-F347E852-5B72-4BA8-82B4-4AA8B8BF28BB__GUID-28A7A90B-9D65-41A8-B5C6-5F9E826CA285"><!-- --></a><code class="codeph">move-rename</code></dt>
<dd>
<p>Rename the file using the file name generated by the <code class="codeph">fileRenameMappingTemplate</code> property and move the file the file to the directory resolved using the <code class="codeph">movePathMappingTemplate</code> property.</p>
</dd>
</dl>
<p>Typically, event handlers offer a subset of these same actions.</p>
<p>A sample Configuration of a finalize action operation:</p>
<pre dir="ltr">
gg.handlerlist=filewriter
#The File Writer Handler
gg.handler.filewriter.type=filewriter
gg.handler.filewriter.mode=op
gg.handler.filewriter.pathMappingTemplate=./dirout/evActParamS3R
gg.handler.filewriter.stateFileDirectory=./dirsta
gg.handler.filewriter.fileNameMappingTemplate=${fullyQualifiedTableName}_${currentTimestamp}.txt
gg.handler.filewriter.fileRollInterval=7m
gg.handler.filewriter.finalizeAction=delete
gg.handler.filewriter.inactivityRollInterval=7m
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">File Rolling Actions</p>
<p>Any of the following actions trigger a file roll event.</p>
<ul style="list-style-type: disc;">
<li>
<p>A metadata change event.</p>
</li>
<li>
<p>The maximum configured file size is exceeded</p>
</li>
<li>
<p>The file roll interval is exceeded (the current time minus the time of first file write is greater than the file roll interval).</p>
</li>
<li>
<p>The inactivity roll interval is exceeded (the current time minus the time of last file write is greater than the file roll interval).</p>
</li>
<li>
<p>The File Writer Handler is configured to roll on shutdown and the Replicat process is stopped.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Operation Sequence</p>
<p>The file roll event triggers a sequence of operations to occur. It is important that you understand the order of the operations that occur when an individual data file is rolled:</p>
<ol>
<li>
<p>The active data file is switched to inactive, the data file is flushed, and state data file is flushed.</p>
</li>
<li>
<p>The configured event handlers are called in the sequence that you specified.</p>
</li>
<li>
<p>The finalize action is executed on all the event handlers in the reverse order in which you configured them. Any finalize action that you configured is executed.</p>
</li>
<li>
<p>The finalize action is executed on the data file and the state file. If all actions are successful, the state file is removed. Any finalize action that you configured is executed.</p>
</li>
</ol>
<p>For example, if you configured the File Writer Handler with the Parquet Event Handler and then the S3 Event Handler, the order for a roll event is:</p>
<ol>
<li>
<p>The active data file is switched to inactive, the data file is flushed, and state data file is flushed.</p>
</li>
<li>
<p>The Parquet Event Handler is called to generate a Parquet file from the source data file.</p>
</li>
<li>
<p>The S3 Event Handler is called to load the generated Parquet file to S3.</p>
</li>
<li>
<p>The finalize action is executed on the S3 Parquet Event Handler. Any finalize action that you configured is executed.</p>
</li>
<li>
<p>The finalize action is executed on the Parquet Event Handler. Any finalize action that you configured is executed.</p>
</li>
<li>
<p>The finalize action is executed for the data file in the File Writer Handler</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-DB974983-DD3B-400A-8C4F-36A148A9F997">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-FA1F520A-FB49-4B45-A488-C701578DFCBD"></a>
<h4 id="GADBD-GUID-FA1F520A-FB49-4B45-A488-C701578DFCBD" class="sect4"><span class="enumeration_section">5.1.1.2</span> Automatic Directory Creation</h4>
<div>
<div class="section">You do not have to configure write directories before you execute the handler. The File Writer Handler checks to see if the specified write directory exists before creating a file and recursively creates directories as needed.</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-DB974983-DD3B-400A-8C4F-36A148A9F997">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-89F45F9E-1B22-4FBB-9AAB-B167EF648DA7"></a>
<h4 id="GADBD-GUID-89F45F9E-1B22-4FBB-9AAB-B167EF648DA7" class="sect4"><span class="enumeration_section">5.1.1.3</span> About the Active Write Suffix</h4>
<div>
<div class="section">
<p>A common use case is using a third party application to monitor the write directory to read data files. Third party application can only read a data file when writing to that file has completed. These applications need a way to determine if writing to a data file is active or complete. The File Writer Handler allows you to configure an <span class="bold">active write suffix</span> using this property:</p>
<pre dir="ltr">
gg.handler.<span class="italic">name</span>.fileWriteActiveSuffix=.tmp
</pre>
<p>The value of this property is appended to the generated file name. When writing to the file is complete, the data file is renamed and the active write suffix is removed from the file name. You can set your third party application to monitor your data file names to identify when the active write suffix is removed.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-DB974983-DD3B-400A-8C4F-36A148A9F997">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-EB6DC91C-BD14-4E97-8A5B-DCAA31A96BCB"></a>
<h4 id="GADBD-GUID-EB6DC91C-BD14-4E97-8A5B-DCAA31A96BCB" class="sect4"><span class="enumeration_section">5.1.1.4</span> Maintenance of State</h4>
<div>
<div class="section">
<p>Previously, all <span>Oracle GoldenGate for Big Data</span> Handlers have been stateless. These stateless handlers only maintain state in the context of the Replicat process that it was running. If the Replicat process was stopped and restarted, then all the state was lost. With a Replicat restart, the handler began writing with no contextual knowledge of the previous run.</p>
<p>The File Writer Handler provides the ability of maintaining state between invocations of the Replicat process. By default with a restart:</p>
<ul style="list-style-type: disc;">
<li>
<p>the state saved files are read,</p>
</li>
<li>
<p>the state is restored,</p>
</li>
<li>
<p>and appending active data files continues where the previous run stopped.</p>
</li>
</ul>
<p>You can change this default action to require all files be rolled on shutdown by setting this property:</p>
<pre dir="ltr">
gg.handler.name.rollOnShutdown=true
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-DB974983-DD3B-400A-8C4F-36A148A9F997">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B9AF4E9E-396C-4F77-98FA-0BF2CE560386"></a>
<h4 id="GADBD-GUID-B9AF4E9E-396C-4F77-98FA-0BF2CE560386" class="sect4"><span class="enumeration_section">5.1.1.5</span> Using Templated Strings</h4>
<div>
<div class="section">
<p><span class="bold">Templated strings</span> can contain a combination of string constants and keywords that are dynamically resolved at runtime. The ORC Event Handler makes extensive use of templated strings to generate the ORC directory names, data file names, and ORC bucket names. These strings give you the flexibility to select where to write data files and the names of those data files. You should exercise caution when choosing file and directory names to avoid file naming collisions that can result in an abend.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Supported Templated Strings</p>
<div class="tblformal" id="GUID-B9AF4E9E-396C-4F77-98FA-0BF2CE560386__d191e19">
<table class="cellalignment71" summary="Two column table detailing the supported templated strings.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d15800e516">Keyword</th>
<th class="cellalignment77" id="d15800e518">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e522" headers="d15800e516"><code class="codeph">${fullyQualifiedTableName}</code></td>
<td class="cellalignment65" headers="d15800e522 d15800e518">
<p>The fully qualified source table name delimited by a period (<code class="codeph">.</code>). For example, <code class="codeph">MYCATALOG.MYSCHEMA.MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e535" headers="d15800e516"><code class="codeph">${catalogName}</code></td>
<td class="cellalignment65" headers="d15800e535 d15800e518">
<p>The individual source catalog name. For example, <code class="codeph">MYCATALOG</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e545" headers="d15800e516"><code class="codeph">${schemaName}</code></td>
<td class="cellalignment65" headers="d15800e545 d15800e518">
<p>The individual source schema name. For example, <code class="codeph">MYSCHEMA</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e555" headers="d15800e516"><code class="codeph">${tableName}</code></td>
<td class="cellalignment65" headers="d15800e555 d15800e518">
<p>The individual source table name. For example, <code class="codeph">MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e565" headers="d15800e516"><code class="codeph">${groupName}</code></td>
<td class="cellalignment65" headers="d15800e565 d15800e518">
<p>The name of the Replicat process (with the thread number appended if you&rsquo;re using coordinated apply).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e572" headers="d15800e516"><code class="codeph">${emptyString}</code></td>
<td class="cellalignment65" headers="d15800e572 d15800e518">
<p>Evaluates to an empty string. For example,<code class="codeph">&ldquo;&rdquo;</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e581" headers="d15800e516"><code class="codeph">${operationCount}</code></td>
<td class="cellalignment65" headers="d15800e581 d15800e518">
<p>The total count of operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;1024&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e594" headers="d15800e516"><code class="codeph">${insertCount}</code></td>
<td class="cellalignment65" headers="d15800e594 d15800e518">
<p>The total count of insert operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;125&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e607" headers="d15800e516"><code class="codeph">${updateCount}</code></td>
<td class="cellalignment65" headers="d15800e607 d15800e518">
<p>The total count of update operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;265&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e620" headers="d15800e516"><code class="codeph">${deleteCount}</code></td>
<td class="cellalignment65" headers="d15800e620 d15800e518">
<p>The total count of delete operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;11&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e633" headers="d15800e516"><code class="codeph">${truncateCount}</code></td>
<td class="cellalignment65" headers="d15800e633 d15800e518">
<p>The total count of truncate operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;5&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e647" headers="d15800e516"><code class="codeph">${currentTimestamp}</code></td>
<td class="cellalignment65" headers="d15800e647 d15800e518">
<p>The current timestamp. The default output format for the date time is <code class="codeph">yyyy-MM-dd_HH-mm-ss.SSS</code>. For example, <code class="codeph">2017-07-05_04-31-23.123</code>. Alternatively, you can customize the format of the current timestamp by inserting the format inside square brackets like:</p>
<p><code class="codeph">${currentTimestamp[MM-dd_HH]}</code></p>
<p>This format uses the syntax defined in the Java <code class="codeph">SimpleDateFormat</code> class, see <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" target="_blank">https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e672" headers="d15800e516"><code class="codeph">${toUpperCase[]}</code></td>
<td class="cellalignment65" headers="d15800e672 d15800e518">
<p>Converts the contents inside the square brackets to uppercase. For example, <code class="codeph">${toUpperCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e682" headers="d15800e516"><code class="codeph">${toLowerCase[]}</code></td>
<td class="cellalignment65" headers="d15800e682 d15800e518">
<p>Converts the contents inside the square brackets to lowercase. For example, <code class="codeph">${toLowerCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Configuration of template strings can use a mix of keywords and static strings to assemble path and data file names at runtime.</p>
<dl>
<dt class="dlterm"><a id="GUID-B9AF4E9E-396C-4F77-98FA-0BF2CE560386__d191e204"><!-- --></a>Path Configuration Example</dt>
<dd>
<pre dir="ltr">
/usr/local/${<span class="italic">fullyQualifiedTableName</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-B9AF4E9E-396C-4F77-98FA-0BF2CE560386__d191e213"><!-- --></a>Data File Configuration Example</dt>
<dd>
<pre dir="ltr">
${<span class="italic">fullyQualifiedTableName</span>}_${currentTimestamp}_${<span class="italic">groupName</span>}.<span class="italic">handlerIndicator</span>
</pre></dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Requirements</p>
<p>The directory and file names generated using the templates must be legal on the system being written to. File names must be unique to avoid a file name collision. You can avoid a collision by adding a current timestamp using the <code class="codeph">${currentTimestamp}</code> keyword. If you are using coordinated apply, then adding <code class="codeph">${groupName}</code> into the data file name is recommended.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-DB974983-DD3B-400A-8C4F-36A148A9F997">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12"></a>
<h3 id="GADBD-GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12" class="sect3"><span class="enumeration_section">5.1.2</span> Configuring the File Writer Handler</h3>
<div>
<div class="section">
<p>Lists the configurable values for the File Writer Handler. These properties are located in the Java Adapter properties file (not in the Replicat properties file)</p>
<p>To enable the selection of the File Writer Handler, you must first configure the handler type by specifying <code class="codeph">gg.handler.jdbc.type=filewriter</code> and the other File Writer properties as follows:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-2F0D04A3-FC62-428E-A3AC-44349A09933F">
<p class="titleintable">Table 5-1 File Writer Handler Configuration Properties</p>
<table class="cellalignment78" title="File Writer Handler Configuration Properties" summary="Five column table describing the File Writer Handler Configuration">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d15800e774">Properties</th>
<th class="cellalignment79" id="d15800e777">Required/ Optional</th>
<th class="cellalignment80" id="d15800e780">Legal Values</th>
<th class="cellalignment81" id="d15800e783">Default</th>
<th class="cellalignment82" id="d15800e786">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e791" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.type</code></p>
</td>
<td class="cellalignment83" headers="d15800e791 d15800e777">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e791 d15800e780">
<p><code class="codeph">filewriter</code></p>
</td>
<td class="cellalignment85" headers="d15800e791 d15800e783">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e791 d15800e786">
<p>Selects the File Writer Handler for use.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e812" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.maxFileSize</code></p>
</td>
<td class="cellalignment83" headers="d15800e812 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e812 d15800e780">
<p>Default unit of measure is bytes. You can stipulate <code class="codeph">k</code>, <code class="codeph">m</code>, or <code class="codeph">g</code> to signify kilobytes, megabytes, or gigabytes respectively. Examples of legal values include <code class="codeph">10000</code>, <code class="codeph">10k</code>, <code class="codeph">100m</code>, <code class="codeph">1.1g</code>.</p>
</td>
<td class="cellalignment85" headers="d15800e812 d15800e783">
<p>1g</p>
</td>
<td class="cellalignment86" headers="d15800e812 d15800e786">
<p>Sets the maximum file size of files generated by the File Writer Handler. When the file size is exceeded, a roll event is triggered.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e854" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.fileRollInterval</code></p>
</td>
<td class="cellalignment83" headers="d15800e854 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e854 d15800e780">
<p>The default unit of measure is milliseconds. You can stipulate <code class="codeph">ms</code>, <code class="codeph">s</code>, <code class="codeph">m</code>, <code class="codeph">h</code> to signify milliseconds, seconds, minutes, or hours respectively. Examples of legal values include <code class="codeph">10000</code>, <code class="codeph">10000ms</code>, <code class="codeph">10s</code>, <code class="codeph">10m</code>, or <code class="codeph">1.5h</code>. Values of <code class="codeph">0</code> or less indicate that file rolling on time is turned off.</p>
</td>
<td class="cellalignment85" headers="d15800e854 d15800e783">
<p>File rolling on time is off.</p>
</td>
<td class="cellalignment86" headers="d15800e854 d15800e786">
<p>The timer starts when a file is created. If the file is still open when the interval elapses then the a file roll event will be triggered.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e905" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.inactivityRollInterval</code></p>
</td>
<td class="cellalignment83" headers="d15800e905 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e905 d15800e780">
<p>The default unit of measure is milliseconds. You can stipulate <code class="codeph">ms</code>, <code class="codeph">s</code>, <code class="codeph">m</code>, <code class="codeph">h</code> to signify milliseconds, seconds, minutes, or hours respectively. Examples of legal values include <code class="codeph">10000</code>, <code class="codeph">10000ms</code>, <code class="codeph">10s</code>, <code class="codeph">10m</code>, or <code class="codeph">1.5h</code>. Values of <code class="codeph">0</code> or less indicate that file rolling on time is turned off.</p>
</td>
<td class="cellalignment85" headers="d15800e905 d15800e783">
<p>File inactivity rolling is turned off.</p>
</td>
<td class="cellalignment86" headers="d15800e905 d15800e786">
<p>The timer starts from the latest write to a generated file. New writes to a generated file restart the counter. If the file is still open when the timer elapses a roll event is triggered..</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e956" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.fileNameMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e956 d15800e777">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e956 d15800e780">
<p>A string with resolvable keywords and constants used to dynamically generate File Writer Handler data file names at runtime.</p>
</td>
<td class="cellalignment85" headers="d15800e956 d15800e783">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e956 d15800e786">
<p>Use keywords interlaced with constants to dynamically generate a unique path names at runtime. Typically, path names follow the format, <code class="codeph">${<span class="codeinlineitalic">fullyQualifiedTableName</span>}_${<span class="codeinlineitalic">groupName</span>}_${<span class="codeinlineitalic">currentTimeStamp</span>}{<span class="codeinlineitalic">.txt</span>}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e991" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.pathMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e991 d15800e777">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e991 d15800e780">
<p>A string with resolvable keywords and constants used to dynamically generate the directory to which a file is written.</p>
</td>
<td class="cellalignment85" headers="d15800e991 d15800e783">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e991 d15800e786">
<p>Use keywords interlaced with constants to dynamically generate a unique path names at runtime. Typically, path names follow the format, <code class="codeph">${<span class="codeinlineitalic">fullyQualifiedTableName</span>}_${<span class="codeinlineitalic">groupName</span>}_${<span class="codeinlineitalic">currentTimeStamp</span>}{<span class="codeinlineitalic">.txt</span>}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1026" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.fileWriteActiveSuffix</code></p>
</td>
<td class="cellalignment83" headers="d15800e1026 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1026 d15800e780">
<p>A string.</p>
</td>
<td class="cellalignment85" headers="d15800e1026 d15800e783">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e1026 d15800e786">
<p>An optional suffix that is appended to files generated by the File Writer Handler to indicate that writing to the file is active. At the finalize action the suffix is removed.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1046" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.stateFileDirectory</code></p>
</td>
<td class="cellalignment83" headers="d15800e1046 d15800e777">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e1046 d15800e780">
<p>A directory on the local machine to store the state files of the File Writer Handler.</p>
</td>
<td class="cellalignment85" headers="d15800e1046 d15800e783">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e1046 d15800e786">
<p>Sets the directory on the local machine to store the state files of the File Writer Handler. The group name is appended to the directory to ensure that the functionality works when operating in a coordinated apply environment.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1066" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.rollOnShutdown</code></p>
</td>
<td class="cellalignment83" headers="d15800e1066 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1066 d15800e780">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e1066 d15800e783">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment86" headers="d15800e1066 d15800e786">
<p>Set to <code class="codeph">true</code>, on normal shutdown of the Replicat process all open files are closed and a file roll event is triggered. If successful, the File Writer Handler has no state to carry over to a restart of the File Writer Handler.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1091" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.finalizeAction</code></p>
</td>
<td class="cellalignment83" headers="d15800e1091 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1091 d15800e780">
<p><code class="codeph">none | delete | move | rename | move-rename</code></p>
</td>
<td class="cellalignment85" headers="d15800e1091 d15800e783">
<p><code class="codeph">none</code></p>
</td>
<td class="cellalignment86" headers="d15800e1091 d15800e786">
<p>Indicates what the File Writer Handler should do at the finalize action.</p>
<dl>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-9FD5FDDF-87AE-4FDE-B13C-B77C659C29A5"><!-- --></a><code class="codeph">none</code></dt>
<dd>
<p>Leave the data file in place (removing any active write suffix, see <a href="using-file-writer-handler.htm#GUID-89F45F9E-1B22-4FBB-9AAB-B167EF648DA7">About the Active Write Suffix</a>).</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-8E9FF766-4FF6-4FB8-8B61-0DB943D3F4CF"><!-- --></a><code class="codeph">delete</code></dt>
<dd>
<p>Delete the data file (such as, if the data file has been converted to another format or loaded to a third party application).</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-6C13E30C-D908-40E4-9FF0-8E57A6619CCA"><!-- --></a><code class="codeph">move</code></dt>
<dd>
<p>Maintain the file name (removing any active write suffix), but move the file to the directory resolved using the <code class="codeph">movePathMappingTemplate</code> property.</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-960FE015-FA01-408F-8929-6D0A6FAB57B5"><!-- --></a><code class="codeph">rename</code></dt>
<dd>
<p>Maintain the current directory, but rename the data file using the <code class="codeph">fileRenameMappingTemplate</code> property.</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-28A7A90B-9D65-41A8-B5C6-5F9E826CA285"><!-- --></a><code class="codeph">move-rename</code></dt>
<dd>
<p>Rename the file using the file name generated by the <code class="codeph">fileRenameMappingTemplate</code> property and move the file the file to the directory resolved using the <code class="codeph">movePathMappingTemplate</code> property.</p>
</dd>
</dl>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1164" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.partitionByTable</code></p>
</td>
<td class="cellalignment83" headers="d15800e1164 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1164 d15800e780">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e1164 d15800e783">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment86" headers="d15800e1164 d15800e786">
<p>Set to <code class="codeph">true</code> so that data from different source tables is partitioned into separate files. Set to <code class="codeph">false</code> to interlace operation data from all source tables into a single output file. It cannot be set to <code class="codeph">false</code> if the file format is the Avro OCF (Object Container File) format.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1196" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.eventHandler</code></p>
</td>
<td class="cellalignment83" headers="d15800e1196 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1196 d15800e780">
<p><code class="codeph">HDFS | ORC | PARQUET | S3</code></p>
</td>
<td class="cellalignment85" headers="d15800e1196 d15800e783">
<p>No event handler configured.</p>
</td>
<td class="cellalignment86" headers="d15800e1196 d15800e786">
<p>A unique string identifier cross referencing an event handler. The event handler will be invoked on the file roll event. Event handlers can do thing file roll event actions like loading files to S3, converting to Parquet or ORC format, or loading files to HDFS.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1217" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.fileRenameMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e1217 d15800e777">
<p>Required if <code class="codeph">gg.handler.name.finalizeAction</code> is set to <code class="codeph">rename</code> or <code class="codeph">move-rename</code>.</p>
</td>
<td class="cellalignment84" headers="d15800e1217 d15800e780">
<p>A string with resolvable keywords and constants used to dynamically generate File Writer Handler data file names for file renaming in the finalize action.</p>
</td>
<td class="cellalignment85" headers="d15800e1217 d15800e783">
<p>None.</p>
</td>
<td class="cellalignment86" headers="d15800e1217 d15800e786">
<p>Use keywords interlaced with constants to dynamically generate unique file names at runtime. Typically, file names follow the format, <code class="codeph">${<span class="codeinlineitalic">fullyQualifiedTableName</span>}_${<span class="codeinlineitalic">groupName</span>}_${<span class="codeinlineitalic">currentTimeStamp</span>}{<span class="codeinlineitalic">.txt</span>}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1261" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.movePathMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e1261 d15800e777">
<p>Required if <code class="codeph">gg.handler.name.finalizeAction</code> is set to <code class="codeph">rename</code> or <code class="codeph">move-rename</code>.</p>
</td>
<td class="cellalignment84" headers="d15800e1261 d15800e780">
<p>A string with resolvable keywords and constants used to dynamically generate the directory to which a file is written.</p>
</td>
<td class="cellalignment85" headers="d15800e1261 d15800e783">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e1261 d15800e786">
<p>Use keywords interlaced with constants to dynamically generate a unique path names at runtime. Typically, path names typically follow the format, <code class="codeph">/ogg/data/${groupName}/${<span class="codeinlineitalic">fullyQualifiedTableName</span>}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1296" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.format</code></p>
</td>
<td class="cellalignment83" headers="d15800e1296 d15800e777">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e1296 d15800e780">
<p><code class="codeph">delimitedtext | json | json_row | xml | avro_row | avro_op | avro_row_ocf | avro_op_ocf</code></p>
</td>
<td class="cellalignment85" headers="d15800e1296 d15800e783">
<p><code class="codeph">delimitedtext</code></p>
</td>
<td class="cellalignment86" headers="d15800e1296 d15800e786">
<p>Selects the formatter for the HDFS Handler for how output data will be formatted</p>
<dl>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-8E7A5B08-B69A-4373-8E1F-5D8D20A8ABCD"><!-- --></a><code class="codeph">delimitedtext</code></dt>
<dd>
<p>Delimited text.</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-5541B028-05C5-4EC0-AEF2-FB4B2FAA6DFB"><!-- --></a><code class="codeph">json</code></dt>
<dd>
<p>JSON</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-DDDEC96A-0917-4515-B616-1039966864E6"><!-- --></a><code class="codeph">json_row</code></dt>
<dd>
<p>JSON output modeling row data</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-BD932EB3-1A1F-4C35-A8EC-DBE111636D8B"><!-- --></a><code class="codeph">xml</code></dt>
<dd>
<p>XML</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-3ABCD1A4-2ED6-4C9A-9CAA-288DDAD77ADC"><!-- --></a><code class="codeph">avro_row</code></dt>
<dd>
<p>Avro in row compact format.</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-E9D81F35-214B-4385-A7EC-39982CF6BB40"><!-- --></a><code class="codeph">avro_op</code></dt>
<dd>
<p>Avro in operation more verbose format.</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-69055704-FC04-4239-9AD5-70BBC90FD3DA"><!-- --></a><code class="codeph">avro_row_ocf</code></dt>
<dd>
<p>Avro in the row compact format written into HDFS in the Avro Object Container File (OCF) format.</p>
</dd>
<dt class="dlterm"><a id="GUID-F1DEE3B9-ADDD-4A75-A80B-A8A3670C0F12__GUID-A9652DB7-6918-4834-8BE3-3410DDD389B2"><!-- --></a><code class="codeph">avro_op_ocf</code></dt>
<dd>
<p>Avro in the more verbose format written into HDFS in the Avro OCF format.</p>
</dd>
</dl>
<p>If you want to use the Parquet or ORC Event Handlers, then the selected format must be <code class="codeph">avro_row_ocf</code> or <code class="codeph">avro_op_ocf</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1383" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.bom</code></p>
</td>
<td class="cellalignment83" headers="d15800e1383 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1383 d15800e780">
<p>An even number of hex characters.</p>
</td>
<td class="cellalignment85" headers="d15800e1383 d15800e783">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e1383 d15800e786">
<p>Enter an even number of hex characters where every two characters correspond to a single byte in the byte order mark (BOM). For example, the string <code class="codeph">efbbbf</code> represents the 3-byte BOM for UTF-8.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1406" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.createControlFile</code></p>
</td>
<td class="cellalignment83" headers="d15800e1406 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1406 d15800e780">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e1406 d15800e783">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment86" headers="d15800e1406 d15800e786">
<p>Set to <code class="codeph">true</code> to create a control file. A <span class="bold">control file</span> contains all of the completed file names including the path separated by a delimiter. The name of the control file is <code class="codeph">{<span class="codeinlineitalic">groupName</span>}.control</code>. For example, if the Replicat process name is <code class="codeph">fw</code>, then the control file name is <code class="codeph">FW.control</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1446" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.controlFileDelimiter</code></p>
</td>
<td class="cellalignment83" headers="d15800e1446 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1446 d15800e780">
<p>Any string</p>
</td>
<td class="cellalignment85" headers="d15800e1446 d15800e783">
<p>new line (<code class="codeph">\n</code>)</p>
</td>
<td class="cellalignment86" headers="d15800e1446 d15800e786">
<p>Allows you to control the delimiter separating file names in the control file. You can use<code class="codeph">CDATA[]</code> wrapping with this property.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1472" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.controlFileDirectory</code></p>
</td>
<td class="cellalignment83" headers="d15800e1472 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1472 d15800e780">
<p>A path to a directory to hold the control file.</p>
</td>
<td class="cellalignment85" headers="d15800e1472 d15800e783">
<p>A period (<code class="codeph">.</code>) or the <span>Oracle GoldenGate</span> installation directory.</p>
</td>
<td class="cellalignment86" headers="d15800e1472 d15800e786">
<p>Set to specify where you want to write the control file.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1498" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.createOwnerFile</code></p>
</td>
<td class="cellalignment83" headers="d15800e1498 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1498 d15800e780">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e1498 d15800e783">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment86" headers="d15800e1498 d15800e786">
<p>Set to <code class="codeph">true</code> to create an owner file. The <span class="bold">owner file</span> is created when the Replicat process starts and is removed when it terminates normally. The owner file allows other applications to determine if the process is running. The owner file remains in place when the Replicat process ends abnormally. The name of the owner file is the <code class="codeph">{<span class="codeinlineitalic">groupName</span>}.owner</code>. For example, if the replicat process is name <code class="codeph">fw</code>, then the owner file name is <code class="codeph">FW.owner</code>. The file is create in the . directory or the <span>Oracle GoldenGate</span> installation directory.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e1542" headers="d15800e774">
<p><code class="codeph">gg.handler.<code class="codeph">name</code>.atTime</code></p>
</td>
<td class="cellalignment83" headers="d15800e1542 d15800e777">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e1542 d15800e780">
<p>One or more times to trigger a roll action of all open files.</p>
</td>
<td class="cellalignment85" headers="d15800e1542 d15800e783">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e1542 d15800e786">
<p>Configure one or more trigger times in the following format:</p>
<pre dir="ltr">
HH:MM,HH:MM,HH:MM
</pre>
<p>Entries are based on a 24 hour clock. For example, an entry to configure rolled actions at three discrete times of day is:</p>
<pre dir="ltr">
gg.handler.fw.atTime=03:30,21:00,23:51
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-EE4DAEB2-B685-4092-B04D-75C8BDCBE3B2" title="Learn how to use the File Writer Handler and the event handlers to transform data.">Overview</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-106C2184-05BB-4C2E-A706-5AC76D262642"></a>
<h3 id="GADBD-GUID-106C2184-05BB-4C2E-A706-5AC76D262642" class="sect3"><span class="enumeration_section">5.1.3</span> Review a Sample Configuration</h3>
<div>
<div class="section">
<p>This File Writer Handler configuration example is using the Parquet Event Handler to convert data files to Parquet, and then for the S3 Event Handler to load Parquet files into S3:</p>
<pre dir="ltr">
gg.handlerlist=filewriter 

#The handler properties 
gg.handler.name.type=filewriter 
gg.handler.name.mode=op 
gg.handler.name.pathMappingTemplate=./dirout 
gg.handler.name.stateFileDirectory=./dirsta 
gg.handler.name.fileNameMappingTemplate=${fullyQualifiedTableName}_${currentTimestamp}.txt 
gg.handler.name.fileRollInterval=7m 
gg.handler.name.finalizeAction=delete 
gg.handler.name.inactivityRollInterval=7m 
gg.handler.name.format=avro_row_ocf 
gg.handler.name.includetokens=true 
gg.handler.name.partitionByTable=true 
gg.handler.name.eventHandler=parquet 
gg.handler.name.rollOnShutdown=true 

gg.eventhandler.parquet.type=parquet 
gg.eventhandler.parquet.pathMappingTemplate=./dirparquet 
gg.eventhandler.parquet.writeToHDFS=false 
gg.eventhandler.parquet.finalizeAction=delete 
gg.eventhandler.parquet.eventHandler=s3 
gg.eventhandler.parquet.fileNameMappingTemplate=${tableName}_${currentTimestamp}.parquet 

gg.handler.filewriter.eventHandler=s3 
gg.eventhandler.s3.type=s3
gg.eventhandler.s3.region=us-west-2 
gg.eventhandler.s3.proxyServer=www-proxy.us.oracle.com 
gg.eventhandler.s3.proxyPort=80 
gg.eventhandler.s3.bucketMappingTemplate=tomsfunbucket 
gg.eventhandler.s3.pathMappingTemplate=thepath 
gg.eventhandler.s3.finalizeAction=none
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-EE4DAEB2-B685-4092-B04D-75C8BDCBE3B2" title="Learn how to use the File Writer Handler and the event handlers to transform data.">Overview</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-8F494242-8365-4569-9FAC-D2921DCFBC91"></a>
<h2 id="GADBD-GUID-8F494242-8365-4569-9FAC-D2921DCFBC91" class="sect2"><span class="enumeration_section">5.2</span> Using the HDFS Event Handler</h2>
<div>
<p>Learn how to use the HDFS Event Handler to load files generated by the File Writer Handler into HDFS.</p>
<p>See <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a>.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-0F781456-80CE-4A1B-8DE4-C9DF797B2B6D">Detailing the Functionality</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-0F781456-80CE-4A1B-8DE4-C9DF797B2B6D"></a>
<h3 id="GADBD-GUID-0F781456-80CE-4A1B-8DE4-C9DF797B2B6D" class="sect3"><span class="enumeration_section">5.2.1</span> Detailing the Functionality</h3>
<div>
<div class="section">
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-2F0C7FA9-856A-4FE5-9558-14CC0E73BD4E">Configuring the Handler</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-E86EE517-0905-4B33-9824-EA780CA8CEC8">Using Templated Strings</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-B712A481-F7ED-4440-B25D-78E984BDDB58">Configuring the HDFS Event Handler</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-8F494242-8365-4569-9FAC-D2921DCFBC91" title="Learn how to use the HDFS Event Handler to load files generated by the File Writer Handler into HDFS.">Using the HDFS Event Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-2F0C7FA9-856A-4FE5-9558-14CC0E73BD4E"></a>
<h4 id="GADBD-GUID-2F0C7FA9-856A-4FE5-9558-14CC0E73BD4E" class="sect4"><span class="enumeration_section">5.2.1.1</span> Configuring the Handler</h4>
<div>
<div class="section">
<p>The HDFS Event Handler can &nbsp;can upload data files to HDFS. These additional configuration steps are required:</p>
<p>The HDFS Event Handler dependencies and considerations are the same as the HDFS Handler, see <a href="using-hdfs-handler.htm#GUID-5DC92AF0-8F64-4A85-B57A-21C06D1B2534">HDFS Additional Considerations</a>.</p>
<p>Ensure that <code class="codeph">gg.classpath</code> includes the HDFS client libraries.</p>
<p>Ensure that the directory containing the HDFS <code>core-site.xml</code> file is in <code class="codeph">gg.classpath</code>. This is so the <code>core-site.xml</code> file can be read at runtime and the connectivity information to HDFS can be resolved. For example:</p>
<pre dir="ltr">
gg.classpath=/{<span class="italic">HDFSinstallDirectory</span>}/etc/hadoop
</pre>
<p>If Kerberos authentication is enabled on the HDFS cluster, you have to configure the Kerberos principal and the location of the <code class="codeph">keytab</code> file so that the password can be resolved at runtime:</p>
<pre dir="ltr">
gg.eventHandler.name.kerberosPrincipal=principal
gg.eventHandler.name.kerberosKeytabFile=<span class="italic">pathToTheKeytabFile</span>
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-0F781456-80CE-4A1B-8DE4-C9DF797B2B6D">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-E86EE517-0905-4B33-9824-EA780CA8CEC8"></a>
<h4 id="GADBD-GUID-E86EE517-0905-4B33-9824-EA780CA8CEC8" class="sect4"><span class="enumeration_section">5.2.1.2</span> Using Templated Strings</h4>
<div>
<div class="section">
<p><span class="bold">Templated strings</span> can contain a combination of string constants and keywords that are dynamically resolved at runtime. The HDFS Event Handler makes extensive use of templated strings to generate the HDFS directory names, data file names, and HDFS bucket names. This gives you the flexibility to select where to write data files and the names of those data files.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Supported Templated Strings</p>
<div class="tblformal" id="GUID-E86EE517-0905-4B33-9824-EA780CA8CEC8__d191e19">
<table class="cellalignment71" summary="Two column table detailing the supported templated strings.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d15800e1801">Keyword</th>
<th class="cellalignment77" id="d15800e1803">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1807" headers="d15800e1801"><code class="codeph">${fullyQualifiedTableName}</code></td>
<td class="cellalignment65" headers="d15800e1807 d15800e1803">
<p>The fully qualified source table name delimited by a period (<code class="codeph">.</code>). For example, <code class="codeph">MYCATALOG.MYSCHEMA.MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1820" headers="d15800e1801"><code class="codeph">${catalogName}</code></td>
<td class="cellalignment65" headers="d15800e1820 d15800e1803">
<p>The individual source catalog name. For example, <code class="codeph">MYCATALOG</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1830" headers="d15800e1801"><code class="codeph">${schemaName}</code></td>
<td class="cellalignment65" headers="d15800e1830 d15800e1803">
<p>The individual source schema name. For example, <code class="codeph">MYSCHEMA</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1840" headers="d15800e1801"><code class="codeph">${tableName}</code></td>
<td class="cellalignment65" headers="d15800e1840 d15800e1803">
<p>The individual source table name. For example, <code class="codeph">MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1850" headers="d15800e1801"><code class="codeph">${groupName}</code></td>
<td class="cellalignment65" headers="d15800e1850 d15800e1803">
<p>The name of the Replicat process (with the thread number appended if you&rsquo;re using coordinated apply).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1857" headers="d15800e1801"><code class="codeph">${emptyString}</code></td>
<td class="cellalignment65" headers="d15800e1857 d15800e1803">
<p>Evaluates to an empty string. For example,<code class="codeph">&ldquo;&rdquo;</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1866" headers="d15800e1801"><code class="codeph">${operationCount}</code></td>
<td class="cellalignment65" headers="d15800e1866 d15800e1803">
<p>The total count of operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;1024&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1879" headers="d15800e1801"><code class="codeph">${insertCount}</code></td>
<td class="cellalignment65" headers="d15800e1879 d15800e1803">
<p>The total count of insert operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;125&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1892" headers="d15800e1801"><code class="codeph">${updateCount}</code></td>
<td class="cellalignment65" headers="d15800e1892 d15800e1803">
<p>The total count of update operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;265&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1905" headers="d15800e1801"><code class="codeph">${deleteCount}</code></td>
<td class="cellalignment65" headers="d15800e1905 d15800e1803">
<p>The total count of delete operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;11&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1918" headers="d15800e1801"><code class="codeph">${truncateCount}</code></td>
<td class="cellalignment65" headers="d15800e1918 d15800e1803">
<p>The total count of truncate operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;5&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1932" headers="d15800e1801"><code class="codeph">${currentTimestamp}</code></td>
<td class="cellalignment65" headers="d15800e1932 d15800e1803">
<p>The current timestamp. The default output format for the date time is <code class="codeph">yyyy-MM-dd_HH-mm-ss.SSS</code>. For example, <code class="codeph">2017-07-05_04-31-23.123</code>. Alternatively, you can customize the format of the current timestamp by inserting the format inside square brackets like:</p>
<p><code class="codeph">${currentTimestamp[MM-dd_HH]}</code></p>
<p>This format uses the syntax defined in the Java <code class="codeph">SimpleDateFormat</code> class, see <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" target="_blank">https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1957" headers="d15800e1801"><code class="codeph">${toUpperCase[]}</code></td>
<td class="cellalignment65" headers="d15800e1957 d15800e1803">
<p>Converts the contents inside the square brackets to uppercase. For example, <code class="codeph">${toUpperCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e1967" headers="d15800e1801"><code class="codeph">${toLowerCase[]}</code></td>
<td class="cellalignment65" headers="d15800e1967 d15800e1803">
<p>Converts the contents inside the square brackets to lowercase. For example, <code class="codeph">${toLowerCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Configuration of template strings can use a mix of keywords and static strings to assemble path and data file names at runtime.</p>
<dl>
<dt class="dlterm"><a id="GUID-E86EE517-0905-4B33-9824-EA780CA8CEC8__d191e204"><!-- --></a>Path Configuration Example</dt>
<dd>
<pre dir="ltr">
/usr/local/${<span class="italic">fullyQualifiedTableName</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-E86EE517-0905-4B33-9824-EA780CA8CEC8__d191e213"><!-- --></a>Data File Configuration Example</dt>
<dd>
<pre dir="ltr">
${<span class="italic">fullyQualifiedTableName</span>}_${currentTimestamp}_${<span class="italic">groupName</span>}.<span class="italic">handlerIndicator</span>
</pre></dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-0F781456-80CE-4A1B-8DE4-C9DF797B2B6D">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B712A481-F7ED-4440-B25D-78E984BDDB58"></a>
<h4 id="GADBD-GUID-B712A481-F7ED-4440-B25D-78E984BDDB58" class="sect4"><span class="enumeration_section">5.2.1.3</span> Configuring the HDFS Event Handler</h4>
<div>
<div class="section">
<p>You configure the HDFS Handler operation using the properties file. These properties are located in the Java Adapter properties file (not in the Replicat properties file).</p>
<p>To enable the selection of the HDFS Event Handler, you must first configure the handler type by specifying <code class="codeph">gg.eventhandler.jdbc.type=hdfs</code> and the other HDFS Event properties as follows:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-B712A481-F7ED-4440-B25D-78E984BDDB58__GUID-2F0D04A3-FC62-428E-A3AC-44349A09933F">
<p class="titleintable">Table 5-2 HDFS Event Handler Configuration Properties</p>
<table class="cellalignment78" title="HDFS Event Handler Configuration Properties" summary="Five column table describing the HDFS Event Handler Configuration">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d15800e2047">Properties</th>
<th class="cellalignment79" id="d15800e2050">Required/ Optional</th>
<th class="cellalignment80" id="d15800e2053">Legal Values</th>
<th class="cellalignment81" id="d15800e2056">Default</th>
<th class="cellalignment82" id="d15800e2059">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2064" headers="d15800e2047">
<p><code class="codeph">gg.eventhandler.<code class="codeph">name</code>.type</code></p>
</td>
<td class="cellalignment83" headers="d15800e2064 d15800e2050">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e2064 d15800e2053">
<p><code class="codeph">hdfs</code></p>
</td>
<td class="cellalignment85" headers="d15800e2064 d15800e2056">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2064 d15800e2059">
<p>Selects the HDFS Event Handler for use.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2085" headers="d15800e2047">
<p><code class="codeph">gg.eventhandler.<code class="codeph">name</code>.pathMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e2085 d15800e2050">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e2085 d15800e2053">
<p>A string with resolvable keywords and constants used to dynamically generate the path in HDFS to write data files.</p>
</td>
<td class="cellalignment85" headers="d15800e2085 d15800e2056">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2085 d15800e2059">
<p>Use keywords interlaced with constants to dynamically generate a unique path names at runtime. Path names typically follow the format, <code class="codeph">/ogg/data/${groupName}/${<span class="codeinlineitalic">fullyQualifiedTableName</span>}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2111" headers="d15800e2047">
<p><code class="codeph">gg.eventhandler.name.fileNameMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e2111 d15800e2050">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2111 d15800e2053">
<p>A string with resolvable keywords and constants used to dynamically generate the HDFS file name at runtime.</p>
</td>
<td class="cellalignment85" headers="d15800e2111 d15800e2056">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2111 d15800e2059">
<p>Use keywords interlaced with constants to dynamically generate a unique file names at runtime. If not set, the upstream file name is used.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2128" headers="d15800e2047">
<p><code class="codeph">gg.eventhandler.name.finalizeAction</code></p>
</td>
<td class="cellalignment83" headers="d15800e2128 d15800e2050">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2128 d15800e2053">
<p><code class="codeph">none | delete</code></p>
</td>
<td class="cellalignment85" headers="d15800e2128 d15800e2056">
<p><code class="codeph">none</code></p>
</td>
<td class="cellalignment86" headers="d15800e2128 d15800e2059">
<p>Indicates what the File Writer Handler should do at the finalize action.</p>
<dl>
<dt class="dlterm"><a id="GUID-B712A481-F7ED-4440-B25D-78E984BDDB58__GUID-9FD5FDDF-87AE-4FDE-B13C-B77C659C29A5"><!-- --></a><code class="codeph">none</code></dt>
<dd>
<p>Leave the data file in place (removing any active write suffix, see <a href="using-file-writer-handler.htm#GUID-89F45F9E-1B22-4FBB-9AAB-B167EF648DA7">About the Active Write Suffix</a>).</p>
</dd>
<dt class="dlterm"><a id="GUID-B712A481-F7ED-4440-B25D-78E984BDDB58__GUID-8E9FF766-4FF6-4FB8-8B61-0DB943D3F4CF"><!-- --></a><code class="codeph">delete</code></dt>
<dd>
<p>Delete the data file (such as, if the data file has been converted to another format or loaded to a third party application).</p>
</dd>
</dl>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2165" headers="d15800e2047">
<p><code class="codeph">gg.eventhandler.name.kerberosPrincipal</code></p>
</td>
<td class="cellalignment83" headers="d15800e2165 d15800e2050">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2165 d15800e2053">
<p>The Kerberos principal name.</p>
</td>
<td class="cellalignment85" headers="d15800e2165 d15800e2056">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2165 d15800e2059">
<p>Set to the Kerberos principal when HDFS Kerberos authentication is enabled.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2182" headers="d15800e2047">
<p><code class="codeph">gg.eventhandler.name.keberosKeytabFile</code></p>
</td>
<td class="cellalignment83" headers="d15800e2182 d15800e2050">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2182 d15800e2053">
<p>The path to the Keberos <code>keytab</code> file.</p>
</td>
<td class="cellalignment85" headers="d15800e2182 d15800e2056">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2182 d15800e2059">
<p>Set to the path to the Kerberos <code>keytab</code> file when HDFS Kerberos authentication is enabled.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2205" headers="d15800e2047">
<p><code class="codeph">gg.eventhandler.name.eventHandler</code></p>
</td>
<td class="cellalignment83" headers="d15800e2205 d15800e2050">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2205 d15800e2053">
<p>A unique string identifier cross referencing a child event handler.</p>
</td>
<td class="cellalignment85" headers="d15800e2205 d15800e2056">
<p>No event handler configured.</p>
</td>
<td class="cellalignment86" headers="d15800e2205 d15800e2059">
<p>A unique string identifier cross referencing an event handler. The event handler will be invoked on the file roll event. Event handlers can do thing file roll event actions like loading files to S3, converting to Parquet or ORC format, or loading files to HDFS.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-0F781456-80CE-4A1B-8DE4-C9DF797B2B6D">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-ECEE8316-BCD9-47F8-91D9-AE10AFC22B7C"></a>
<h2 id="GADBD-GUID-ECEE8316-BCD9-47F8-91D9-AE10AFC22B7C" class="sect2"><span class="enumeration_section">5.3</span> Using the Optimized Row Columnar Event Handler</h2>
<div>
<p>Learn how to use the Optimized Row Columnar (ORC) Event Handler to generate data files in ORC format.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-05C191D1-5405-4C9A-B078-405B18C1CB9E">Overview</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-0BB99257-0396-4E1A-B83D-F769494C4DA4">Detailing the Functionality</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-4C1C23FF-7C40-4FE3-8D77-A6F64FECA40D">Configuring the ORC Event Handler</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-05C191D1-5405-4C9A-B078-405B18C1CB9E"></a>
<h3 id="GADBD-GUID-05C191D1-5405-4C9A-B078-405B18C1CB9E" class="sect3"><span class="enumeration_section">5.3.1</span> Overview</h3>
<div>
<div class="section">
<p>ORC is a row columnar format that can substantially improve data retrieval times and the performance of Big Data analytics. You can use the ORC Event Handler to write ORC files to either a local file system or directly to HDFS. For information, see <a href="https://orc.apache.org/" target="_blank">https://orc.apache.org/</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-ECEE8316-BCD9-47F8-91D9-AE10AFC22B7C" title="Learn how to use the Optimized Row Columnar (ORC) Event Handler to generate data files in ORC format.">Using the Optimized Row Columnar Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-0BB99257-0396-4E1A-B83D-F769494C4DA4"></a>
<h3 id="GADBD-GUID-0BB99257-0396-4E1A-B83D-F769494C4DA4" class="sect3"><span class="enumeration_section">5.3.2</span> Detailing the Functionality</h3>
<div>
<div class="section">
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-89EAAA4A-BABF-4199-B6C3-D150F8F8979A">About the Upstream Data Format</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-F9A09144-D5DF-4489-816F-172EDDEB6E1C">About the Library Dependencies</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-19167556-135C-4EB4-99C5-788DA9BC7ADA">Requirements</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-7F69212B-0241-401B-B299-102297AD7A7C">Using Templated Strings</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-ECEE8316-BCD9-47F8-91D9-AE10AFC22B7C" title="Learn how to use the Optimized Row Columnar (ORC) Event Handler to generate data files in ORC format.">Using the Optimized Row Columnar Event Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-89EAAA4A-BABF-4199-B6C3-D150F8F8979A"></a>
<h4 id="GADBD-GUID-89EAAA4A-BABF-4199-B6C3-D150F8F8979A" class="sect4"><span class="enumeration_section">5.3.2.1</span> About the Upstream Data Format</h4>
<div>
<div class="section">
<p>The ORC Event Handler can only convert Avro Object Container File (OCF) generated by the File Writer Handler. The ORC Event Handler cannot convert other formats to ORC data files. The format of the File Writer Handler must be <code class="codeph">avro_row_ocf</code> or <code class="codeph">avro_op_ocf</code>, see <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-0BB99257-0396-4E1A-B83D-F769494C4DA4">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-F9A09144-D5DF-4489-816F-172EDDEB6E1C"></a>
<h4 id="GADBD-GUID-F9A09144-D5DF-4489-816F-172EDDEB6E1C" class="sect4"><span class="enumeration_section">5.3.2.2</span> About the Library Dependencies</h4>
<div>
<div class="section">
<p>Generating ORC files requires both the Apache ORC libraries and the HDFS client libraries, see <a href="optimized-row-columnar-event-handler-client-dependencies.htm#GUID-EBB85BDD-85C6-4C1E-A181-8BDAD282ACC0" title="What are the dependencies for the Optimized Row Columnar (OCR) Handler?">Optimized Row Columnar Event Handler Client Dependencies</a> and <a href="hdfs-handler-client-dependencies.htm#GUID-1A409BCB-A8A2-41CD-B9D6-4D65D356D1A5">HDFS Handler Client Dependencies</a>.</p>
<p>Oracle GoldenGate for Big Data does not include the Apache ORC libraries nor does it include the HDFS client libraries. You must configure the <code class="codeph">gg.classpath</code> variable to include the dependent libraries.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-0BB99257-0396-4E1A-B83D-F769494C4DA4">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-19167556-135C-4EB4-99C5-788DA9BC7ADA"></a>
<h4 id="GADBD-GUID-19167556-135C-4EB4-99C5-788DA9BC7ADA" class="sect4"><span class="enumeration_section">5.3.2.3</span> Requirements</h4>
<div>
<div class="section">
<p>The ORC Event Handler can write ORC files directly to HDFS. You must set the <code class="codeph">writeToHDFS</code> property to <code class="codeph">true</code>:</p>
<pre dir="ltr">
gg.eventhandler.orc.writeToHDFS=true
</pre>
<p>Ensure that the directory containing the HDFS <code>core-site.xml</code> file is in <code class="codeph">gg.classpath</code>. This is so the <code>core-site.xml</code> file can be read at runtime and the connectivity information to HDFS can be resolved. For example:</p>
<pre dir="ltr">
gg.classpath=/{<span class="italic">HDFS_install_directory</span>}/etc/hadoop
</pre>
<p>If you enable Kerberos authentication is on the HDFS cluster, you have to configure the Kerberos principal and the location of the <code>keytab</code> file so that the password can be resolved at runtime:</p>
<pre dir="ltr">
gg.eventHandler.name.kerberosPrincipal=principal
gg.eventHandler.name.kerberosKeytabFile=<span class="italic">path_to_the_keytab_file</span>
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-0BB99257-0396-4E1A-B83D-F769494C4DA4">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-7F69212B-0241-401B-B299-102297AD7A7C"></a>
<h4 id="GADBD-GUID-7F69212B-0241-401B-B299-102297AD7A7C" class="sect4"><span class="enumeration_section">5.3.2.4</span> Using Templated Strings</h4>
<div>
<div class="section">
<p><span class="bold">Templated strings</span> can contain a combination of string constants and keywords that are dynamically resolved at runtime. The ORC Event Handler makes extensive use of templated strings to generate the ORC directory names, data file names, and ORC bucket names. This gives you the flexibility to select where to write data files and the names of those data files.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Supported Templated Strings</p>
<div class="tblformal" id="GUID-7F69212B-0241-401B-B299-102297AD7A7C__d191e19">
<table class="cellalignment71" summary="Two column table detailing the supported templated strings.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d15800e2542">Keyword</th>
<th class="cellalignment77" id="d15800e2544">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2548" headers="d15800e2542"><code class="codeph">${fullyQualifiedTableName}</code></td>
<td class="cellalignment65" headers="d15800e2548 d15800e2544">
<p>The fully qualified source table name delimited by a period (<code class="codeph">.</code>). For example, <code class="codeph">MYCATALOG.MYSCHEMA.MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2561" headers="d15800e2542"><code class="codeph">${catalogName}</code></td>
<td class="cellalignment65" headers="d15800e2561 d15800e2544">
<p>The individual source catalog name. For example, <code class="codeph">MYCATALOG</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2571" headers="d15800e2542"><code class="codeph">${schemaName}</code></td>
<td class="cellalignment65" headers="d15800e2571 d15800e2544">
<p>The individual source schema name. For example, <code class="codeph">MYSCHEMA</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2581" headers="d15800e2542"><code class="codeph">${tableName}</code></td>
<td class="cellalignment65" headers="d15800e2581 d15800e2544">
<p>The individual source table name. For example, <code class="codeph">MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2591" headers="d15800e2542"><code class="codeph">${groupName}</code></td>
<td class="cellalignment65" headers="d15800e2591 d15800e2544">
<p>The name of the Replicat process (with the thread number appended if you&rsquo;re using coordinated apply).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2598" headers="d15800e2542"><code class="codeph">${emptyString}</code></td>
<td class="cellalignment65" headers="d15800e2598 d15800e2544">
<p>Evaluates to an empty string. For example,<code class="codeph">&ldquo;&rdquo;</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2607" headers="d15800e2542"><code class="codeph">${operationCount}</code></td>
<td class="cellalignment65" headers="d15800e2607 d15800e2544">
<p>The total count of operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;1024&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2620" headers="d15800e2542"><code class="codeph">${insertCount}</code></td>
<td class="cellalignment65" headers="d15800e2620 d15800e2544">
<p>The total count of insert operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;125&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2633" headers="d15800e2542"><code class="codeph">${updateCount}</code></td>
<td class="cellalignment65" headers="d15800e2633 d15800e2544">
<p>The total count of update operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;265&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2646" headers="d15800e2542"><code class="codeph">${deleteCount}</code></td>
<td class="cellalignment65" headers="d15800e2646 d15800e2544">
<p>The total count of delete operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;11&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2659" headers="d15800e2542"><code class="codeph">${truncateCount}</code></td>
<td class="cellalignment65" headers="d15800e2659 d15800e2544">
<p>The total count of truncate operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;5&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2673" headers="d15800e2542"><code class="codeph">${currentTimestamp}</code></td>
<td class="cellalignment65" headers="d15800e2673 d15800e2544">
<p>The current timestamp. The default output format for the date time is <code class="codeph">yyyy-MM-dd_HH-mm-ss.SSS</code>. For example, <code class="codeph">2017-07-05_04-31-23.123</code>. Alternatively, you can customize the format of the current timestamp by inserting the format inside square brackets like:</p>
<p><code class="codeph">${currentTimestamp[MM-dd_HH]}</code></p>
<p>This format uses the syntax defined in the Java <code class="codeph">SimpleDateFormat</code> class, see <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" target="_blank">https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2698" headers="d15800e2542"><code class="codeph">${toUpperCase[]}</code></td>
<td class="cellalignment65" headers="d15800e2698 d15800e2544">
<p>Converts the contents inside the square brackets to uppercase. For example, <code class="codeph">${toUpperCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e2708" headers="d15800e2542"><code class="codeph">${toLowerCase[]}</code></td>
<td class="cellalignment65" headers="d15800e2708 d15800e2544">
<p>Converts the contents inside the square brackets to lowercase. For example, <code class="codeph">${toLowerCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Configuration of template strings can use a mix of keywords and static strings to assemble path and data file names at runtime.</p>
<dl>
<dt class="dlterm"><a id="GUID-7F69212B-0241-401B-B299-102297AD7A7C__d191e204"><!-- --></a>Path Configuration Example</dt>
<dd>
<pre dir="ltr">
/usr/local/${<span class="italic">fullyQualifiedTableName</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-7F69212B-0241-401B-B299-102297AD7A7C__d191e213"><!-- --></a>Data File Configuration Example</dt>
<dd>
<pre dir="ltr">
${<span class="italic">fullyQualifiedTableName</span>}_${currentTimestamp}_${<span class="italic">groupName</span>}.<span class="italic">handlerIndicator</span>
</pre></dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-0BB99257-0396-4E1A-B83D-F769494C4DA4">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-4C1C23FF-7C40-4FE3-8D77-A6F64FECA40D"></a>
<h3 id="GADBD-GUID-4C1C23FF-7C40-4FE3-8D77-A6F64FECA40D" class="sect3"><span class="enumeration_section">5.3.3</span> Configuring the ORC Event Handler</h3>
<div>
<div class="section">
<p>You configure the ORC Handler operation using the properties file. These properties are located in the Java Adapter properties file (not in the Replicat properties file).</p>
<p>The ORC Event Handler works only in conjunction with the File Writer Handler.</p>
<p>To enable the selection of the ORC Handler, you must first configure the handler type by specifying <code class="codeph">gg.eventhandler.name.type=orc</code> and the other ORC properties as follows:</p>
<div class="tblformal" id="GUID-4C1C23FF-7C40-4FE3-8D77-A6F64FECA40D__GUID-2F0D04A3-FC62-428E-A3AC-44349A09933F">
<p class="titleintable">Table 5-3 ORC Event Handler Configuration Properties</p>
<table class="cellalignment78" title="ORC Event Handler Configuration Properties" summary="Five column table describing the ORC Event Handler Configuration">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d15800e2792">Properties</th>
<th class="cellalignment79" id="d15800e2795">Required/ Optional</th>
<th class="cellalignment80" id="d15800e2798">Legal Values</th>
<th class="cellalignment81" id="d15800e2801">Default</th>
<th class="cellalignment82" id="d15800e2804">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2809" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.type</code></p>
</td>
<td class="cellalignment83" headers="d15800e2809 d15800e2795">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e2809 d15800e2798">
<p><code class="codeph">ORC</code></p>
</td>
<td class="cellalignment85" headers="d15800e2809 d15800e2801">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2809 d15800e2804">
<p>Selects the ORC Event Handler.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2830" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.writeToHDFS</code></p>
</td>
<td class="cellalignment83" headers="d15800e2830 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2830 d15800e2798">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e2830 d15800e2801">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment86" headers="d15800e2830 d15800e2804">
<p>The ORC framework allows direct writing to HDFS. Set to <code class="codeph">false</code> to write to the local file system. Set to <code class="codeph">true</code> to write directly to HDFS.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2858" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.pathMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e2858 d15800e2795">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e2858 d15800e2798">
<p>A string with resolvable keywords and constants used to dynamically generate the path in the ORC bucket to write the file.</p>
</td>
<td class="cellalignment85" headers="d15800e2858 d15800e2801">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2858 d15800e2804">
<p>Use keywords interlaced with constants to dynamically generate a unique ORC path names at runtime. Typically, path names follow the format, <code class="codeph">/ogg/data/${groupName}/${<span class="codeinlineitalic">fullyQualifiedTableName</span>}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2884" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.fileMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e2884 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2884 d15800e2798">
<p>A string with resolvable keywords and constants used to dynamically generate the ORC file name at runtime.</p>
</td>
<td class="cellalignment85" headers="d15800e2884 d15800e2801">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2884 d15800e2804">
<p>Use resolvable keywords and constants used to dynamically generate the ORC data file name at runtime. If not set, the upstream file name is used.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2904" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.compressionCodec</code></p>
</td>
<td class="cellalignment83" headers="d15800e2904 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2904 d15800e2798">
<p><code class="codeph">LZ4 | LZO | NONE | SNAPPY | ZLIB</code></p>
</td>
<td class="cellalignment85" headers="d15800e2904 d15800e2801">
<p><code class="codeph">NONE</code></p>
</td>
<td class="cellalignment86" headers="d15800e2904 d15800e2804">
<p>Sets the compression codec of the generated ORC file.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2926" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.finalizeAction</code></p>
</td>
<td class="cellalignment83" headers="d15800e2926 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2926 d15800e2798">
<p><code class="codeph">none | delete</code></p>
</td>
<td class="cellalignment85" headers="d15800e2926 d15800e2801">
<p><code class="codeph">none</code></p>
</td>
<td class="cellalignment86" headers="d15800e2926 d15800e2804">
<p>Set to <code class="codeph">none</code> to leave the ORC data file in place on the finalize action. Set to <code class="codeph">delete</code> if you want to delete the ORC data file with the finalize action.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2954" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.kerberosPrincipal</code></p>
</td>
<td class="cellalignment83" headers="d15800e2954 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2954 d15800e2798">
<p>The Kerberos principal name.</p>
</td>
<td class="cellalignment85" headers="d15800e2954 d15800e2801">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e2954 d15800e2804">
<p>Sets the Kerberos principal when writing directly to HDFS and Kerberos authentication is enabled.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e2974" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.keberosKeytabFile</code></p>
</td>
<td class="cellalignment83" headers="d15800e2974 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e2974 d15800e2798">
<p>The path to the Keberos <code class="codeph">keytab</code> file.</p>
</td>
<td class="cellalignment85" headers="d15800e2974 d15800e2801">
<p><code class="codeph">none</code></p>
</td>
<td class="cellalignment86" headers="d15800e2974 d15800e2804">
<p>Sets the path to the Kerberos <code class="codeph">keytab</code> file with writing directly to HDFS and Kerberos authentication is enabled.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3001" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.blockPadding</code></p>
</td>
<td class="cellalignment83" headers="d15800e3001 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3001 d15800e2798">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e3001 d15800e2801">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment86" headers="d15800e3001 d15800e2804">
<p>Set to <code class="codeph">true</code> to enable block padding in generated ORC files or <code class="codeph">false</code> to disable.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3029" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.blockSize</code></p>
</td>
<td class="cellalignment83" headers="d15800e3029 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3029 d15800e2798">
<p><code class="codeph">long</code></p>
</td>
<td class="cellalignment85" headers="d15800e3029 d15800e2801">
<p>The ORC default.</p>
</td>
<td class="cellalignment86" headers="d15800e3029 d15800e2804">
<p>Sets the block size of generated ORC files.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3050" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.bufferSize</code></p>
</td>
<td class="cellalignment83" headers="d15800e3050 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3050 d15800e2798">
<p><code class="codeph">integer</code></p>
</td>
<td class="cellalignment85" headers="d15800e3050 d15800e2801">
<p>The ORC default.</p>
</td>
<td class="cellalignment86" headers="d15800e3050 d15800e2804">
<p>Sets the buffer size of generated ORC files.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3072" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.encodingStrategy</code></p>
</td>
<td class="cellalignment83" headers="d15800e3072 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3072 d15800e2798">
<p><code class="codeph">COMPRESSION | SPEED</code></p>
</td>
<td class="cellalignment85" headers="d15800e3072 d15800e2801">
<p>The ORC default.</p>
</td>
<td class="cellalignment86" headers="d15800e3072 d15800e2804">
<p>Set if the ORC encoding strategy is optimized for compression or for speed..</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3093" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.paddingTolerance</code></p>
</td>
<td class="cellalignment83" headers="d15800e3093 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3093 d15800e2798">
<p>A percentage represented as a floating point number.</p>
</td>
<td class="cellalignment85" headers="d15800e3093 d15800e2801">
<p>The ORC default.</p>
</td>
<td class="cellalignment86" headers="d15800e3093 d15800e2804">
<p>Sets the percentage for padding tolerance of generated ORC files.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3113" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.rowIndexStride</code></p>
</td>
<td class="cellalignment83" headers="d15800e3113 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3113 d15800e2798">
<p><code class="codeph">integer</code></p>
</td>
<td class="cellalignment85" headers="d15800e3113 d15800e2801">
<p>The ORC default.</p>
</td>
<td class="cellalignment86" headers="d15800e3113 d15800e2804">
<p>Sets the row index stride of generated ORC files.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3134" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.name.stripeSize</code></p>
</td>
<td class="cellalignment83" headers="d15800e3134 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3134 d15800e2798">
<p><code class="codeph">integer</code></p>
</td>
<td class="cellalignment85" headers="d15800e3134 d15800e2801">
<p>The ORC default.</p>
</td>
<td class="cellalignment86" headers="d15800e3134 d15800e2804">
<p>Sets the stripe size of generated ORC files.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3152" headers="d15800e2792">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.eventHandler</code></p>
</td>
<td class="cellalignment83" headers="d15800e3152 d15800e2795">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3152 d15800e2798">
<p>A unique string identifier cross referencing a child event handler.</p>
</td>
<td class="cellalignment85" headers="d15800e3152 d15800e2801">
<p>No event handler configured.</p>
</td>
<td class="cellalignment86" headers="d15800e3152 d15800e2804">
<p>The event handler that is invoked on the file roll event. Event handlers can do file roll event actions like loading files to S3 or HDFS.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-ECEE8316-BCD9-47F8-91D9-AE10AFC22B7C" title="Learn how to use the Optimized Row Columnar (ORC) Event Handler to generate data files in ORC format.">Using the Optimized Row Columnar Event Handler</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160"></a>
<h2 id="GADBD-GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160" class="sect2"><span class="enumeration_section">5.4</span> Using the Oracle Cloud Infrastructure Event Handler</h2>
<div>
<p>Learn how to use the Oracle Cloud Infrastructure Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Object Store.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-26E84AF1-632D-44CF-858C-93244CD17CFA">Overview</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-4E66036F-8214-4D90-A873-7AFD9EC2EE9D">Detailing the Functionality</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-C4A916EB-3ACA-485F-B5C0-6C721A5B7873">Configuring the Oracle Cloud Infrastructure Event Handler</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-C87C4CF3-20C9-47B5-A76E-C395A8630990">Configuring Credentials for Oracle Cloud Infrastructure</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-C9F50DD6-4134-4341-86CE-CB5C6707A740">Using Templated Strings</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-A3FECEB3-FFEB-440C-A8D0-7CF77CB59DB0">Troubleshooting</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-26E84AF1-632D-44CF-858C-93244CD17CFA"></a>
<h3 id="GADBD-GUID-26E84AF1-632D-44CF-858C-93244CD17CFA" class="sect3"><span class="enumeration_section">5.4.1</span> Overview</h3>
<div>
<div class="section">
<p>The Oracle Cloud Infrastructure Object Storage service is an internet-scale, high-performance storage platform that offers reliable and cost-efficient data durability. The Object Storage service can store an unlimited amount of unstructured data of any content type, including analytic data and rich content, like images and videos, see <a href="https://cloud.oracle.com/en_US/cloud-infrastructure" target="_blank">https://cloud.oracle.com/en_US/cloud-infrastructure</a>.</p>
<p>You can use any format handler that the File Writer Handler supports.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160" title="Learn how to use the Oracle Cloud Infrastructure Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Object Store.">Using the Oracle Cloud Infrastructure Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-4E66036F-8214-4D90-A873-7AFD9EC2EE9D"></a>
<h3 id="GADBD-GUID-4E66036F-8214-4D90-A873-7AFD9EC2EE9D" class="sect3"><span class="enumeration_section">5.4.2</span> Detailing the Functionality</h3>
<div>
<div class="section">
<p>The Oracle Cloud Infrastructure Event Handler requires the Oracle Cloud Infrastructure Java software development kit (SDK) to transfer files to Oracle Cloud Infrastructure Object Storage. Oracle GoldenGate for Big Data does not include the Oracle Cloud Infrastructure Java SDK, see<a href="https://docs.cloud.oracle.com/iaas/Content/API/Concepts/sdkconfig.htm" target="_blank">https://docs.cloud.oracle.com/iaas/Content/API/Concepts/sdkconfig.htm</a>.</p>
<p>You must download the Oracle Cloud Infrastructure Java SDK at:</p>
<p><a href="https://docs.cloud.oracle.com/iaas/Content/API/SDKDocs/javasdk.htm" target="_blank">https://docs.us-phoenix-1.oraclecloud.com/Content/API/SDKDocs/javasdk.htm</a></p>
<p>Extract the JAR files to a permanent directory. There are two directories required by the handler, the JAR library directory that has Oracle Cloud Infrastructure SDK JAR and a third-party JAR library. Both directories must be in the <code class="codeph">gg.classpath</code>.</p>
<p>Specify the <code class="codeph">gg.classpath</code> environment variable to include the JAR files of the Oracle Cloud Infrastructure Java SDK.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Example</p>
<pre dir="ltr">
gg.classpath=/usr/var/oci/lib/*:/usr/var/oci/third-party/lib/*
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160" title="Learn how to use the Oracle Cloud Infrastructure Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Object Store.">Using the Oracle Cloud Infrastructure Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-C4A916EB-3ACA-485F-B5C0-6C721A5B7873"></a>
<h3 id="GADBD-GUID-C4A916EB-3ACA-485F-B5C0-6C721A5B7873" class="sect3"><span class="enumeration_section">5.4.3</span> Configuring the Oracle Cloud Infrastructure Event Handler</h3>
<div>
<div class="section">
<p>You configure the Oracle Cloud Infrastructure Event Handler operation using the properties file. These properties are located in the Java Adapter properties file (not in the Replicat properties file).</p>
<p>The Oracle Cloud Infrastructure Event Handler works only in conjunction with the File Writer Handler.</p>
<p>To enable the selection of the Oracle Cloud Infrastructure Event Handler, you must first configure the handler type by specifying <code class="codeph">gg.eventhandler.name.type=oci</code> and the other Oracle Cloud Infrastructure properties as follows:</p>
<div class="tblformal" id="GUID-C4A916EB-3ACA-485F-B5C0-6C721A5B7873__GUID-2F0D04A3-FC62-428E-A3AC-44349A09933F">
<p class="titleintable">Table 5-4 Oracle Cloud Infrastructure Event Handler Configuration Properties</p>
<table class="cellalignment78" title="Oracle Cloud Infrastructure Event Handler Configuration Properties" summary="Five column table describing the Oracle Cloud Infrastructure Event Handler Configuration">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d15800e3380">Properties</th>
<th class="cellalignment79" id="d15800e3383">Required/ Optional</th>
<th class="cellalignment80" id="d15800e3386">Legal Values</th>
<th class="cellalignment81" id="d15800e3389">Default</th>
<th class="cellalignment82" id="d15800e3392">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3397" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.type</code></p>
</td>
<td class="cellalignment83" headers="d15800e3397 d15800e3383">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e3397 d15800e3386">
<p><code class="codeph">oci</code></p>
</td>
<td class="cellalignment85" headers="d15800e3397 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3397 d15800e3392">
<p>Selects the Oracle Cloud Infrastructure Event Handler.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3418" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.configFilePath</code></p>
</td>
<td class="cellalignment83" headers="d15800e3418 d15800e3383">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e3418 d15800e3386">
<p>Path to the event handler <code class="codeph">config</code> file.</p>
</td>
<td class="cellalignment85" headers="d15800e3418 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3418 d15800e3392">
<p>The configuration file name and location.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3441" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.profile</code></p>
</td>
<td class="cellalignment83" headers="d15800e3441 d15800e3383">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e3441 d15800e3386">
<p>Valid string representing the profile name.</p>
</td>
<td class="cellalignment85" headers="d15800e3441 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3441 d15800e3392">
<p>In the Oracle Cloud Infrastructure <code class="codeph">config</code> file, the entries are identified by the profile name. The default profile is <code class="codeph">DEFAULT</code>. You can have an additional profile like <code class="codeph">ADMIN_USER</code>. Any value that isn't explicitly defined for the <code class="codeph">ADMIN_USER</code> profile (or any other profiles that you add to the <code class="codeph">config</code> file) is inherited from the <code class="codeph">DEFAULT</code> profile.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3480" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.namespace</code></p>
</td>
<td class="cellalignment83" headers="d15800e3480 d15800e3383">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e3480 d15800e3386">
<p>Oracle Cloud Infrastructure namespace.</p>
</td>
<td class="cellalignment85" headers="d15800e3480 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3480 d15800e3392">
<p>The namespace serves as a top-level container for all buckets and objects and allows you to control bucket naming within user&rsquo;s tenancy. The Object Storage namespace is a system-generated string assigned during account creation. Your namespace string is listed in Object Storage Settings while using the Oracle Cloud Infrastructure Console.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3500" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.region</code></p>
</td>
<td class="cellalignment83" headers="d15800e3500 d15800e3383">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e3500 d15800e3386">
<p>Oracle Cloud Infrastructure region</p>
</td>
<td class="cellalignment85" headers="d15800e3500 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3500 d15800e3392">
<p>Oracle Cloud Infrastructure Servers and Data is hosted in a region and is a localized geographic area. There are four supported regions. For example:</p>
<pre dir="ltr">
London Heathrow("uk-london-1")
Frankfurt("eu-frankfurt-1")
Ashburn("us-ashburn-1")
Phoenix("us-phoenix-1").
</pre></td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3522" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.compartmentID</code></p>
</td>
<td class="cellalignment83" headers="d15800e3522 d15800e3383">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e3522 d15800e3386">
<p>Valid compartment id.</p>
</td>
<td class="cellalignment85" headers="d15800e3522 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3522 d15800e3392">
<p>A compartment is a logical container to organize Oracle Cloud Infrastructure resources. The <code class="codeph">compartmentID</code> is listed in Bucket Details while using the Oracle Cloud Infrastructure Console.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3545" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.pathMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e3545 d15800e3383">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e3545 d15800e3386">
<p>A string with resolvable keywords and constants used to dynamically generate the path in the Oracle Cloud Infrastructure bucket to write the file.</p>
</td>
<td class="cellalignment85" headers="d15800e3545 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3545 d15800e3392">
<p>Use keywords interlaced with constants to dynamically generate unique Oracle Cloud Infrastructure path names at runtime.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3565" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.fileMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e3565 d15800e3383">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3565 d15800e3386">
<p>A string with resolvable keywords and constants used to dynamically generate the Oracle Cloud Infrastructure file name at runtime.</p>
</td>
<td class="cellalignment85" headers="d15800e3565 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3565 d15800e3392">
<p>Use resolvable keywords and constants to dynamically generate the Oracle Cloud Infrastructure data file name at runtime. If not set, the upstream file name is used.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3585" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.bucketMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e3585 d15800e3383">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e3585 d15800e3386">
<p>A string with resolvable keywords and constants used to dynamically generate the path in the Oracle Cloud Infrastructure bucket to write the file.</p>
</td>
<td class="cellalignment85" headers="d15800e3585 d15800e3389">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e3585 d15800e3392">
<p>Use resolvable keywords and constants used to dynamically generate the Oracle Cloud Infrastructure bucket name at runtime. The event handler attempts to create the Oracle Cloud Infrastructure bucket if it does not exist.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3605" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.finalizeAction</code></p>
</td>
<td class="cellalignment83" headers="d15800e3605 d15800e3383">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3605 d15800e3386">
<p><code class="codeph">none</code> | <code class="codeph">delete</code></p>
</td>
<td class="cellalignment85" headers="d15800e3605 d15800e3389">
<p><code class="codeph">none</code></p>
</td>
<td class="cellalignment86" headers="d15800e3605 d15800e3392">
<p>Set to <code class="codeph">none</code> to leave the Oracle Cloud Infrastructure data file in place on the finalize action. Set to <code class="codeph">delete</code> if you want to delete the Oracle Cloud Infrastructure data file with the finalize action.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e3636" headers="d15800e3380">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.eventHandler</code></p>
</td>
<td class="cellalignment83" headers="d15800e3636 d15800e3383">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e3636 d15800e3386">
<p>A unique string identifier cross referencing a child event handler.</p>
</td>
<td class="cellalignment85" headers="d15800e3636 d15800e3389">
<p>No event handler is configured.</p>
</td>
<td class="cellalignment86" headers="d15800e3636 d15800e3392">
<p>Sets the event handler that is invoked on the file roll event. Event handlers can do file roll event actions like loading files to S3, converting to Parquet or ORC format, loading files to HDFS, loading files to Oracle Cloud Infrastructure Storage Classic, or loading file to Oracle Cloud Infrastructure.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Sample Configuration</p>
<pre dir="ltr">
gg.eventhandler.oci.type=oci
gg.eventhandler.oci.configFilePath=~/.oci/config
gg.eventhandler.oci.profile=DEFAULT
gg.eventhandler.oci.namespace=<span class="italic">dwcsdemo</span>
gg.eventhandler.oci.region=<span class="italic">us-ashburn-1</span>
gg.eventhandler.oci.compartmentID=<span class="italic">ocid1.compartment.oc1..aaaaaaaajdg6iblwgqlyqpegf6kwdais2gyx3guspboa7fsi72tfihz2wrba</span>
gg.eventhandler.oci.pathMappingTemplate=${schemaName}
gg.eventhandler.oci.bucketMappingTemplate=${schemaName}
gg.eventhandler.oci.fileNameMappingTemplate=${tableName}_${currentTimestamp}.txt
gg.eventhandler.oci.finalizeAction=NONE
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160" title="Learn how to use the Oracle Cloud Infrastructure Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Object Store.">Using the Oracle Cloud Infrastructure Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-C87C4CF3-20C9-47B5-A76E-C395A8630990"></a>
<h3 id="GADBD-GUID-C87C4CF3-20C9-47B5-A76E-C395A8630990" class="sect3"><span class="enumeration_section">5.4.4</span> Configuring Credentials for Oracle Cloud Infrastructure</h3>
<div>
<div class="section">
<p>Basic configuration information like user credentials and tenancy Oracle Cloud IDs (OCIDs) of Oracle Cloud Infrastructure is required for the Java SDKs to work, see <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm" target="_blank">https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm</a>.</p>
<p>The ideal configuration file include keys <code class="codeph">user</code>, <code class="codeph">fingerprint</code>, <code class="codeph">key_file</code>, <code class="codeph">tenancy</code>, and <code class="codeph">region</code> with their respective values. The default configuration file name and location is <code class="codeph">~/.oci/config</code>.</p>
<p>Create the <code class="codeph">config</code> file as follows:</p>
<ol>
<li>
<p>Create a directory called <code class="codeph">.oci</code> in the <span>Oracle GoldenGate for Big Data</span> home directory</p>
</li>
<li>
<p>Create a text file and name it <code class="codeph">config</code>.</p>
</li>
<li>
<p>Obtain the values for these properties:</p>
<dl>
<dt class="dlterm"><a id="GUID-C87C4CF3-20C9-47B5-A76E-C395A8630990__GUID-E7757F8F-BF80-4ED1-BE3E-F1D045D00748"><!-- --></a><code class="codeph">user</code></dt>
<dd>
<ol>
<li>
<p>Login to the Oracle Cloud Infrastructure Console <a href="https://console.us-ashburn-1.oraclecloud.com" target="_blank">https://console.us-ashburn-1.oraclecloud.com</a>.</p>
</li>
<li>
<p>Click <span class="bold">Username</span>.</p>
</li>
<li>
<p>Click <span class="bold">User Settings</span>.</p>
<p>The User's OCID is displayed and is the value for the key user.</p>
</li>
</ol>
</dd>
<dt class="dlterm"><a id="GUID-C87C4CF3-20C9-47B5-A76E-C395A8630990__GUID-57966621-0842-4806-9A18-A84C2F274E46"><!-- --></a><code class="codeph">tenancy</code></dt>
<dd>
<p>The Tenancy ID is displayed at the bottom of the Console page.</p>
</dd>
<dt class="dlterm"><a id="GUID-C87C4CF3-20C9-47B5-A76E-C395A8630990__GUID-94031737-E616-4073-BEB6-E2B02302E853"><!-- --></a><code class="codeph">region</code></dt>
<dd>
<p>The region is displayed with the header session drop-down menu in the Console.</p>
</dd>
<dt class="dlterm"><a id="GUID-C87C4CF3-20C9-47B5-A76E-C395A8630990__GUID-9F8E2645-A05F-4615-A8E6-7BBEE8A66841"><!-- --></a><code class="codeph">fingerprint</code></dt>
<dd>
<p>To generate the fingerprint, use the <cite>How to Get the Key's Fingerprint</cite> instructions at:</p>
<p><a href="https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm" target="_blank">https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm</a></p>
</dd>
<dt class="dlterm"><a id="GUID-C87C4CF3-20C9-47B5-A76E-C395A8630990__GUID-70D914AB-D0C5-4786-B0FA-EC0662A27031"><!-- --></a><code class="codeph">key_file</code></dt>
<dd>
<p>You need to share the public and private key to establish a connection with Oracle Cloud Infrastructure. To generate the keys, use the <cite>How to Generate an API Signing Key</cite>at:</p>
<p><a href="https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm" target="_blank">https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm</a></p>
</dd>
</dl>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Sample config File</p>
<pre dir="ltr">
user=ocid1.user.oc1..aaaaaaaat5nvwcna5j6aqzqedqw3rynjq
fingerprint=20:3b:97:13::4e:c5:3a:34
key_file=~/.oci/oci_api_key.pem
tenancy=ocid1.tenancy.oc1..aaaaaaaaba3pv6wkcr44h25vqstifs
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160" title="Learn how to use the Oracle Cloud Infrastructure Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Object Store.">Using the Oracle Cloud Infrastructure Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-C9F50DD6-4134-4341-86CE-CB5C6707A740"></a>
<h3 id="GADBD-GUID-C9F50DD6-4134-4341-86CE-CB5C6707A740" class="sect3"><span class="enumeration_section">5.4.5</span> Using Templated Strings</h3>
<div>
<div class="section">
<p><span class="bold">Templated strings</span> can contain a combination of string constants and keywords that are dynamically resolved at runtime. This event handler makes extensive use of templated strings to generate the Oracle Cloud Infrastructure directory names, data file names, and Oracle Cloud Infrastructure bucket names. These strings give you the flexibility to select where to write data files and the names of those data files. You should exercise caution when choosing file and directory names to avoid file naming collisions that can result in an abend.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Supported Templated Strings</p>
<div class="tblformal" id="GUID-C9F50DD6-4134-4341-86CE-CB5C6707A740__d191e19">
<table class="cellalignment71" summary="Two column table detailing the supported templated strings.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d15800e3865">Keyword</th>
<th class="cellalignment77" id="d15800e3867">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3871" headers="d15800e3865"><code class="codeph">${fullyQualifiedTableName}</code></td>
<td class="cellalignment65" headers="d15800e3871 d15800e3867">
<p>The fully qualified source table name delimited by a period (<code class="codeph">.</code>). For example, <code class="codeph">MYCATALOG.MYSCHEMA.MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3884" headers="d15800e3865"><code class="codeph">${catalogName}</code></td>
<td class="cellalignment65" headers="d15800e3884 d15800e3867">
<p>The individual source catalog name. For example, <code class="codeph">MYCATALOG</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3894" headers="d15800e3865"><code class="codeph">${schemaName}</code></td>
<td class="cellalignment65" headers="d15800e3894 d15800e3867">
<p>The individual source schema name. For example, <code class="codeph">MYSCHEMA</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3904" headers="d15800e3865"><code class="codeph">${tableName}</code></td>
<td class="cellalignment65" headers="d15800e3904 d15800e3867">
<p>The individual source table name. For example, <code class="codeph">MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3914" headers="d15800e3865"><code class="codeph">${groupName}</code></td>
<td class="cellalignment65" headers="d15800e3914 d15800e3867">
<p>The name of the Replicat process (with the thread number appended if you&rsquo;re using coordinated apply).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3921" headers="d15800e3865"><code class="codeph">${emptyString}</code></td>
<td class="cellalignment65" headers="d15800e3921 d15800e3867">
<p>Evaluates to an empty string. For example,<code class="codeph">&ldquo;&rdquo;</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3930" headers="d15800e3865"><code class="codeph">${operationCount}</code></td>
<td class="cellalignment65" headers="d15800e3930 d15800e3867">
<p>The total count of operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;1024&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3943" headers="d15800e3865"><code class="codeph">${insertCount}</code></td>
<td class="cellalignment65" headers="d15800e3943 d15800e3867">
<p>The total count of insert operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;125&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3956" headers="d15800e3865"><code class="codeph">${updateCount}</code></td>
<td class="cellalignment65" headers="d15800e3956 d15800e3867">
<p>The total count of update operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;265&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3969" headers="d15800e3865"><code class="codeph">${deleteCount}</code></td>
<td class="cellalignment65" headers="d15800e3969 d15800e3867">
<p>The total count of delete operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;11&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3982" headers="d15800e3865"><code class="codeph">${truncateCount}</code></td>
<td class="cellalignment65" headers="d15800e3982 d15800e3867">
<p>The total count of truncate operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;5&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e3996" headers="d15800e3865"><code class="codeph">${currentTimestamp}</code></td>
<td class="cellalignment65" headers="d15800e3996 d15800e3867">
<p>The current timestamp. The default output format for the date time is <code class="codeph">yyyy-MM-dd_HH-mm-ss.SSS</code>. For example, <code class="codeph">2017-07-05_04-31-23.123</code>. Alternatively, you can customize the format of the current timestamp by inserting the format inside square brackets like:</p>
<p><code class="codeph">${currentTimestamp[MM-dd_HH]}</code></p>
<p>This format uses the syntax defined in the Java <code class="codeph">SimpleDateFormat</code> class, see <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" target="_blank">https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4021" headers="d15800e3865"><code class="codeph">${toUpperCase[]}</code></td>
<td class="cellalignment65" headers="d15800e4021 d15800e3867">
<p>Converts the contents inside the square brackets to uppercase. For example, <code class="codeph">${toUpperCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4031" headers="d15800e3865"><code class="codeph">${toLowerCase[]}</code></td>
<td class="cellalignment65" headers="d15800e4031 d15800e3867">
<p>Converts the contents inside the square brackets to lowercase. For example, <code class="codeph">${toLowerCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Configuration of template strings can use a mix of keywords and static strings to assemble path and data file names at runtime.</p>
<dl>
<dt class="dlterm"><a id="GUID-C9F50DD6-4134-4341-86CE-CB5C6707A740__d191e204"><!-- --></a>Path Configuration Example</dt>
<dd>
<pre dir="ltr">
/usr/local/${<span class="italic">fullyQualifiedTableName</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-C9F50DD6-4134-4341-86CE-CB5C6707A740__d191e213"><!-- --></a>Data File Configuration Example</dt>
<dd>
<pre dir="ltr">
${<span class="italic">fullyQualifiedTableName</span>}_${currentTimestamp}_${<span class="italic">groupName</span>}.<span class="italic">handlerIndicator</span>
</pre></dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Requirements</p>
<p>The directory and file names generated using the templates must be legal on the system being written to. File names must be unique to avoid a file name collision. You can avoid a collision by adding a current timestamp using the <code class="codeph">${currentTimestamp}</code> keyword. If you are using coordinated apply, then adding <code class="codeph">${groupName}</code> into the data file name is recommended.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160" title="Learn how to use the Oracle Cloud Infrastructure Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Object Store.">Using the Oracle Cloud Infrastructure Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A3FECEB3-FFEB-440C-A8D0-7CF77CB59DB0"></a>
<h3 id="GADBD-GUID-A3FECEB3-FFEB-440C-A8D0-7CF77CB59DB0" class="sect3"><span class="enumeration_section">5.4.6</span> Troubleshooting</h3>
<div>
<div class="section">
<p class="subhead3">Connectivity Issues</p>
<p>If the event handler is unable to connect to the Oracle Cloud Infrastructure Classic Object when running on-premise, it&rsquo;s likely your connectivity to the public internet is protected by a proxy server. Proxy servers act a gateway between the private network of a company and the public internet. Contact your network administrator to get the URLs of your proxy server, and then setup up a proxy server.</p>
<p>Oracle GoldenGate for Big Data can be used with a proxy server using the following Java run time arguments to enable the proxy server as in this example:</p>
<pre dir="ltr">
-Dhttps.proxyHost=www-proxy.us.company.com 
-Dhttps.proxyPort=80   
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">ClassNotFoundException Error</p>
<p>The most common initial error is an incorrect classpath that does not include all the required client libraries so results in a <code class="codeph">ClassNotFoundException</code> error. Specify the <code class="codeph">gg.classpath</code> variable to include all of the required JAR files for the Oracle Cloud Infrastructure Java SDK, see <a href="using-file-writer-handler.htm#GUID-4E66036F-8214-4D90-A873-7AFD9EC2EE9D">Detailing the Functionality</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-A89C0670-020A-4C8B-8A0F-F6715C80D160" title="Learn how to use the Oracle Cloud Infrastructure Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Object Store.">Using the Oracle Cloud Infrastructure Event Handler</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-1396E75A-5095-425A-BFA2-30C4524262FC"></a>
<h2 id="GADBD-GUID-1396E75A-5095-425A-BFA2-30C4524262FC" class="sect2"><span class="enumeration_section">5.5</span> Using the Oracle Cloud Infrastructure Classic Event Handler</h2>
<div>
<p>Learn how to use the Oracle Cloud Infrastructure Classic Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Classic Object Store.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-5ED3BB3F-299A-4BF0-B070-E3AE0D695F40">Overview</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-43ADAC97-043B-4763-BBE3-9C0BA4573E9A">Detailing the Functionality</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-1E96BDF5-E8DE-4977-B062-EE1255FCC67E">Configuring the Oracle Cloud Infrastructure Classic Event Handler</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#unique_18065469">Using Templated Strings</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#unique_308448375">Troubleshooting</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-5ED3BB3F-299A-4BF0-B070-E3AE0D695F40"></a>
<h3 id="GADBD-GUID-5ED3BB3F-299A-4BF0-B070-E3AE0D695F40" class="sect3"><span class="enumeration_section">5.5.1</span> Overview</h3>
<div>
<div class="section">
<p id="GUID-5ED3BB3F-299A-4BF0-B070-E3AE0D695F40__THEORACLECLOUDINFRASTRUCTUREOBJECTC-C0AFC08F">The Oracle Cloud Infrastructure Object Classic service is an Infrastructure as a Service (IaaS) product that provides an enterprise-grade, large-scale, object storage solution for files and unstructured data., see <a href="https://cloud.oracle.com/storage-classic" target="_blank">https://cloud.oracle.com/storage-classic</a>.</p>
<p>You can use any format handler that the File Writer Handler supports.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-1396E75A-5095-425A-BFA2-30C4524262FC" title="Learn how to use the Oracle Cloud Infrastructure Classic Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Classic Object Store.">Using the Oracle Cloud Infrastructure Classic Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-43ADAC97-043B-4763-BBE3-9C0BA4573E9A"></a>
<h3 id="GADBD-GUID-43ADAC97-043B-4763-BBE3-9C0BA4573E9A" class="sect3"><span class="enumeration_section">5.5.2</span> Detailing the Functionality</h3>
<div>
<div class="section">
<p>The Oracle Cloud Infrastructure Classic Event Handler requires File Transfer Manager (FTM), a Java SDK to transfer files to Oracle Cloud Infrastructure Classic. <span>Oracle GoldenGate for Big Data</span> does not include the FTM Java SDK. .</p>
<p>You must download the FTM Java SDK at:</p>
<p><a href="http://www.oracle.com/technetwork/topics/cloud/downloads/index.html#storejavasdk" target="_blank">http://www.oracle.com/technetwork/topics/cloud/downloads/index.html#storejavasdk</a></p>
<p>Extract the JAR files to a permanent directory. There are two directories required by the handler, the JAR library directory that has Oracle Cloud Infrastructure SDK JAR and a third-party JAR library. Both directories must be in the <code class="codeph">gg.classpath</code>.</p>
<p>Specify the <code class="codeph">gg.classpath</code> environment variable to include the JAR files of the FTM Java SDK.</p>
<p>These are the required third-party JARs:</p>
<pre dir="ltr">
ftm-api-2.4.4.jar 
javax.json-1.0.4.jar 
slf4j-api-1.7.7.jar 
slf4j-log4j12-1.7.7.jar 
log4j-1.2.17-16.jar 
low-level-api-core-1.14.22.jar
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Example</p>
<pre dir="ltr">
gg.classpath=/usr/var/ftm-sdk/libs/*:
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-1396E75A-5095-425A-BFA2-30C4524262FC" title="Learn how to use the Oracle Cloud Infrastructure Classic Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Classic Object Store.">Using the Oracle Cloud Infrastructure Classic Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-1E96BDF5-E8DE-4977-B062-EE1255FCC67E"></a>
<h3 id="GADBD-GUID-1E96BDF5-E8DE-4977-B062-EE1255FCC67E" class="sect3"><span class="enumeration_section">5.5.3</span> Configuring the Oracle Cloud Infrastructure Classic Event Handler</h3>
<div>
<div class="section">
<p>You configure the Oracle Cloud Infrastructure Classic Handler operation using the properties file. These properties are located in the Java Adapter properties file (not in the Replicat properties file).</p>
<p>The Oracle Cloud Infrastructure Classic Event Handler works only in conjunction with the File Writer Handler.</p>
<p>To enable the selection of the Oracle Cloud Infrastructure Classic Event Handler, you must first configure the handler type by specifying <code class="codeph">gg.eventhandler.name.type=oci-c</code> and the other Oracle Cloud Infrastructure properties as follows:</p>
<div class="tblformal" id="GUID-1E96BDF5-E8DE-4977-B062-EE1255FCC67E__GUID-2F0D04A3-FC62-428E-A3AC-44349A09933F">
<p class="titleintable">Table 5-5 Oracle Cloud Infrastructure Classic Event Handler Configuration Properties</p>
<table class="cellalignment78" title="Oracle Cloud Infrastructure Classic Event Handler Configuration Properties" summary="Five column table describing the Oracle Cloud Infrastructure Classic Event Handler Configuration">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d15800e4333">Properties</th>
<th class="cellalignment79" id="d15800e4336">Required/ Optional</th>
<th class="cellalignment80" id="d15800e4339">Legal Values</th>
<th class="cellalignment81" id="d15800e4342">Default</th>
<th class="cellalignment82" id="d15800e4345">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4350" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.type</code></p>
</td>
<td class="cellalignment83" headers="d15800e4350 d15800e4336">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e4350 d15800e4339">
<p><code class="codeph">oci-c</code></p>
</td>
<td class="cellalignment85" headers="d15800e4350 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4350 d15800e4345">
<p>Selects the Oracle Cloud Infrastructure Classic Event Handler.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4371" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.serverUrl</code></p>
</td>
<td class="cellalignment83" headers="d15800e4371 d15800e4336">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e4371 d15800e4339">
<p>Server URL</p>
</td>
<td class="cellalignment85" headers="d15800e4371 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4371 d15800e4345">
<p>The server URL for the Oracle Cloud Infrastructure Classic Event Handler.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4391" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.tenantID</code></p>
</td>
<td class="cellalignment83" headers="d15800e4391 d15800e4336">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e4391 d15800e4339">
<p>Valid string representing <code class="codeph">tenantID</code>.</p>
</td>
<td class="cellalignment85" headers="d15800e4391 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4391 d15800e4345">
<p>The case-sensitive tenant id that you specify when signing in to the Oracle Cloud Infrastructure Console.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4414" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.serviceName</code></p>
</td>
<td class="cellalignment83" headers="d15800e4414 d15800e4336">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e4414 d15800e4339">
<p>The Oracle Cloud Infrastructure Classic Event Handler service instance name.</p>
</td>
<td class="cellalignment85" headers="d15800e4414 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4414 d15800e4345">
<p>The Oracle Cloud Infrastructure Classic Event Handler service instance name that you specified.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4434" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.username</code></p>
</td>
<td class="cellalignment83" headers="d15800e4434 d15800e4336">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e4434 d15800e4339">
<p>Valid user name.</p>
</td>
<td class="cellalignment85" headers="d15800e4434 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4434 d15800e4345">
<p>The user name for the Oracle Cloud Infrastructure user account.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4454" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.password</code></p>
</td>
<td class="cellalignment83" headers="d15800e4454 d15800e4336">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e4454 d15800e4339">
<p>Valid password.</p>
</td>
<td class="cellalignment85" headers="d15800e4454 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4454 d15800e4345">
<p>The password for the Oracle Cloud Infrastructure user account.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4474" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.pathMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e4474 d15800e4336">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e4474 d15800e4339">
<p>A string with resolvable keywords and constants used to dynamically generate the path in the Oracle Cloud Infrastructure bucket to write the file.</p>
</td>
<td class="cellalignment85" headers="d15800e4474 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4474 d15800e4345">
<p>Use resolvable keywords and constants to dynamically generate a unique Oracle Cloud Infrastructure Classic path names at runtime.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4494" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.containerMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e4494 d15800e4336">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e4494 d15800e4339">
<p>A string with resolvable keywords and constants used to dynamically generate the path in the Oracle Cloud Infrastructure container to write the file.</p>
</td>
<td class="cellalignment85" headers="d15800e4494 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4494 d15800e4345">
<p>Use resolvable keywords and constants used to dynamically generate the Oracle Cloud Infrastructure container name at runtime. The event handler attempts to create the Oracle Cloud Infrastructure container if it does not exist.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4514" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.fileMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e4514 d15800e4336">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e4514 d15800e4339">
<p>A string with resolvable keywords and constants used to dynamically generate the Oracle Cloud Infrastructure file name at runtime.</p>
</td>
<td class="cellalignment85" headers="d15800e4514 d15800e4342">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e4514 d15800e4345">
<p>Use resolvable keywords and constants used to dynamically generate the Oracle Cloud Infrastructure file name at runtime. If not set, the upstream file name is used.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4534" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.finalizeAction</code></p>
</td>
<td class="cellalignment83" headers="d15800e4534 d15800e4336">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e4534 d15800e4339">
<p><code class="codeph">none</code> | <code class="codeph">delete</code></p>
</td>
<td class="cellalignment85" headers="d15800e4534 d15800e4342">
<p><code class="codeph">none</code></p>
</td>
<td class="cellalignment86" headers="d15800e4534 d15800e4345">
<p>Set to <code class="codeph">none</code> to leave the Oracle Cloud Infrastructure Classic data file in place on the finalize action. Set to <code class="codeph">delete</code> if you want to delete the Oracle Cloud Infrastructure Classic data file with the finalize action.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e4565" headers="d15800e4333">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.eventHandler</code></p>
</td>
<td class="cellalignment83" headers="d15800e4565 d15800e4336">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e4565 d15800e4339">
<p>A unique string identifier cross referencing a child event handler.</p>
</td>
<td class="cellalignment85" headers="d15800e4565 d15800e4342">
<p>No event handler is configured.</p>
</td>
<td class="cellalignment86" headers="d15800e4565 d15800e4345">
<p>Sets the event handler that is invoked on the file roll event. Event handlers can do file roll event actions like loading files to S3, converting to Parquet or ORC format, loading files to HDFS, loading files to Oracle Cloud Infrastructure Classic, or loading file to Oracle Cloud Infrastructure.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Sample Configuration</p>
<pre dir="ltr">
#The OCI-C Event handler
gg.eventhandler.oci-c.type=oci-c
gg.eventhandler.oci-c.serverURL=<span class="italic">https://storage.companycloud.com/
</span>gg.eventhandler.oci-c.tenantID=<span class="italic">usoraclebig</span>
gg.eventhandler.oci-c.serviceName=<span class="italic">dev1</span>
gg.eventhandler.oci-c.username=<span class="italic">user@company.com
</span>gg.eventhandler.oci-c.password=<span class="italic">pass</span>
gg.eventhandler.oci-c.pathMappingTemplate=${schemaName}
gg.eventhandler.oci-c.containerMappingTemplate=${schemaName}
gg.eventhandler.oci-c.fileNameMappingTemplate=${tableName}_${currentTimestamp}.json
gg.eventhandler.oci-c.finalizeAction=NONE 
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-1396E75A-5095-425A-BFA2-30C4524262FC" title="Learn how to use the Oracle Cloud Infrastructure Classic Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Classic Object Store.">Using the Oracle Cloud Infrastructure Classic Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="unique_18065469"></a>
<h3 id="GADBD-unique_18065469" class="sect3"><span class="enumeration_section">5.5.4</span> Using Templated Strings</h3>
<div>
<div class="section">
<p><span class="bold">Templated strings</span> can contain a combination of string constants and keywords that are dynamically resolved at runtime. This event handler makes extensive use of templated strings to generate the Oracle Cloud Infrastructure directory names, data file names, and Oracle Cloud Infrastructure bucket names. These strings give you the flexibility to select where to write data files and the names of those data files. You should exercise caution when choosing file and directory names to avoid file naming collisions that can result in an abend.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Supported Templated Strings</p>
<div class="tblformal" id="unique_18065469__d191e19">
<table class="cellalignment71" summary="Two column table detailing the supported templated strings.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d15800e4646">Keyword</th>
<th class="cellalignment77" id="d15800e4648">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4652" headers="d15800e4646"><code class="codeph">${fullyQualifiedTableName}</code></td>
<td class="cellalignment65" headers="d15800e4652 d15800e4648">
<p>The fully qualified source table name delimited by a period (<code class="codeph">.</code>). For example, <code class="codeph">MYCATALOG.MYSCHEMA.MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4665" headers="d15800e4646"><code class="codeph">${catalogName}</code></td>
<td class="cellalignment65" headers="d15800e4665 d15800e4648">
<p>The individual source catalog name. For example, <code class="codeph">MYCATALOG</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4675" headers="d15800e4646"><code class="codeph">${schemaName}</code></td>
<td class="cellalignment65" headers="d15800e4675 d15800e4648">
<p>The individual source schema name. For example, <code class="codeph">MYSCHEMA</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4685" headers="d15800e4646"><code class="codeph">${tableName}</code></td>
<td class="cellalignment65" headers="d15800e4685 d15800e4648">
<p>The individual source table name. For example, <code class="codeph">MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4695" headers="d15800e4646"><code class="codeph">${groupName}</code></td>
<td class="cellalignment65" headers="d15800e4695 d15800e4648">
<p>The name of the Replicat process (with the thread number appended if you&rsquo;re using coordinated apply).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4702" headers="d15800e4646"><code class="codeph">${emptyString}</code></td>
<td class="cellalignment65" headers="d15800e4702 d15800e4648">
<p>Evaluates to an empty string. For example,<code class="codeph">&ldquo;&rdquo;</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4711" headers="d15800e4646"><code class="codeph">${operationCount}</code></td>
<td class="cellalignment65" headers="d15800e4711 d15800e4648">
<p>The total count of operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;1024&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4724" headers="d15800e4646"><code class="codeph">${insertCount}</code></td>
<td class="cellalignment65" headers="d15800e4724 d15800e4648">
<p>The total count of insert operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;125&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4737" headers="d15800e4646"><code class="codeph">${updateCount}</code></td>
<td class="cellalignment65" headers="d15800e4737 d15800e4648">
<p>The total count of update operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;265&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4750" headers="d15800e4646"><code class="codeph">${deleteCount}</code></td>
<td class="cellalignment65" headers="d15800e4750 d15800e4648">
<p>The total count of delete operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;11&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4763" headers="d15800e4646"><code class="codeph">${truncateCount}</code></td>
<td class="cellalignment65" headers="d15800e4763 d15800e4648">
<p>The total count of truncate operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;5&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4777" headers="d15800e4646"><code class="codeph">${currentTimestamp}</code></td>
<td class="cellalignment65" headers="d15800e4777 d15800e4648">
<p>The current timestamp. The default output format for the date time is <code class="codeph">yyyy-MM-dd_HH-mm-ss.SSS</code>. For example, <code class="codeph">2017-07-05_04-31-23.123</code>. Alternatively, you can customize the format of the current timestamp by inserting the format inside square brackets like:</p>
<p><code class="codeph">${currentTimestamp[MM-dd_HH]}</code></p>
<p>This format uses the syntax defined in the Java <code class="codeph">SimpleDateFormat</code> class, see <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" target="_blank">https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4802" headers="d15800e4646"><code class="codeph">${toUpperCase[]}</code></td>
<td class="cellalignment65" headers="d15800e4802 d15800e4648">
<p>Converts the contents inside the square brackets to uppercase. For example, <code class="codeph">${toUpperCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e4812" headers="d15800e4646"><code class="codeph">${toLowerCase[]}</code></td>
<td class="cellalignment65" headers="d15800e4812 d15800e4648">
<p>Converts the contents inside the square brackets to lowercase. For example, <code class="codeph">${toLowerCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Configuration of template strings can use a mix of keywords and static strings to assemble path and data file names at runtime.</p>
<dl>
<dt class="dlterm"><a id="unique_18065469__d191e204"><!-- --></a>Path Configuration Example</dt>
<dd>
<pre dir="ltr">
/usr/local/${<span class="italic">fullyQualifiedTableName</span>}
</pre></dd>
<dt class="dlterm"><a id="unique_18065469__d191e213"><!-- --></a>Data File Configuration Example</dt>
<dd>
<pre dir="ltr">
${<span class="italic">fullyQualifiedTableName</span>}_${currentTimestamp}_${<span class="italic">groupName</span>}.<span class="italic">handlerIndicator</span>
</pre></dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Requirements</p>
<p>The directory and file names generated using the templates must be legal on the system being written to. File names must be unique to avoid a file name collision. You can avoid a collision by adding a current timestamp using the <code class="codeph">${currentTimestamp}</code> keyword. If you are using coordinated apply, then adding <code class="codeph">${groupName}</code> into the data file name is recommended.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-1396E75A-5095-425A-BFA2-30C4524262FC" title="Learn how to use the Oracle Cloud Infrastructure Classic Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Classic Object Store.">Using the Oracle Cloud Infrastructure Classic Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="unique_308448375"></a>
<h3 id="GADBD-unique_308448375" class="sect3"><span class="enumeration_section">5.5.5</span> Troubleshooting</h3>
<div>
<div class="section">
<p class="subhead3">Connectivity Issues</p>
<p>If the event handler is unable to connect to the Oracle Cloud Infrastructure Classic Object when running on-premise, it&rsquo;s likely your connectivity to the public internet is protected by a proxy server. Proxy servers act a gateway between the private network of a company and the public internet. Contact your network administrator to get the URLs of your proxy server, and then setup up a proxy server.</p>
<p>Oracle GoldenGate for Big Data can be used with a proxy server using the following Java run time arguments to enable the proxy server as in this example:</p>
<pre dir="ltr">
-Dhttps.proxyHost=www-proxy.us.company.com 
-Dhttps.proxyPort=80   
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">ClassNotFoundException Error</p>
<p>The most common initial error is an incorrect classpath that does not include all the required client libraries so results in a <code class="codeph">ClassNotFoundException</code> error. Specify the <code class="codeph">gg.classpath</code> variable to include all of the required JAR files for the Oracle Cloud Infrastructure Java SDK, see <a href="using-file-writer-handler.htm#GUID-4E66036F-8214-4D90-A873-7AFD9EC2EE9D">Detailing the Functionality</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-1396E75A-5095-425A-BFA2-30C4524262FC" title="Learn how to use the Oracle Cloud Infrastructure Classic Event Handler to load files generated by the File Writer Handler into an Oracle Cloud Infrastructure Classic Object Store.">Using the Oracle Cloud Infrastructure Classic Event Handler</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-5BE451BB-196E-4A9D-9F70-C0432851A322"></a>
<h2 id="GADBD-GUID-5BE451BB-196E-4A9D-9F70-C0432851A322" class="sect2"><span class="enumeration_section">5.6</span> Using the Parquet Event Handler</h2>
<div>
<p>Learn how to use the Parquet Event Handler to load files generated by the File Writer Handler into HDFS.</p>
<p>See <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a>.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-306603B9-D6AB-4CE1-B807-4BF3AAE27C2E">Overview</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-4A4B62D6-DF29-432E-ACC4-0C316678A36A">Detailing the Functionality</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-35DBB807-428E-48F3-8A09-F44EFB23FADA">Configuring the Parquet Event Handler</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-306603B9-D6AB-4CE1-B807-4BF3AAE27C2E"></a>
<h3 id="GADBD-GUID-306603B9-D6AB-4CE1-B807-4BF3AAE27C2E" class="sect3"><span class="enumeration_section">5.6.1</span> Overview</h3>
<div>
<div class="section">
<p>The Parquet Event Handler enables you to generate data files in Parquet format. Parquet files can be written to either the local file system or directly to HDFS. Parquet is a columnar data format that can substantially improve data retrieval times and improve the performance of Big Data analytics, see <a href="https://parquet.apache.org/" target="_blank">https://parquet.apache.org/</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-5BE451BB-196E-4A9D-9F70-C0432851A322" title="Learn how to use the Parquet Event Handler to load files generated by the File Writer Handler into HDFS.">Using the Parquet Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-4A4B62D6-DF29-432E-ACC4-0C316678A36A"></a>
<h3 id="GADBD-GUID-4A4B62D6-DF29-432E-ACC4-0C316678A36A" class="sect3"><span class="enumeration_section">5.6.2</span> Detailing the Functionality</h3>
<div>
<div class="section">
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-B08C5A05-CDD8-4646-8358-0CDDC76AE04B">Configuring the Parquet Event Handler to Write to HDFS</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-A6E4786C-1569-487D-A114-C6A5304DE1F4">About the Upstream Data Format</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-F25D47E6-E6B5-4E01-83A4-E4B16E7B1F10">Using Templated Strings</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-5BE451BB-196E-4A9D-9F70-C0432851A322" title="Learn how to use the Parquet Event Handler to load files generated by the File Writer Handler into HDFS.">Using the Parquet Event Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B08C5A05-CDD8-4646-8358-0CDDC76AE04B"></a>
<h4 id="GADBD-GUID-B08C5A05-CDD8-4646-8358-0CDDC76AE04B" class="sect4"><span class="enumeration_section">5.6.2.1</span> Configuring the Parquet Event Handler to Write to HDFS</h4>
<div>
<div class="section">
<p>The Apache Parquet framework supports writing directly to HDFS. The Parquet Event Handler can write Parquet files directly to HDFS. These additional configuration steps are required:</p>
<p>The Parquet Event Handler dependencies and considerations are the same as the HDFS Handler, see <a href="using-hdfs-handler.htm#GUID-5DC92AF0-8F64-4A85-B57A-21C06D1B2534">HDFS Additional Considerations</a>.</p>
<p>Set the <code class="codeph">writeToHDFS</code> property to <code class="codeph">true</code>:</p>
<pre dir="ltr">
gg.eventhandler.parquet.writeToHDFS=true
</pre>
<p>Ensure that <code class="codeph">gg.classpath</code> includes the HDFS client libraries.</p>
<p>Ensure that the directory containing the HDFS <code>core-site.xml</code> file is in <code class="codeph">gg.classpath</code>. This is so the <code>core-site.xml</code> file can be read at runtime and the connectivity information to HDFS can be resolved. For example:</p>
<pre dir="ltr">
gg.classpath=/{<span class="italic">HDFS_install_directory</span>}/etc/hadoop
</pre>
<p>If Kerberos authentication is enabled on the HDFS cluster, you have to configure the Kerberos principal and the location of the <code class="codeph">keytab</code> file so that the password can be resolved at runtime:</p>
<pre dir="ltr">
gg.eventHandler.name.kerberosPrincipal=principal
gg.eventHandler.name.kerberosKeytabFile=<span class="italic">path_to_the_keytab_file</span>
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-4A4B62D6-DF29-432E-ACC4-0C316678A36A">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A6E4786C-1569-487D-A114-C6A5304DE1F4"></a>
<h4 id="GADBD-GUID-A6E4786C-1569-487D-A114-C6A5304DE1F4" class="sect4"><span class="enumeration_section">5.6.2.2</span> About the Upstream Data Format</h4>
<div>
<div class="section">
<p>The Parquet Event Handler can only convert Avro Object Container File (OCF) generated by the File Writer Handler. The Parquet Event Handler cannot convert other formats to Parquet data files. The format of the File Writer Handler must be <code class="codeph">avro_row_ocf</code> or <code class="codeph">avro_op_ocf</code>, see <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-4A4B62D6-DF29-432E-ACC4-0C316678A36A">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-F25D47E6-E6B5-4E01-83A4-E4B16E7B1F10"></a>
<h4 id="GADBD-GUID-F25D47E6-E6B5-4E01-83A4-E4B16E7B1F10" class="sect4"><span class="enumeration_section">5.6.2.3</span> Using Templated Strings</h4>
<div>
<div class="section">
<p><span class="bold">Templated strings</span> can contain a combination of string constants and keywords that are dynamically resolved at runtime. The Parquet Event Handler makes extensive use of templated strings to generate the HDFS directory names, data file names, and HDFS bucket names. This gives you the flexibility to select where to write data files and the names of those data files.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Supported Templated Strings</p>
<div class="tblformal" id="GUID-F25D47E6-E6B5-4E01-83A4-E4B16E7B1F10__d191e19">
<table class="cellalignment71" summary="Two column table detailing the supported templated strings.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d15800e5205">Keyword</th>
<th class="cellalignment77" id="d15800e5207">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5211" headers="d15800e5205"><code class="codeph">${fullyQualifiedTableName}</code></td>
<td class="cellalignment65" headers="d15800e5211 d15800e5207">
<p>The fully qualified source table name delimited by a period (<code class="codeph">.</code>). For example, <code class="codeph">MYCATALOG.MYSCHEMA.MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5224" headers="d15800e5205"><code class="codeph">${catalogName}</code></td>
<td class="cellalignment65" headers="d15800e5224 d15800e5207">
<p>The individual source catalog name. For example, <code class="codeph">MYCATALOG</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5234" headers="d15800e5205"><code class="codeph">${schemaName}</code></td>
<td class="cellalignment65" headers="d15800e5234 d15800e5207">
<p>The individual source schema name. For example, <code class="codeph">MYSCHEMA</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5244" headers="d15800e5205"><code class="codeph">${tableName}</code></td>
<td class="cellalignment65" headers="d15800e5244 d15800e5207">
<p>The individual source table name. For example, <code class="codeph">MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5254" headers="d15800e5205"><code class="codeph">${groupName}</code></td>
<td class="cellalignment65" headers="d15800e5254 d15800e5207">
<p>The name of the Replicat process (with the thread number appended if you&rsquo;re using coordinated apply).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5261" headers="d15800e5205"><code class="codeph">${emptyString}</code></td>
<td class="cellalignment65" headers="d15800e5261 d15800e5207">
<p>Evaluates to an empty string. For example,<code class="codeph">&ldquo;&rdquo;</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5270" headers="d15800e5205"><code class="codeph">${operationCount}</code></td>
<td class="cellalignment65" headers="d15800e5270 d15800e5207">
<p>The total count of operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;1024&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5283" headers="d15800e5205"><code class="codeph">${insertCount}</code></td>
<td class="cellalignment65" headers="d15800e5283 d15800e5207">
<p>The total count of insert operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;125&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5296" headers="d15800e5205"><code class="codeph">${updateCount}</code></td>
<td class="cellalignment65" headers="d15800e5296 d15800e5207">
<p>The total count of update operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;265&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5309" headers="d15800e5205"><code class="codeph">${deleteCount}</code></td>
<td class="cellalignment65" headers="d15800e5309 d15800e5207">
<p>The total count of delete operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;11&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5322" headers="d15800e5205"><code class="codeph">${truncateCount}</code></td>
<td class="cellalignment65" headers="d15800e5322 d15800e5207">
<p>The total count of truncate operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;5&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5336" headers="d15800e5205"><code class="codeph">${currentTimestamp}</code></td>
<td class="cellalignment65" headers="d15800e5336 d15800e5207">
<p>The current timestamp. The default output format for the date time is <code class="codeph">yyyy-MM-dd_HH-mm-ss.SSS</code>. For example, <code class="codeph">2017-07-05_04-31-23.123</code>. Alternatively, you can customize the format of the current timestamp by inserting the format inside square brackets like:</p>
<p><code class="codeph">${currentTimestamp[MM-dd_HH]}</code></p>
<p>This format uses the syntax defined in the Java <code class="codeph">SimpleDateFormat</code> class, see <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" target="_blank">https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5361" headers="d15800e5205"><code class="codeph">${toUpperCase[]}</code></td>
<td class="cellalignment65" headers="d15800e5361 d15800e5207">
<p>Converts the contents inside the square brackets to uppercase. For example, <code class="codeph">${toUpperCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e5371" headers="d15800e5205"><code class="codeph">${toLowerCase[]}</code></td>
<td class="cellalignment65" headers="d15800e5371 d15800e5207">
<p>Converts the contents inside the square brackets to lowercase. For example, <code class="codeph">${toLowerCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Configuration of template strings can use a mix of keywords and static strings to assemble path and data file names at runtime.</p>
<dl>
<dt class="dlterm"><a id="GUID-F25D47E6-E6B5-4E01-83A4-E4B16E7B1F10__d191e204"><!-- --></a>Path Configuration Example</dt>
<dd>
<pre dir="ltr">
/usr/local/${<span class="italic">fullyQualifiedTableName</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-F25D47E6-E6B5-4E01-83A4-E4B16E7B1F10__d191e213"><!-- --></a>Data File Configuration Example</dt>
<dd>
<pre dir="ltr">
${<span class="italic">fullyQualifiedTableName</span>}_${currentTimestamp}_${<span class="italic">groupName</span>}.<span class="italic">handlerIndicator</span>
</pre></dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-4A4B62D6-DF29-432E-ACC4-0C316678A36A">Detailing the Functionality</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-35DBB807-428E-48F3-8A09-F44EFB23FADA"></a>
<h3 id="GADBD-GUID-35DBB807-428E-48F3-8A09-F44EFB23FADA" class="sect3"><span class="enumeration_section">5.6.3</span> Configuring the Parquet Event Handler</h3>
<div>
<div class="section">
<p>You configure the Parquet Event Handler operation using the properties file. These properties are located in the Java Adapter properties file (not in the Replicat properties file).</p>
<p>The Parquet Event Handler works only in conjunction with the File Writer Handler.</p>
<p>To enable the selection of the Parquet Event Handler, you must first configure the handler type by specifying <code class="codeph">gg.eventhandler.name.type=parquet</code> and the other Parquet Event properties as follows:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-35DBB807-428E-48F3-8A09-F44EFB23FADA__GUID-2F0D04A3-FC62-428E-A3AC-44349A09933F">
<p class="titleintable">Table 5-6 Parquet Event Handler Configuration Properties</p>
<table class="cellalignment78" title="Parquet Event Handler Configuration Properties" summary="Five column table describing the Parquet Event Handler Configuration">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d15800e5455">Properties</th>
<th class="cellalignment79" id="d15800e5458">Required/ Optional</th>
<th class="cellalignment80" id="d15800e5461">Legal Values</th>
<th class="cellalignment81" id="d15800e5464">Default</th>
<th class="cellalignment82" id="d15800e5467">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5472" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.type</code></p>
</td>
<td class="cellalignment83" headers="d15800e5472 d15800e5458">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e5472 d15800e5461">
<p><code class="codeph">parquet</code></p>
</td>
<td class="cellalignment85" headers="d15800e5472 d15800e5464">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e5472 d15800e5467">
<p>Selects the Parquet Event Handler for use.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5493" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.writeToHDFS</code></p>
</td>
<td class="cellalignment83" headers="d15800e5493 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5493 d15800e5461">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e5493 d15800e5464">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment86" headers="d15800e5493 d15800e5467">
<p>Set to <code class="codeph">false</code> to write to the local file system. Set to <code class="codeph">true</code> to write directly to HDFS.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5521" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.pathMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e5521 d15800e5458">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e5521 d15800e5461">
<p>A string with resolvable keywords and constants used to dynamically generate the path to write generated Parquet files.</p>
</td>
<td class="cellalignment85" headers="d15800e5521 d15800e5464">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e5521 d15800e5467">
<p>Use keywords interlaced with constants to dynamically generate a unique path names at runtime. Typically, path names follow the format, <code class="codeph">/ogg/data/${<span class="codeinlineitalic">groupName</span>}/${<span class="codeinlineitalic">fullyQualifiedTableName</span>}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5550" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.fileNameMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e5550 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5550 d15800e5461">
<p>A string with resolvable keywords and constants used to dynamically generate the Parquet file name at runtime</p>
</td>
<td class="cellalignment85" headers="d15800e5550 d15800e5464">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e5550 d15800e5467">
<p>Sets the Parquet file name. If not set, the upstream file name is used.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5570" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.compressionCodec</code></p>
</td>
<td class="cellalignment83" headers="d15800e5570 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5570 d15800e5461">
<p><code class="codeph">GZIP | LZO | SNAPPY | UNCOMPRESSED</code></p>
</td>
<td class="cellalignment85" headers="d15800e5570 d15800e5464">
<p><code class="codeph">UNCOMPRESSED</code></p>
</td>
<td class="cellalignment86" headers="d15800e5570 d15800e5467">
<p>Sets the compression codec of the generated Parquet file.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5592" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.finalizeAction</code></p>
</td>
<td class="cellalignment83" headers="d15800e5592 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5592 d15800e5461">
<p><code class="codeph">none | delete</code></p>
</td>
<td class="cellalignment85" headers="d15800e5592 d15800e5464">
<p><code class="codeph">none</code></p>
</td>
<td class="cellalignment86" headers="d15800e5592 d15800e5467">
<p>Indicates what the Parquet Event Handler should do at the finalize action.</p>
<dl>
<dt class="dlterm"><a id="GUID-35DBB807-428E-48F3-8A09-F44EFB23FADA__GUID-9FD5FDDF-87AE-4FDE-B13C-B77C659C29A5"><!-- --></a><code class="codeph">none</code></dt>
<dd>
<p>Leave the data file in place.</p>
</dd>
<dt class="dlterm"><a id="GUID-35DBB807-428E-48F3-8A09-F44EFB23FADA__GUID-8E9FF766-4FF6-4FB8-8B61-0DB943D3F4CF"><!-- --></a><code class="codeph">delete</code></dt>
<dd>
<p>Delete the data file (such as, if the data file has been converted to another format or loaded to a third party application).</p>
</dd>
</dl>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5629" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.dictionaryEncoding</code></p>
</td>
<td class="cellalignment83" headers="d15800e5629 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5629 d15800e5461">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e5629 d15800e5464">
<p>The Parquet default.</p>
</td>
<td class="cellalignment86" headers="d15800e5629 d15800e5467">
<p>Set to <code class="codeph">true</code> to enable Parquet dictionary encoding.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5653" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.validation</code></p>
</td>
<td class="cellalignment83" headers="d15800e5653 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5653 d15800e5461">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment85" headers="d15800e5653 d15800e5464">
<p>The Parquet default.</p>
</td>
<td class="cellalignment86" headers="d15800e5653 d15800e5467">
<p>Set to <code class="codeph">true</code> to enable Parquet validation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5677" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.dictionaryPageSize</code></p>
</td>
<td class="cellalignment83" headers="d15800e5677 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5677 d15800e5461">
<p>Integer</p>
</td>
<td class="cellalignment85" headers="d15800e5677 d15800e5464">
<p>The Parquet default.</p>
</td>
<td class="cellalignment86" headers="d15800e5677 d15800e5467">
<p>Sets the Parquet dictionary page size.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5697" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.maxPaddingSize</code></p>
</td>
<td class="cellalignment83" headers="d15800e5697 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5697 d15800e5461">
<p>Integer</p>
</td>
<td class="cellalignment85" headers="d15800e5697 d15800e5464">
<p>The Parquet default.</p>
</td>
<td class="cellalignment86" headers="d15800e5697 d15800e5467">
<p>Sets the Parquet padding size.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5717" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.pageSize</code></p>
</td>
<td class="cellalignment83" headers="d15800e5717 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5717 d15800e5461">
<p>Integer</p>
</td>
<td class="cellalignment85" headers="d15800e5717 d15800e5464">
<p>The Parquet default.</p>
</td>
<td class="cellalignment86" headers="d15800e5717 d15800e5467">
<p>Sets the Parquet page size.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5738" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.rowGroupSize</code></p>
</td>
<td class="cellalignment83" headers="d15800e5738 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5738 d15800e5461">
<p>Integer</p>
</td>
<td class="cellalignment85" headers="d15800e5738 d15800e5464">
<p>The Parquet default.</p>
</td>
<td class="cellalignment86" headers="d15800e5738 d15800e5467">
<p>Sets the Parquet row group size.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5758" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.kerberosPrincipal</code></p>
</td>
<td class="cellalignment83" headers="d15800e5758 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5758 d15800e5461">
<p>The Kerberos principal name.</p>
</td>
<td class="cellalignment85" headers="d15800e5758 d15800e5464">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e5758 d15800e5467">
<p>Set to the Kerberos principal when writing directly to HDFS and Kerberos authentication is enabled.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5778" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.keberosKeytabFile</code></p>
</td>
<td class="cellalignment83" headers="d15800e5778 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5778 d15800e5461">
<p>The path to the Keberos <code>keytab</code> file.</p>
</td>
<td class="cellalignment85" headers="d15800e5778 d15800e5464">
<p>The Parquet default.</p>
</td>
<td class="cellalignment86" headers="d15800e5778 d15800e5467">
<p>Set to the path to the Kerberos <code>keytab</code> file with writing directly to HDFS and Kerberos authentication is enabled.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e5804" headers="d15800e5455">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.eventHandler</code></p>
</td>
<td class="cellalignment83" headers="d15800e5804 d15800e5458">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e5804 d15800e5461">
<p>A unique string identifier cross referencing a child event handler.</p>
</td>
<td class="cellalignment85" headers="d15800e5804 d15800e5464">
<p>No event handler configured.</p>
</td>
<td class="cellalignment86" headers="d15800e5804 d15800e5467">
<p>The event handler that is invoked on the file roll event. Event handlers can do file roll event actions like loading files to S3, converting to Parquet or ORC format, or loading files to HDFS.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-5BE451BB-196E-4A9D-9F70-C0432851A322" title="Learn how to use the Parquet Event Handler to load files generated by the File Writer Handler into HDFS.">Using the Parquet Event Handler</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-9CEECD8E-9FBE-4E6C-B676-250406ECC811"></a>
<h2 id="GADBD-GUID-9CEECD8E-9FBE-4E6C-B676-250406ECC811" class="sect2"><span class="enumeration_section">5.7</span> Using the S3 Event Handler</h2>
<div>
<p>Learn how to use the S3 Event Handler, which provides the interface to Amazon S3 web services.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-349B2CC9-37A2-4B70-8CC0-BD1E72F486A5">Overview</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-6F2570FD-E13E-40F3-A2E9-0C28D31E7806">Detailing Functionality</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-3C2D18D2-4D88-4D71-B094-F931312A5F72">Configuring the S3 Event Handler</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-349B2CC9-37A2-4B70-8CC0-BD1E72F486A5"></a>
<h3 id="GADBD-GUID-349B2CC9-37A2-4B70-8CC0-BD1E72F486A5" class="sect3"><span class="enumeration_section">5.7.1</span> Overview</h3>
<div>
<div class="section">
<p>Amazon S3 is object storage hosted in the Amazon cloud. The purpose of the S3 Event Handler is to load data files generated by the File Writer Handler into Amazon S3, see <a href="https://aws.amazon.com/s3/" target="_blank">https://aws.amazon.com/s3/</a>.</p>
<p>You can use any format that the File Writer Handler, see <a href="using-file-writer-handler.htm#GUID-437D8DCD-62A2-416F-BAA3-E1826280DF51" title="Learn how to use the File Writer Handler and associated event handlers, which enables you to write data files to a local system.">Using the File Writer Handler</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-9CEECD8E-9FBE-4E6C-B676-250406ECC811" title="Learn how to use the S3 Event Handler, which provides the interface to Amazon S3 web services.">Using the S3 Event Handler</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-6F2570FD-E13E-40F3-A2E9-0C28D31E7806"></a>
<h3 id="GADBD-GUID-6F2570FD-E13E-40F3-A2E9-0C28D31E7806" class="sect3"><span class="enumeration_section">5.7.2</span> Detailing Functionality</h3>
<div>
<div class="section">
<p>The S3 Event Handler requires the Amazon Web Services (AWS) Java SDK to transfer files to S3 object storage.<span>Oracle GoldenGate for Big Data</span> does not include the AWS Java SDK. You have to download and install the AWS Java SDK from:</p>
<p><a href="https://aws.amazon.com/sdk-for-java/" target="_blank">https://aws.amazon.com/sdk-for-java/</a></p>
<p>Then you have to configure the <code class="codeph">gg.classpath</code> variable to include the JAR files in the AWS Java SDK and are divided into two directories. Both directories must be in <code class="codeph">gg.classpath</code>, for example:</p>
<pre dir="ltr">
gg.classpath=/usr/var/aws-java-sdk-1.11.240/lib/*:/usr/var/aws-java-sdk-1.11.240/third-party/lib/
</pre>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-7F2DC194-97BA-456E-A207-107612506AF4">Configuring the Client ID and Secret</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-A6E8C900-A839-4DB3-B564-9DABDAFA5F94">About the AWS S3 Buckets</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-04DCB9F8-3178-491B-8C6A-B5A544A1B1CB">Using Templated Strings</a><br /></li>
<li class="ulchildlink"><a href="using-file-writer-handler.htm#GUID-CBCF814A-55D7-487D-B414-FA8E9C59D63C">Troubleshooting</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-9CEECD8E-9FBE-4E6C-B676-250406ECC811" title="Learn how to use the S3 Event Handler, which provides the interface to Amazon S3 web services.">Using the S3 Event Handler</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-7F2DC194-97BA-456E-A207-107612506AF4"></a>
<h4 id="GADBD-GUID-7F2DC194-97BA-456E-A207-107612506AF4" class="sect4"><span class="enumeration_section">5.7.2.1</span> Configuring the Client ID and Secret</h4>
<div>
<div class="section">
<p>A client ID and secret are the required credentials for the S3 Event Handler to interact with Amazon S3. A client ID and secret are generated using the Amazon AWS website. The retrieval of these credentials and presentation to the S3 server are performed on the client side by the AWS Java SDK. The AWS Java SDK provides multiple ways that the client ID and secret can be resolved at runtime.</p>
<p>The client ID and secret can be set as Java properties in the Java Adapter properties file as follows:</p>
<pre dir="ltr">
 javawriter.bootoptions=-Xmx512m -Xms32m 
-Djava.class.path=ggjava/ggjava.jar 
-Daws.accessKeyId=your_access_key 
-Daws.secretKey=your_secret_key
</pre>
<p>This sets environmental variables using the Amazon Elastic Compute Cloud (Amazon EC2) <code class="codeph">AWS_ACCESS_KEY_ID</code> and <code class="codeph">AWS_SECRET_ACCESS_KEY</code> variables on the local machine.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-6F2570FD-E13E-40F3-A2E9-0C28D31E7806">Detailing Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A6E8C900-A839-4DB3-B564-9DABDAFA5F94"></a>
<h4 id="GADBD-GUID-A6E8C900-A839-4DB3-B564-9DABDAFA5F94" class="sect4"><span class="enumeration_section">5.7.2.2</span> About the AWS S3 Buckets</h4>
<div>
<div class="section">
<p>AWS divides S3 storage into separate file systems called <span class="bold">buckets</span>. The S3 Event Handler can write to pre-created buckets. Alternatively, if the S3 bucket does not exist, the S3 Event Handler attempts to create the specified S3 bucket. AWS requires that S3 bucket names are lowercase. Amazon S3 bucket names must be globally unique. If you attempt to create an S3 bucket that already exists in any Amazon account, it causes the S3 Event Handler to abend.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-6F2570FD-E13E-40F3-A2E9-0C28D31E7806">Detailing Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-04DCB9F8-3178-491B-8C6A-B5A544A1B1CB"></a>
<h4 id="GADBD-GUID-04DCB9F8-3178-491B-8C6A-B5A544A1B1CB" class="sect4"><span class="enumeration_section">5.7.2.3</span> Using Templated Strings</h4>
<div>
<div class="section">
<p><span class="bold">Templated strings</span> can contain a combination of string constants and keywords that are dynamically resolved at runtime. The S3 Event Handler makes extensive use of templated strings to generate the S3 directory names, data file names, and S3 bucket names. This gives you the flexibility to select where to write data files and the names of those data files.</p>
</div>
<!-- class="section" -->
<div class="section" id="GUID-04DCB9F8-3178-491B-8C6A-B5A544A1B1CB__SUPPORTEDTEMPLATEDSTRINGS-54164652">
<p class="subhead3">Supported Templated Strings</p>
<div class="tblformal" id="GUID-04DCB9F8-3178-491B-8C6A-B5A544A1B1CB__TWOCOLUMNTABLEDETAILINGTHESUPPORTED-54157D37">
<table class="cellalignment71" summary="Two column table detailing the supported templated strings.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d15800e6101">Keyword</th>
<th class="cellalignment77" id="d15800e6103">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6107" headers="d15800e6101"><code class="codeph">${fullyQualifiedTableName}</code></td>
<td class="cellalignment65" headers="d15800e6107 d15800e6103">
<p>The fully qualified source table name delimited by a period (<code class="codeph">.</code>). For example, <code class="codeph">MYCATALOG.MYSCHEMA.MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6120" headers="d15800e6101"><code class="codeph">${catalogName}</code></td>
<td class="cellalignment65" headers="d15800e6120 d15800e6103">
<p>The individual source catalog name. For example, <code class="codeph">MYCATALOG</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6130" headers="d15800e6101"><code class="codeph">${schemaName}</code></td>
<td class="cellalignment65" headers="d15800e6130 d15800e6103">
<p>The individual source schema name. For example, <code class="codeph">MYSCHEMA</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6140" headers="d15800e6101"><code class="codeph">${tableName}</code></td>
<td class="cellalignment65" headers="d15800e6140 d15800e6103">
<p>The individual source table name. For example, <code class="codeph">MYTABLE</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6150" headers="d15800e6101"><code class="codeph">${groupName}</code></td>
<td class="cellalignment65" headers="d15800e6150 d15800e6103">
<p>The name of the Replicat process (with the thread number appended if you&rsquo;re using coordinated apply).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6157" headers="d15800e6101"><code class="codeph">${emptyString}</code></td>
<td class="cellalignment65" headers="d15800e6157 d15800e6103">
<p>Evaluates to an empty string. For example,<code class="codeph">&ldquo;&rdquo;</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6166" headers="d15800e6101"><code class="codeph">${operationCount}</code></td>
<td class="cellalignment65" headers="d15800e6166 d15800e6103">
<p>The total count of operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;1024&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6179" headers="d15800e6101"><code class="codeph">${insertCount}</code></td>
<td class="cellalignment65" headers="d15800e6179 d15800e6103">
<p>The total count of insert operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;125&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6192" headers="d15800e6101"><code class="codeph">${updateCount}</code></td>
<td class="cellalignment65" headers="d15800e6192 d15800e6103">
<p>The total count of update operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;265&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6205" headers="d15800e6101"><code class="codeph">${deleteCount}</code></td>
<td class="cellalignment65" headers="d15800e6205 d15800e6103">
<p>The total count of delete operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;11&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6218" headers="d15800e6101"><code class="codeph">${truncateCount}</code></td>
<td class="cellalignment65" headers="d15800e6218 d15800e6103">
<p>The total count of truncate operations in the data file. It must be used either on rename or by the event handlers or it will be zero (<code class="codeph">0</code>) because nothing is written yet. For example, <code class="codeph">&ldquo;5&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6232" headers="d15800e6101"><code class="codeph">${currentTimestamp}</code></td>
<td class="cellalignment65" headers="d15800e6232 d15800e6103">
<p>The current timestamp. The default output format for the date time is <code class="codeph">yyyy-MM-dd_HH-mm-ss.SSS</code>. For example, <code class="codeph">2017-07-05_04-31-23.123</code>. Alternatively, you can customize the format of the current timestamp by inserting the format inside square brackets like:</p>
<p><code class="codeph">${currentTimestamp[MM-dd_HH]}</code></p>
<p>This format uses the syntax defined in the Java <code class="codeph">SimpleDateFormat</code> class, see <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" target="_blank">https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6257" headers="d15800e6101"><code class="codeph">${toUpperCase[]}</code></td>
<td class="cellalignment65" headers="d15800e6257 d15800e6103">
<p>Converts the contents inside the square brackets to uppercase. For example, <code class="codeph">${toUpperCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d15800e6267" headers="d15800e6101"><code class="codeph">${toLowerCase[]}</code></td>
<td class="cellalignment65" headers="d15800e6267 d15800e6103">
<p>Converts the contents inside the square brackets to lowercase. For example, <code class="codeph">${toLowerCase[${fullyQualifiedTableName}]}</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Configuration of template strings can use a mix of keywords and static strings to assemble path and data file names at runtime.</p>
<dl>
<dt class="dlterm"><a id="GUID-04DCB9F8-3178-491B-8C6A-B5A544A1B1CB__GUID-444CC1FD-494B-4BE8-8F55-8BC5ED66824C"><!-- --></a>Path Configuration Example</dt>
<dd>
<pre dir="ltr">
/usr/local/${<span class="italic">fullyQualifiedTableName</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-04DCB9F8-3178-491B-8C6A-B5A544A1B1CB__GUID-CBC445DA-8681-4E2A-8005-97F8D781262E"><!-- --></a>Data File Configuration Example</dt>
<dd>
<pre dir="ltr">
${<span class="italic">fullyQualifiedTableName</span>}_${currentTimestamp}_${<span class="italic">groupName</span>}.<span class="italic">handlerIndicator</span>
</pre></dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-6F2570FD-E13E-40F3-A2E9-0C28D31E7806">Detailing Functionality</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-CBCF814A-55D7-487D-B414-FA8E9C59D63C"></a>
<h4 id="GADBD-GUID-CBCF814A-55D7-487D-B414-FA8E9C59D63C" class="sect4"><span class="enumeration_section">5.7.2.4</span> Troubleshooting</h4>
<div>
<div class="section">
<p class="subhead3">Connectivity Issues</p>
<p>If the S3 Event Handler is unable to connect to the S3 object storage when running on premise, it&rsquo;s likely your connectivity to the public internet is protected by a proxy server. Proxy servers act a gateway between the private network of a company and the public internet. Contact your network administrator to get the URLs of your proxy server, and then setup up a proxy server.</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Oracle GoldenGate can be used with a proxy server using the following parameters to enable the proxy server:</p>
<ul style="list-style-type: disc;">
<li><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.proxyServer=</code></li>
<li>
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.proxyPort=80</code></p>
</li>
</ul>
<p>Access to the proxy servers can be secured using credentials and the following configuration parameters:</p>
<ul style="list-style-type: disc;">
<li><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.proxyUsername=<span class="variable">username</span></code></li>
<li><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.proxyPassword=<span class="variable">password</span></code></li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p>Sample configuration:</p>
<pre dir="ltr">
gg.handlerlist=s3 
gg.handler.s3.type=s3
gg.handler.s3.mode=op 
gg.handler.s3.format=json 
gg.handler.s3.region=us-west-2 
gg.handler.s3.partitionMappingTemplate=TestPartitionName
gg.handler.s3.streamMappingTemplate=TestStream
gg.handler.s3.deferFlushAtTxCommit=true 
gg.handler.s3.deferFlushOpCount=1000 
gg.handler.s3.formatPerOp=true 
#gg.handler.s3.customMessageGrouper=oracle.goldengate.handler.s3.s3JsonTxMessageGrouper 
gg.handler.s3.proxyServer=www-proxy.myhost.com 
gg.handler.s3.proxyPort=80
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-6F2570FD-E13E-40F3-A2E9-0C28D31E7806">Detailing Functionality</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-3C2D18D2-4D88-4D71-B094-F931312A5F72"></a>
<h3 id="GADBD-GUID-3C2D18D2-4D88-4D71-B094-F931312A5F72" class="sect3"><span class="enumeration_section">5.7.3</span> Configuring the S3 Event Handler</h3>
<div>
<div class="section">
<p>You configure the S3 Event Handler operation using the properties file. These properties are located in the Java Adapter properties file (not in the Replicat properties file).</p>
<p>To enable the selection of the S3 Event Handler, you must first configure the handler type by specifying <code class="codeph">gg.eventhandler.name.type=s3</code> and the other S3 Event properties as follows:</p>
<div class="tblformal" id="GUID-3C2D18D2-4D88-4D71-B094-F931312A5F72__GUID-2F0D04A3-FC62-428E-A3AC-44349A09933F">
<p class="titleintable">Table 5-7 S3 Event Handler Configuration Properties</p>
<table class="cellalignment78" title="S3 Event Handler Configuration Properties" summary="Five column table describing the S3 Event Handler Configuration">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d15800e6419">Properties</th>
<th class="cellalignment79" id="d15800e6422">Required/ Optional</th>
<th class="cellalignment80" id="d15800e6425">Legal Values</th>
<th class="cellalignment81" id="d15800e6428">Default</th>
<th class="cellalignment82" id="d15800e6431">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6436" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.type</code></p>
</td>
<td class="cellalignment83" headers="d15800e6436 d15800e6422">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e6436 d15800e6425">
<p><code class="codeph">s3</code></p>
</td>
<td class="cellalignment85" headers="d15800e6436 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6436 d15800e6431">
<p>Selects the S3 Event Handler for use with Replicat.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6457" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.region</code></p>
</td>
<td class="cellalignment83" headers="d15800e6457 d15800e6422">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e6457 d15800e6425">
<p>The AWS region name that is hosting your S3 instance.</p>
</td>
<td class="cellalignment85" headers="d15800e6457 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6457 d15800e6431">
<p>Setting the legal AWS region name is required.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6477" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.proxyServer</code></p>
</td>
<td class="cellalignment83" headers="d15800e6477 d15800e6422">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e6477 d15800e6425">
<p>The host name of your proxy server.</p>
</td>
<td class="cellalignment85" headers="d15800e6477 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6477 d15800e6431">
<p>Sets the host name of your proxy server if connectivity to AWS is required use a proxy server.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6497" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.proxyPort</code></p>
</td>
<td class="cellalignment83" headers="d15800e6497 d15800e6422">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e6497 d15800e6425">
<p>The port number of the proxy server.</p>
</td>
<td class="cellalignment85" headers="d15800e6497 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6497 d15800e6431">
<p>Sets the port number of the proxy server if connectivity to AWS is required use a proxy server.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6517" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.proxyUsername</code></p>
</td>
<td class="cellalignment83" headers="d15800e6517 d15800e6422">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e6517 d15800e6425">
<p>The username of the proxy server.</p>
</td>
<td class="cellalignment85" headers="d15800e6517 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6517 d15800e6431">
<p>Sets the user name of the proxy server if connectivity to AWS is required use a proxy server and the proxy server requires credentials.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6537" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.proxyPassword</code></p>
</td>
<td class="cellalignment83" headers="d15800e6537 d15800e6422">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e6537 d15800e6425">
<p>The password of the proxy server.</p>
</td>
<td class="cellalignment85" headers="d15800e6537 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6537 d15800e6431">
<p>Sets the password for the user name of the proxy server if connectivity to AWS is required use a proxy server and the proxy server requires credentials.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6557" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.bucketMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e6557 d15800e6422">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e6557 d15800e6425">
<p>A string with resolvable keywords and constants used to dynamically generate the path in the S3 bucket to write the file.</p>
</td>
<td class="cellalignment85" headers="d15800e6557 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6557 d15800e6431">
<p>Use resolvable keywords and constants used to dynamically generate the S3 bucket name at runtime. The handler attempts to create the S3 bucket if it does not exist. AWS requires bucket names to be all lowercase. A bucket name with uppercase characters results in a runtime exception.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6577" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.pathMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e6577 d15800e6422">
<p>Required</p>
</td>
<td class="cellalignment84" headers="d15800e6577 d15800e6425">
<p>A string with resolvable keywords and constants used to dynamically generate the path in the S3 bucket to write the file.</p>
</td>
<td class="cellalignment85" headers="d15800e6577 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6577 d15800e6431">
<p>Use keywords interlaced with constants to dynamically generate a unique S3 path names at runtime. Typically, path names follow the format, <code class="codeph">ogg/data/${groupName}/${<span class="codeinlineitalic">fullyQualifiedTableName</span>}</code> In S3, the convention is <span class="italic">not</span> to begin the path with the backslash (<code class="codeph">/</code>) because it results in a root directory of <code class="codeph">&ldquo;&rdquo;</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6612" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.fileMappingTemplate</code></p>
</td>
<td class="cellalignment83" headers="d15800e6612 d15800e6422">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e6612 d15800e6425">
<p>A string with resolvable keywords and constants used to dynamically generate the S3 file name at runtime.</p>
</td>
<td class="cellalignment85" headers="d15800e6612 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6612 d15800e6431">
<p>Use resolvable keywords and constants used to dynamically generate the S3 data file name at runtime. If not set, the upstream file name is used.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6632" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.finalizeAction</code></p>
</td>
<td class="cellalignment83" headers="d15800e6632 d15800e6422">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e6632 d15800e6425">
<p><code class="codeph">none | delete</code></p>
</td>
<td class="cellalignment85" headers="d15800e6632 d15800e6428">
<p><code class="codeph">none</code></p>
</td>
<td class="cellalignment86" headers="d15800e6632 d15800e6431">
<p>Set to <code class="codeph">none</code> to leave the S3 data file in place on the finalize action. Set to <code class="codeph">delete</code> if you want to delete the S3 data file with the finalize action.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6660" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.eventHandler</code></p>
</td>
<td class="cellalignment83" headers="d15800e6660 d15800e6422">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d15800e6660 d15800e6425">
<p>A unique string identifier cross referencing a child event handler.</p>
</td>
<td class="cellalignment85" headers="d15800e6660 d15800e6428">
<p>No event handler configured.</p>
</td>
<td class="cellalignment86" headers="d15800e6660 d15800e6431">
<p>The event handler that is invoked on the file roll event. Event handlers can do file roll event actions like loading files to S3, converting to Parquet or ORC format, or loading files to HDFS.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d15800e6681" headers="d15800e6419">
<p><code class="codeph">gg.eventhandler.<span class="codeinlineitalic">name</span>.url</code></p>
</td>
<td class="cellalignment83" headers="d15800e6681 d15800e6422">
<p>Optional(unless Dell ECS, then required)</p>
</td>
<td class="cellalignment84" headers="d15800e6681 d15800e6425">
<p>A legal URL to connect to cloud storage.</p>
</td>
<td class="cellalignment85" headers="d15800e6681 d15800e6428">
<p>None</p>
</td>
<td class="cellalignment86" headers="d15800e6681 d15800e6431">
<p>Not required for Amazon AWS S3. Required for Dell ECS. Sets the URL to connect to cloud storage.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-file-writer-handler.htm#GUID-9CEECD8E-9FBE-4E6C-B676-250406ECC811" title="Learn how to use the S3 Event Handler, which provides the interface to Amazon S3 web services.">Using the S3 Event Handler</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment64">
<tr>
<td class="cellalignment74">
<table class="cellalignment69">
<tr>
<td class="cellalignment68"><a href="using-elasticsearch-handler.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment68"><a href="using-flume-handler.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2015, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment76">
<table class="cellalignment67">
<tr>
<td class="cellalignment68"><a href="http://docs.oracle.com/goldengate/bd123210/gg-bd/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment68"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment68"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
