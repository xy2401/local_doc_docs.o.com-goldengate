<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Using the Pluggable Formatters</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="Learn how to use the pluggable formatters to convert operations from the Oracle GoldenGate trail file into formatted messages that you can send to Big Data targets using one of the Oracle GoldenGate for Big Data Handlers." />
<meta name="dcterms.created" content="2018-09-04T10:47:42Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Using Oracle GoldenGate for Big Data" />
<meta name="dcterms.identifier" content="E89845-03" />
<meta name="dcterms.isVersionOf" content="GADBD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2015, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/bd123210/gg-bd/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="using-oracle-nosql-handler.htm" title="Previous" type="text/html" />
<link rel="Next" href="cass-cdc-using-oracle-goldengate-capture-cassandra.htm" title="Next" type="text/html" />
<link rel="alternate" href="GADBD.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0"></a> <span id="PAGE" style="display:none;">20/33</span> <!-- End Header -->
<a id="GADBD479"></a>
<h1 id="GADBD-GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0" class="sect1"><span class="enumeration_chapter">17</span> Using the Pluggable Formatters</h1>
<div>
<p>Learn how to use the pluggable formatters to convert operations from the Oracle GoldenGate trail file into formatted messages that you can send to Big Data targets using one of the Oracle GoldenGate for Big Data Handlers.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2">Using the Avro Formatter</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-B25EBE30-AA78-4FB6-8907-56B9B28315A2">Using the Length Delimited Value Formatter</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-7683E975-3283-440D-84B1-973BFE2551E7">Using Operation-Based versus Row-Based Formatting</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a><br /></li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2"></a>
<h2 id="GADBD-GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2" class="sect2"><span class="enumeration_section">17.1</span> Using the Avro Formatter</h2>
<div>
<div class="section">
<p>Apache Avro is an open source data serialization and deserialization framework known for its flexibility, compactness of serialized data, and good serialization and deserialization performance. Apache Avro is commonly used in Big Data applications.</p>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-87FC20F6-E23C-442C-BC99-24311B0BE406">Avro Object Container File Formatter</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A">Setting Metacolumn Output</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0" title="Learn how to use the pluggable formatters to convert operations from the Oracle GoldenGate trail file into formatted messages that you can send to Big Data targets using one of the Oracle GoldenGate for Big Data Handlers.">Using the Pluggable Formatters</a></p>
</div>
</div>
</div>
<a id="GADBD516"></a>
<div class="props_rev_3"><a id="GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5"></a>
<h3 id="GADBD-GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5" class="sect3"><span class="enumeration_section">17.1.1</span> Avro Row Formatter</h3>
<div>
<div class="section">
<p>The Avro Row Formatter formats operation data from the source trail file into messages in an Avro binary array format. Each individual insert, update, delete, and truncate operation is formatted into an individual Avro message. The source trail file contains the before and after images of the operation data. The Avro Row Formatter takes the before-image and after-image data and formats it into an Avro binary representation of the operation data.</p>
<p>The Avro Row Formatter formats operations from the source trail file into a format that represents the row data. This format is more compact than the output from the Avro Operation Formatter for the Avro messages model the change data operation.</p>
<p>The Avro Row Formatter may be a good choice when streaming Avro data to HDFS. Hive supports data files in HDFS in an Avro format.</p>
<p>This section contains the following topics:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-466CFF40-8EF4-4CC2-A860-A27BB2C3F3D7">Operation Metadata Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-3FDA8982-8146-4663-8CFF-AA1144F174C0">Operation Data Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC">Sample Avro Row Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-A97788B6-FEA1-4586-8E86-18B298340D3C">Avro Schemas</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-2345E761-DA5D-4214-9C8C-80C4E70B9AC1">Avro Row Configuration Properties</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-5AB2D030-A209-4CD3-A6B6-37355FF1612B">Review a Sample Configuration</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-54A079BF-B672-47B2-9F11-A6F734C7563B">Metadata Change Events</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-7E290838-F287-453C-AB55-EAF41930CD81">Special Considerations</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2">Using the Avro Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD519"></a><a id="GADBD518"></a>
<div class="props_rev_3"><a id="GUID-466CFF40-8EF4-4CC2-A860-A27BB2C3F3D7"></a>
<h4 id="GADBD-GUID-466CFF40-8EF4-4CC2-A860-A27BB2C3F3D7" class="sect4"><span class="enumeration_section">17.1.1.1</span> Operation Metadata Formatting Details</h4>
<div>
<div class="section">
<p>In Avro messages generated by the Avro Row Formatter, the following seven metadata fields begin each message:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-466CFF40-8EF4-4CC2-A860-A27BB2C3F3D7__GUID-26618B89-8EF0-4EBF-AC29-4DB77F3BED09">
<p class="titleintable">Table 17-1 Avro Formatter Metadata</p>
<table class="cellalignment78" title="Avro Formatter Metadata" summary="This two column table lists the Avro formatter metadata">
<thead>
<tr class="cellalignment65">
<th class="cellalignment124" id="d80336e229">Value</th>
<th class="cellalignment125" id="d80336e232">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e237" headers="d80336e229">
<p><code class="codeph">table</code></p>
</td>
<td class="cellalignment127" headers="d80336e237 d80336e232">
<p>The fully qualified table in the format is: <span class="italic"><code class="codeph">CATALOG_NAME.SCHEMA_NAME.TABLE_NAME</code></span></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e249" headers="d80336e229">
<p><code class="codeph">op_type</code></p>
</td>
<td class="cellalignment127" headers="d80336e249 d80336e232">
<p>The type of database operation from the source trail file. Default values are <code class="codeph">I</code> for insert, <code class="codeph">U</code> for update, <code class="codeph">D</code> for delete, and <code class="codeph">T</code> for truncate.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e269" headers="d80336e229">
<p><code class="codeph">op_ts</code></p>
</td>
<td class="cellalignment127" headers="d80336e269 d80336e232">
<p>The timestamp of the operation from the source trail file. Since this timestamp is from the source trail, it is fixed. Replaying the trail file results in the same timestamp for the same operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e277" headers="d80336e229">
<p><code class="codeph">current_ts</code></p>
</td>
<td class="cellalignment127" headers="d80336e277 d80336e232">
<p>The time when the formatter processed the current operation record. This timestamp follows the ISO-8601 format and includes microsecond precision. Replaying the trail file will <span class="italic">not</span> result in the same timestamp for the same operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e288" headers="d80336e229">
<p><code class="codeph">pos</code></p>
</td>
<td class="cellalignment127" headers="d80336e288 d80336e232">
<p>The concatenated sequence number and the RBA number from the source trail file. This trail position lets you trace the operation back to the source trail file. The sequence number is the source trail file number. The RBA number is the offset in the trail file.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e296" headers="d80336e229">
<p><code class="codeph">primary_keys</code></p>
</td>
<td class="cellalignment127" headers="d80336e296 d80336e232">
<p>An array variable that holds the column names of the primary keys of the source table.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e304" headers="d80336e229">
<p><code class="codeph">tokens</code></p>
</td>
<td class="cellalignment127" headers="d80336e304 d80336e232">
<p>A map variable that holds the token key value pairs from the source trail file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD520"></a>
<div class="props_rev_3"><a id="GUID-3FDA8982-8146-4663-8CFF-AA1144F174C0"></a>
<h4 id="GADBD-GUID-3FDA8982-8146-4663-8CFF-AA1144F174C0" class="sect4"><span class="enumeration_section">17.1.1.2</span> Operation Data Formatting Details</h4>
<div>
<div class="section">
<p>The operation data follows the operation metadata. This data is represented as individual fields identified by the column names.</p>
<p>Column values for an operation from the source trail file can have one of three states: the column has a value, the column value is null, or the column value is missing. Avro attributes only support two states, the column has a value or the column value is null. Missing column values are handled the same as null values. Oracle recommends that when you use the Avro Row Formatter, you configure the Oracle GoldenGate capture process to provide full image data for all columns in the source trail file.</p>
<p>By default, the setting of the Avro Row Formatter maps the data types from the source trail file to the associated Avro data type. Because Avro provides limited support for data types, source columns map into Avro long, double, float, binary, or string data types. You can also configure data type mapping to handle all data as strings.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD521"></a>
<div class="props_rev_3"><a id="GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC"></a>
<h4 id="GADBD-GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC" class="sect4"><span class="enumeration_section">17.1.1.3</span> Sample Avro Row Messages</h4>
<div>
<div class="section">
<p>Because Avro messages are binary, they are not human readable. The following sample messages show the JSON representation of the messages.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-77685BA1-15DA-46DE-A375-23CFAA162760">Sample Insert Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-7092DFEC-37B2-4A32-A881-7FEAF13790FB">Sample Update Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-37630F6F-1295-4E08-A695-119F7D5B5AD8">Sample Delete Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-5AA0CC47-A24F-4D38-A223-73BC59A93F7F">Sample Truncate Message</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD522"></a>
<div class="props_rev_3"><a id="GUID-77685BA1-15DA-46DE-A375-23CFAA162760"></a>
<h5 id="GADBD-GUID-77685BA1-15DA-46DE-A375-23CFAA162760" class="sect5"><span class="enumeration_section">17.1.1.3.1</span> Sample Insert Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "I", 
"op_ts": "2013-06-02 22:14:36.000000", 
"current_ts": "2015-09-18T10:13:11.172000", 
"pos": "00000000000000001444", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], 
"tokens": {"R": "AADPkvAAEAAEqL2AAA"}, 
"CUST_CODE": "WILL", 
"ORDER_DATE": "1994-09-30:15:33:00", 
"PRODUCT_CODE": "CAR", 
"ORDER_ID": "144", 
"PRODUCT_PRICE": 17520.0, 
"PRODUCT_AMOUNT": 3.0, 
"TRANSACTION_ID": "100"}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC">Sample Avro Row Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD523"></a>
<div class="props_rev_3"><a id="GUID-7092DFEC-37B2-4A32-A881-7FEAF13790FB"></a>
<h5 id="GADBD-GUID-7092DFEC-37B2-4A32-A881-7FEAF13790FB" class="sect5"><span class="enumeration_section">17.1.1.3.2</span> Sample Update Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "U", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:13:11.492000", 
"pos": "00000000000000002891", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqLzAAA"}, 
"CUST_CODE": "BILL", 
"ORDER_DATE": "1995-12-31:15:00:00", 
"PRODUCT_CODE": "CAR", 
"ORDER_ID": "765", 
"PRODUCT_PRICE": 14000.0, 
"PRODUCT_AMOUNT": 3.0, 
"TRANSACTION_ID": "100"}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC">Sample Avro Row Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD524"></a>
<div class="props_rev_3"><a id="GUID-37630F6F-1295-4E08-A695-119F7D5B5AD8"></a>
<h5 id="GADBD-GUID-37630F6F-1295-4E08-A695-119F7D5B5AD8" class="sect5"><span class="enumeration_section">17.1.1.3.3</span> Sample Delete Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD",
"op_type": "D", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:13:11.512000", 
"pos": "00000000000000004338", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"L": "206080450", "6": "9.0.80330", "R": "AADPkvAAEAAEqLzAAC"}, "CUST_CODE":
 "DAVE", 
"ORDER_DATE": "1993-11-03:07:51:35", 
"PRODUCT_CODE": "PLANE", 
"ORDER_ID": "600", 
"PRODUCT_PRICE": null, 
"PRODUCT_AMOUNT": null, 
"TRANSACTION_ID": null}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC">Sample Avro Row Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD525"></a>
<div class="props_rev_3"><a id="GUID-5AA0CC47-A24F-4D38-A223-73BC59A93F7F"></a>
<h5 id="GADBD-GUID-5AA0CC47-A24F-4D38-A223-73BC59A93F7F" class="sect5"><span class="enumeration_section">17.1.1.3.4</span> Sample Truncate Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "T", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:13:11.514000", 
"pos": "00000000000000004515", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqL2AAB"}, 
"CUST_CODE": null, 
"ORDER_DATE": null, 
"PRODUCT_CODE": null, 
"ORDER_ID": null, 
"PRODUCT_PRICE": null, 
"PRODUCT_AMOUNT": null, 
"TRANSACTION_ID": null}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC">Sample Avro Row Messages</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD526"></a>
<div class="props_rev_3"><a id="GUID-A97788B6-FEA1-4586-8E86-18B298340D3C"></a>
<h4 id="GADBD-GUID-A97788B6-FEA1-4586-8E86-18B298340D3C" class="sect4"><span class="enumeration_section">17.1.1.4</span> Avro Schemas</h4>
<div>
<div class="section">
<p>Avro uses JSONs to represent schemas. Avro schemas define the format of generated Avro messages and are required to serialize and deserialize Avro messages. Schemas are generated on a just-in-time basis when the first operation for a table is encountered. Because generated Avro schemas are specific to a table definition, a separate Avro schema is generated for every table encountered for processed operations. By default, Avro schemas are written to the <span class="italic"><code class="codeph">GoldenGate_Home</code></span><code class="codeph">/dirdef</code> directory, although the write location is configurable. Avro schema file names adhere to the following naming convention: <span class="italic"><code class="codeph">Fully_Qualified_Table_Name</code></span><code class="codeph">.avsc</code>.</p>
<p>The following is a sample Avro schema for the Avro Row Format for the references examples in the previous section:</p>
<pre dir="ltr">
{
  "type" : "record",
  "name" : "TCUSTORD",
  "namespace" : "GG",
  "fields" : [ {
    "name" : "table",
    "type" : "string"
  }, {
    "name" : "op_type",
    "type" : "string"
  }, {
    "name" : "op_ts",
    "type" : "string"
  }, {
    "name" : "current_ts",
    "type" : "string"
  }, {
    "name" : "pos",
    "type" : "string"
  }, {
    "name" : "primary_keys",
    "type" : {
      "type" : "array",
      "items" : "string"
    }
  }, {
    "name" : "tokens",
    "type" : {
      "type" : "map",
      "values" : "string"
    },
    "default" : { }
  }, {
    "name" : "CUST_CODE",
    "type" : [ "null", "string" ],
    "default" : null
  }, {
    "name" : "ORDER_DATE",
    "type" : [ "null", "string" ],
    "default" : null
  }, {
    "name" : "PRODUCT_CODE",
    "type" : [ "null", "string" ],
    "default" : null
  }, {
    "name" : "ORDER_ID",
    "type" : [ "null", "string" ],
    "default" : null
  }, {
    "name" : "PRODUCT_PRICE",
    "type" : [ "null", "double" ],
    "default" : null
  }, {
    "name" : "PRODUCT_AMOUNT",
    "type" : [ "null", "double" ],
    "default" : null
  }, {
    "name" : "TRANSACTION_ID",
    "type" : [ "null", "string" ],
    "default" : null
  } ]
}
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD528"></a><a id="GADBD527"></a>
<div class="props_rev_3"><a id="GUID-2345E761-DA5D-4214-9C8C-80C4E70B9AC1"></a>
<h4 id="GADBD-GUID-2345E761-DA5D-4214-9C8C-80C4E70B9AC1" class="sect4"><span class="enumeration_section">17.1.1.5</span> Avro Row Configuration Properties</h4>
<div>
<div class="tblformal" id="GUID-2345E761-DA5D-4214-9C8C-80C4E70B9AC1__GUID-9F43C7C7-284C-452C-9283-8E7A2AD72E46">
<p class="titleintable">Table 17-2 Avro Row Configuration Properties</p>
<table class="cellalignment78" title="Avro Row Configuration Properties" summary="This five column table lists the Avro Row configuration properties.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment91" id="d80336e590">Properties</th>
<th class="cellalignment79" id="d80336e593">Optional/ Required</th>
<th class="cellalignment100" id="d80336e596">Legal Values</th>
<th class="cellalignment128" id="d80336e599">Default</th>
<th class="cellalignment129" id="d80336e602">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e607" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.insertOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e607 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e607 d80336e596">
<p>Any string</p>
</td>
<td class="cellalignment130" headers="d80336e607 d80336e599">
<p><code class="codeph">I</code></p>
</td>
<td class="cellalignment131" headers="d80336e607 d80336e602">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e630" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.updateOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e630 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e630 d80336e596">
<p>Any string</p>
</td>
<td class="cellalignment130" headers="d80336e630 d80336e599">
<p><code class="codeph">U</code></p>
</td>
<td class="cellalignment131" headers="d80336e630 d80336e602">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e653" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.deleteOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e653 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e653 d80336e596">
<p>Any string</p>
</td>
<td class="cellalignment130" headers="d80336e653 d80336e599">
<p><code class="codeph">D</code></p>
</td>
<td class="cellalignment131" headers="d80336e653 d80336e602">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e676" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.truncateOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e676 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e676 d80336e596">
<p>Any string</p>
</td>
<td class="cellalignment130" headers="d80336e676 d80336e599">
<p><code class="codeph">T</code></p>
</td>
<td class="cellalignment131" headers="d80336e676 d80336e602">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e699" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.encoding</code></p>
</td>
<td class="cellalignment83" headers="d80336e699 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e699 d80336e596">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment130" headers="d80336e699 d80336e599">
<p>UTF-8 (the JSON default)</p>
</td>
<td class="cellalignment131" headers="d80336e699 d80336e602">
<p>Controls the output encoding of generated JSON Avro schema. The JSON default is UTF-8. Avro messages are binary and support their own internal representation of encoding.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e721" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.treatAllColumnsAsStrings</code></p>
</td>
<td class="cellalignment83" headers="d80336e721 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e721 d80336e596">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment130" headers="d80336e721 d80336e599">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment131" headers="d80336e721 d80336e602">
<p>Controls the output typing of generated Avro messages. If set to false then the formatter will attempt to map Oracle GoldenGate types to the corresponding AVRO type. If set to true then all data will be treated as Strings in the generated Avro messages and schemas.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e748" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.pkUpdateHandlingformat.pkUpdateHandling</code></p>
</td>
<td class="cellalignment83" headers="d80336e748 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e748 d80336e596">
<p><code class="codeph">abend</code> | <code class="codeph">update</code> | <code class="codeph">delete-insert</code></p>
</td>
<td class="cellalignment130" headers="d80336e748 d80336e599">
<p><code class="codeph">abend</code></p>
</td>
<td class="cellalignment131" headers="d80336e748 d80336e602">
<p>Specifies how the formatter handles update operations that change a primary key. Primary key operations for the Avro Row formatter require special consideration.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">abend</code>: the process terminates.</p>
</li>
<li>
<p><code class="codeph">update</code>: the process handles the update as a normal update.</p>
</li>
<li>
<p><code class="codeph">delete</code> or <code class="codeph">insert</code>: the process handles the update as a delete and an insert. Full supplemental logging must be enabled. Without full before and after row images, the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e797" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.lineDelimiter</code></p>
</td>
<td class="cellalignment83" headers="d80336e797 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e797 d80336e596">
<p>Any string</p>
</td>
<td class="cellalignment130" headers="d80336e797 d80336e599">
<p>no value</p>
</td>
<td class="cellalignment131" headers="d80336e797 d80336e602">
<p>Inserts a delimiter after each Avro message. This is not a best practice, but in certain cases you may want to parse a stream of data and extract individual Avro messages from the stream. Select a unique delimiter that cannot occur in any Avro message. This property supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e822" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.versionSchemas</code></p>
</td>
<td class="cellalignment83" headers="d80336e822 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e822 d80336e596">
<p><code class="codeph">true</code>|<code class="codeph">false</code></p>
</td>
<td class="cellalignment130" headers="d80336e822 d80336e599">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment131" headers="d80336e822 d80336e602">
<p>Avro schemas always follow the<span class="italic"><code class="codeph">fully_qualified_table_name</code></span><code class="codeph">.avsc</code> convention. Setting this property to <code class="codeph">true</code> creates an additional Avro schema named <span class="italic"><code class="codeph">fully_qualified_table_name</code></span><code class="codeph">_</code><span class="italic"><code class="codeph">current_timestamp</code></span><code class="codeph">.avsc</code> in the schema directory. Because the additional Avro schema is not destroyed or removed, provides a history of schema evolution.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e869" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.wrapMessageInGenericAvroMessage</code></p>
</td>
<td class="cellalignment83" headers="d80336e869 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e869 d80336e596">
<p><code class="codeph">true</code>|<code class="codeph">false</code></p>
</td>
<td class="cellalignment130" headers="d80336e869 d80336e599">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment131" headers="d80336e869 d80336e602">
<p>Wraps the Avro messages for operations from the source trail file in a generic Avro wrapper message. For more information, see <a href="using-pluggable-formatters.htm#GUID-24CC9E72-20A4-478E-8503-9777B9029A9B">Generic Wrapper Functionality</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e899" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.schemaDirectory</code></p>
</td>
<td class="cellalignment83" headers="d80336e899 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e899 d80336e596">
<p>Any legal, existing file system path.</p>
</td>
<td class="cellalignment130" headers="d80336e899 d80336e599">
<p><code class="codeph">./dirdef</code></p>
</td>
<td class="cellalignment131" headers="d80336e899 d80336e602">
<p>The output location of generated Avro schemas.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e923" headers="d80336e590">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name</code></span><code class="codeph">.schemaFilePath=</code></p>
</td>
<td class="cellalignment83" headers="d80336e923 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e923 d80336e596">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment130" headers="d80336e923 d80336e599">
<p><code class="codeph">./dirdef</code></p>
</td>
<td class="cellalignment131" headers="d80336e923 d80336e602">
<p>The directory in the HDFS where schemas are output. A metadata change overwrites the schema during the next operation for the associated table. Schemas follow the same naming convention as schemas written to the local file system:<code class="codeph"><span class="codeinlineitalic">catalog.schema.table</span></code><code class="codeph">.avsc</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment95" id="d80336e952" headers="d80336e590">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment83" headers="d80336e952 d80336e593">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e952 d80336e596">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment130" headers="d80336e952 d80336e599">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment131" headers="d80336e952 d80336e602">The format of the current timestamp. The default is the &nbsp;ISO 8601 format. A setting of <code class="codeph">false</code> removes the <code class="codeph">T</code> between the date and time in the current timestamp, which outputs a space instead.</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD529"></a>
<div class="props_rev_3"><a id="GUID-5AB2D030-A209-4CD3-A6B6-37355FF1612B"></a>
<h4 id="GADBD-GUID-5AB2D030-A209-4CD3-A6B6-37355FF1612B" class="sect4"><span class="enumeration_section">17.1.1.6</span> Review a Sample Configuration</h4>
<div>
<div class="section">
<p>The following is a sample configuration for the Avro Row Formatter in the Java Adapter properties file:</p>
<pre dir="ltr">
gg.handler.hdfs.format=avro_row
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.encoding=UTF-8
gg.handler.hdfs.format.pkUpdateHandling=abend
gg.handler.hafs.format.wrapMessageInGenericAvroMessage=false
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD530"></a>
<div class="props_rev_3"><a id="GUID-54A079BF-B672-47B2-9F11-A6F734C7563B"></a>
<h4 id="GADBD-GUID-54A079BF-B672-47B2-9F11-A6F734C7563B" class="sect4"><span class="enumeration_section">17.1.1.7</span> Metadata Change Events</h4>
<div>
<div class="section">
<p>If the replicated database and upstream Oracle GoldenGate replication process can propagate metadata change events, the Avro Row Formatter can take action when metadata changes. Because Avro messages depend closely on their corresponding schema, metadata changes are important when you use Avro formatting.</p>
<p>An updated Avro schema is generated as soon as a table operation occurs after a metadata change event. You must understand the impact of a metadata change event and change downstream targets to the new Avro schema. The tight dependency of Avro messages to Avro schemas may result in compatibility issues. Avro messages generated before the schema change may not be able to be deserialized with the newly generated Avro schema.</p>
<p>Conversely, Avro messages generated after the schema change may not be able to be deserialized with the previous Avro schema. It is a best practice to use the same version of the Avro schema that was used to generate the message. For more information, consult the Apache Avro documentation.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD531"></a>
<div class="props_rev_3"><a id="GUID-7E290838-F287-453C-AB55-EAF41930CD81"></a>
<h4 id="GADBD-GUID-7E290838-F287-453C-AB55-EAF41930CD81" class="sect4"><span class="enumeration_section">17.1.1.8</span> Special Considerations</h4>
<div>
<div class="section">
<p>This sections describes these special considerations:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-823DADB3-ED30-414B-8F73-816DE6624CC0">Troubleshooting</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-0DB9EC9C-C060-4AEE-A60C-4251AFFFA99C">Primary Key Updates</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-24CC9E72-20A4-478E-8503-9777B9029A9B">Generic Wrapper Functionality</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD532"></a>
<div class="sect5"><a id="GUID-823DADB3-ED30-414B-8F73-816DE6624CC0"></a>
<h5 id="GADBD-GUID-823DADB3-ED30-414B-8F73-816DE6624CC0" class="sect5"><span class="enumeration_section">17.1.1.8.1</span> Troubleshooting</h5>
<div>
<p>Because Avro is a binary format, it is not human readable. Since Avro messages are in binary format, it is difficult to debug any issue, the Avro Row Formatter provides a special feature to help debug issues. When the <code class="codeph">log4j</code> Java logging level is set to <code class="codeph">TRACE</code> , Avro messages are deserialized and displayed in the log file as a JSON object, letting you view the structure and contents of the created Avro messages. Do not enable <code class="codeph">TRACE</code> in a production environment as it has substantial negative impact on performance. To troubleshoot content, you may want to consider switching to use a formatter that produces human-readable content. The XML or JSON formatters both produce content in human-readable format.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-7E290838-F287-453C-AB55-EAF41930CD81">Special Considerations</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD534"></a><a id="GADBD533"></a>
<div class="sect5"><a id="GUID-0DB9EC9C-C060-4AEE-A60C-4251AFFFA99C"></a>
<h5 id="GADBD-GUID-0DB9EC9C-C060-4AEE-A60C-4251AFFFA99C" class="sect5"><span class="enumeration_section">17.1.1.8.2</span> Primary Key Updates</h5>
<div>
<p>In Big Data integrations, primary key update operations require special consideration and planning. Primary key updates modify one or more of the primary keys of a given row in the source database. Because data is appended in Big Data applications, a primary key update operation looks more like a new insert than like an update without special handling. You can use the following properties to configure the Avro Row Formatter to handle primary keys:</p>
<div class="tblformal" id="GUID-0DB9EC9C-C060-4AEE-A60C-4251AFFFA99C__GUID-5114468F-E637-4CB0-8C5B-1FCFBF6F4400">
<p class="titleintable">Table 17-3 Configurable behavior</p>
<table class="cellalignment78" title="Configurable behavior" summary="This two column table lists the configurable behavior for Avro Row Formatter">
<thead>
<tr class="cellalignment65">
<th class="cellalignment124" id="d80336e1167">Value</th>
<th class="cellalignment125" id="d80336e1170">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e1175" headers="d80336e1167">
<p><code class="codeph">abend</code></p>
</td>
<td class="cellalignment127" headers="d80336e1175 d80336e1170">
<p>The formatter terminates. This behavior is the default behavior.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e1183" headers="d80336e1167">
<p><code class="codeph">update</code></p>
</td>
<td class="cellalignment127" headers="d80336e1183 d80336e1170">
<p>With this configuration the primary key update is treated like any other update operation. Use this configuration only if you can guarantee that the primary key is not used as selection criteria row data from a Big Data system.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e1191" headers="d80336e1167">
<p><code class="codeph">delete-insert</code></p>
</td>
<td class="cellalignment127" headers="d80336e1191 d80336e1170">
<p>The primary key update is treated as a special case of a delete, using the before image data and an insert using the after-image data. This configuration may more accurately model the effect of a primary key update in a Big Data application. However, if this configuration is selected, it is important to have full supplemental logging enabled on Replication at the source database. Without full supplemental logging the delete operation will be correct, but insert operation will not contain all of the data for all of the columns for a full representation of the row data in the Big Data application.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-7E290838-F287-453C-AB55-EAF41930CD81">Special Considerations</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD535"></a>
<div class="sect5"><a id="GUID-24CC9E72-20A4-478E-8503-9777B9029A9B"></a>
<h5 id="GADBD-GUID-24CC9E72-20A4-478E-8503-9777B9029A9B" class="sect5"><span class="enumeration_section">17.1.1.8.3</span> Generic Wrapper Functionality</h5>
<div>
<p>Because Avro messages are not self describing, the receiver of the message must know the schema associated with the message before the message can be deserialized. Avro messages are binary and provide no consistent or reliable way to inspect the message contents in order to ascertain the message type. Therefore, Avro can be troublesome when messages are interlaced into a single stream of data such as Kafka.</p>
<p>The Avro formatter provides a special feature to wrap the Avro message in a generic Avro message. You can enable this functionality by setting the following configuration property.</p>
<pre dir="ltr">
gg.handler.<span class="italic">name</span>.format.wrapMessageInGenericAvroMessage=true
</pre>
<p>The generic message is Avro message wrapping the Avro payload message that is common to all Avro messages that are output. The schema for the generic message is name <code class="codeph">generic_wrapper.avsc</code> and is written to the output schema directory. This message has the following three fields:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">table_name</code> :The fully qualified source table name.</p>
</li>
<li>
<p><code class="codeph">schema_fingerprint</code> : The fingerprint of the Avro schema of the wrapped message. The fingerprint is generated using the Avro <code class="codeph">SchemaNormalization.parsingFingerprint64(schema)</code> call.</p>
</li>
<li>
<p><code class="codeph">payload</code>: The wrapped Avro message.</p>
</li>
</ul>
<p>The following is the Avro Formatter generic wrapper schema.</p>
<pre dir="ltr">
{
  "type" : "record",
  "name" : "generic_wrapper",
  "namespace" : "oracle.goldengate",
  "fields" : [ {
    "name" : "table_name",
    "type" : "string"
  }, {
    "name" : "schema_fingerprint",
    "type" : "long"
  }, {
    "name" : "payload",
    "type" : "bytes"
  } ]
}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-7E290838-F287-453C-AB55-EAF41930CD81">Special Considerations</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD536"></a>
<div class="props_rev_3"><a id="GUID-D77D819B-FDA2-4348-9899-711B50302F96"></a>
<h3 id="GADBD-GUID-D77D819B-FDA2-4348-9899-711B50302F96" class="sect3"><span class="enumeration_section">17.1.2</span> The Avro Operation Formatter</h3>
<div>
<div class="section">
<p>The Avro Operation Formatter formats operation data from the source trail file into messages in an Avro binary array format. Each individual insert, update, delete, and truncate operation is formatted into an individual Avro message. The source trail file contains the before and after images of the operation data. The Avro Operation Formatter formats this data into an Avro binary representation of the operation data.</p>
<p>This format is more verbose than the output of the Avro Row Formatter for which the Avro messages model the row data.</p>
<p>This section contains the following topics:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-B4F1C3BC-6B95-4184-B98F-CCF2AD2BC3D2">Operation Metadata Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-EECE0A95-2A5A-4154-A1B7-72D59909AC87">Operation Data Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5">Sample Avro Operation Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-7D8D519D-7358-46D8-AABB-AE7487498394">Avro Schema</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-98614A46-1E3F-4003-A965-5B3CA6F27668">Avro Operation Formatter Configuration Properties</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-2993BB83-4F79-4835-A40D-E53C52CD18AD">Review a Sample Configuration</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-A314CBB0-AA5F-4141-A74A-DABE57106A9E">Metadata Change Events</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565">Special Considerations</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2">Using the Avro Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD539"></a><a id="GADBD538"></a>
<div class="props_rev_3"><a id="GUID-B4F1C3BC-6B95-4184-B98F-CCF2AD2BC3D2"></a>
<h4 id="GADBD-GUID-B4F1C3BC-6B95-4184-B98F-CCF2AD2BC3D2" class="sect4"><span class="enumeration_section">17.1.2.1</span> Operation Metadata Formatting Details</h4>
<div>
<p>Avro messages, generated by the Avro Operation Formatter, contain the following metadata fields begin each Avro message:</p>
<div class="tblformal" id="GUID-B4F1C3BC-6B95-4184-B98F-CCF2AD2BC3D2__GUID-6B772FE4-0C97-4F3F-8039-C480AD1C4168">
<p class="titleintable">Table 17-4 Avro Messages and its Metadata</p>
<table class="cellalignment78" title="Avro Messages and its Metadata " summary="This two column table lists the Avro Messages and its Metadata">
<thead>
<tr class="cellalignment65">
<th class="cellalignment132" id="d80336e1380">Fields</th>
<th class="cellalignment133" id="d80336e1383">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment134" id="d80336e1388" headers="d80336e1380">
<p><code class="codeph">table</code></p>
</td>
<td class="cellalignment135" headers="d80336e1388 d80336e1383">The fully qualified table name, in the format:
<p><span class="italic"><code class="codeph">CATALOG_NAME.SCHEMA NAME.TABLE NAME</code></span></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment134" id="d80336e1399" headers="d80336e1380">
<p><code class="codeph">op_type</code></p>
</td>
<td class="cellalignment135" headers="d80336e1399 d80336e1383">
<p>The type of database operation from the source trail file. Default values are <code class="codeph">I</code> for insert, <code class="codeph">U</code> for update, <code class="codeph">D</code> for delete, and <code class="codeph">T</code> for truncate.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment134" id="d80336e1419" headers="d80336e1380">
<p><code class="codeph">op_ts</code></p>
</td>
<td class="cellalignment135" headers="d80336e1419 d80336e1383">
<p>The timestamp of the operation from the source trail file. Since this timestamp is from the source trail, it is fixed. Replaying the trail file results in the same timestamp for the same operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment134" id="d80336e1427" headers="d80336e1380">
<p><code class="codeph">current_ts</code></p>
</td>
<td class="cellalignment135" headers="d80336e1427 d80336e1383">
<p>The time when the formatter processed the current operation record. This timestamp follows the ISO-8601 format and includes microsecond precision. Replaying the trail file will <span class="italic">not</span> result in the same timestamp for the same operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment134" id="d80336e1439" headers="d80336e1380">
<p><code class="codeph">pos</code></p>
</td>
<td class="cellalignment135" headers="d80336e1439 d80336e1383">
<p>The concatenated sequence number and rba number from the source trail file. The trail position provides traceability of the operation back to the source trail file. The sequence number is the source trail file number. The rba number is the offset in the trail file.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment134" id="d80336e1447" headers="d80336e1380">
<p><code class="codeph">primary_keys</code></p>
</td>
<td class="cellalignment135" headers="d80336e1447 d80336e1383">
<p>An array variable that holds the column names of the primary keys of the source table.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment134" id="d80336e1455" headers="d80336e1380">
<p><code class="codeph">tokens</code></p>
</td>
<td class="cellalignment135" headers="d80336e1455 d80336e1383">
<p>A map variable that holds the token key value pairs from the source trail file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD540"></a>
<div class="props_rev_3"><a id="GUID-EECE0A95-2A5A-4154-A1B7-72D59909AC87"></a>
<h4 id="GADBD-GUID-EECE0A95-2A5A-4154-A1B7-72D59909AC87" class="sect4"><span class="enumeration_section">17.1.2.2</span> Operation Data Formatting Details</h4>
<div>
<p>The operation data is represented as individual fields identified by the column names.</p>
<p>Column values for an operation from the source trail file can have one of three states: the column has a value, the column value is null, or the column value is missing. Avro attributes only support two states: the column has a value or the column value is null. The Avro Operation Formatter contains an additional Boolean field <span class="italic"><code class="codeph">COLUMN_NAME</code></span><code class="codeph">_isMissing</code> for each column to indicate whether the column value is missing or not. Using <span class="italic"><code class="codeph">COLUMN_NAME</code></span> field together with the <span class="italic"><code class="codeph">COLUMN_NAME</code></span><code class="codeph">_isMissing</code> field, all three states can be defined.</p>
<ul style="list-style-type: disc;">
<li>
<p>State 1: The column has a value</p>
<p><span class="italic"><code class="codeph">COLUMN_NAME</code></span> field has a value</p>
<p><span class="italic"><code class="codeph">COLUMN_NAME</code></span><code class="codeph">_isMissing</code> field is false</p>
</li>
<li>
<p>State 2: The column value is null</p>
<p><span class="italic"><code class="codeph">COLUMN_NAME</code></span> field value is null</p>
<p><span class="italic"><code class="codeph">COLUMN_NAME</code></span><code class="codeph">_isMissing</code> field is false</p>
</li>
<li>
<p>State 3: The column value is missing</p>
<p><span class="italic"><code class="codeph">COLUMN_NAME</code></span> field value is null</p>
<p><span class="italic"><code class="codeph">COLUMN_NAME</code></span><code class="codeph">_isMissing</code> field is true</p>
</li>
</ul>
<p>By default the Avro Row Formatter maps the data types from the source trail file to the associated Avro data type. Because Avro supports few data types, this functionality usually results in the mapping of numeric fields from the source trail file to members typed as numbers. You can also configure this data type mapping to handle all data as strings.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD541"></a>
<div class="props_rev_3"><a id="GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5"></a>
<h4 id="GADBD-GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5" class="sect4"><span class="enumeration_section">17.1.2.3</span> Sample Avro Operation Messages</h4>
<div>
<div class="section">
<p>Because Avro messages are binary, they are not human readable. The following topics show example Avro messages in JSON format:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-410F0B9F-B1AB-4C3A-AB64-8591A30A21C3">Sample Insert Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-FC3BB6A5-9083-489C-8533-A8EB4AB25624">Sample Update Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-75AF4E0C-5C56-4B9B-AF25-F3E3E858BEC7">Sample Delete Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-FD998BB6-9992-413C-965E-2BC1510AEC3E">Sample Truncate Message</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD542"></a>
<div class="props_rev_3"><a id="GUID-410F0B9F-B1AB-4C3A-AB64-8591A30A21C3"></a>
<h5 id="GADBD-GUID-410F0B9F-B1AB-4C3A-AB64-8591A30A21C3" class="sect5"><span class="enumeration_section">17.1.2.3.1</span> Sample Insert Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD",
"op_type": "I", 
"op_ts": "2013-06-02 22:14:36.000000", 
"current_ts": "2015-09-18T10:17:49.570000", 
"pos": "00000000000000001444", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqL2AAA"}, 
"before": null, 
"after": {
"CUST_CODE": "WILL", 
"CUST_CODE_isMissing": false, 
"ORDER_DATE": "1994-09-30:15:33:00", 
"ORDER_DATE_isMissing": false, 
"PRODUCT_CODE": "CAR", 
"PRODUCT_CODE_isMissing": false, 
"ORDER_ID": "144", "ORDER_ID_isMissing": false, 
"PRODUCT_PRICE": 17520.0, 
"PRODUCT_PRICE_isMissing": false, 
"PRODUCT_AMOUNT": 3.0, "PRODUCT_AMOUNT_isMissing": false, 
"TRANSACTION_ID": "100", 
"TRANSACTION_ID_isMissing": false}}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5">Sample Avro Operation Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD543"></a>
<div class="props_rev_3"><a id="GUID-FC3BB6A5-9083-489C-8533-A8EB4AB25624"></a>
<h5 id="GADBD-GUID-FC3BB6A5-9083-489C-8533-A8EB4AB25624" class="sect5"><span class="enumeration_section">17.1.2.3.2</span> Sample Update Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "U", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:17:49.880000", 
"pos": "00000000000000002891", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqLzAAA"}, 
"before": {
"CUST_CODE": "BILL", 
"CUST_CODE_isMissing": false, 
"ORDER_DATE": "1995-12-31:15:00:00", 
"ORDER_DATE_isMissing": false, 
"PRODUCT_CODE": "CAR", 
"PRODUCT_CODE_isMissing": false, 
"ORDER_ID": "765", 
"ORDER_ID_isMissing": false, 
"PRODUCT_PRICE": 15000.0, 
"PRODUCT_PRICE_isMissing": false, 
"PRODUCT_AMOUNT": 3.0, 
"PRODUCT_AMOUNT_isMissing": false, 
"TRANSACTION_ID": "100", 
"TRANSACTION_ID_isMissing": false}, 
"after": {
"CUST_CODE": "BILL", 
"CUST_CODE_isMissing": false, 
"ORDER_DATE": "1995-12-31:15:00:00", 
"ORDER_DATE_isMissing": false, 
"PRODUCT_CODE": "CAR", 
"PRODUCT_CODE_isMissing": false, 
"ORDER_ID": "765", 
"ORDER_ID_isMissing": false, 
"PRODUCT_PRICE": 14000.0, 
"PRODUCT_PRICE_isMissing": false, 
"PRODUCT_AMOUNT": 3.0, 
"PRODUCT_AMOUNT_isMissing": false, 
"TRANSACTION_ID": "100", 
"TRANSACTION_ID_isMissing": false}}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5">Sample Avro Operation Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD544"></a>
<div class="props_rev_3"><a id="GUID-75AF4E0C-5C56-4B9B-AF25-F3E3E858BEC7"></a>
<h5 id="GADBD-GUID-75AF4E0C-5C56-4B9B-AF25-F3E3E858BEC7" class="sect5"><span class="enumeration_section">17.1.2.3.3</span> Sample Delete Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "D", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:17:49.899000", 
"pos": "00000000000000004338", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"L": "206080450", "6": "9.0.80330", "R": "AADPkvAAEAAEqLzAAC"}, "before": {
"CUST_CODE": "DAVE", 
"CUST_CODE_isMissing": false, 
"ORDER_DATE": "1993-11-03:07:51:35", 
"ORDER_DATE_isMissing": false, 
"PRODUCT_CODE": "PLANE", 
"PRODUCT_CODE_isMissing": false, 
"ORDER_ID": "600", 
"ORDER_ID_isMissing": false, 
"PRODUCT_PRICE": null, 
"PRODUCT_PRICE_isMissing": true, 
"PRODUCT_AMOUNT": null, 
"PRODUCT_AMOUNT_isMissing": true, 
"TRANSACTION_ID": null, 
"TRANSACTION_ID_isMissing": true}, 
"after": null}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5">Sample Avro Operation Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD545"></a>
<div class="props_rev_3"><a id="GUID-FD998BB6-9992-413C-965E-2BC1510AEC3E"></a>
<h5 id="GADBD-GUID-FD998BB6-9992-413C-965E-2BC1510AEC3E" class="sect5"><span class="enumeration_section">17.1.2.3.4</span> Sample Truncate Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "T", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:17:49.900000", 
"pos": "00000000000000004515", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqL2AAB"}, 
"before": null, 
"after": null}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5">Sample Avro Operation Messages</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD546"></a>
<div class="props_rev_3"><a id="GUID-7D8D519D-7358-46D8-AABB-AE7487498394"></a>
<h4 id="GADBD-GUID-7D8D519D-7358-46D8-AABB-AE7487498394" class="sect4"><span class="enumeration_section">17.1.2.4</span> Avro Schema</h4>
<div>
<div class="section">
<p>Avro schemas are represented as JSONs. Avro schemas define the format of generated Avro messages and are required to serialize and deserialize Avro messages.Avro schemas are generated on a just-in-time basis when the first operation for a table is encountered. Because Avro schemas are specific to a table definition, a separate Avro schema is generated for every table encountered for processed operations. By default, Avro schemas are written to the <span class="italic"><code class="codeph">GoldenGate_Home</code></span><code class="codeph">/dirdef</code> directory, although the write location is configurable. Avro schema file names adhere to the following naming convention: <code class="codeph"><span class="codeinlineitalic">Fully_Qualified_Table_Name</span>.avsc</code> .</p>
<p>The following is a sample Avro schema for the Avro Operation Format for the samples in the preceding sections:</p>
<pre dir="ltr">
{
  "type" : "record",
  "name" : "TCUSTORD",
  "namespace" : "GG",
  "fields" : [ {
    "name" : "table",
    "type" : "string"
  }, {
    "name" : "op_type",
    "type" : "string"
  }, {
    "name" : "op_ts",
    "type" : "string"
  }, {
    "name" : "current_ts",
    "type" : "string"
  }, {
    "name" : "pos",
    "type" : "string"
  }, {
    "name" : "primary_keys",
    "type" : {
      "type" : "array",
      "items" : "string"
    }
  }, {
    "name" : "tokens",
    "type" : {
      "type" : "map",
      "values" : "string"
    },
    "default" : { }
  }, {
    "name" : "before",
    "type" : [ "null", {
      "type" : "record",
      "name" : "columns",
      "fields" : [ {
        "name" : "CUST_CODE",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "CUST_CODE_isMissing",
        "type" : "boolean"
      }, {
        "name" : "ORDER_DATE",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "ORDER_DATE_isMissing",
        "type" : "boolean"
      }, {
        "name" : "PRODUCT_CODE",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "PRODUCT_CODE_isMissing",
        "type" : "boolean"
      }, {
        "name" : "ORDER_ID",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "ORDER_ID_isMissing",
        "type" : "boolean"
      }, {
        "name" : "PRODUCT_PRICE",
        "type" : [ "null", "double" ],
        "default" : null
      }, {
        "name" : "PRODUCT_PRICE_isMissing",
        "type" : "boolean"
      }, {
        "name" : "PRODUCT_AMOUNT",
        "type" : [ "null", "double" ],
        "default" : null
      }, {
        "name" : "PRODUCT_AMOUNT_isMissing",
        "type" : "boolean"
      }, {
        "name" : "TRANSACTION_ID",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "TRANSACTION_ID_isMissing",
        "type" : "boolean"
      } ]
    } ],
    "default" : null
  }, {
    "name" : "after",
    "type" : [ "null", "columns" ],
    "default" : null
  } ]
}
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD548"></a><a id="GADBD547"></a>
<div class="props_rev_3"><a id="GUID-98614A46-1E3F-4003-A965-5B3CA6F27668"></a>
<h4 id="GADBD-GUID-98614A46-1E3F-4003-A965-5B3CA6F27668" class="sect4"><span class="enumeration_section">17.1.2.5</span> Avro Operation Formatter Configuration Properties</h4>
<div>
<div class="tblformal" id="GUID-98614A46-1E3F-4003-A965-5B3CA6F27668__GUID-B233ED06-584F-49F8-A5DC-89A102FF2836">
<p class="titleintable">Table 17-5 Configuration Properties</p>
<table class="cellalignment78" title="Configuration Properties" summary="This five column table lists the configuration options for Avro Operation Formatter Configuration Properties">
<thead>
<tr class="cellalignment65">
<th class="cellalignment136" id="d80336e1801">Properties</th>
<th class="cellalignment79" id="d80336e1804">Optional Y/N</th>
<th class="cellalignment90" id="d80336e1807">Legal Values</th>
<th class="cellalignment79" id="d80336e1810">Default</th>
<th class="cellalignment124" id="d80336e1813">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e1818" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.insertOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e1818 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e1818 d80336e1807">
<p>Any string</p>
</td>
<td class="cellalignment83" headers="d80336e1818 d80336e1810">
<p><code class="codeph">I</code></p>
</td>
<td class="cellalignment126" headers="d80336e1818 d80336e1813">
<p>Indicator to be inserted into the output record to indicate an insert operation</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e1841" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.updateOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e1841 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e1841 d80336e1807">
<p>Any string</p>
</td>
<td class="cellalignment83" headers="d80336e1841 d80336e1810">
<p><code class="codeph">U</code></p>
</td>
<td class="cellalignment126" headers="d80336e1841 d80336e1813">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e1864" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.deleteOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e1864 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e1864 d80336e1807">
<p>Any string</p>
</td>
<td class="cellalignment83" headers="d80336e1864 d80336e1810">
<p><code class="codeph">D</code></p>
</td>
<td class="cellalignment126" headers="d80336e1864 d80336e1813">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e1887" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.truncateOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e1887 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e1887 d80336e1807">
<p>Any string</p>
</td>
<td class="cellalignment83" headers="d80336e1887 d80336e1810">
<p><code class="codeph">T</code></p>
</td>
<td class="cellalignment126" headers="d80336e1887 d80336e1813">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e1910" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.encoding</code></p>
</td>
<td class="cellalignment83" headers="d80336e1910 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e1910 d80336e1807">
<p>Any legal encoding name or alias supported by Java</p>
</td>
<td class="cellalignment83" headers="d80336e1910 d80336e1810">
<p>UTF-8 (the JSON default)</p>
</td>
<td class="cellalignment126" headers="d80336e1910 d80336e1813">
<p>Controls the output encoding of generated JSON Avro schema. The JSON default is UTF-8. Avro messages are binary and support their own internal representation of encoding.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e1932" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.treatAllColumnsAsStrings</code></p>
</td>
<td class="cellalignment83" headers="d80336e1932 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e1932 d80336e1807">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment83" headers="d80336e1932 d80336e1810">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment126" headers="d80336e1932 d80336e1813">
<p>Controls the output typing of generated Avro messages. If set to <code class="codeph">false</code>, then the formatter attempts to map Oracle GoldenGate types to the corresponding Avro type. If set to <code class="codeph">true</code>, then all data is treated as Strings in the generated Avro messages and schemas.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e1965" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.lineDelimiter</code></p>
</td>
<td class="cellalignment83" headers="d80336e1965 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e1965 d80336e1807">
<p>Any string</p>
</td>
<td class="cellalignment83" headers="d80336e1965 d80336e1810">
<p>no value</p>
</td>
<td class="cellalignment126" headers="d80336e1965 d80336e1813">
<p>Inserts delimiter after each Avro message. This is not a best practice, but in certain cases you may want to parse a stream of data and extract individual Avro messages from the stream, use this property to help. Select a unique delimiter that cannot occur in any Avro message. This property supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e1990" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.schemaDirectory</code></p>
</td>
<td class="cellalignment83" headers="d80336e1990 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e1990 d80336e1807">
<p>Any legal, existing file system path.</p>
</td>
<td class="cellalignment83" headers="d80336e1990 d80336e1810">
<p><code class="codeph">./dirdef</code></p>
</td>
<td class="cellalignment126" headers="d80336e1990 d80336e1813">
<p>The output location of generated Avro schemas.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e2013" headers="d80336e1801">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.wrapMessageInGenericAvroMessage</code></p>
</td>
<td class="cellalignment83" headers="d80336e2013 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e2013 d80336e1807">
<p><code class="codeph">true</code>|<code class="codeph">false</code></p>
</td>
<td class="cellalignment83" headers="d80336e2013 d80336e1810">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment126" headers="d80336e2013 d80336e1813">
<p>Wraps Avro messages for operations from the source trail file in a generic Avro wrapper message. For more information, see <a href="using-pluggable-formatters.htm#GUID-24CC9E72-20A4-478E-8503-9777B9029A9B">Generic Wrapper Functionality</a>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment137" id="d80336e2043" headers="d80336e1801">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment83" headers="d80336e2043 d80336e1804">
<p>Optional</p>
</td>
<td class="cellalignment94" headers="d80336e2043 d80336e1807">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment83" headers="d80336e2043 d80336e1810">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment126" headers="d80336e2043 d80336e1813">The format of the current timestamp. By default the &nbsp;ISO 8601 is set to <code class="codeph">false</code>, removes the <code class="codeph">T</code> between the date and time in the current timestamp, which outputs a space instead.</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD549"></a>
<div class="props_rev_3"><a id="GUID-2993BB83-4F79-4835-A40D-E53C52CD18AD"></a>
<h4 id="GADBD-GUID-2993BB83-4F79-4835-A40D-E53C52CD18AD" class="sect4"><span class="enumeration_section">17.1.2.6</span> Review a Sample Configuration</h4>
<div>
<div class="section">
<p>The following is a sample configuration for the Avro Operation Formatter in the Java Adapter <code class="codeph">properg.handlerties</code> file:</p>
<pre dir="ltr">
gg.hdfs.format=avro_op
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.encoding=UTF-8
gg.handler.hdfs.format.wrapMessageInGenericAvroMessage=false
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD550"></a>
<div class="props_rev_3"><a id="GUID-A314CBB0-AA5F-4141-A74A-DABE57106A9E"></a>
<h4 id="GADBD-GUID-A314CBB0-AA5F-4141-A74A-DABE57106A9E" class="sect4"><span class="enumeration_section">17.1.2.7</span> Metadata Change Events</h4>
<div>
<div class="section">
<p>If the replicated database and upstream Oracle GoldenGate replication process can propagate metadata change events, the Avro Operation Formatter can take action when metadata changes. Because Avro messages depend closely on their corresponding schema, metadata changes are important when you use Avro formatting.</p>
<p>An updated Avro schema is generated as soon as a table operation occurs after a metadata change event.</p>
<p>You must understand the impact of a metadata change event and change downstream targets to the new Avro schema. The tight dependency of Avro messages to Avro schemas may result in compatibility issues. Avro messages generated before the schema change may not be able to be deserialized with the newly generated Avro schema. Conversely, Avro messages generated after the schema change may not be able to be deserialized with the previous Avro schema. It is a best practice to use the same version of the Avro schema that was used to generate the message</p>
<p>For more information, consult the Apache Avro documentation.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD551"></a>
<div class="props_rev_3"><a id="GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565"></a>
<h4 id="GADBD-GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565" class="sect4"><span class="enumeration_section">17.1.2.8</span> Special Considerations</h4>
<div>
<div class="section">
<p>This section describes these special considerations:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-33524400-58C4-4E9F-9DDF-D1A57AA465A0">Troubleshooting</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-EF02EE2F-0C4E-4A27-9356-66B88AD31718">Primary Key Updates</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-D130B867-16FE-4EE5-8AEE-E22341699E36">Generic Wrapper Message</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">The Avro Operation Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD552"></a>
<div class="props_rev_3"><a id="GUID-33524400-58C4-4E9F-9DDF-D1A57AA465A0"></a>
<h5 id="GADBD-GUID-33524400-58C4-4E9F-9DDF-D1A57AA465A0" class="sect5"><span class="enumeration_section">17.1.2.8.1</span> Troubleshooting</h5>
<div>
<p>Because Avro is a binary format, it is not human readable. However, when the <code class="codeph">log4j</code> Java logging level is set to <code class="codeph">TRACE</code>, Avro messages are deserialized and displayed in the log file as a JSON object, letting you view the structure and contents of the created Avro messages. Do not enable <code class="codeph">TRACE</code> in a production environment, as it has a substantial impact on performance.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565">Special Considerations</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD553"></a>
<div class="props_rev_3"><a id="GUID-EF02EE2F-0C4E-4A27-9356-66B88AD31718"></a>
<h5 id="GADBD-GUID-EF02EE2F-0C4E-4A27-9356-66B88AD31718" class="sect5"><span class="enumeration_section">17.1.2.8.2</span> Primary Key Updates</h5>
<div>
<p>The Avro Operation Formatter creates messages with complete data of before-image and after-images for update operations. Therefore, the Avro Operation Formatter requires no special treatment for primary key updates.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565">Special Considerations</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD554"></a>
<div class="props_rev_3"><a id="GUID-D130B867-16FE-4EE5-8AEE-E22341699E36"></a>
<h5 id="GADBD-GUID-D130B867-16FE-4EE5-8AEE-E22341699E36" class="sect5"><span class="enumeration_section">17.1.2.8.3</span> Generic Wrapper Message</h5>
<div>
<p>Because Avro messages are not self describing, the receiver of the message must know the schema associated with the message before the message can be deserialized. Avro messages are binary and provide no consistent or reliable way to inspect the message contents in order to ascertain the message type. Therefore, Avro can be troublesome when messages are interlaced into a single stream of data such as Kafka.</p>
<p>The Avro formatter provides a special feature to wrap the Avro message in a generic Avro message. You can enable this functionality by setting the following configuration property:</p>
<pre dir="ltr">
gg.handler.<span class="italic">name</span>.format.wrapMessageInGenericAvroMessage=true
</pre>
<p>The generic message is Avro message wrapping the Avro payload message that is common to all Avro messages that are output. The schema for the generic message is name <code class="codeph">generic_wrapper.avsc</code> and is written to the output schema directory. This message has the following three fields:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">table_name</code>: The fully qualified source table name.</p>
</li>
<li>
<p><code class="codeph">schema_fingerprint</code> : The fingerprint of the of the Avro schema generating the messages. The fingerprint is generated using the <code class="codeph">parsingFingerprint64(Schema s)</code> method on the <code class="codeph">org.apache.avro.SchemaNormalization</code> class.</p>
</li>
<li>
<p><code class="codeph">payload</code>: The wrapped Avro message.</p>
</li>
</ul>
<p>The following is the Avro Formatter generic wrapper schema:</p>
<pre dir="ltr">
{
  "type" : "record",
  "name" : "generic_wrapper",
  "namespace" : "oracle.goldengate",
  "fields" : [ {
    "name" : "table_name",
    "type" : "string"
  }, {
    "name" : "schema_fingerprint",
    "type" : "long"
  }, {
    "name" : "payload",
    "type" : "bytes"
  } ]
}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565">Special Considerations</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-87FC20F6-E23C-442C-BC99-24311B0BE406"></a>
<h3 id="GADBD-GUID-87FC20F6-E23C-442C-BC99-24311B0BE406" class="sect3"><span class="enumeration_section">17.1.3</span> Avro Object Container File Formatter</h3>
<div>
<p>Oracle GoldenGate for Big Data can write to HDFS in Avro Object Container File (OCF) format. Avro OCF handles schema evolution more efficiently than other formats. The Avro OCF Formatter also supports compression and decompression to allow more efficient use of disk space.</p>
<p>The HDFS Handler integrates with the Avro formatters to write files to HDFS in Avro OCF format. The Avro OCF format is required for Hive to read Avro data in HDFS. The Avro OCF format is detailed in the Avro specification, see <a href="http://avro.apache.org/docs/current/spec.html#Object+Container+Files" target="_blank">http://avro.apache.org/docs/current/spec.html#Object+Container+Files</a>.</p>
<p>You can configure the HDFS Handler to stream data in Avro OCF format, generate table definitions in Hive, and update table definitions in Hive in the case of a metadata change event.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-494E0A44-756B-40FF-A46C-A300EFB54A05">Avro OCF Formatter Configuration Properties</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2">Using the Avro Formatter</a></p>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-494E0A44-756B-40FF-A46C-A300EFB54A05"></a>
<h4 id="GADBD-GUID-494E0A44-756B-40FF-A46C-A300EFB54A05" class="sect4"><span class="enumeration_section">17.1.3.1</span> Avro OCF Formatter Configuration Properties</h4>
<div>
<div class="tblformal" id="GUID-494E0A44-756B-40FF-A46C-A300EFB54A05__GUID-3B00C87F-58A3-49B7-A2C5-DB47018A829C">
<table class="cellalignment78" summary="Five column table describing the Avro OCF Formatter configuration properties.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d80336e2393">Properties</th>
<th class="cellalignment77" id="d80336e2396">Optional / Required</th>
<th class="cellalignment77" id="d80336e2399">Legal Values</th>
<th class="cellalignment77" id="d80336e2402">Default</th>
<th class="cellalignment77" id="d80336e2405">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2410" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.insertOpKey</code></p>
</td>
<td class="cellalignment65" headers="d80336e2410 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2410 d80336e2399">
<p>Any string</p>
</td>
<td class="cellalignment65" headers="d80336e2410 d80336e2402">
<p><code class="codeph">I</code></p>
</td>
<td class="cellalignment65" headers="d80336e2410 d80336e2405">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2431" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.updateOpKey</code></p>
</td>
<td class="cellalignment65" headers="d80336e2431 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2431 d80336e2399">
<p>Any string</p>
</td>
<td class="cellalignment65" headers="d80336e2431 d80336e2402">
<p><code class="codeph">U</code></p>
</td>
<td class="cellalignment65" headers="d80336e2431 d80336e2405">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2452" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.truncateOpKey</code></p>
</td>
<td class="cellalignment65" headers="d80336e2452 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2452 d80336e2399">
<p>Any string</p>
</td>
<td class="cellalignment65" headers="d80336e2452 d80336e2402">
<p><code class="codeph">T</code></p>
</td>
<td class="cellalignment65" headers="d80336e2452 d80336e2405">
<p>Indicator to be truncated into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2473" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.deleteOpKey</code></p>
</td>
<td class="cellalignment65" headers="d80336e2473 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2473 d80336e2399">
<p>Any string</p>
</td>
<td class="cellalignment65" headers="d80336e2473 d80336e2402">
<p><code class="codeph">D</code></p>
</td>
<td class="cellalignment65" headers="d80336e2473 d80336e2405">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2494" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.encoding</code></p>
</td>
<td class="cellalignment65" headers="d80336e2494 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2494 d80336e2399">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment65" headers="d80336e2494 d80336e2402">
<p><code class="codeph">UTF-8</code></p>
</td>
<td class="cellalignment65" headers="d80336e2494 d80336e2405">
<p>Controls the output encoding of generated JSON Avro schema. The JSON default is UTF-8. Avro messages are binary and support their own internal representation of encoding.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2515" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.treatAllColumnsAsStrings</code></p>
</td>
<td class="cellalignment65" headers="d80336e2515 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2515 d80336e2399">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment65" headers="d80336e2515 d80336e2402">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment65" headers="d80336e2515 d80336e2405">
<p>Controls the output typing of generated Avro messages. When the setting is <code class="codeph">false</code>, the formatter attempts to map Oracle GoldenGate types to the corresponding Avro type. When the setting is <code class="codeph">true</code>, all data is treated as strings in the generated Avro messages and schemas.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2546" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.pkUpdateHandling</code></p>
</td>
<td class="cellalignment65" headers="d80336e2546 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2546 d80336e2399">
<p><code class="codeph">abend</code> | <code class="codeph">update</code> | <code class="codeph">delete-insert</code></p>
</td>
<td class="cellalignment65" headers="d80336e2546 d80336e2402">
<p><code class="codeph">abend</code></p>
</td>
<td class="cellalignment65" headers="d80336e2546 d80336e2405">
<p>Controls how the formatter should handle update operations that change a primary key. Primary key operations can be problematic for the Avro Row formatter and require special consideration by you.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">abend</code> : the process will terminates.</p>
</li>
<li>
<p><code class="codeph">update</code> : the process handles this as a normal update</p>
</li>
<li>
<p><code class="codeph">delete</code> and <code class="codeph">insert</code>: the process handles thins operation as a delete and an insert. The full before image is required for this feature to work properly. This can be achieved by using full supplemental logging in Oracle. Without full before and after row images the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2593" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.generateSchema</code></p>
</td>
<td class="cellalignment65" headers="d80336e2593 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2593 d80336e2399">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment65" headers="d80336e2593 d80336e2402">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment65" headers="d80336e2593 d80336e2405">
<p>Because schemas must be generated for Avro serialization to <code class="codeph">false</code> to suppress the writing of the generated schemas to the local file system.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2621" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.schemaDirectory</code></p>
</td>
<td class="cellalignment65" headers="d80336e2621 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2621 d80336e2399">
<p>Any legal, existing file system path</p>
</td>
<td class="cellalignment65" headers="d80336e2621 d80336e2402">
<p><code class="codeph">./dirdef</code></p>
</td>
<td class="cellalignment65" headers="d80336e2621 d80336e2405">
<p>The directory where generated Avro schemas are saved to the local file system. This property does not control where the Avro schema is written to in HDFS; that is controlled by an HDFS Handler property.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2642" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment65" headers="d80336e2642 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2642 d80336e2399">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment65" headers="d80336e2642 d80336e2402">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment65" headers="d80336e2642 d80336e2405">
<p>By default, the value of this property is true, and the format for the current timestamp is ISO8601. Set to <code class="codeph">false</code> to remove the <code class="codeph">T</code> between the date and time in the current timestamp and output a space instead.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2673" headers="d80336e2393">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.versionSchemas</code></p>
</td>
<td class="cellalignment65" headers="d80336e2673 d80336e2396">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2673 d80336e2399">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment65" headers="d80336e2673 d80336e2402">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment65" headers="d80336e2673 d80336e2405">
<p>If set to <code class="codeph">true</code>, an Avro schema is created in the schema directory and versioned by a time stamp. The schema uses the following format:</p>
<p><code class="codeph"><span class="codeinlineitalic">fully_qualifiedtable_name_time stamp</span>.avsc</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-87FC20F6-E23C-442C-BC99-24311B0BE406">Avro Object Container File Formatter</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A"></a>
<h3 id="GADBD-GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A" class="sect3"><span class="enumeration_section">17.1.4</span> Setting Metacolumn Output</h3>
<div>
<div class="section">
<p>The following are the configurable values for all Avro Formatter metacolumns template property that controls metacolumn output.</p>
<div class="tblformal" id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__GUID-F6A54ABE-853A-43A3-8E60-4D7F41821165">
<p class="titleintable">Table 17-6 Metacolumns Template Property</p>
<table class="cellalignment78" title="Metacolumns Template Property" summary="Five column table describing the Metacolumns Template Property">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d80336e2745">Properties</th>
<th class="cellalignment77" id="d80336e2748">Required/ Optional</th>
<th class="cellalignment77" id="d80336e2751">Legal Values</th>
<th class="cellalignment77" id="d80336e2754">Default</th>
<th class="cellalignment77" id="d80336e2757">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e2762" headers="d80336e2745"><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.metaColumnsTemplate</code></td>
<td class="cellalignment65" headers="d80336e2762 d80336e2748">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e2762 d80336e2751">
<p><code class="codeph">${alltokens} | ${token} | ${env} | ${sys} | ${javaprop} | ${optype} | ${position} | ${timestamp} | ${catalog} | ${schema} | ${table} | ${objectname} | ${csn} | ${xid} | ${currenttimestamp} | ${opseqno} | ${timestampmicro} | ${currenttimestampmicro}</code></p>
</td>
<td class="cellalignment65" headers="d80336e2762 d80336e2754">
<p>None</p>
</td>
<td class="cellalignment65" headers="d80336e2762 d80336e2757">
<p>The current meta column information can be configured in a simple manner and removes the explicit need to use:</p>
<pre dir="ltr">
insertOpKey | updateOpKey | deleteOpKey | truncateOpKey | includeTableName | includeOpTimestamp | includeOpType | includePosition | includeCurrentTimestamp, useIso8601Format
</pre>
<p>It is a comma-delimited string consisting of one or more templated values that represent the template.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><span class="bold">Explanation of the Metacolumn Keywords</span></p>
<dl>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e81"><!-- --></a><code class="codeph">${alltokens}</code></dt>
<dd>
<p>All of the <span>Oracle GoldenGate</span> tokens.</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e91"><!-- --></a><code class="codeph">${token}</code></dt>
<dd>
<p>The value of a specific <span>Oracle GoldenGate</span> token. The token key should follow token key should follow the token using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${token.<span class="italic">MYTOKEN</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e109"><!-- --></a><code class="codeph">${sys}</code></dt>
<dd>
<p>A system environmental variable. The variable name should follow <code class="codeph">sys</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${sys.<span class="italic">MYVAR</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e127"><!-- --></a><code class="codeph">${env}</code></dt>
<dd>
<p>An <span>Oracle GoldenGate</span> environment variable. The variable name should follow <code class="codeph">env</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${env.<span class="italic">someVariable</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e148"><!-- --></a><code class="codeph">${javaprop}</code></dt>
<dd>
<p>A Java JVM variable. The variable name should follow <code class="codeph">javaprop</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${javaprop.<span class="italic">MYVAR</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e166"><!-- --></a><code class="codeph">${optype}</code></dt>
<dd>
<p>Operation Type</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e173"><!-- --></a><code class="codeph">${position}</code></dt>
<dd>
<p>Record Position</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e180"><!-- --></a><code class="codeph">${timestamp}</code></dt>
<dd>
<p>Record Timestamp</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e187"><!-- --></a><code class="codeph">${catalog}</code></dt>
<dd>
<p>Catalog Name</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e194"><!-- --></a><code class="codeph">${schema}</code></dt>
<dd>
<p>Schema Name</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e201"><!-- --></a><code class="codeph">${table}</code></dt>
<dd>
<p>Table Name</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e209"><!-- --></a><code class="codeph">${objectname}</code></dt>
<dd>
<p>The fully qualified table name.</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e216"><!-- --></a><code class="codeph">${csn}</code></dt>
<dd>
<p>Source Commit Sequence Number</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e223"><!-- --></a><code class="codeph">${xid}</code></dt>
<dd>
<p>Source Transaction ID</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e230"><!-- --></a><code class="codeph">${currenttimestamp}</code></dt>
<dd>
<p>Current Timestamp</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e237"><!-- --></a><code class="codeph">${opseqno}</code></dt>
<dd>
<p>Record sequence number within the transaction.</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e244"><!-- --></a><code class="codeph">${timestampmicro}</code></dt>
<dd>
<p>Record timestamp (in microseconds after epoch).</p>
</dd>
<dt class="dlterm"><a id="GUID-9F4F3E19-D3AC-405A-A47B-876D172C076A__d20e251"><!-- --></a><code class="codeph">${currenttimestampmicro}</code></dt>
<dd>
<p>Current timestamp (in microseconds after epoch).</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2">Using the Avro Formatter</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD483"></a>
<div class="props_rev_3"><a id="GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C"></a>
<h2 id="GADBD-GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C" class="sect2"><span class="enumeration_section">17.2</span> Using the Delimited Text Formatter</h2>
<div>
<div class="section">
<p>The Delimited Text Formatter is a row-based formatter. It formats database operations from the source trail file into a delimited text output. Each insert, update, delete, or truncate operation from the source trail is formatted into an individual delimited message. Delimited text output includes a fixed number of fields for each table separated by a field delimiter and terminated by a line delimiter. The fields are positionally relevant. Many Big Data analytical tools including Hive work well with HDFS files that contain delimited text.</p>
<p>Column values for an operation from the source trail file can have one of three states: the column has a value, the column value is null, or the column value is missing. By default, the delimited text maps these column value states into the delimited text output as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Column has a value: The column value is output.</p>
</li>
<li>
<p>Column value is null: The default output value is <code class="codeph">NULL</code>. The output for the case of a null column value is configurable.</p>
</li>
<li>
<p>Column value is missing: The default output value is an empty string (""). The output for the case of a missing column value is configurable.</p>
</li>
</ul>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-7C03E28E-E9C6-4E90-BC7E-98D1414B0FD1">Message Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-D40692C8-F135-473D-9DD1-F6E979BA4272">Sample Formatted Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-17311D59-40BF-4E62-B4C4-95148EEA26B2">Output Format Summary Log</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-ECCEB29A-9A84-4B0E-B924-D6B08216FC28">Delimited Text Formatter Configuration Properties</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-9E69A0E7-70DF-4466-B7A5-AC71EB8F40A4">Review a Sample Configuration</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-30A01FF3-B2AB-411D-A885-F56799047F8C">Metadata Change Events</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B">Setting Metacolumn Output</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-863982E2-DCEC-42FB-A94F-76B63D8D071F">Additional Considerations</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0" title="Learn how to use the pluggable formatters to convert operations from the Oracle GoldenGate trail file into formatted messages that you can send to Big Data targets using one of the Oracle GoldenGate for Big Data Handlers.">Using the Pluggable Formatters</a></p>
</div>
</div>
</div>
<a id="GADBD484"></a>
<div class="props_rev_3"><a id="GUID-7C03E28E-E9C6-4E90-BC7E-98D1414B0FD1"></a>
<h3 id="GADBD-GUID-7C03E28E-E9C6-4E90-BC7E-98D1414B0FD1" class="sect3"><span class="enumeration_section">17.2.1</span> Message Formatting Details</h3>
<div>
<div class="section">
<p>The default output format uses a semicolon as the delimiter and resembles the following:</p>
<p>First is the row metadata:</p>
<pre dir="ltr">
<span class="italic">operation_type;fully_qualified_table_name;operation_timestamp;current_timestamp;trail_position;tokens;</span>
</pre>
<p>Next is the row data:</p>
<pre dir="ltr">
<span class="italic">column_</span>1<span class="italic">_value;column_n_value_then_line_delimeter</span>
</pre>
<p>Optionally, the column name may be included before each column value that changes the output format for the row data:</p>
<pre dir="ltr">
<span class="italic">column_</span>1<span class="italic">_name</span>;<span class="italic">column_</span>1<span class="italic">_value;column_n_name;column_n_value_then_line_delimeter</span>
</pre>
<p>Formatting details:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Operation Type</span> : Indicates the type of database operation from the source trail file. Default values are <code class="codeph">I</code> for insert, <code class="codeph">U</code> for update, <code class="codeph">D</code> for delete, <code class="codeph">T</code> for truncate. Output of this field is suppressible.</p>
</li>
<li>
<p><span class="bold">Fully Qualified Table Name</span>: The fully qualified table name is the source database table including the catalog name, and the schema name. The format of the fully qualified table name is <span class="italic"><code class="codeph">catalog_name.schema_name.table_name</code></span>. The output of this field is suppressible.</p>
</li>
<li>
<p><span class="bold">Operation Timestamp</span> : The commit record timestamp from the source system. All operations in a transaction (unbatched transaction) will have the same operation timestamp. This timestamp is fixed, and the operation timestamp is the same if the trail file is replayed. The output of this field is suppressible.</p>
</li>
<li>
<p><span class="bold">Current Timestamp</span> : The timestamp of the current time when the delimited text formatter processes the current operation record. This timestamp follows the ISO-8601 format and includes microsecond precision. Replaying the trail file does <span class="italic">not</span> result in the same timestamp for the same operation. The output of this field is suppressible.</p>
</li>
<li>
<p><span class="bold">Trail Position</span> :The concatenated sequence number and RBA number from the source trail file. The trail position lets you trace the operation back to the source trail file. The sequence number is the source trail file number. The RBA number is the offset in the trail file. The output of this field is suppressible.</p>
</li>
<li>
<p><span class="bold">Tokens</span> : The token key value pairs from the source trail file. The output of this field in the delimited text output is suppressed unless the <code class="codeph">includeTokens</code> configuration property on the corresponding handler is explicitly set to <code class="codeph">true</code>.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD485"></a>
<div class="props_rev_3"><a id="GUID-D40692C8-F135-473D-9DD1-F6E979BA4272"></a>
<h3 id="GADBD-GUID-D40692C8-F135-473D-9DD1-F6E979BA4272" class="sect3"><span class="enumeration_section">17.2.2</span> Sample Formatted Messages</h3>
<div>
<div class="section">
<p>The following sections contain sample messages from the Delimited Text Formatter. The default field delimiter has been changed to a pipe character, <code class="codeph">|</code>, to more clearly display the message.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-AD8754E0-631B-41AF-9C14-A9E2E47942DE">Sample Insert Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-0A2B43C3-5214-4EF6-BEA8-ED808FA6400D">Sample Update Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-A9C3FDD2-60CF-4E9F-B763-0D179F164BE6">Sample Delete Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-12535E15-FB93-4B88-BA99-2F347CDD792F">Sample Truncate Message</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD486"></a>
<div class="props_rev_3"><a id="GUID-AD8754E0-631B-41AF-9C14-A9E2E47942DE"></a>
<h4 id="GADBD-GUID-AD8754E0-631B-41AF-9C14-A9E2E47942DE" class="sect4"><span class="enumeration_section">17.2.2.1</span> Sample Insert Message</h4>
<div>
<div class="section">
<pre dir="ltr">
I|GG.TCUSTORD|2013-06-02
22:14:36.000000|2015-09-18T13:23:01.612001|00000000000000001444|R=AADPkvAAEAAEqL2A
AA|WILL|1994-09-30:15:33:00|CAR|144|17520.00|3|100
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D40692C8-F135-473D-9DD1-F6E979BA4272">Sample Formatted Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD487"></a>
<div class="props_rev_3"><a id="GUID-0A2B43C3-5214-4EF6-BEA8-ED808FA6400D"></a>
<h4 id="GADBD-GUID-0A2B43C3-5214-4EF6-BEA8-ED808FA6400D" class="sect4"><span class="enumeration_section">17.2.2.2</span> Sample Update Message</h4>
<div>
<div class="section">
<pre dir="ltr">
U|GG.TCUSTORD|2013-06-02
22:14:41.000000|2015-09-18T13:23:01.987000|00000000000000002891|R=AADPkvAAEAAEqLzA
AA|BILL|1995-12-31:15:00:00|CAR|765|14000.00|3|100
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D40692C8-F135-473D-9DD1-F6E979BA4272">Sample Formatted Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD488"></a>
<div class="props_rev_3"><a id="GUID-A9C3FDD2-60CF-4E9F-B763-0D179F164BE6"></a>
<h4 id="GADBD-GUID-A9C3FDD2-60CF-4E9F-B763-0D179F164BE6" class="sect4"><span class="enumeration_section">17.2.2.3</span> Sample Delete Message</h4>
<div>
<div class="section">
<pre dir="ltr">
D|GG.TCUSTORD|2013-06-02
22:14:41.000000|2015-09-18T13:23:02.000000|00000000000000004338|L=206080450,6=9.0.
80330,R=AADPkvAAEAAEqLzAAC|DAVE|1993-11-03:07:51:35|PLANE|600|||
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D40692C8-F135-473D-9DD1-F6E979BA4272">Sample Formatted Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD489"></a>
<div class="props_rev_3"><a id="GUID-12535E15-FB93-4B88-BA99-2F347CDD792F"></a>
<h4 id="GADBD-GUID-12535E15-FB93-4B88-BA99-2F347CDD792F" class="sect4"><span class="enumeration_section">17.2.2.4</span> Sample Truncate Message</h4>
<div>
<div class="section">
<pre dir="ltr">
T|GG.TCUSTORD|2013-06-02
22:14:41.000000|2015-09-18T13:23:02.001000|00000000000000004515|R=AADPkvAAEAAEqL2A
AB|||||||
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D40692C8-F135-473D-9DD1-F6E979BA4272">Sample Formatted Messages</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD491"></a>
<div class="props_rev_3"><a id="GUID-17311D59-40BF-4E62-B4C4-95148EEA26B2"></a>
<h3 id="GADBD-GUID-17311D59-40BF-4E62-B4C4-95148EEA26B2" class="sect3"><span class="enumeration_section">17.2.3</span> Output Format Summary Log</h3>
<div>
<div class="section">
<p>If <code class="codeph">INFO</code> level logging is enabled, the Java <code class="codeph">log4j</code> logging logs a summary of the delimited text output format . A summary of the delimited fields is logged for each source table encountered and occurs when the first operation for that table is received by the Delimited Text formatter. This detailed explanation of the fields of the delimited text output may be useful when you perform an initial setup. When a metadata change event occurs, the summary of the delimited fields is regenerated and logged again at the first subsequent operation for that table.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD493"></a><a id="GADBD492"></a>
<div class="props_rev_3"><a id="GUID-ECCEB29A-9A84-4B0E-B924-D6B08216FC28"></a>
<h3 id="GADBD-GUID-ECCEB29A-9A84-4B0E-B924-D6B08216FC28" class="sect3"><span class="enumeration_section">17.2.4</span> Delimited Text Formatter Configuration Properties</h3>
<div>
<div class="tblformalwide" id="GUID-ECCEB29A-9A84-4B0E-B924-D6B08216FC28__GUID-193C39F8-5BA1-4550-BC4B-6580EF1F0AB3">
<p class="titleintable">Table 17-7 Delimited Text Formatter Configuration Properties</p>
<table class="cellalignment87" title="Delimited Text Formatter Configuration Properties" summary="A five column table explaining the Delimited Text Format configuration Properties.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment112" id="d80336e3420">Properties</th>
<th class="cellalignment79" id="d80336e3423">Optional / Required</th>
<th class="cellalignment114" id="d80336e3426">Legal Values</th>
<th class="cellalignment72" id="d80336e3429">Default</th>
<th class="cellalignment138" id="d80336e3432">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3437" headers="d80336e3420">
<div class="p">
<pre dir="ltr">
gg.handler.<span class="italic">name</span>.format.includeColumnNames
</pre></div>
</td>
<td class="cellalignment83" headers="d80336e3437 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3437 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e3437 d80336e3429">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment139" headers="d80336e3437 d80336e3432">
<p>Controls the output of writing the column names as a delimited field preceding the column value. When true, the output resembles:</p>
<div class="p">
<pre dir="ltr">
<span class="italic">COL1_Name</span>|<span class="italic">COL1_Value</span>|<span class="italic">COL2_Name</span>|<span class="italic">COL2_Value</span>
</pre></div>
<p>When false, the output resembles:</p>
<p><code class="codeph"><span class="codeinlineitalic">COL1_Value</span>|I</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3482" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.includeOpTimestamp</code></p>
</td>
<td class="cellalignment83" headers="d80336e3482 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3482 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e3482 d80336e3429">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment139" headers="d80336e3482 d80336e3432">
<p>A <code class="codeph">false</code> value suppresses the output of the operation timestamp from the source trail file in the output.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3512" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.includeCurrentTimestamp</code></p>
</td>
<td class="cellalignment83" headers="d80336e3512 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3512 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e3512 d80336e3429">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment139" headers="d80336e3512 d80336e3432">
<p>A <code class="codeph">false</code> value suppresses the output of the current timestamp in the output.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3542" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.includeOpType</code></p>
</td>
<td class="cellalignment83" headers="d80336e3542 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3542 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e3542 d80336e3429">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment139" headers="d80336e3542 d80336e3432">
<p>A <code class="codeph">false</code> value suppresses the output of the operation type in the output.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3572" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.insertOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e3572 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3572 d80336e3426">
<p>Any string</p>
</td>
<td class="cellalignment73" headers="d80336e3572 d80336e3429">
<p><code class="codeph">I</code></p>
</td>
<td class="cellalignment139" headers="d80336e3572 d80336e3432">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3595" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.updateOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e3595 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3595 d80336e3426">
<p>Any string</p>
</td>
<td class="cellalignment73" headers="d80336e3595 d80336e3429">
<p><code class="codeph">U</code></p>
</td>
<td class="cellalignment139" headers="d80336e3595 d80336e3432">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3618" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.deleteOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e3618 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3618 d80336e3426">
<p>Any string</p>
</td>
<td class="cellalignment73" headers="d80336e3618 d80336e3429">
<p><code class="codeph">D</code></p>
</td>
<td class="cellalignment139" headers="d80336e3618 d80336e3432">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3641" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.truncateOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e3641 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3641 d80336e3426">
<p>Any string</p>
</td>
<td class="cellalignment73" headers="d80336e3641 d80336e3429">
<p><code class="codeph">T</code></p>
</td>
<td class="cellalignment139" headers="d80336e3641 d80336e3432">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3664" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.encoding</code></p>
</td>
<td class="cellalignment83" headers="d80336e3664 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3664 d80336e3426">
<p>Any encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment73" headers="d80336e3664 d80336e3429">
<p>The native system encoding of the machine hosting the Oracle GoldenGate process.</p>
</td>
<td class="cellalignment139" headers="d80336e3664 d80336e3432">
<p>Determines the encoding of the output delimited text.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3686" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.fieldDelimiter</code></p>
</td>
<td class="cellalignment83" headers="d80336e3686 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3686 d80336e3426">
<p>Any String</p>
</td>
<td class="cellalignment73" headers="d80336e3686 d80336e3429">
<p><code class="codeph">ASCII 001</code> (the default Hive delimiter)</p>
</td>
<td class="cellalignment139" headers="d80336e3686 d80336e3432">
<p>The delimiter used between delimited fields. This value supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3713" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.lineDelimiter</code></p>
</td>
<td class="cellalignment83" headers="d80336e3713 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3713 d80336e3426">
<p>Any String</p>
</td>
<td class="cellalignment73" headers="d80336e3713 d80336e3429">
<p>Newline (the default Hive delimiter)</p>
</td>
<td class="cellalignment139" headers="d80336e3713 d80336e3432">
<p>The delimiter used between records. This value supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3739" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.includeTableName</code></p>
</td>
<td class="cellalignment83" headers="d80336e3739 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3739 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e3739 d80336e3429">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment139" headers="d80336e3739 d80336e3432">
<p>Use <code class="codeph">false</code> to suppress the output of the table name in the output delimited data.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3769" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.keyValueDelimiter</code></p>
</td>
<td class="cellalignment83" headers="d80336e3769 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3769 d80336e3426">
<p>Any string</p>
</td>
<td class="cellalignment73" headers="d80336e3769 d80336e3429">
<p><code class="codeph">=</code></p>
</td>
<td class="cellalignment139" headers="d80336e3769 d80336e3432">
<p>Specifies a delimiter between keys and values in a map. Key1=value1. Tokens are mapped values. Configuration value supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3795" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.keyValuePairDelimiter</code></p>
</td>
<td class="cellalignment83" headers="d80336e3795 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3795 d80336e3426">
<p>Any string</p>
</td>
<td class="cellalignment73" headers="d80336e3795 d80336e3429">
<p><code class="codeph">,</code></p>
</td>
<td class="cellalignment139" headers="d80336e3795 d80336e3432">
<p>Specifies a delimiter between key value pairs in a map. <code class="codeph"><span class="codeinlineitalic">Key1=Value1</span></code>,<code class="codeph"><span class="codeinlineitalic">Key2=Value2</span></code>. Tokens are mapped values. Configuration value supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3829" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.pkUpdateHandling</code></p>
</td>
<td class="cellalignment83" headers="d80336e3829 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3829 d80336e3426">
<p><code class="codeph">abend</code> | <code class="codeph">update</code> | <code class="codeph">delete-insert</code></p>
</td>
<td class="cellalignment73" headers="d80336e3829 d80336e3429">
<p>&nbsp;<code class="codeph">abend</code></p>
</td>
<td class="cellalignment139" headers="d80336e3829 d80336e3432">
<p>Specifies how the formatter handles update operations that change a primary key. Primary key operations can be problematic for the text formatter and require special consideration by you.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">abend</code> : indicates the process will abend</p>
</li>
<li>
<p><code class="codeph">update</code> : indicates the process will treat this as a normal update</p>
</li>
<li>
<p><code class="codeph">delete-insert</code>: indicates the process handles this as a delete and an insert. Full supplemental logging must be enabled for this to work. Without full before and after row images, the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3876" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.nullValueRepresentation</code></p>
</td>
<td class="cellalignment83" headers="d80336e3876 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3876 d80336e3426">
<p>Any string</p>
</td>
<td class="cellalignment73" headers="d80336e3876 d80336e3429">
<p>NULL</p>
</td>
<td class="cellalignment139" headers="d80336e3876 d80336e3432">
<p>Specifies what is included in the delimited output in the case of a NULL value. Configuration value supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3901" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.missingValueRepresentation</code></p>
</td>
<td class="cellalignment83" headers="d80336e3901 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3901 d80336e3426">
<p>Any string</p>
</td>
<td class="cellalignment73" headers="d80336e3901 d80336e3429">
<p><code class="codeph">""</code> (no value)</p>
</td>
<td class="cellalignment139" headers="d80336e3901 d80336e3432">
<p>Specifies what is included in the delimited text output in the case of a missing value. Configuration value supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3928" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.includePosition</code></p>
</td>
<td class="cellalignment83" headers="d80336e3928 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3928 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e3928 d80336e3429">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment139" headers="d80336e3928 d80336e3432">
<p>When true, suppresses the output of the operation position from the source trail file.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3955" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.iso8601Format</code></p>
</td>
<td class="cellalignment83" headers="d80336e3955 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3955 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e3955 d80336e3429">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment139" headers="d80336e3955 d80336e3432">
<p>Controls the format of the current timestamp. The default is the ISO 8601 format. When <code class="codeph">false</code>, removes the <code class="codeph">T</code> between the date and time in the current timestamp, which outputs a space instead.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e3988" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.includeMetaColumnNames</code></p>
</td>
<td class="cellalignment83" headers="d80336e3988 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e3988 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e3988 d80336e3429">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment139" headers="d80336e3988 d80336e3432">
<p>Set to <code class="codeph">true</code>, a field is included prior to each metadata column value, which is the column name of the metadata column. You can use it to make delimited messages more self-describing.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment113" id="d80336e4018" headers="d80336e3420">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.wrapStringsInQuotes</code></p>
</td>
<td class="cellalignment83" headers="d80336e4018 d80336e3423">
<p>Optional</p>
</td>
<td class="cellalignment116" headers="d80336e4018 d80336e3426">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment73" headers="d80336e4018 d80336e3429">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment139" headers="d80336e4018 d80336e3432">
<p>Set to <code class="codeph">true</code> to wrap string value output in the delimited text format in double quotes (<code class="codeph">"</code>).</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD494"></a>
<div class="props_rev_3"><a id="GUID-9E69A0E7-70DF-4466-B7A5-AC71EB8F40A4"></a>
<h3 id="GADBD-GUID-9E69A0E7-70DF-4466-B7A5-AC71EB8F40A4" class="sect3"><span class="enumeration_section">17.2.5</span> Review a Sample Configuration</h3>
<div>
<div class="section">
<p>The following is a sample configuration for the Delimited Text formatter in the Java Adapter configuration file:</p>
<pre dir="ltr">
gg.handler.hdfs.format.includeColumnNames=false
gg.handler.hdfs.format.includeOpTimestamp=true
gg.handler.hdfs.format.includeCurrentTimestamp=true
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.encoding=UTF-8
gg.handler.hdfs.format.fieldDelimiter=CDATA[\u0001]
gg.handler.hdfs.format.lineDelimiter=CDATA[\n]
gg.handler.hdfs.format.includeTableName=true
gg.handler.hdfs.format.keyValueDelimiter=CDATA[=]
gg.handler.hdfs.format.kevValuePairDelimiter=CDATA[,]
gg.handler.hdfs.format.pkUpdateHandling=abend
gg.handler.hdfs.format.nullValueRepresentation=NULL
gg.handler.hdfs.format.missingValueRepresentation=CDATA[]
gg.handler.hdfs.format.includePosition=true
gg.handler.hdfs.format=delimitedtext
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD495"></a>
<div class="props_rev_3"><a id="GUID-30A01FF3-B2AB-411D-A885-F56799047F8C"></a>
<h3 id="GADBD-GUID-30A01FF3-B2AB-411D-A885-F56799047F8C" class="sect3"><span class="enumeration_section">17.2.6</span> Metadata Change Events</h3>
<div>
<div class="section">
<p>Oracle GoldenGate for Big Data now handles metadata change events at runtime. This assumes that the replicated database and upstream replication processes are propagating metadata change events. The Delimited Text Formatter changes the output format to accommodate the change and the Delimited Text Formatter continue running.</p>
<p>Note that a metadata change may affect downstream applications. Delimited text formats include a fixed number of fields that are positionally relevant. Deleting a column in the source table can be handled seamlessly during Oracle GoldenGate runtime, but results in a change in the total number of fields, and potentially changes the positional relevance of some fields. Adding an additional column or columns is probably the least impactful metadata change event, assuming that the new column is added to the end. Consider the impact of a metadata change event before executing the event. When metadata change events are frequent, Oracle recommends that you consider a more flexible and self-describing format, such as JSON or XML.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B"></a>
<h3 id="GADBD-GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B" class="sect3"><span class="enumeration_section">17.2.7</span> Setting Metacolumn Output</h3>
<div>
<div class="section">
<p>The following are the configurable values for the Delimited Text Format metacolumns template property that controls metacolumn output.</p>
<div class="tblformal" id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__GUID-045C147D-FD93-4914-AD05-B1717DDBE0F6">
<p class="titleintable">Table 17-8 Metacolumns Template Property</p>
<table class="cellalignment78" title="Metacolumns Template Property" summary="Five column table describing the Metacolumns Template Property">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d80336e4151">Properties</th>
<th class="cellalignment77" id="d80336e4154">Required/ Optional</th>
<th class="cellalignment77" id="d80336e4157">Legal Values</th>
<th class="cellalignment77" id="d80336e4160">Default</th>
<th class="cellalignment77" id="d80336e4163">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e4168" headers="d80336e4151"><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.metaColumnsTemplate</code></td>
<td class="cellalignment65" headers="d80336e4168 d80336e4154">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e4168 d80336e4157">
<p><code class="codeph">${alltokens} | ${token} | ${env} | ${sys} | ${javaprop} | ${optype} | ${position} | ${timestamp} | ${catalog} | ${schema} | ${table} | ${objectname} | ${csn} | ${xid} | ${currenttimestamp} | ${opseqno} | ${timestampmicro} | ${currenttimestampmicro}</code></p>
</td>
<td class="cellalignment65" headers="d80336e4168 d80336e4160">
<p>None</p>
</td>
<td class="cellalignment65" headers="d80336e4168 d80336e4163">
<p>The current meta column information can be configured in a simple manner and removes the explicit need to use:</p>
<pre dir="ltr">
insertOpKey | updateOpKey | deleteOpKey | truncateOpKey | includeTableName | includeOpTimestamp | includeOpType | includePosition | includeCurrentTimestamp, useIso8601Format
</pre>
<p>It is a comma-delimited string consisting of one or more templated values that represent the template.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><span class="bold">Explanation of the Metacolumn Keywords</span></p>
<dl>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e81"><!-- --></a><code class="codeph">${alltokens}</code></dt>
<dd>
<p>All of the <span>Oracle GoldenGate</span> tokens.</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e91"><!-- --></a><code class="codeph">${token}</code></dt>
<dd>
<p>The value of a specific <span>Oracle GoldenGate</span> token. The token key should follow token key should follow the token using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${token.<span class="italic">MYTOKEN</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e109"><!-- --></a><code class="codeph">${sys}</code></dt>
<dd>
<p>A system environmental variable. The variable name should follow <code class="codeph">sys</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${sys.<span class="italic">MYVAR</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e127"><!-- --></a><code class="codeph">${env}</code></dt>
<dd>
<p>An <span>Oracle GoldenGate</span> environment variable. The variable name should follow <code class="codeph">env</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${env.<span class="italic">someVariable</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e148"><!-- --></a><code class="codeph">${javaprop}</code></dt>
<dd>
<p>A Java JVM variable. The variable name should follow <code class="codeph">javaprop</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${javaprop.<span class="italic">MYVAR</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e166"><!-- --></a><code class="codeph">${optype}</code></dt>
<dd>
<p>Operation Type</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e173"><!-- --></a><code class="codeph">${position}</code></dt>
<dd>
<p>Record Position</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e180"><!-- --></a><code class="codeph">${timestamp}</code></dt>
<dd>
<p>Record Timestamp</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e187"><!-- --></a><code class="codeph">${catalog}</code></dt>
<dd>
<p>Catalog Name</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e194"><!-- --></a><code class="codeph">${schema}</code></dt>
<dd>
<p>Schema Name</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e201"><!-- --></a><code class="codeph">${table}</code></dt>
<dd>
<p>Table Name</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e209"><!-- --></a><code class="codeph">${objectname}</code></dt>
<dd>
<p>The fully qualified table name.</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e216"><!-- --></a><code class="codeph">${csn}</code></dt>
<dd>
<p>Source Commit Sequence Number</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e223"><!-- --></a><code class="codeph">${xid}</code></dt>
<dd>
<p>Source Transaction ID</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e230"><!-- --></a><code class="codeph">${currenttimestamp}</code></dt>
<dd>
<p>Current Timestamp</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e237"><!-- --></a><code class="codeph">${opseqno}</code></dt>
<dd>
<p>Record sequence number within the transaction.</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e244"><!-- --></a><code class="codeph">${timestampmicro}</code></dt>
<dd>
<p>Record timestamp (in microseconds after epoch).</p>
</dd>
<dt class="dlterm"><a id="GUID-4C4A383B-4263-4F20-AF05-9FE28B0A017B__d20e251"><!-- --></a><code class="codeph">${currenttimestampmicro}</code></dt>
<dd>
<p>Current timestamp (in microseconds after epoch).</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD490"></a>
<div class="props_rev_3"><a id="GUID-863982E2-DCEC-42FB-A94F-76B63D8D071F"></a>
<h3 id="GADBD-GUID-863982E2-DCEC-42FB-A94F-76B63D8D071F" class="sect3"><span class="enumeration_section">17.2.8</span> Additional Considerations</h3>
<div>
<div class="section">
<p>Exercise care when you choose field and line delimiters. It is important to choose delimiter values that will not occur in the content of the data.</p>
<p>The Java Adapter configuration trims leading and trailing characters from configuration values when they are determined to be whitespace. However, you may want to choose field delimiters, line delimiters, null value representations, and missing value representations that include or are fully considered to be whitespace . In these cases, you must employ specialized syntax in the Java Adapter configuration file to preserve the whitespace. To preserve the whitespace, when your configuration values contain leading or trailing characters that are considered whitespace, wrap the configuration value in a <code class="codeph">CDATA[]</code> wrapper. For example, a configuration value of <code class="codeph">\n</code> should be configured as <code class="codeph">CDATA[\n]</code>.</p>
<p>You can&nbsp;use regular expressions to search column values then replace matches with a specified value. You can use this search and replace functionality together with the Delimited Text Formatter to ensure that there are no collisions between column value contents and field and line delimiters. For more information, see <a href="introduction-oracle-goldengate-big-data.htm#GUID-8622DB66-C2A2-4700-9CB7-02D891DE66E8">Using Regular Expression Search and Replace</a>.</p>
<p>Big Data applications sore data differently from RDBMSs. Update and delete operations in an RDBMS result in a change to the existing data. However, in Big Data applications, data is appended instead of changed. Therefore, the current state of a given row consolidates all of the existing operations for that row in the HDFS system. This leads to some special scenarios as described in the following sections.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-D0B9B8BB-80FC-4619-B80B-485148603759">Primary Key Updates</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-0993E0F0-9376-437A-9E6F-042F31DD4E53">Data Consolidation</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Using the Delimited Text Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD498"></a><a id="GADBD497"></a>
<div class="props_rev_3"><a id="GUID-D0B9B8BB-80FC-4619-B80B-485148603759"></a>
<h4 id="GADBD-GUID-D0B9B8BB-80FC-4619-B80B-485148603759" class="sect4"><span class="enumeration_section">17.2.8.1</span> Primary Key Updates</h4>
<div>
<div class="section">
<p>In Big Data integrations, primary key update operations require special consideration and planning. Primary key updates modify one or more of the primary keys for the given row from the source database. Because data is appended in Big Data applications, a primary key update operation looks more like an insert than an update without any special handling. You can configure how the Delimited Text formatter handles primary key updates. These are the configurable behaviors:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-D0B9B8BB-80FC-4619-B80B-485148603759__GUID-2E8B048A-FA52-411F-9D24-0AC9923492FC">
<p class="titleintable">Table 17-9 Configurable Behavior</p>
<table class="cellalignment78" title="Configurable Behavior" summary="A two column table explaining the configuration behavior of Delimited Text formatter">
<thead>
<tr class="cellalignment65">
<th class="cellalignment124" id="d80336e4471">Value</th>
<th class="cellalignment125" id="d80336e4474">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4479" headers="d80336e4471">
<p><code class="codeph">abend</code></p>
</td>
<td class="cellalignment127" headers="d80336e4479 d80336e4474">
<p>By default the delimited text formatter terminates in the case of a primary key update.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4487" headers="d80336e4471">
<p><code class="codeph">update</code></p>
</td>
<td class="cellalignment127" headers="d80336e4487 d80336e4474">
<p>The primary key update is treated like any other update operation. Use this configuration alternative only if you can guarantee that the primary key is not used as selection criteria to select row data from a Big Data system.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4495" headers="d80336e4471">
<p><code class="codeph">delete-insert</code></p>
</td>
<td class="cellalignment127" headers="d80336e4495 d80336e4474">
<p>The primary key update is treated as a special case of a delete, using the before-image data and an insert using the after-image data. This configuration may more accurately model the effect of a primary key update in a Big Data application. However, if this configuration is selected it is important to have full supplemental logging enabled on replication at the source database. Without full supplemental logging, the delete operation will be correct, but the insert operation will not contain all of the data for all of the columns for a full representation of the row data in the Big Data application.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-863982E2-DCEC-42FB-A94F-76B63D8D071F">Additional Considerations</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD499"></a>
<div class="props_rev_3"><a id="GUID-0993E0F0-9376-437A-9E6F-042F31DD4E53"></a>
<h4 id="GADBD-GUID-0993E0F0-9376-437A-9E6F-042F31DD4E53" class="sect4"><span class="enumeration_section">17.2.8.2</span> Data Consolidation</h4>
<div>
<div class="section">
<p>Big Data applications append data to the underlying storage. Analytic tools generally spawn MapReduce programs that traverse the data files and consolidate all the operations for a given row into a single output. Therefore, it is important to specify the order of operations. The Delimited Text formatter provides a number of metadata fields to do this. The operation timestamp may be sufficient to fulfill this requirement. Alternatively, the current timestamp may be the best indicator of the order of operations. In this situation, the trail position can provide a tie-breaking field on the operation timestamp. Lastly, the current timestamp may provide the best indicator of order of operations in Big Data.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-863982E2-DCEC-42FB-A94F-76B63D8D071F">Additional Considerations</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD500"></a>
<div class="props_rev_3"><a id="GUID-5B255190-419E-417C-B09D-4169E09B418E"></a>
<h2 id="GADBD-GUID-5B255190-419E-417C-B09D-4169E09B418E" class="sect2"><span class="enumeration_section">17.3</span> Using the JSON Formatter</h2>
<div>
<div class="section">
<p>The JavaScripts Object Notation (JSON) formatter can output operations from the source trail file in either row-based format or operation-based format. It formats operation data from the source trail file into a JSON objects. Each insert, update, delete, and truncate operation is formatted into an individual JSON message.</p>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-32A49341-08BF-46C0-9462-04330B9081BB">Operation Metadata Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-8ED6B4AA-8E8C-42B5-A9AE-0B29F20B9A29">Operation Data Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-4A00D3E2-F8B2-4856-8A64-248D1A93D86A">Row Data Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0">Sample JSON Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-190C332E-BD36-4BE8-9124-5A40BF86539E">JSON Schemas</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-68FB5E05-153B-400D-8B19-319098BBE6B9">JSON Formatter Configuration Properties</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-40056CE9-8E0C-4581-993B-6F508E17AD73">Review a Sample Configuration</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-A1C88CE4-58E0-478A-8B7F-377DF40B71E1">Metadata Change Events</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A">Setting Metacolumn Output</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-FAADA8EB-63FD-4AFF-B3B2-882F1209A3A2">JSON Primary Key Updates</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-93554EC3-3510-413D-8B3C-B88F7C08F0EC">Integrating Oracle Stream Analytics</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0" title="Learn how to use the pluggable formatters to convert operations from the Oracle GoldenGate trail file into formatted messages that you can send to Big Data targets using one of the Oracle GoldenGate for Big Data Handlers.">Using the Pluggable Formatters</a></p>
</div>
</div>
</div>
<a id="GADBD503"></a><a id="GADBD502"></a>
<div class="props_rev_3"><a id="GUID-32A49341-08BF-46C0-9462-04330B9081BB"></a>
<h3 id="GADBD-GUID-32A49341-08BF-46C0-9462-04330B9081BB" class="sect3"><span class="enumeration_section">17.3.1</span> Operation Metadata Formatting Details</h3>
<div>
<div class="section">
<p>JSON objects generated by the JSON Formatter contain the following metadata fields at the beginning of each message:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-32A49341-08BF-46C0-9462-04330B9081BB__GUID-67B186FA-D10D-45DA-9EBC-9CCDCA465FDE">
<p class="titleintable">Table 17-10 JSON Metadata</p>
<table class="cellalignment78" title="JSON Metadata" summary="This two column table lists the JSON metadata">
<thead>
<tr class="cellalignment65">
<th class="cellalignment124" id="d80336e4670">Value</th>
<th class="cellalignment125" id="d80336e4673">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4678" headers="d80336e4670">
<p><code class="codeph">table</code></p>
</td>
<td class="cellalignment127" headers="d80336e4678 d80336e4673">
<p>Contains the fully qualified table name. The format of the fully qualified table name is: <span class="italic"><code class="codeph">CATALOG NAME.SCHEMA NAME.TABLE NAME</code></span></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4689" headers="d80336e4670">
<p><code class="codeph">op_type</code></p>
</td>
<td class="cellalignment127" headers="d80336e4689 d80336e4673">
<p>Indicates the type of database operation from the source trail file. Default values are <code class="codeph">I</code> for insert, <code class="codeph">U</code> for update, <code class="codeph">D</code> for delete, and <code class="codeph">T</code> for truncate.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4709" headers="d80336e4670">
<p><code class="codeph">op_ts</code></p>
</td>
<td class="cellalignment127" headers="d80336e4709 d80336e4673">
<p>The timestamp of the operation from the source trail file. Because this timestamp is from the source trail, it is fixed. Replaying the trail file results in the same timestamp for the same operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4717" headers="d80336e4670">
<p><code class="codeph">current_ts</code></p>
</td>
<td class="cellalignment127" headers="d80336e4717 d80336e4673">
<p>The time when the delimited text formatter processes the current operation record. This timestamp follows the ISO-8601 format and includes microsecond precision. Replaying the trail file will <span class="italic">not</span> result in the same timestamp for the same operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4728" headers="d80336e4670">
<p><code class="codeph">pos</code></p>
</td>
<td class="cellalignment127" headers="d80336e4728 d80336e4673">
<p>The trail file position, which includes the concatenated sequence number and the RBA number from the source trail file. The trail position provides traceability of the operation back to the source trail file. The sequence number is the source trail file number. The RBA number is the offset in the trail file.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4736" headers="d80336e4670">
<p><code class="codeph">primary_keys</code></p>
</td>
<td class="cellalignment127" headers="d80336e4736 d80336e4673">
<p>An array variable that holds the column names of the primary keys of the source table. The <code class="codeph">primary_keys</code> field is only included in the JSON output if the <code class="codeph">includePrimaryKeys</code> configuration property is set to <code class="codeph">true</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e4753" headers="d80336e4670">
<p><code class="codeph">tokens</code></p>
</td>
<td class="cellalignment127" headers="d80336e4753 d80336e4673">
<p>The tokens field is only included in the output if the <code class="codeph">includeTokens</code> handler configuration property is set to <code class="codeph">true</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD504"></a>
<div class="props_rev_3"><a id="GUID-8ED6B4AA-8E8C-42B5-A9AE-0B29F20B9A29"></a>
<h3 id="GADBD-GUID-8ED6B4AA-8E8C-42B5-A9AE-0B29F20B9A29" class="sect3"><span class="enumeration_section">17.3.2</span> Operation Data Formatting Details</h3>
<div>
<div class="section">
<p>JSON messages begin with the operation metadata fields, which are followed by the operation data fields. This data is represented by <code class="codeph">before</code> and <code class="codeph">after</code> members that are objects. These objects contain members whose keys are the column names and whose values are the column values.</p>
<p>Operation data is modeled as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Inserts: Includes the after-image data.</p>
</li>
<li>
<p>Updates: Includes both the before-image and the after-image data.</p>
</li>
<li>
<p>Deletes: Includes the before-image data.</p>
</li>
</ul>
<p>Column values for an operation from the source trail file can have one of three states: the column has a value, the column value is null, or the column value is missing. The JSON Formatter maps these column value states into the created JSON objects as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>The column has a value: The column value is output. In the following example, the member <code class="codeph">STATE</code> has a value.</p>
<pre dir="ltr">
    "after":{        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",        "STATE":"CO"    }
</pre></li>
<li>
<p>The column value is null: The default output value is a JSON NULL. In the following example, the member <code class="codeph">STATE</code> is null.</p>
<pre dir="ltr">
    "after":{        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",        "STATE":null    }
</pre></li>
<li>
<p>The column value is missing: The JSON contains no element for a missing column value. In the following example, the member <code class="codeph">STATE</code> is missing.</p>
<pre dir="ltr">
    "after":{        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",    }
</pre></li>
</ul>
<p>The default setting of the JSON Formatter is to map the data types from the source trail file to the associated JSON data type. JSON supports few data types, so this functionality usually results in the mapping of numeric fields from the source trail file to members typed as numbers. This data type mapping can be configured treat all data as strings.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-4A00D3E2-F8B2-4856-8A64-248D1A93D86A"></a>
<h3 id="GADBD-GUID-4A00D3E2-F8B2-4856-8A64-248D1A93D86A" class="sect3"><span class="enumeration_section">17.3.3</span> Row Data Formatting Details</h3>
<div>
<div class="section">
<p>JSON messages begin with the operation metadata fields, which are followed by the operation data fields. For row data formatting, this are the source column names and source column values as JSON key value pairs. This data is represented by <code class="codeph">before</code> and <code class="codeph">after</code> members that are objects. These objects contain members whose keys are the column names and whose values are the column values.</p>
<p>Row data is modeled as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Inserts: Includes the after-image data.</p>
</li>
<li>
<p>Updates: Includes the after-image data.</p>
</li>
<li>
<p>Deletes: Includes the before-image data.</p>
</li>
</ul>
<p>Column values for an operation from the source trail file can have one of three states: the column has a value, the column value is null, or the column value is missing. The JSON Formatter maps these column value states into the created JSON objects as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>The column has a value: The column value is output. In the following example, the member <code class="codeph">STATE</code> has a value.</p>
<pre dir="ltr">
        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",        "STATE":"CO"    }
</pre></li>
<li>
<p>The column value is null :The default output value is a JSON NULL. In the following example, the member <code class="codeph">STATE</code> is null.</p>
<pre dir="ltr">
        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",        "STATE":null    }
</pre></li>
<li>
<p>The column value is missing: The JSON contains no element for a missing column value. In the following example, the member <code class="codeph">STATE</code> is missing.</p>
<pre dir="ltr">
        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",    }
</pre></li>
</ul>
<p>The default setting of the JSON Formatter is to map the data types from the source trail file to the associated JSON data type. JSON supports few data types, so this functionality usually results in the mapping of numeric fields from the source trail file to members typed as numbers. This data type mapping can be configured to treat all data as strings.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD505"></a>
<div class="props_rev_3"><a id="GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0"></a>
<h3 id="GADBD-GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0" class="sect3"><span class="enumeration_section">17.3.4</span> Sample JSON Messages</h3>
<div>
<div class="section">
<p>The following topics are sample JSON messages created by the JSON Formatter for insert, update, delete, and truncate operations.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-4870A1B1-89FE-450A-B5B0-40A226F8D443">Sample Operation Modeled JSON Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-507F81F2-A98F-43A7-827C-F6A0B1C9806E">Sample Flattened Operation Modeled JSON Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-C9B95EC9-B98D-4A77-AF24-C932B14BA71E">Sample Row Modeled JSON Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-1610737C-53E0-4AAD-84C2-B9FB1C9F3D10">Sample Primary Key Output JSON Message</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD506"></a>
<div class="props_rev_3"><a id="GUID-4870A1B1-89FE-450A-B5B0-40A226F8D443"></a>
<h4 id="GADBD-GUID-4870A1B1-89FE-450A-B5B0-40A226F8D443" class="sect4"><span class="enumeration_section">17.3.4.1</span> Sample Operation Modeled JSON Messages</h4>
<div>
<div class="section">
<p class="subhead3">Insert</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"I",
    "op_ts":"2015-11-05 18:45:36.000000",
    "current_ts":"2016-10-05T10:15:51.267000",
    "pos":"00000000000000002928",
    "after":{
        "CUST_CODE":"WILL",
        "ORDER_DATE":"1994-09-30:15:33:00",
        "PRODUCT_CODE":"CAR",
        "ORDER_ID":144,
        "PRODUCT_PRICE":17520.00,
        "PRODUCT_AMOUNT":3,
        "TRANSACTION_ID":100
    }
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Update</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"U",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:15:51.310002",
    "pos":"00000000000000004300",
    "before":{
        "CUST_CODE":"BILL",
        "ORDER_DATE":"1995-12-31:15:00:00",
        "PRODUCT_CODE":"CAR",
        "ORDER_ID":765,
        "PRODUCT_PRICE":15000.00,
        "PRODUCT_AMOUNT":3,
        "TRANSACTION_ID":100
    },
    "after":{
        "CUST_CODE":"BILL",
        "ORDER_DATE":"1995-12-31:15:00:00",
        "PRODUCT_CODE":"CAR",
        "ORDER_ID":765,
        "PRODUCT_PRICE":14000.00
    }
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Delete</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"D",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:15:51.312000",
    "pos":"00000000000000005272",
    "before":{
        "CUST_CODE":"DAVE",
        "ORDER_DATE":"1993-11-03:07:51:35",
        "PRODUCT_CODE":"PLANE",
        "ORDER_ID":600,
        "PRODUCT_PRICE":135000.00,
        "PRODUCT_AMOUNT":2,
        "TRANSACTION_ID":200
    }
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Truncate</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"T",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:15:51.312001",
    "pos":"00000000000000005480",
}
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0">Sample JSON Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD507"></a>
<div class="props_rev_3"><a id="GUID-507F81F2-A98F-43A7-827C-F6A0B1C9806E"></a>
<h4 id="GADBD-GUID-507F81F2-A98F-43A7-827C-F6A0B1C9806E" class="sect4"><span class="enumeration_section">17.3.4.2</span> Sample Flattened Operation Modeled JSON Messages</h4>
<div>
<div class="section">
<p class="subhead3">Insert</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"I",
    "op_ts":"2015-11-05 18:45:36.000000",
    "current_ts":"2016-10-05T10:34:47.956000",
    "pos":"00000000000000002928",
    "after.CUST_CODE":"WILL",
    "after.ORDER_DATE":"1994-09-30:15:33:00",
    "after.PRODUCT_CODE":"CAR",
    "after.ORDER_ID":144,
    "after.PRODUCT_PRICE":17520.00,
    "after.PRODUCT_AMOUNT":3,
    "after.TRANSACTION_ID":100
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Update</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"U",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:34:48.192000",
    "pos":"00000000000000004300",
    "before.CUST_CODE":"BILL",
    "before.ORDER_DATE":"1995-12-31:15:00:00",
    "before.PRODUCT_CODE":"CAR",
    "before.ORDER_ID":765,
    "before.PRODUCT_PRICE":15000.00,
    "before.PRODUCT_AMOUNT":3,
    "before.TRANSACTION_ID":100,
    "after.CUST_CODE":"BILL",
    "after.ORDER_DATE":"1995-12-31:15:00:00",
    "after.PRODUCT_CODE":"CAR",
    "after.ORDER_ID":765,
    "after.PRODUCT_PRICE":14000.00
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Delete</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"D",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:34:48.193000",
    "pos":"00000000000000005272",
    "before.CUST_CODE":"DAVE",
    "before.ORDER_DATE":"1993-11-03:07:51:35",
    "before.PRODUCT_CODE":"PLANE",
    "before.ORDER_ID":600,
    "before.PRODUCT_PRICE":135000.00,
    "before.PRODUCT_AMOUNT":2,
    "before.TRANSACTION_ID":200
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Truncate</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"D",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:34:48.193001",
    "pos":"00000000000000005480",
    "before.CUST_CODE":"JANE",
    "before.ORDER_DATE":"1995-11-11:13:52:00",
    "before.PRODUCT_CODE":"PLANE",
    "before.ORDER_ID":256,
    "before.PRODUCT_PRICE":133300.00,
    "before.PRODUCT_AMOUNT":1,
    "before.TRANSACTION_ID":100
}
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0">Sample JSON Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD508"></a>
<div class="props_rev_3"><a id="GUID-C9B95EC9-B98D-4A77-AF24-C932B14BA71E"></a>
<h4 id="GADBD-GUID-C9B95EC9-B98D-4A77-AF24-C932B14BA71E" class="sect4"><span class="enumeration_section">17.3.4.3</span> Sample Row Modeled JSON Messages</h4>
<div>
<div class="section">
<p class="subhead3">Insert</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"I",
    "op_ts":"2015-11-05 18:45:36.000000",
    "current_ts":"2016-10-05T11:10:42.294000",
    "pos":"00000000000000002928",
    "CUST_CODE":"WILL",
    "ORDER_DATE":"1994-09-30:15:33:00",
    "PRODUCT_CODE":"CAR",
    "ORDER_ID":144,
    "PRODUCT_PRICE":17520.00,
    "PRODUCT_AMOUNT":3,
    "TRANSACTION_ID":100
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Update</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"U",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T11:10:42.350005",
    "pos":"00000000000000004300",
    "CUST_CODE":"BILL",
    "ORDER_DATE":"1995-12-31:15:00:00",
    "PRODUCT_CODE":"CAR",
    "ORDER_ID":765,
    "PRODUCT_PRICE":14000.00
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Delete</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"D",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T11:10:42.351002",
    "pos":"00000000000000005272",
    "CUST_CODE":"DAVE",
    "ORDER_DATE":"1993-11-03:07:51:35",
    "PRODUCT_CODE":"PLANE",
    "ORDER_ID":600,
    "PRODUCT_PRICE":135000.00,
    "PRODUCT_AMOUNT":2,
    "TRANSACTION_ID":200
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Truncate</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"T",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T11:10:42.351003",
    "pos":"00000000000000005480",
}
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0">Sample JSON Messages</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-1610737C-53E0-4AAD-84C2-B9FB1C9F3D10"></a>
<h4 id="GADBD-GUID-1610737C-53E0-4AAD-84C2-B9FB1C9F3D10" class="sect4"><span class="enumeration_section">17.3.4.4</span> Sample Primary Key Output JSON Message</h4>
<div>
<pre dir="ltr">
{
    "table":"DDL_OGGSRC.TCUSTMER",
    "op_type":"I",
    "op_ts":"2015-10-26 03:00:06.000000",
    "current_ts":"2016-04-05T08:59:23.001000",
    "pos":"00000000000000006605",
    "primary_keys":[
        "CUST_CODE"
    ],
    "after":{
        "CUST_CODE":"WILL",
        "NAME":"BG SOFTWARE CO.",
        "CITY":"SEATTLE",
        "STATE":"WA"
    }
}
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0">Sample JSON Messages</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD510"></a>
<div class="props_rev_3"><a id="GUID-190C332E-BD36-4BE8-9124-5A40BF86539E"></a>
<h3 id="GADBD-GUID-190C332E-BD36-4BE8-9124-5A40BF86539E" class="sect3"><span class="enumeration_section">17.3.5</span> JSON Schemas</h3>
<div>
<div class="section">
<p>By default, JSON schemas are generated for each source table encountered. JSON schemas are generated on a just in time basis when an operation for that table is first encountered. A JSON schema is not required to parse a JSON object. However, many JSON parsers can use a JSON schema to perform a validating parse of a JSON object. Alternatively, you can review the JSON schemas to understand the layout of output JSON objects. By default, the JSON schemas are created in the <span class="italic"><code class="codeph">GoldenGate_Home</code></span><code class="codeph">/dirdef</code> directory and are named by the following convention:</p>
<pre dir="ltr">
<span class="italic">FULLY_QUALIFIED_TABLE_NAME</span>.schema.json
</pre>
<p>The generation of the JSON schemas is suppressible.</p>
<dl>
<dt class="dlterm"><a id="GUID-190C332E-BD36-4BE8-9124-5A40BF86539E__GUID-8ACAD59B-5EBD-4D33-8F4D-20B48CC55E95"><!-- --></a>The following JSON schema example is for the JSON object listed in <a href="using-pluggable-formatters.htm#GUID-4870A1B1-89FE-450A-B5B0-40A226F8D443">Sample Operation Modeled JSON Messages</a>.</dt>
<dd>
<pre dir="ltr">
{
    "$schema":"http://json-schema.org/draft-04/schema#",
    "title":"QASOURCE.TCUSTORD",
    "description":"JSON schema for table QASOURCE.TCUSTORD",
    "definitions":{
        "row":{
            "type":"object",
            "properties":{
                "CUST_CODE":{
                    "type":[
                        "string",
                        "null"
                    ]
                },
                "ORDER_DATE":{
                    "type":[
                        "string",
                        "null"
                    ]
                },
                "PRODUCT_CODE":{
                    "type":[
                        "string",
                        "null"
                    ]
                },
                "ORDER_ID":{
                    "type":[
                        "number",
                        "null"
                    ]
                },
                "PRODUCT_PRICE":{
                    "type":[
                        "number",
                        "null"
                    ]
                },
                "PRODUCT_AMOUNT":{
                    "type":[
                        "integer",
                        "null"
                    ]
                },
                "TRANSACTION_ID":{
                    "type":[
                        "number",
                        "null"
                    ]
                }
            },
            "additionalProperties":false
        },
        "tokens":{
            "type":"object",
            "description":"Token keys and values are free form key value pairs.",
            "properties":{
            },
            "additionalProperties":true
        }
    },
    "type":"object",
    "properties":{
        "table":{
            "description":"The fully qualified table name",
            "type":"string"
        },
        "op_type":{
            "description":"The operation type",
            "type":"string"
        },
        "op_ts":{
            "description":"The operation timestamp",
            "type":"string"
        },
        "current_ts":{
            "description":"The current processing timestamp",
            "type":"string"
        },
        "pos":{
            "description":"The position of the operation in the data source",
            "type":"string"
        },
        "primary_keys":{
            "description":"Array of the primary key column names.",
            "type":"array",
            "items":{
                "type":"string"
            },
            "minItems":0,
            "uniqueItems":true
        },
        "tokens":{
            "$ref":"#/definitions/tokens"
        },
        "before":{
            "$ref":"#/definitions/row"
        },
        "after":{
            "$ref":"#/definitions/row"
        }
    },
    "required":[
        "table",
        "op_type",
        "op_ts",
        "current_ts",
        "pos"
    ],
    "additionalProperties":false
}
</pre></dd>
<dt class="dlterm"><a id="GUID-190C332E-BD36-4BE8-9124-5A40BF86539E__GUID-69A369E9-C5AF-4DA7-9BC8-084FB60E4298"><!-- --></a>The following JSON schema example is for the JSON object listed in <a href="using-pluggable-formatters.htm#GUID-507F81F2-A98F-43A7-827C-F6A0B1C9806E">Sample Flattened Operation Modeled JSON Messages</a>.</dt>
<dd>
<pre dir="ltr">
{
    "$schema":"http://json-schema.org/draft-04/schema#",
    "title":"QASOURCE.TCUSTORD",
    "description":"JSON schema for table QASOURCE.TCUSTORD",
    "definitions":{
        "tokens":{
            "type":"object",
            "description":"Token keys and values are free form key value pairs.",
            "properties":{
            },
            "additionalProperties":true
        }
    },
    "type":"object",
    "properties":{
        "table":{
            "description":"The fully qualified table name",
            "type":"string"
        },
        "op_type":{
            "description":"The operation type",
            "type":"string"
        },
        "op_ts":{
            "description":"The operation timestamp",
            "type":"string"
        },
        "current_ts":{
            "description":"The current processing timestamp",
            "type":"string"
        },
        "pos":{
            "description":"The position of the operation in the data source",
            "type":"string"
        },
        "primary_keys":{
            "description":"Array of the primary key column names.",
            "type":"array",
            "items":{
                "type":"string"
            },
            "minItems":0,
            "uniqueItems":true
        },
        "tokens":{
            "$ref":"#/definitions/tokens"
        },
        "before.CUST_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "before.ORDER_DATE":{
            "type":[
                "string",
                "null"
            ]
        },
        "before.PRODUCT_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "before.ORDER_ID":{
            "type":[
                "number",
                "null"
            ]
        },
        "before.PRODUCT_PRICE":{
            "type":[
                "number",
                "null"
            ]
        },
        "before.PRODUCT_AMOUNT":{
            "type":[
                "integer",
                "null"
            ]
        },
        "before.TRANSACTION_ID":{
            "type":[
                "number",
                "null"
            ]
        },
        "after.CUST_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "after.ORDER_DATE":{
            "type":[
                "string",
                "null"
            ]
        },
        "after.PRODUCT_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "after.ORDER_ID":{
            "type":[
                "number",
                "null"
            ]
        },
        "after.PRODUCT_PRICE":{
            "type":[
                "number",
                "null"
            ]
        },
        "after.PRODUCT_AMOUNT":{
            "type":[
                "integer",
                "null"
            ]
        },
        "after.TRANSACTION_ID":{
            "type":[
                "number",
                "null"
            ]
        }
    },
    "required":[
        "table",
        "op_type",
        "op_ts",
        "current_ts",
        "pos"
    ],
    "additionalProperties":false
}
</pre></dd>
<dt class="dlterm"><a id="GUID-190C332E-BD36-4BE8-9124-5A40BF86539E__GUID-BBCF5290-BEA8-4D9D-8111-3108848AF9CE"><!-- --></a>The following JSON schema example is for the JSON object listed in <a href="using-pluggable-formatters.htm#GUID-C9B95EC9-B98D-4A77-AF24-C932B14BA71E">Sample Row Modeled JSON Messages</a>.</dt>
<dd>
<pre dir="ltr">
{
    "$schema":"http://json-schema.org/draft-04/schema#",
    "title":"QASOURCE.TCUSTORD",
    "description":"JSON schema for table QASOURCE.TCUSTORD",
    "definitions":{
        "tokens":{
            "type":"object",
            "description":"Token keys and values are free form key value pairs.",
            "properties":{
            },
            "additionalProperties":true
        }
    },
    "type":"object",
    "properties":{
        "table":{
            "description":"The fully qualified table name",
            "type":"string"
        },
        "op_type":{
            "description":"The operation type",
            "type":"string"
        },
        "op_ts":{
            "description":"The operation timestamp",
            "type":"string"
        },
        "current_ts":{
            "description":"The current processing timestamp",
            "type":"string"
        },
        "pos":{
            "description":"The position of the operation in the data source",
            "type":"string"
        },
        "primary_keys":{
            "description":"Array of the primary key column names.",
            "type":"array",
            "items":{
                "type":"string"
            },
            "minItems":0,
            "uniqueItems":true
        },
        "tokens":{
            "$ref":"#/definitions/tokens"
        },
        "CUST_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "ORDER_DATE":{
            "type":[
                "string",
                "null"
            ]
        },
        "PRODUCT_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "ORDER_ID":{
            "type":[
                "number",
                "null"
            ]
        },
        "PRODUCT_PRICE":{
            "type":[
                "number",
                "null"
            ]
        },
        "PRODUCT_AMOUNT":{
            "type":[
                "integer",
                "null"
            ]
        },
        "TRANSACTION_ID":{
            "type":[
                "number",
                "null"
            ]
        }
    },
    "required":[
        "table",
        "op_type",
        "op_ts",
        "current_ts",
        "pos"
    ],
    "additionalProperties":false
}
</pre></dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD512"></a><a id="GADBD511"></a>
<div class="props_rev_3"><a id="GUID-68FB5E05-153B-400D-8B19-319098BBE6B9"></a>
<h3 id="GADBD-GUID-68FB5E05-153B-400D-8B19-319098BBE6B9" class="sect3"><span class="enumeration_section">17.3.6</span> JSON Formatter Configuration Properties</h3>
<div>
<div class="tblformalwide" id="GUID-68FB5E05-153B-400D-8B19-319098BBE6B9__GUID-43B6CC5F-C44E-4848-94BF-A11AEC3D0710">
<p class="titleintable">Table 17-11 JSON Formatter Configuration Properties</p>
<table class="cellalignment87" title="JSON Formatter Configuration Properties" summary="This five column table lists the configuration properties for JSON schemas.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment119" id="d80336e5241">Properties</th>
<th class="cellalignment100" id="d80336e5244">Required/ Optional</th>
<th class="cellalignment80" id="d80336e5247">Legal Values</th>
<th class="cellalignment80" id="d80336e5250">Default</th>
<th class="cellalignment140" id="d80336e5253">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5258" headers="d80336e5241">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format</code></p>
</td>
<td class="cellalignment105" headers="d80336e5258 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5258 d80336e5247">
<p><code class="codeph">json</code> | <code class="codeph">json_row</code></p>
</td>
<td class="cellalignment84" headers="d80336e5258 d80336e5250">
<p>None</p>
</td>
<td class="cellalignment141" headers="d80336e5258 d80336e5253">
<p>Controls whether the generated JSON output messages are operation modeled or row modeled. Set to <code class="codeph">json</code> for operation modeled or<code class="codeph">json_row</code> for row modeled.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5288" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.insertOpKey</code></p>
</td>
<td class="cellalignment105" headers="d80336e5288 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5288 d80336e5247">
<p>Any string</p>
</td>
<td class="cellalignment84" headers="d80336e5288 d80336e5250">
<p><code class="codeph">I</code></p>
</td>
<td class="cellalignment141" headers="d80336e5288 d80336e5253">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5311" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.updateOpKey</code></p>
</td>
<td class="cellalignment105" headers="d80336e5311 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5311 d80336e5247">
<p>Any string</p>
</td>
<td class="cellalignment84" headers="d80336e5311 d80336e5250">
<p><code class="codeph">U</code></p>
</td>
<td class="cellalignment141" headers="d80336e5311 d80336e5253">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5334" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.deleteOpKey</code></p>
</td>
<td class="cellalignment105" headers="d80336e5334 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5334 d80336e5247">
<p>Any string</p>
</td>
<td class="cellalignment84" headers="d80336e5334 d80336e5250">
<p><code class="codeph">D</code></p>
</td>
<td class="cellalignment141" headers="d80336e5334 d80336e5253">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5357" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.truncateOpKey</code></p>
</td>
<td class="cellalignment105" headers="d80336e5357 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5357 d80336e5247">
<p>Any string</p>
</td>
<td class="cellalignment84" headers="d80336e5357 d80336e5250">
<p><code class="codeph">T</code></p>
</td>
<td class="cellalignment141" headers="d80336e5357 d80336e5253">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5380" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.prettyPrint</code></p>
</td>
<td class="cellalignment105" headers="d80336e5380 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5380 d80336e5247">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment84" headers="d80336e5380 d80336e5250">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment141" headers="d80336e5380 d80336e5253">
<p>Controls the output format of the JSON data. True formats the data with white space for easy reading. False generates more compact output that is difficult to read..</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5407" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.jsonDelimiter</code></p>
</td>
<td class="cellalignment105" headers="d80336e5407 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5407 d80336e5247">
<p>Any string</p>
</td>
<td class="cellalignment84" headers="d80336e5407 d80336e5250">
<p><code class="codeph">""</code> (no value)</p>
</td>
<td class="cellalignment141" headers="d80336e5407 d80336e5253">
<p>Inserts a delimiter between generated JSONs so that they can be more easily parsed in a continuous stream of data. Configuration value supports <code class="codeph">CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5434" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.generateSchema</code></p>
</td>
<td class="cellalignment105" headers="d80336e5434 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5434 d80336e5247">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment84" headers="d80336e5434 d80336e5250">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment141" headers="d80336e5434 d80336e5253">
<p>Controls the generation of JSON schemas for the generated JSON documents. JSON schemas are generated on a table-by-table basis. A JSON schema is not required to parse a JSON document. However, a JSON schemahelp indicate what the JSON documents look like and can be used for a validating JSON parse.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5461" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.schemaDirectory</code></p>
</td>
<td class="cellalignment105" headers="d80336e5461 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5461 d80336e5247">
<p>Any legal, existing file system path</p>
</td>
<td class="cellalignment84" headers="d80336e5461 d80336e5250">
<p><code class="codeph">./dirdef</code></p>
</td>
<td class="cellalignment141" headers="d80336e5461 d80336e5253">
<p>Controls the output location of generated JSON schemas.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5484" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.treatAllColumnsAsStrings</code></p>
</td>
<td class="cellalignment105" headers="d80336e5484 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5484 d80336e5247">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment84" headers="d80336e5484 d80336e5250">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment141" headers="d80336e5484 d80336e5253">
<p>Controls the output typing of generated JSON documents. When false, the formatter attempts to map Oracle GoldenGate types to the corresponding JSON type. When true, all data is treated as strings in the generated JSONs and JSON schemas.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5508" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.encoding</code></p>
</td>
<td class="cellalignment105" headers="d80336e5508 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5508 d80336e5247">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment84" headers="d80336e5508 d80336e5250">
<p><code class="codeph">UTF-8</code> (the JSON default)</p>
</td>
<td class="cellalignment141" headers="d80336e5508 d80336e5253">
<p>Controls the output encoding of generated JSON schemas and documents.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5533" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name</code></span><code class="codeph">.format.versionSchemas</code></p>
</td>
<td class="cellalignment105" headers="d80336e5533 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5533 d80336e5247">
<p><code class="codeph">true | false</code></p>
</td>
<td class="cellalignment84" headers="d80336e5533 d80336e5250">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment141" headers="d80336e5533 d80336e5253">
<p>Controls the version of created schemas. Schema versioning creates a schema with a timestamp in the schema directory on the local file system every time a new schema is created. True enables schema versioning. False disables schema versioning.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5557" headers="d80336e5241">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment105" headers="d80336e5557 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5557 d80336e5247">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment84" headers="d80336e5557 d80336e5250">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment141" headers="d80336e5557 d80336e5253">
<p>Controls the format of the current timestamp. The default is the &nbsp;ISO 8601 format. A setting of <code class="codeph">false</code> removes the <code class="codeph">&ldquo;T&rdquo;</code> between the date and time in the current timestamp, which outputs a single space(<code class="codeph">&ldquo; &ldquo;</code>) instead.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5592" headers="d80336e5241">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.includePrimaryKeys</code></p>
</td>
<td class="cellalignment105" headers="d80336e5592 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5592 d80336e5247">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment84" headers="d80336e5592 d80336e5250">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment141" headers="d80336e5592 d80336e5253">
<p>When set to <code class="codeph">true</code>, to include an array of the primary key column names from the source table in the JSON output.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5621" headers="d80336e5241">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.flatten</code></p>
</td>
<td class="cellalignment105" headers="d80336e5621 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5621 d80336e5247">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment84" headers="d80336e5621 d80336e5250">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment141" headers="d80336e5621 d80336e5253">
<p>Controls sending flattened JSON formatted data to the target entity. Must be set to <code class="codeph">true</code> for the flatten Delimiter property to work.</p>
<p>This property is applicable only to Operation Formatted JSON (<code class="codeph">gg.handler.name.format=json</code>).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5655" headers="d80336e5241">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.flattenDelimiter</code></p>
</td>
<td class="cellalignment105" headers="d80336e5655 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5655 d80336e5247">
<p>Any legal character or character string for a JSON field name.</p>
</td>
<td class="cellalignment84" headers="d80336e5655 d80336e5250">
<p><code class="codeph">.</code></p>
</td>
<td class="cellalignment141" headers="d80336e5655 d80336e5253">
<p>Controls the delimiter for concatenated JSON element names. This property supports <code class="codeph">CDATA[]</code> wrapping to preserve whitespace. It is only relevant when <code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.flatten</code> is set to <code class="codeph">true</code>.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5688" headers="d80336e5241">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.beforeObjectName</code></p>
</td>
<td class="cellalignment105" headers="d80336e5688 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5688 d80336e5247">
<p>Any legal character or character string for a JSON field name.</p>
</td>
<td class="cellalignment84" headers="d80336e5688 d80336e5250">
<p>Any legal JSON attribute name.</p>
</td>
<td class="cellalignment141" headers="d80336e5688 d80336e5253">
<p>Allows you to set whether the JSON element-before, that contains the change column values, can be renamed.</p>
<p>This property is only applicable to Operation Formatted JSON (<code class="codeph">gg.handler.name.format=json</code>).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5713" headers="d80336e5241">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.afterObjectName</code></p>
</td>
<td class="cellalignment105" headers="d80336e5713 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5713 d80336e5247">
<p>Any legal character or character string for a JSON field name.</p>
</td>
<td class="cellalignment84" headers="d80336e5713 d80336e5250">
<p>Any legal JSON attribute name.</p>
</td>
<td class="cellalignment141" headers="d80336e5713 d80336e5253">
<p>Allows you to set whether the JSON element, that contains the after-change column values, can be renamed.</p>
<p>This property is only applicable to Operation Formatted JSON (<code class="codeph">gg.handler.name.format=json</code>).</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5738" headers="d80336e5241">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.pkUpdateHandling</code></p>
</td>
<td class="cellalignment105" headers="d80336e5738 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5738 d80336e5247">
<p><code class="codeph">abend</code> | <code class="codeph">update</code> | <code class="codeph">delete-insert</code></p>
</td>
<td class="cellalignment84" headers="d80336e5738 d80336e5250">
<p><code class="codeph">abend</code></p>
</td>
<td class="cellalignment141" headers="d80336e5738 d80336e5253">
<p>Specifies how the formatter handles update operations that change a primary key. Primary key operations can be problematic for the JSON formatter and require special consideration by you. You can only use this property in conjunction with the row modeled JSON output messages.</p>
<p>This property is only applicable to Row Formatted JSON (<code class="codeph">gg.handler.name.format=json_row</code>).</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">abend</code> : indicates that the process terminates.</p>
</li>
<li>
<p><code class="codeph">update</code>: the process handles the operation as a normal update.</p>
</li>
<li>
<p><code class="codeph">delete</code> or <code class="codeph">insert</code>: the process handles the operation as a delete and an insert. Full supplemental logging must be enabled. Without full before and after row images, the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment121" id="d80336e5792" headers="d80336e5241"><code class="codeph">gg.handler.name.format.omitNullValues</code></td>
<td class="cellalignment105" headers="d80336e5792 d80336e5244">
<p>Optional</p>
</td>
<td class="cellalignment84" headers="d80336e5792 d80336e5247">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment84" headers="d80336e5792 d80336e5250">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment141" headers="d80336e5792 d80336e5253">
<p>Set to <code class="codeph">false</code> to omit fields that have null values from being included in the generated JSON output.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD513"></a>
<div class="props_rev_3"><a id="GUID-40056CE9-8E0C-4581-993B-6F508E17AD73"></a>
<h3 id="GADBD-GUID-40056CE9-8E0C-4581-993B-6F508E17AD73" class="sect3"><span class="enumeration_section">17.3.7</span> Review a Sample Configuration</h3>
<div>
<div class="section">
<p>The following is a sample configuration for the JSON Formatter in the Java Adapter configuration file:</p>
<pre dir="ltr">
gg.handler.hdfs.format=json
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.prettyPrint=false
gg.handler.hdfs.format.jsonDelimiter=CDATA[]
gg.handler.hdfs.format.generateSchema=true
gg.handler.hdfs.format.schemaDirectory=dirdef
gg.handler.hdfs.format.treatAllColumnsAsStrings=false
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD514"></a>
<div class="props_rev_3"><a id="GUID-A1C88CE4-58E0-478A-8B7F-377DF40B71E1"></a>
<h3 id="GADBD-GUID-A1C88CE4-58E0-478A-8B7F-377DF40B71E1" class="sect3"><span class="enumeration_section">17.3.8</span> Metadata Change Events</h3>
<div>
<div class="section">
<p>Metadata change events are handled at runtime. When metadata is changed in a table, the JSON schema is regenerated the next time an operation for the table is encountered. The content of created JSON messages changes to reflect the metadata change. For example, if an additional column is added, the new column is included in created JSON messages after the metadata change event.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A"></a>
<h3 id="GADBD-GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A" class="sect3"><span class="enumeration_section">17.3.9</span> Setting Metacolumn Output</h3>
<div>
<div class="section">
<p>The following are the configurable values for the Delimited Text Format metacolumns template property that controls metacolumn output.</p>
<div class="tblformal" id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__GUID-DFA1AD16-CFF4-4360-B29B-1D911AC514CE">
<p class="titleintable">Table 17-12 Metacolumns Template Property</p>
<table class="cellalignment78" title="Metacolumns Template Property" summary="Five column table describing the Metacolumns Template Property">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d80336e5914">Properties</th>
<th class="cellalignment77" id="d80336e5917">Required/ Optional</th>
<th class="cellalignment77" id="d80336e5920">Legal Values</th>
<th class="cellalignment77" id="d80336e5923">Default</th>
<th class="cellalignment77" id="d80336e5926">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e5931" headers="d80336e5914"><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.metaColumnsTemplate</code></td>
<td class="cellalignment65" headers="d80336e5931 d80336e5917">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e5931 d80336e5920">
<p><code class="codeph">${alltokens} | ${token} | ${env} | ${sys} | ${javaprop} | ${optype} | ${position} | ${timestamp} | ${catalog} | ${schema} | ${table} | ${objectname} | ${csn} | ${xid} | ${currenttimestamp} | ${opseqno} | ${timestampmicro} | ${currenttimestampmicro}</code></p>
</td>
<td class="cellalignment65" headers="d80336e5931 d80336e5923">
<p>None</p>
</td>
<td class="cellalignment65" headers="d80336e5931 d80336e5926">
<p>The current meta column information can be configured in a simple manner and removes the explicit need to use:</p>
<pre dir="ltr">
insertOpKey | updateOpKey | deleteOpKey | truncateOpKey | includeTableName | includeOpTimestamp | includeOpType | includePosition | includeCurrentTimestamp, useIso8601Format
</pre>
<p>It is a comma-delimited string consisting of one or more templated values that represent the template.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><span class="bold">Explanation of the Metacolumn Keywords</span></p>
<dl>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e81"><!-- --></a><code class="codeph">${alltokens}</code></dt>
<dd>
<p>All of the <span>Oracle GoldenGate</span> tokens.</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e91"><!-- --></a><code class="codeph">${token}</code></dt>
<dd>
<p>The value of a specific <span>Oracle GoldenGate</span> token. The token key should follow token key should follow the token using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${token.<span class="italic">MYTOKEN</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e109"><!-- --></a><code class="codeph">${sys}</code></dt>
<dd>
<p>A system environmental variable. The variable name should follow <code class="codeph">sys</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${sys.<span class="italic">MYVAR</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e127"><!-- --></a><code class="codeph">${env}</code></dt>
<dd>
<p>An <span>Oracle GoldenGate</span> environment variable. The variable name should follow <code class="codeph">env</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${env.<span class="italic">someVariable</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e148"><!-- --></a><code class="codeph">${javaprop}</code></dt>
<dd>
<p>A Java JVM variable. The variable name should follow <code class="codeph">javaprop</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${javaprop.<span class="italic">MYVAR</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e166"><!-- --></a><code class="codeph">${optype}</code></dt>
<dd>
<p>Operation Type</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e173"><!-- --></a><code class="codeph">${position}</code></dt>
<dd>
<p>Record Position</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e180"><!-- --></a><code class="codeph">${timestamp}</code></dt>
<dd>
<p>Record Timestamp</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e187"><!-- --></a><code class="codeph">${catalog}</code></dt>
<dd>
<p>Catalog Name</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e194"><!-- --></a><code class="codeph">${schema}</code></dt>
<dd>
<p>Schema Name</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e201"><!-- --></a><code class="codeph">${table}</code></dt>
<dd>
<p>Table Name</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e209"><!-- --></a><code class="codeph">${objectname}</code></dt>
<dd>
<p>The fully qualified table name.</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e216"><!-- --></a><code class="codeph">${csn}</code></dt>
<dd>
<p>Source Commit Sequence Number</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e223"><!-- --></a><code class="codeph">${xid}</code></dt>
<dd>
<p>Source Transaction ID</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e230"><!-- --></a><code class="codeph">${currenttimestamp}</code></dt>
<dd>
<p>Current Timestamp</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e237"><!-- --></a><code class="codeph">${opseqno}</code></dt>
<dd>
<p>Record sequence number within the transaction.</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e244"><!-- --></a><code class="codeph">${timestampmicro}</code></dt>
<dd>
<p>Record timestamp (in microseconds after epoch).</p>
</dd>
<dt class="dlterm"><a id="GUID-1483C80D-916C-4A29-999A-3DBE0ABB572A__d20e251"><!-- --></a><code class="codeph">${currenttimestampmicro}</code></dt>
<dd>
<p>Current timestamp (in microseconds after epoch).</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD515"></a>
<div class="props_rev_3"><a id="GUID-FAADA8EB-63FD-4AFF-B3B2-882F1209A3A2"></a>
<h3 id="GADBD-GUID-FAADA8EB-63FD-4AFF-B3B2-882F1209A3A2" class="sect3"><span class="enumeration_section">17.3.10</span> JSON Primary Key Updates</h3>
<div>
<div class="section">
<p>When the JSON formatter is configured to model operation data, primary key updates require no special treatment and are treated like any other update. The before and after values reflect the change in the primary key.</p>
<p>When the JSON formatter is configured to model row data, primary key updates must be specially handled. The default behavior is to abend. However, by using the<code class="codeph">gg.handler.name.format.pkUpdateHandling</code> configuration property, you can configure the JSON formatter to model row data to treat primary key updates as either a regular update or as delete and then insert operations. When you configure the formatter to handle primary key updates as delete and insert operations, Oracle recommends that you configure your replication stream to contain the complete before-image and after-image data for updates. Otherwise, the generated insert operation for a primary key update will be missing data for fields that did not change.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-93554EC3-3510-413D-8B3C-B88F7C08F0EC"></a>
<h3 id="GADBD-GUID-93554EC3-3510-413D-8B3C-B88F7C08F0EC" class="sect3"><span class="enumeration_section">17.3.11</span> Integrating Oracle Stream Analytics</h3>
<div>
<div class="section">
<p>You can integrate Oracle GoldenGate for Big Data with Oracle Stream Analytics (OSA) by sending operation-modeled JSON messages to the Kafka Handler. This works only when the JSON formatter is configured to output operation-modeled JSON messages.</p>
<p>Because OSA requires flattened JSON objects, a new feature in the JSON formatter generates flattened JSONs. To use this feature, set the <code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.flatten=false</code> to <code class="codeph">true</code>. (The default setting is false). The following is an example of a flattened JSON file:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTMER",
    "op_type":"U",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-06-22T13:38:45.335001",
    "pos":"00000000000000005100",
    "before.CUST_CODE":"ANN",
    "before.NAME":"ANN'S BOATS",
    "before.CITY":"SEATTLE",
    "before.STATE":"WA",
    "after.CUST_CODE":"ANN",
    "after.CITY":"NEW YORK",
    "after.STATE":"NY"
}
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">Using the JSON Formatter</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B25EBE30-AA78-4FB6-8907-56B9B28315A2"></a>
<h2 id="GADBD-GUID-B25EBE30-AA78-4FB6-8907-56B9B28315A2" class="sect2"><span class="enumeration_section">17.4</span> Using the Length Delimited Value Formatter</h2>
<div>
<div class="section">
<p>The Length Delimited Value (LDV) Formatter is a row-based formatter. It formats database operations from the source trail file into a length delimited value output. Each insert, update, delete, or truncate operation from the source trail is formatted into an individual length delimited message. With length delimited, there are no field delimiters. The fields are variable in size based on the data.</p>
<p>By default, the length delimited maps these column value states into the length delimited value output. Column values for an operation from the source trail file can have one of three states:</p>
<ul style="list-style-type: disc;">
<li>
<p>Column has a value &mdash;The column value is output with the prefix indicator <code class="codeph">P</code>.</p>
</li>
<li>
<p>Column value is NULL &mdash;The default output value is <code class="codeph">N</code>. The output for the case of a <code class="codeph">NULL</code> column value is configurable.</p>
</li>
<li>
<p>Column value is missing - The default output value is <code class="codeph">M</code>. The output for the case of a missing column value is configurable.</p>
</li>
</ul>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-974746EA-1C59-413B-AF07-AEACC860DD37">Formatting Message Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-B5FCF632-CD79-4C34-8AFA-7F1C0034C2E5">Sample Formatted Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-3C5102D9-7AC8-4DCC-9A4E-57711526F634">LDV Formatter Configuration Properties</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-A26D2DA6-1EE8-43E5-9608-BD139400B7DA">Additional Considerations</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0" title="Learn how to use the pluggable formatters to convert operations from the Oracle GoldenGate trail file into formatted messages that you can send to Big Data targets using one of the Oracle GoldenGate for Big Data Handlers.">Using the Pluggable Formatters</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-974746EA-1C59-413B-AF07-AEACC860DD37"></a>
<h3 id="GADBD-GUID-974746EA-1C59-413B-AF07-AEACC860DD37" class="sect3"><span class="enumeration_section">17.4.1</span> Formatting Message Details</h3>
<div>
<div class="section">
<p>The default format for output of data is the following:</p>
<dl>
<dt class="dlterm"><a id="GUID-974746EA-1C59-413B-AF07-AEACC860DD37__GUID-17DC9031-640D-4B70-8541-621AFEB0BE39"><!-- --></a>First is the row Length followed by metadata:</dt>
<dd>
<pre dir="ltr">
&lt;ROW LENGTH&gt;&lt;PRESENT INDICATOR&gt;&lt;FIELD LENGTH&gt;&lt;OPERATION TYPE&gt;&lt;PRESENT INDICATOR&gt;&lt;FIELD LENGTH&gt;&lt;FULLY QUALIFIED TABLE NAME&gt;&lt;PRESENT INDICATOR&gt;&lt;FIELD LENGTH&gt;&lt;OPERATION TIMESTAMP&gt;&lt;PRESENT INDICATOR&gt;&lt;FIELD LENGTH&gt;&lt;CURRENT TIMESTAMP&gt;&lt;PRESENT INDICATOR&gt;&lt;FIELD LENGTH&gt;&lt;TRAIL POSITION&gt;&lt;PRESENT INDICATOR&gt;&lt;FIELD LENGTH&gt;&lt;TOKENS&gt;
</pre>
<p>Or</p>
<pre dir="ltr">
&lt;ROW LENGTH&gt;&lt;FIELD LENGTH&gt;&lt;FULLY QUALIFIED TABLE NAME&gt;&lt;FIELD LENGTH&gt;&lt;OPERATION TIMESTAMP&gt;&lt;FIELD LENGTH&gt;&lt;CURRENT TIMESTAMP&gt;&lt;FIELD LENGTH&gt;&lt;TRAIL POSITION&gt;&lt;FIELD LENGTH&gt;&lt;TOKENS&gt;     
</pre></dd>
<dt class="dlterm"><a id="GUID-974746EA-1C59-413B-AF07-AEACC860DD37__GUID-203458AF-516C-4250-BE44-B16510E28EE8"><!-- --></a>Next is the row data:</dt>
<dd>
<pre dir="ltr">
&lt;PRESENT INDICATOR&gt;&lt;FIELD LENGTH&gt;&lt;COLUMN 1 VALUE&gt;&lt;PRESENT INDICATOR&gt;&lt;FIELD LENGTH&gt;&lt;COLUMN N VALUE&gt;
</pre></dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-B25EBE30-AA78-4FB6-8907-56B9B28315A2">Using the Length Delimited Value Formatter</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B5FCF632-CD79-4C34-8AFA-7F1C0034C2E5"></a>
<h3 id="GADBD-GUID-B5FCF632-CD79-4C34-8AFA-7F1C0034C2E5" class="sect3"><span class="enumeration_section">17.4.2</span> Sample Formatted Messages</h3>
<div>
<div class="section">
<dl>
<dt class="dlterm"><a id="GUID-B5FCF632-CD79-4C34-8AFA-7F1C0034C2E5__GUID-17DC9031-640D-4B70-8541-621AFEB0BE39"><!-- --></a>Insert Message:</dt>
<dd>
<pre dir="ltr">
0133P01IP161446749136000000P161529311765024000P262015-11-05 
18:45:36.000000P04WILLP191994-09-30 15:33:00P03CARP03144P0817520.00P013P03100
</pre></dd>
<dt class="dlterm"><a id="GUID-B5FCF632-CD79-4C34-8AFA-7F1C0034C2E5__GUID-203458AF-516C-4250-BE44-B16510E28EE8"><!-- --></a>Update Message</dt>
<dd>
<pre dir="ltr">
0133P01UP161446749139000000P161529311765035000P262015-11-05 
18:45:39.000000P04BILLP191995-12-31 15:00:00P03CARP03765P0814000.00P013P03100
</pre></dd>
<dt class="dlterm"><a id="GUID-B5FCF632-CD79-4C34-8AFA-7F1C0034C2E5__GUID-ED20007A-80FE-46B2-9A4B-458349BC6818"><!-- --></a>Delete Message</dt>
<dd>
<pre dir="ltr">
0136P01DP161446749139000000P161529311765038000P262015-11-05 
18:45:39.000000P04DAVEP191993-11-03 
07:51:35P05PLANEP03600P09135000.00P012P03200
</pre></dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-B25EBE30-AA78-4FB6-8907-56B9B28315A2">Using the Length Delimited Value Formatter</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-3C5102D9-7AC8-4DCC-9A4E-57711526F634"></a>
<h3 id="GADBD-GUID-3C5102D9-7AC8-4DCC-9A4E-57711526F634" class="sect3"><span class="enumeration_section">17.4.3</span> LDV Formatter Configuration Properties</h3>
<div>
<div class="section">
<div class="tblformal" id="GUID-3C5102D9-7AC8-4DCC-9A4E-57711526F634__GUID-D804E272-991E-421B-992F-E0DBFACB6184">
<p class="titleintable">Table 17-13 LDV Formatter Configuration Properties</p>
<table class="cellalignment78" title="LDV Formatter Configuration Properties" summary="Five column table describing the LDV Formatter Configuration Properties">
<thead>
<tr class="cellalignment65">
<th class="cellalignment98" id="d80336e6418">Properties</th>
<th class="cellalignment99" id="d80336e6421">Required/ Optional</th>
<th class="cellalignment100" id="d80336e6424">Legal Values</th>
<th class="cellalignment101" id="d80336e6427">Default</th>
<th class="cellalignment102" id="d80336e6430">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6435" headers="d80336e6418">
<div class="p">
<pre dir="ltr">
gg.handler.<span class="italic">name</span>.format.<span class="italic">binaryLengthMode</span>
</pre></div>
</td>
<td class="cellalignment104" headers="d80336e6435 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6435 d80336e6424">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment106" headers="d80336e6435 d80336e6427">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment107" headers="d80336e6435 d80336e6430">
<p>The output can be controlled to display the field or record length in either binary or ASCII format. If set to <code class="codeph">true</code>, the record or field length is represented in binary format else in ASCII.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6465" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.recordLength</code></p>
</td>
<td class="cellalignment104" headers="d80336e6465 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6465 d80336e6424">
<p><code class="codeph">4</code> | <code class="codeph">8</code></p>
</td>
<td class="cellalignment106" headers="d80336e6465 d80336e6427">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment107" headers="d80336e6465 d80336e6430">
<p>Set to <code class="codeph">true</code>, the record length is represented using either a 4 or 8&ndash;byte big Endian integer. Set to <code class="codeph">false</code>, the string representation of the record length with padded value with configured length of 4 or 8 is used.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6498" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.fieldLength</code></p>
</td>
<td class="cellalignment104" headers="d80336e6498 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6498 d80336e6424">
<p><code class="codeph">2</code> | <code class="codeph">4</code></p>
</td>
<td class="cellalignment106" headers="d80336e6498 d80336e6427">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment107" headers="d80336e6498 d80336e6430">
<p>Set to <code class="codeph">true</code>, the record length is represented using either a 2 or 4-byte big Endian integer. Set to <code class="codeph">false</code>, the string representation of the record length with padded value with configured length of 2 or 4 is used.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6531" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.format</code></p>
</td>
<td class="cellalignment104" headers="d80336e6531 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6531 d80336e6424">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment106" headers="d80336e6531 d80336e6427">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment107" headers="d80336e6531 d80336e6430">
<p>Use to configure the <code class="codeph">P</code>indicator with MetaColumn. Set to <code class="codeph">false</code>, enables the indicator <code class="codeph">P</code> before the MetaColumns. If set to <code class="codeph">true</code>, disables the indicator.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6570" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.presentValue</code></p>
</td>
<td class="cellalignment104" headers="d80336e6570 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6570 d80336e6424">
<p>Any string</p>
</td>
<td class="cellalignment106" headers="d80336e6570 d80336e6427">
<p><code class="codeph">P</code></p>
</td>
<td class="cellalignment107" headers="d80336e6570 d80336e6430">
<p>Use to configure what is included in the output when a column value is present. This value supports CDATA[] wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6593" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.missingValue</code></p>
</td>
<td class="cellalignment104" headers="d80336e6593 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6593 d80336e6424">
<p>Any string</p>
</td>
<td class="cellalignment106" headers="d80336e6593 d80336e6427">
<p><code class="codeph">M</code></p>
</td>
<td class="cellalignment107" headers="d80336e6593 d80336e6430">
<p>Use to configure what is included in the output when a missing value is present. This value supports CDATA[] wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6616" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.nullValue</code></p>
</td>
<td class="cellalignment104" headers="d80336e6616 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6616 d80336e6424">
<p>Any string</p>
</td>
<td class="cellalignment106" headers="d80336e6616 d80336e6427">
<p><code class="codeph">N</code></p>
</td>
<td class="cellalignment107" headers="d80336e6616 d80336e6430">
<p>Use to configure what is included in the output when a NULL value is present. This value supports CDATA[] wrapping.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6639" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.metaColumnsTemplate</code></p>
</td>
<td class="cellalignment104" headers="d80336e6639 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6639 d80336e6424">
<div class="p">
<pre dir="ltr">
${alltokens}, ${token}, ${env}, ${sys},  ${javaprop},  ${optype},  ${position},  ${timestamp},  ${catalog},  ${schema},  ${table},  ${objectname},  ${csn},  ${xid},  ${currenttimestamp}, ${opseqno},  ${timestampmicro},  ${currenttimestampmicro}
</pre></div>
</td>
<td class="cellalignment106" headers="d80336e6639 d80336e6427">
<p>None</p>
</td>
<td class="cellalignment107" headers="d80336e6639 d80336e6430">
<p>Use to configure the current meta column information in a simple manner and removes the explicit need of <code class="codeph">insertOpKey</code>, <code class="codeph">updateOpKey</code>, <code class="codeph">deleteOpKey</code>, <code class="codeph">truncateOpKey</code>, <code class="codeph">includeTableName</code>, <code class="codeph">includeOpTimestamp</code>, <code class="codeph">includeOpType</code>, <code class="codeph">includePosition</code>, <code class="codeph">includeCurrentTimestamp</code> and <code class="codeph">useIso8601Format</code>.</p>
<p>A comma-delimited string consisting of one or more templated values represents the template. This example produces a list of meta columns:</p>
<pre dir="ltr">
${optype}, ${token.ROWID},${sys.username},${currenttimestamp}
</pre>
<p>The valid properties are as follows:</p>
<p>AllTokens &ndash; to display All Tokens</p>
<p>Token &ndash; to display Specific Token</p>
<p>SysEnv &ndash; to display System Environment Variable</p>
<p>GGEnv &ndash; to display GG Environment Property</p>
<p>JavaProp &ndash; to display Java Property</p>
<p>OpType &ndash; to display Operation Type</p>
<p>Position &ndash; to display Record Position</p>
<p>TimeStamp &ndash; to display Record Timestamp</p>
<p>Catalog &ndash; to display Catalog Name</p>
<p>Schema &ndash; to display Schema Name</p>
<p>Table &ndash; to display Table Name</p>
<p>ObjectName &ndash; to display Fully Qualified Object Name</p>
<p>CSN &ndash; to display Source Commit Sequence Number</p>
<p>XID &ndash; to display Source Transaction ID</p>
<p>CurrentTimeStamp &ndash; to display The current timestamp</p>
<p>OpSeqno &ndash; to display Record sequence number within transaction</p>
<p>TimeStampMicro &ndash; to display Record timestamp (in microseconds after epoch)</p>
<p>CurrentTimeStampMicro &ndash; to display Current timestamp (in microseconds after epoch)</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6736" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.pkUpdateHandling</code></p>
</td>
<td class="cellalignment104" headers="d80336e6736 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6736 d80336e6424">
<p><code class="codeph">abend</code> | <code class="codeph">update</code> | <code class="codeph">delete-insert</code></p>
</td>
<td class="cellalignment106" headers="d80336e6736 d80336e6427">
<p><code class="codeph">abend</code></p>
</td>
<td class="cellalignment107" headers="d80336e6736 d80336e6430">
<p>Specifies how the formatter handles update operations that change a primary key. Primary key operations can be problematic for the text formatter and require special consideration by you.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">abend</code> : indicates the process will abend</p>
</li>
<li>
<p><code class="codeph">update</code> : indicates the process will treat this as a normal update</p>
</li>
<li>
<p><code class="codeph">delete-insert</code>: indicates the process handles this as a delete and an insert. Full supplemental logging must be enabled for this to work. Without full before and after row images, the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment103" id="d80336e6782" headers="d80336e6418">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.encoding</code></p>
</td>
<td class="cellalignment104" headers="d80336e6782 d80336e6421">
<p>Optional</p>
</td>
<td class="cellalignment105" headers="d80336e6782 d80336e6424">
<p>Any encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment106" headers="d80336e6782 d80336e6427">
<p>The native system encoding of the machine hosting the Oracle GoldenGate process.</p>
</td>
<td class="cellalignment107" headers="d80336e6782 d80336e6430">
<p>Use to set the output encoding for character data and columns.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Review a Sample Configuration</p>
<pre dir="ltr">
#The LDV Handler
gg.handler.filewriter.format=binary
gg.handler.filewriter.format.binaryLengthMode=false
gg.handler.filewriter.format.recordLength=4
gg.handler.filewriter.format.fieldLength=2
gg.handler.filewriter.format.legacyFormat=false
gg.handler.filewriter.format.presentValue=CDATA[P]
gg.handler.filewriter.format.missingValue=CDATA[M]
gg.handler.filewriter.format.nullValue=CDATA[N]
gg.handler.filewriter.format.metaColumnsTemplate=${optype},${timestampmicro},${currenttimestampmicro},${timestamp}
gg.handler.filewriter.format.pkUpdateHandling=abend
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-B25EBE30-AA78-4FB6-8907-56B9B28315A2">Using the Length Delimited Value Formatter</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A26D2DA6-1EE8-43E5-9608-BD139400B7DA"></a>
<h3 id="GADBD-GUID-A26D2DA6-1EE8-43E5-9608-BD139400B7DA" class="sect3"><span class="enumeration_section">17.4.4</span> Additional Considerations</h3>
<div>
<div class="section">
<p>Big Data applications differ from RDBMSs in how data is stored. Update and delete operations in an RDBMS result in a change to the existing data. Data is not changed in Big Data applications, it is simply appended to existing data. The current state of a given row becomes a consolidation of all of the existing operations for that row in the HDFS system.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Primary Key Updates</p>
Primary key update operations require special consideration and planning for Big Data integrations. Primary key updates are update operations that modify one or more of the primary keys for the given row from the source database. Since data is simply appended in Big Data applications, a primary key update operation looks more like a new insert than an update without any special handling. The Length Delimited Value Formatter provides specialized handling for primary keys that is configurable to you. These are the configurable behaviors:
<div class="tblformal" id="GUID-A26D2DA6-1EE8-43E5-9608-BD139400B7DA__GUID-B0DB98EC-DA78-4A96-94D9-199E94A10684">
<p class="titleintable">Table 17-14 Primary Key Update Behaviors</p>
<table class="cellalignment71" title="Primary Key Update Behaviors" summary="Two column table describing Primary Key Update Behaviors.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d80336e6849">Value</th>
<th class="cellalignment72" id="d80336e6851">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e6855" headers="d80336e6849">
<p>Abend</p>
</td>
<td class="cellalignment73" headers="d80336e6855 d80336e6851">
<p>The default behavior is that the length delimited value formatter will abend in the case of a primary key update.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e6862" headers="d80336e6849">
<p>Update</p>
</td>
<td class="cellalignment73" headers="d80336e6862 d80336e6851">
<p>With this configuration the primary key update will be treated just like any other update operation. This configuration alternative should only be selected if you can guarantee that the primary key that is being changed is not being used as the selection criteria when selecting row data from a Big Data system.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e6869" headers="d80336e6849">
<p>Delete-Insert</p>
</td>
<td class="cellalignment73" headers="d80336e6869 d80336e6851">
<p>Using this configuration the primary key update is treated as a special case of a delete using the before image data and an insert using the after image data. This configuration may more accurately model the effect of a primary key update in a Big Data application. However, if this configuration is selected it is important to have full supplemental logging enabled on replication at the source database. Without full supplemental logging, the delete operation will be correct, but the insert operation do not contain all of the data for all of the columns for a full representation of the row data in the Big Data application.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Consolidating Data</p>
<p>Big Data applications simply append data to the underlying storage. Typically, analytic tools spawn map reduce programs that traverse the data files and consolidate all the operations for a given row into a single output. It is important to have an indicator of the order of operations. The Length Delimited Value Formatter provides a number of metadata fields to fulfill this need. The operation timestamp may be sufficient to fulfill this requirement. However, two update operations may have the same operation timestamp especially if they share a common transaction. The trail position can provide a tie breaking field on the operation timestamp. Lastly, the current timestamp may provide the best indicator of order of operations in Big Data.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-B25EBE30-AA78-4FB6-8907-56B9B28315A2">Using the Length Delimited Value Formatter</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD480"></a>
<div class="props_rev_3"><a id="GUID-7683E975-3283-440D-84B1-973BFE2551E7"></a>
<h2 id="GADBD-GUID-7683E975-3283-440D-84B1-973BFE2551E7" class="sect2"><span class="enumeration_section">17.5</span> Using Operation-Based versus Row-Based Formatting</h2>
<div>
<div class="section">
<p>The Oracle GoldenGate for Big Data formatters include operation-based and row-based formatters.</p>
<p>The operation-based formatters represent the individual insert, update, and delete events that occur on table data in the source database. Insert operations only provide after-change data (or images), because a new row is being added to the source database. Update operations provide both before-change and after-change data that shows how existing row data is modified. Delete operations only provide before-change data to identify the row being deleted. The operation-based formatters model the operation as it is exists in the source trail file. Operation-based formats include fields for the before-change and after-change images.</p>
<p>The row-based formatters model the row data as it exists after the operation data is applied. Row-based formatters contain only a single image of the data. The following sections describe what data is displayed for both the operation-based and the row-based formatters.</p>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-0ADE9CEC-1266-4CAA-BF67-882709AED73D">Operation Formatters</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-9EEFAE06-4CBE-427A-8C61-2B6964A27391">Row Formatters</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-6AE68474-48C6-4C20-81C8-628792C721E5">Table Row or Column Value States</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0" title="Learn how to use the pluggable formatters to convert operations from the Oracle GoldenGate trail file into formatted messages that you can send to Big Data targets using one of the Oracle GoldenGate for Big Data Handlers.">Using the Pluggable Formatters</a></p>
</div>
</div>
</div>
<a id="GADBD481"></a>
<div class="props_rev_3"><a id="GUID-0ADE9CEC-1266-4CAA-BF67-882709AED73D"></a>
<h3 id="GADBD-GUID-0ADE9CEC-1266-4CAA-BF67-882709AED73D" class="sect3"><span class="enumeration_section">17.5.1</span> Operation Formatters</h3>
<div>
<p>The formatters that support operation-based formatting are JSON, Avro Operation, and XML. The output of operation-based formatters are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Insert operation: Before-image data is null. After image data is output.</p>
</li>
<li>
<p>Update operation: Both before-image and after-image data is output.</p>
</li>
<li>
<p>Delete operation: Before-image data is output. After-image data is null.</p>
</li>
<li>
<p>Truncate operation: Both before-image and after-image data is null.</p>
</li>
</ul>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-7683E975-3283-440D-84B1-973BFE2551E7">Using Operation-Based versus Row-Based Formatting</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD482"></a>
<div class="props_rev_3"><a id="GUID-9EEFAE06-4CBE-427A-8C61-2B6964A27391"></a>
<h3 id="GADBD-GUID-9EEFAE06-4CBE-427A-8C61-2B6964A27391" class="sect3"><span class="enumeration_section">17.5.2</span> Row Formatters</h3>
<div>
<p>The formatters that support row-based formatting are Delimited Text and Avro Row. Row-based formatters output the following information for the following operations:</p>
<ul style="list-style-type: disc;">
<li>
<p>Insert operation: After-image data only.</p>
</li>
<li>
<p>Update operation: After-image data only. Primary key updates are a special case which will be discussed in individual sections for the specific formatters.</p>
</li>
<li>
<p>Delete operation: Before-image data only.</p>
</li>
<li>
<p>Truncate operation: The table name is provided, but both before-image and after-image data are null. Truncate table is a DDL operation, and it may not support different database implementations. Refer to the <cite>Oracle GoldenGate</cite> documentation for your database implementation.</p>
</li>
</ul>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-7683E975-3283-440D-84B1-973BFE2551E7">Using Operation-Based versus Row-Based Formatting</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-6AE68474-48C6-4C20-81C8-628792C721E5"></a>
<h3 id="GADBD-GUID-6AE68474-48C6-4C20-81C8-628792C721E5" class="sect3"><span class="enumeration_section">17.5.3</span> Table Row or Column Value States</h3>
<div>
<p>In an RDBMS, table data for a specific row and column can only have one of two states: either the data has a value, or it is null. However; when data is transferred to the Oracle GoldenGate trail file by the Oracle GoldenGate capture process, the data can have three possible states: it can have a value, it can be null, or it can be missing.</p>
<p>For an insert operation, the after-image contains data for all column values regardless of whether the data is null.. However, the data included for update and delete operations may not always contain complete data for all columns. When replicating data to an RDBMS for an update operation only the primary key values and the values of the columns that changed are required to modify the data in the target database. In addition, only the primary key values are required to delete the row from the target database. Therefore, even though values are present in the source database, the values may be missing in the source trail file. Because data in the source trail file may have three states, the Plugable Formatters must also be able to represent data in all three states.</p>
<p>Because the row and column data in the Oracle GoldenGate trail file has an important effect on a Big Data integration, it is important to understand the data that is required. Typically, you can control the data that is included for operations in the Oracle GoldenGate trail file. In an Oracle database, this data is controlled by the supplemental logging level. To understand how to control the row and column values that are included in the Oracle GoldenGate trail file, see the <cite>Oracle GoldenGate</cite> documentation for your source database implementation..</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-7683E975-3283-440D-84B1-973BFE2551E7">Using Operation-Based versus Row-Based Formatting</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD555"></a>
<div class="props_rev_3"><a id="GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D"></a>
<h2 id="GADBD-GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D" class="sect2"><span class="enumeration_section">17.6</span> Using the XML Formatter</h2>
<div>
<div class="section">
<p>The XML Formatter formats before-image and after-image data from the source trail file into an XML document representation of the operation data. The format of the XML document is effectively the same as the XML format in the previous releases of the Oracle GoldenGate Java Adapter.</p>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-F2FF4D61-3683-4AC1-A3B6-837EC9CC5F1F">Message Formatting Details</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-FC5D016C-74D8-430A-A47B-026372C395F9">Sample XML Messages</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-1A3CA163-4EE9-48CA-A8C9-A7CB932F454D">XML Schema</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-B0DC7FC1-332C-4425-B412-9F7D3178CE42">XML Formatter Configuration Properties</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-2538C4A2-8D62-4B09-8EE7-0446714E82E0">Review a Sample Configuration</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-936298A4-A4B6-4081-AD93-386B035BACA8">Metadata Change Events</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-94154CE6-66CD-4B5E-9D04-0C7805860469">Setting Metacolumn Output</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-C86FE871-3F4E-474E-91D7-A9BC83E1323E">Primary Key Updates</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0" title="Learn how to use the pluggable formatters to convert operations from the Oracle GoldenGate trail file into formatted messages that you can send to Big Data targets using one of the Oracle GoldenGate for Big Data Handlers.">Using the Pluggable Formatters</a></p>
</div>
</div>
</div>
<a id="GADBD557"></a><a id="GADBD556"></a>
<div class="props_rev_3"><a id="GUID-F2FF4D61-3683-4AC1-A3B6-837EC9CC5F1F"></a>
<h3 id="GADBD-GUID-F2FF4D61-3683-4AC1-A3B6-837EC9CC5F1F" class="sect3"><span class="enumeration_section">17.6.1</span> Message Formatting Details</h3>
<div>
<div class="section">
<p>The XML formatted messages contain the following information:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-F2FF4D61-3683-4AC1-A3B6-837EC9CC5F1F__GUID-89187670-98F6-4BB7-A854-59B0E489DCB6">
<p class="titleintable">Table 17-15 XML formatting details</p>
<table class="cellalignment78" title="XML formatting details" summary="This two column table lists the XML formatting details">
<thead>
<tr class="cellalignment65">
<th class="cellalignment124" id="d80336e7175">Value</th>
<th class="cellalignment125" id="d80336e7178">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e7183" headers="d80336e7175">
<p><code class="codeph">table</code></p>
</td>
<td class="cellalignment127" headers="d80336e7183 d80336e7178">
<p>The fully qualified table name.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e7191" headers="d80336e7175">
<p><code class="codeph">type</code></p>
</td>
<td class="cellalignment127" headers="d80336e7191 d80336e7178">
<p>The operation type.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e7199" headers="d80336e7175">
<p><code class="codeph">current_ts</code></p>
</td>
<td class="cellalignment127" headers="d80336e7199 d80336e7178">
<p>The current timestamp is the time when the formatter processed the current operation record. This timestamp follows the ISO-8601 format and includes micro second precision. Replaying the trail file does not result in the same timestamp for the same operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e7207" headers="d80336e7175">
<p><code class="codeph">pos</code></p>
</td>
<td class="cellalignment127" headers="d80336e7207 d80336e7178">
<p>The position from the source trail file.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e7215" headers="d80336e7175">
<p><code class="codeph">numCols</code></p>
</td>
<td class="cellalignment127" headers="d80336e7215 d80336e7178">
<p>The total number of columns in the source table.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e7223" headers="d80336e7175">
<p><code class="codeph">col</code></p>
</td>
<td class="cellalignment127" headers="d80336e7223 d80336e7178">
<p>The <code class="codeph">col</code> element is a repeating element that contains the before and after images of operation data.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment126" id="d80336e7234" headers="d80336e7175">
<p><code class="codeph">tokens</code></p>
</td>
<td class="cellalignment127" headers="d80336e7234 d80336e7178">
<p>The <code class="codeph">tokens</code> element contains the token values from the source trail file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD558"></a>
<div class="props_rev_3"><a id="GUID-FC5D016C-74D8-430A-A47B-026372C395F9"></a>
<h3 id="GADBD-GUID-FC5D016C-74D8-430A-A47B-026372C395F9" class="sect3"><span class="enumeration_section">17.6.2</span> Sample XML Messages</h3>
<div>
<div class="section">
<p>The following sections provide sample XML messages.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-62055326-22F2-4937-9375-02A6AFE939AE">Sample Insert Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-5ABD698C-FBC3-4A11-BFE1-E65FA784ECD7">Sample Update Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-83BDF19C-07EB-4A84-B61E-217EA7DA66DC">Sample Delete Message</a><br /></li>
<li class="ulchildlink"><a href="using-pluggable-formatters.htm#GUID-612A00F6-AC94-4C17-939C-243D4849603A">Sample Truncate Message</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a></p>
</div>
</div>
</div>
<a id="GADBD559"></a>
<div class="props_rev_3"><a id="GUID-62055326-22F2-4937-9375-02A6AFE939AE"></a>
<h4 id="GADBD-GUID-62055326-22F2-4937-9375-02A6AFE939AE" class="sect4"><span class="enumeration_section">17.6.2.1</span> Sample Insert Message</h4>
<div>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;operation table='GG.TCUSTORD' type='I' ts='2013-06-02 22:14:36.000000' current_ts='2015-10-06T12:21:50.100001' pos='00000000000000001444' numCols='7'&gt;
 &lt;col name='CUST_CODE' index='0'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[WILL]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_DATE' index='1'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[1994-09-30:15:33:00]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_CODE' index='2'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[CAR]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_ID' index='3'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[144]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_PRICE' index='4'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[17520.00]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_AMOUNT' index='5'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[3]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='TRANSACTION_ID' index='6'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[100]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;tokens&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[R]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[AADPkvAAEAAEqL2AAA]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
 &lt;/tokens&gt;
&lt;/operation&gt;
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-FC5D016C-74D8-430A-A47B-026372C395F9">Sample XML Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD560"></a>
<div class="props_rev_3"><a id="GUID-5ABD698C-FBC3-4A11-BFE1-E65FA784ECD7"></a>
<h4 id="GADBD-GUID-5ABD698C-FBC3-4A11-BFE1-E65FA784ECD7" class="sect4"><span class="enumeration_section">17.6.2.2</span> Sample Update Message</h4>
<div>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;operation table='GG.TCUSTORD' type='U' ts='2013-06-02 22:14:41.000000' current_ts='2015-10-06T12:21:50.413000' pos='00000000000000002891' numCols='7'&gt;
 &lt;col name='CUST_CODE' index='0'&gt;
   &lt;before&gt;&lt;![CDATA[BILL]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[BILL]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_DATE' index='1'&gt;
   &lt;before&gt;&lt;![CDATA[1995-12-31:15:00:00]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[1995-12-31:15:00:00]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_CODE' index='2'&gt;
   &lt;before&gt;&lt;![CDATA[CAR]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[CAR]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_ID' index='3'&gt;
   &lt;before&gt;&lt;![CDATA[765]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[765]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_PRICE' index='4'&gt;
   &lt;before&gt;&lt;![CDATA[15000.00]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[14000.00]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_AMOUNT' index='5'&gt;
   &lt;before&gt;&lt;![CDATA[3]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[3]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='TRANSACTION_ID' index='6'&gt;
   &lt;before&gt;&lt;![CDATA[100]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[100]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;tokens&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[R]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[AADPkvAAEAAEqLzAAA]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
 &lt;/tokens&gt;
&lt;/operation&gt;
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-FC5D016C-74D8-430A-A47B-026372C395F9">Sample XML Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD561"></a>
<div class="props_rev_3"><a id="GUID-83BDF19C-07EB-4A84-B61E-217EA7DA66DC"></a>
<h4 id="GADBD-GUID-83BDF19C-07EB-4A84-B61E-217EA7DA66DC" class="sect4"><span class="enumeration_section">17.6.2.3</span> Sample Delete Message</h4>
<div>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;operation table='GG.TCUSTORD' type='D' ts='2013-06-02 22:14:41.000000' current_ts='2015-10-06T12:21:50.415000' pos='00000000000000004338' numCols='7'&gt;
 &lt;col name='CUST_CODE' index='0'&gt;
   &lt;before&gt;&lt;![CDATA[DAVE]]&gt;&lt;/before&gt;
   &lt;after missing='true'/&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_DATE' index='1'&gt;
   &lt;before&gt;&lt;![CDATA[1993-11-03:07:51:35]]&gt;&lt;/before&gt;
   &lt;after missing='true'/&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_CODE' index='2'&gt;
   &lt;before&gt;&lt;![CDATA[PLANE]]&gt;&lt;/before&gt;
   &lt;after missing='true'/&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_ID' index='3'&gt;
   &lt;before&gt;&lt;![CDATA[600]]&gt;&lt;/before&gt;
   &lt;after missing='true'/&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_PRICE' index='4'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_AMOUNT' index='5'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;col name='TRANSACTION_ID' index='6'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;tokens&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[L]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[206080450]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[6]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[9.0.80330]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[R]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[AADPkvAAEAAEqLzAAC]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
 &lt;/tokens&gt;
&lt;/operation&gt;
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-FC5D016C-74D8-430A-A47B-026372C395F9">Sample XML Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD562"></a>
<div class="props_rev_3"><a id="GUID-612A00F6-AC94-4C17-939C-243D4849603A"></a>
<h4 id="GADBD-GUID-612A00F6-AC94-4C17-939C-243D4849603A" class="sect4"><span class="enumeration_section">17.6.2.4</span> Sample Truncate Message</h4>
<div>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;operation table='GG.TCUSTORD' type='T' ts='2013-06-02 22:14:41.000000' current_ts='2015-10-06T12:21:50.415001' pos='00000000000000004515' numCols='7'&gt;
 &lt;col name='CUST_CODE' index='0'&gt;
   &lt;missing/&gt; 
 &lt;/col&gt;
 &lt;col name='ORDER_DATE' index='1'&gt;
   &lt;missing/&gt; 
 &lt;/col&gt;
 &lt;col name='PRODUCT_CODE' index='2'&gt;
   &lt;missing/&gt; 
 &lt;/col&gt;
 &lt;col name='ORDER_ID' index='3'&gt;
   &lt;missing/&gt; 
 &lt;/col&gt;
 &lt;col name='PRODUCT_PRICE' index='4'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_AMOUNT' index='5'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;col name='TRANSACTION_ID' index='6'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;tokens&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[R]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[AADPkvAAEAAEqL2AAB]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
 &lt;/tokens&gt;
&lt;/operation&gt;
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-FC5D016C-74D8-430A-A47B-026372C395F9">Sample XML Messages</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GADBD563"></a>
<div class="props_rev_3"><a id="GUID-1A3CA163-4EE9-48CA-A8C9-A7CB932F454D"></a>
<h3 id="GADBD-GUID-1A3CA163-4EE9-48CA-A8C9-A7CB932F454D" class="sect3"><span class="enumeration_section">17.6.3</span> XML Schema</h3>
<div>
<div class="section">
<p>The XML Formatter does not generate an XML schema (XSD). The XSD applies to all messages generated by the XML Formatter. The following XSD defines the structure of the XML documents that are generated by the XML Formatter.</p>
<pre dir="ltr">
&lt;xs:schema attributeFormDefault="unqualified" 
elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
   &lt;xs:element name="operation"&gt;
     &lt;xs:complexType&gt;
       &lt;xs:sequence&gt;
          &lt;xs:element name="col" maxOccurs="unbounded" minOccurs="0"&gt;
           &lt;xs:complexType&gt;
             &lt;xs:sequence&gt;
               &lt;xs:element name="before" minOccurs="0"&gt;
                 &lt;xs:complexType&gt;
                   &lt;xs:simpleContent&gt;
                     &lt;xs:extension base="xs:string"&gt;
                       &lt;xs:attribute type="xs:string" name="missing" 
use="optional"/&gt;
                     &lt;/xs:extension&gt;
                   &lt;/xs:simpleContent&gt;
                 &lt;/xs:complexType&gt;
               &lt;/xs:element&gt;
               &lt;xs:element name="after" minOccurs="0"&gt;
                 &lt;xs:complexType&gt;
                   &lt;xs:simpleContent&gt;
                     &lt;xs:extension base="xs:string"&gt;
                       &lt;xs:attribute type="xs:string" name="missing" 
use="optional"/&gt;
                     &lt;/xs:extension&gt;
                   &lt;/xs:simpleContent&gt;
                 &lt;/xs:complexType&gt;
               &lt;/xs:element&gt;
               &lt;xs:element type="xs:string" name="missing" minOccurs="0"/&gt;
             &lt;/xs:sequence&gt;
             &lt;xs:attribute type="xs:string" name="name"/&gt;
             &lt;xs:attribute type="xs:short" name="index"/&gt;
           &lt;/xs:complexType&gt;
         &lt;/xs:element&gt;
         &lt;xs:element name="tokens" minOccurs="0"&gt;
           &lt;xs:complexType&gt;
             &lt;xs:sequence&gt;
               &lt;xs:element name="token" maxOccurs="unbounded" minOccurs="0"&gt;
                 &lt;xs:complexType&gt;
                   &lt;xs:sequence&gt;
                     &lt;xs:element type="xs:string" name="Name"/&gt;
                     &lt;xs:element type="xs:string" name="Value"/&gt;
                   &lt;/xs:sequence&gt;
                 &lt;/xs:complexType&gt;
               &lt;/xs:element&gt;
             &lt;/xs:sequence&gt;
           &lt;/xs:complexType&gt;
         &lt;/xs:element&gt;
       &lt;/xs:sequence&gt;
       &lt;xs:attribute type="xs:string" name="table"/&gt;
       &lt;xs:attribute type="xs:string" name="type"/&gt;
       &lt;xs:attribute type="xs:string" name="ts"/&gt;
       &lt;xs:attribute type="xs:dateTime" name="current_ts"/&gt;
       &lt;xs:attribute type="xs:long" name="pos"/&gt;
       &lt;xs:attribute type="xs:short" name="numCols"/&gt;
     &lt;/xs:complexType&gt;
   &lt;/xs:element&gt;
&lt;/xs:schema&gt;
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD565"></a><a id="GADBD564"></a>
<div class="props_rev_3"><a id="GUID-B0DC7FC1-332C-4425-B412-9F7D3178CE42"></a>
<h3 id="GADBD-GUID-B0DC7FC1-332C-4425-B412-9F7D3178CE42" class="sect3"><span class="enumeration_section">17.6.4</span> XML Formatter Configuration Properties</h3>
<div>
<div class="tblformal" id="GUID-B0DC7FC1-332C-4425-B412-9F7D3178CE42__GUID-7C15176F-9D19-40BA-A184-CAD7F100D83B">
<p class="titleintable">Table 17-16 XML Formatter Configuration Properties</p>
<table class="cellalignment78" title="XML Formatter Configuration Properties" summary="This five column table lists the XML Formatter Configuration Properties.">
<thead>
<tr class="cellalignment65">
<th class="cellalignment72" id="d80336e7476">Properties</th>
<th class="cellalignment79" id="d80336e7479">Optional Y/N</th>
<th class="cellalignment89" id="d80336e7482">Legal Values</th>
<th class="cellalignment88" id="d80336e7485">Default</th>
<th class="cellalignment140" id="d80336e7488">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e7493" headers="d80336e7476">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.insertOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e7493 d80336e7479">
<p>Optional</p>
</td>
<td class="cellalignment93" headers="d80336e7493 d80336e7482">
<p>Any string</p>
</td>
<td class="cellalignment92" headers="d80336e7493 d80336e7485">
<p><code class="codeph">I</code></p>
</td>
<td class="cellalignment141" headers="d80336e7493 d80336e7488">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e7516" headers="d80336e7476">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.updateOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e7516 d80336e7479">
<p>Optional</p>
</td>
<td class="cellalignment93" headers="d80336e7516 d80336e7482">
<p>Any string</p>
</td>
<td class="cellalignment92" headers="d80336e7516 d80336e7485">
<p><code class="codeph">U</code></p>
</td>
<td class="cellalignment141" headers="d80336e7516 d80336e7488">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e7539" headers="d80336e7476">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.deleteOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e7539 d80336e7479">
<p>Optional</p>
</td>
<td class="cellalignment93" headers="d80336e7539 d80336e7482">
<p>Any string</p>
</td>
<td class="cellalignment92" headers="d80336e7539 d80336e7485">
<p><code class="codeph">D</code></p>
</td>
<td class="cellalignment141" headers="d80336e7539 d80336e7488">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e7562" headers="d80336e7476">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.truncateOpKey</code></p>
</td>
<td class="cellalignment83" headers="d80336e7562 d80336e7479">
<p>Optional</p>
</td>
<td class="cellalignment93" headers="d80336e7562 d80336e7482">
<p>Any string</p>
</td>
<td class="cellalignment92" headers="d80336e7562 d80336e7485">
<p><code class="codeph">T</code></p>
</td>
<td class="cellalignment141" headers="d80336e7562 d80336e7488">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e7585" headers="d80336e7476">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.encoding</code></p>
</td>
<td class="cellalignment83" headers="d80336e7585 d80336e7479">
<p>Optional</p>
</td>
<td class="cellalignment93" headers="d80336e7585 d80336e7482">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment92" headers="d80336e7585 d80336e7485">
<p>UTF-8 (the XML default)</p>
</td>
<td class="cellalignment141" headers="d80336e7585 d80336e7488">
<p>The output encoding of generated XML documents.</p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e7607" headers="d80336e7476">
<p><code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name.</code></span><code class="codeph">format.includeProlog</code></p>
</td>
<td class="cellalignment83" headers="d80336e7607 d80336e7479">
<p>Optional</p>
</td>
<td class="cellalignment93" headers="d80336e7607 d80336e7482">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment92" headers="d80336e7607 d80336e7485">
<p><code class="codeph">false</code></p>
</td>
<td class="cellalignment141" headers="d80336e7607 d80336e7488">
<p>Determines whether an XML prolog is included in generated XML documents. An XML prolog is optional for well-formed XML. An XML prolog resembles the following:<code class="codeph">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</code></p>
</td>
</tr>
<tr class="cellalignment65">
<td class="cellalignment73" id="d80336e7636" headers="d80336e7476">
<p><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment83" headers="d80336e7636 d80336e7479">
<p>Optional</p>
</td>
<td class="cellalignment93" headers="d80336e7636 d80336e7482">
<p><code class="codeph">true</code> | <code class="codeph">false</code></p>
</td>
<td class="cellalignment92" headers="d80336e7636 d80336e7485">
<p><code class="codeph">true</code></p>
</td>
<td class="cellalignment141" headers="d80336e7636 d80336e7488">
<p>Controls the format of the current timestamp in the XML message. The default adds a <code class="codeph">T</code> between the date and time. Set to <code class="codeph">false</code> to suppress the <code class="codeph">T</code> between the date and time and instead include blank space.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD566"></a>
<div class="props_rev_3"><a id="GUID-2538C4A2-8D62-4B09-8EE7-0446714E82E0"></a>
<h3 id="GADBD-GUID-2538C4A2-8D62-4B09-8EE7-0446714E82E0" class="sect3"><span class="enumeration_section">17.6.5</span> Review a Sample Configuration</h3>
<div>
<div class="section">
<p>The following is a sample configuration for the XML Formatter in the Java Adapter properties file:</p>
<pre dir="ltr">
gg.handler.hdfs.format=xml
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.encoding=ISO-8859-1
gg.handler.hdfs.format.includeProlog=false
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD567"></a>
<div class="props_rev_3"><a id="GUID-936298A4-A4B6-4081-AD93-386B035BACA8"></a>
<h3 id="GADBD-GUID-936298A4-A4B6-4081-AD93-386B035BACA8" class="sect3"><span class="enumeration_section">17.6.6</span> Metadata Change Events</h3>
<div>
<div class="section">
<p>The XML Formatter seamlessly handles metadata change events. A metadata change event does not result in a change to the XML schema. The XML schema is designed to be generic so that the same schema represents the data of any operation from any table.</p>
<p>If the replicated database and upstream Oracle GoldenGate replication process can propagate metadata change events, the XML Formatter can take action when metadata changes. Changes in the metadata are reflected in messages after the change. For example, when a column is added, the new column data appears in XML messages for the table.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469"></a>
<h3 id="GADBD-GUID-94154CE6-66CD-4B5E-9D04-0C7805860469" class="sect3"><span class="enumeration_section">17.6.7</span> Setting Metacolumn Output</h3>
<div>
<div class="section">
<p>The following are the configurable values for the XML metacolumns template property that controls metacolumn output.</p>
<div class="tblformal" id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__GUID-539895D0-C9D5-4EB1-997B-B595B3AC6B6B">
<p class="titleintable">Table 17-17 Metacolumns Template Property</p>
<table class="cellalignment78" title="Metacolumns Template Property" summary="Five column table describing the Metacolumns Template Property">
<thead>
<tr class="cellalignment65">
<th class="cellalignment77" id="d80336e7770">Properties</th>
<th class="cellalignment77" id="d80336e7773">Required/ Optional</th>
<th class="cellalignment77" id="d80336e7776">Legal Values</th>
<th class="cellalignment77" id="d80336e7779">Default</th>
<th class="cellalignment77" id="d80336e7782">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment65">
<td class="cellalignment65" id="d80336e7787" headers="d80336e7770"><code class="codeph">gg.handler.<span class="codeinlineitalic">name</span>.format.metaColumnsTemplate</code></td>
<td class="cellalignment65" headers="d80336e7787 d80336e7773">
<p>Optional</p>
</td>
<td class="cellalignment65" headers="d80336e7787 d80336e7776">
<p><code class="codeph">${alltokens} | ${token} | ${env} | ${sys} | ${javaprop} | ${optype} | ${position} | ${timestamp} | ${catalog} | ${schema} | ${table} | ${objectname} | ${csn} | ${xid} | ${currenttimestamp} | ${opseqno} | ${timestampmicro} | ${currenttimestampmicro}</code></p>
</td>
<td class="cellalignment65" headers="d80336e7787 d80336e7779">
<p>None</p>
</td>
<td class="cellalignment65" headers="d80336e7787 d80336e7782">
<p>The current meta column information can be configured in a simple manner and removes the explicit need to use:</p>
<pre dir="ltr">
insertOpKey | updateOpKey | deleteOpKey | truncateOpKey | includeTableName | includeOpTimestamp | includeOpType | includePosition | includeCurrentTimestamp, useIso8601Format
</pre>
<p>It is a comma-delimited string consisting of one or more templated values that represent the template.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><span class="bold">Explanation of the Metacolumn Keywords</span></p>
<dl>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e81"><!-- --></a><code class="codeph">${alltokens}</code></dt>
<dd>
<p>All of the <span>Oracle GoldenGate</span> tokens.</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e91"><!-- --></a><code class="codeph">${token}</code></dt>
<dd>
<p>The value of a specific <span>Oracle GoldenGate</span> token. The token key should follow token key should follow the token using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${token.<span class="italic">MYTOKEN</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e109"><!-- --></a><code class="codeph">${sys}</code></dt>
<dd>
<p>A system environmental variable. The variable name should follow <code class="codeph">sys</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${sys.<span class="italic">MYVAR</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e127"><!-- --></a><code class="codeph">${env}</code></dt>
<dd>
<p>An <span>Oracle GoldenGate</span> environment variable. The variable name should follow <code class="codeph">env</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${env.<span class="italic">someVariable</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e148"><!-- --></a><code class="codeph">${javaprop}</code></dt>
<dd>
<p>A Java JVM variable. The variable name should follow <code class="codeph">javaprop</code> using the period (<code class="codeph">.</code>) operator. For example:</p>
<pre dir="ltr">
${javaprop.<span class="italic">MYVAR</span>}
</pre></dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e166"><!-- --></a><code class="codeph">${optype}</code></dt>
<dd>
<p>Operation Type</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e173"><!-- --></a><code class="codeph">${position}</code></dt>
<dd>
<p>Record Position</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e180"><!-- --></a><code class="codeph">${timestamp}</code></dt>
<dd>
<p>Record Timestamp</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e187"><!-- --></a><code class="codeph">${catalog}</code></dt>
<dd>
<p>Catalog Name</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e194"><!-- --></a><code class="codeph">${schema}</code></dt>
<dd>
<p>Schema Name</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e201"><!-- --></a><code class="codeph">${table}</code></dt>
<dd>
<p>Table Name</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e209"><!-- --></a><code class="codeph">${objectname}</code></dt>
<dd>
<p>The fully qualified table name.</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e216"><!-- --></a><code class="codeph">${csn}</code></dt>
<dd>
<p>Source Commit Sequence Number</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e223"><!-- --></a><code class="codeph">${xid}</code></dt>
<dd>
<p>Source Transaction ID</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e230"><!-- --></a><code class="codeph">${currenttimestamp}</code></dt>
<dd>
<p>Current Timestamp</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e237"><!-- --></a><code class="codeph">${opseqno}</code></dt>
<dd>
<p>Record sequence number within the transaction.</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e244"><!-- --></a><code class="codeph">${timestampmicro}</code></dt>
<dd>
<p>Record timestamp (in microseconds after epoch).</p>
</dd>
<dt class="dlterm"><a id="GUID-94154CE6-66CD-4B5E-9D04-0C7805860469__d20e251"><!-- --></a><code class="codeph">${currenttimestampmicro}</code></dt>
<dd>
<p>Current timestamp (in microseconds after epoch).</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a></p>
</div>
</div>
</div>
</div>
<a id="GADBD568"></a>
<div class="props_rev_3"><a id="GUID-C86FE871-3F4E-474E-91D7-A9BC83E1323E"></a>
<h3 id="GADBD-GUID-C86FE871-3F4E-474E-91D7-A9BC83E1323E" class="sect3"><span class="enumeration_section">17.6.8</span> Primary Key Updates</h3>
<div>
<div class="section">
<p>Updates to a primary key require no special handling by the XML formatter. The XML formatter creates messages that model database operations. For update operations, this includes before and after images of column values. Primary key changes are represented in this format as a change to a column value just like a change to any other column value.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-pluggable-formatters.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">Using the XML Formatter</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment64">
<tr>
<td class="cellalignment74">
<table class="cellalignment69">
<tr>
<td class="cellalignment68"><a href="using-oracle-nosql-handler.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment68"><a href="cass-cdc-using-oracle-goldengate-capture-cassandra.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2015, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment76">
<table class="cellalignment67">
<tr>
<td class="cellalignment68"><a href="http://docs.oracle.com/goldengate/bd123210/gg-bd/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment68"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment68"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
