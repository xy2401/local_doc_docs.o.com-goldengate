<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Configuring Message Capture</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This chapter explains how to configure the VAM Extract to capture JMS messages." />
<meta name="keywords" content="Extract, adding the VAM Extract, JMS messages, retrieving" />
<meta name="dcterms.created" content="2018-05-15T11:31:53Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Administering Oracle GoldenGate for Big Data" />
<meta name="dcterms.identifier" content="E89846-01" />
<meta name="dcterms.isVersionOf" content="GBDIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2015, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/bd123210/gg-bd/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="capturing-jms-messages.htm" title="Previous" type="text/html" />
<link rel="Next" href="parsing-message.htm" title="Next" type="text/html" />
<link rel="alternate" href="GBDIN.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-CCA5DFA8-BFD0-4E2F-9593-C32C2A73DC35"></a> <span id="PAGE" style="display:none;">9/21</span> <!-- End Header -->
<a id="GBDIN539"></a><a id="GBDIN129"></a>
<h1 id="GBDIN-GUID-CCA5DFA8-BFD0-4E2F-9593-C32C2A73DC35" class="sect1"><span class="enumeration_chapter">4</span> Configuring Message Capture</h1>
<div>
<div><span>This chapter explains how to configure the VAM Extract to capture JMS messages.</span></div>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="configuring-message-capture.htm#GUID-648271F8-922F-4B14-8629-D80DDA817A54">Configuring the VAM Extract</a><br /></li>
<li class="ulchildlink"><a href="configuring-message-capture.htm#GUID-155C27E4-70E1-4472-9FD5-81013E98FC5E">Connecting and Retrieving the Messages</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="capturing-jms-messages.htm">Capturing JMS Messages</a></p>
</div>
</div>
</div>
<a id="GBDIN130"></a>
<div class="props_rev_3"><a id="GUID-648271F8-922F-4B14-8629-D80DDA817A54"></a>
<h2 id="GBDIN-GUID-648271F8-922F-4B14-8629-D80DDA817A54" class="sect2"><span class="enumeration_section">4.1</span> Configuring the VAM Extract</h2>
<div>
<div class="section">
<p>JMS Capture only works with the Oracle GoldenGate Extract process. To run the Java message capture application you need the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle GoldenGate for Java Adapter</p>
</li>
<li>
<p>Extract process</p>
</li>
<li>
<p>Extract parameter file configured for message capture</p>
</li>
<li>
<p>Description of the incoming data format, such as a source definitions file.</p>
</li>
<li>
<p>Java 8 installed on the host machine</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="configuring-message-capture.htm#GUID-8A7CF7DE-1CF2-4BCA-8EF7-6E0A428D6B15">Adding the Extract</a><br /></li>
<li class="ulchildlink"><a href="configuring-message-capture.htm#GUID-5A0B8D0F-A802-417E-B1E7-C303F8C60EBC">Configuring the Extract Parameters</a><br /></li>
<li class="ulchildlink"><a href="configuring-message-capture.htm#GUID-F0B824CD-75B6-4FCA-8E1B-688539AA0FBB">Configuring Message Capture</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-message-capture.htm#GUID-CCA5DFA8-BFD0-4E2F-9593-C32C2A73DC35" title="This chapter explains how to configure the VAM Extract to capture JMS messages.">Configuring Message Capture</a></p>
</div>
</div>
</div>
<a id="GBDIN131"></a>
<div class="props_rev_3"><a id="GUID-8A7CF7DE-1CF2-4BCA-8EF7-6E0A428D6B15"></a>
<h3 id="GBDIN-GUID-8A7CF7DE-1CF2-4BCA-8EF7-6E0A428D6B15" class="sect3"><span class="enumeration_section">4.1.1</span> Adding the Extract</h3>
<div>
<div class="section">
<p>To add the message capture VAM to the Oracle GoldenGate installation, add an Extract and the trail that it will create using GGSCI commands:</p>
<pre dir="ltr">
ADD EXTRACT jmsvam, VAM
ADD EXTTRAIL dirdat/id, EXTRACT jmsvam, MEGABYTES 100
</pre>
<p>The process name (<code class="codeph">jmsvam</code>) can be replaced with any process name that is no more than 8 characters. The trail identifier (<code class="codeph">id</code>) can be any two characters.</p>
<div class="infobox-note" id="GUID-8A7CF7DE-1CF2-4BCA-8EF7-6E0A428D6B15__GUID-D0BE1C60-91E0-4746-80CC-80160F38E8C2">
<p class="notep1">Note:</p>
<p>Commands to position the Extract, such as <code class="codeph">BEGIN</code> or <code class="codeph">EXTRBA</code>, are not supported for message capture. The Extract will always resume by reading messages from the end of the message queue.</p>
</div>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-message-capture.htm#GUID-648271F8-922F-4B14-8629-D80DDA817A54">Configuring the VAM Extract</a></p>
</div>
</div>
</div>
</div>
<a id="GBDIN132"></a>
<div class="props_rev_3"><a id="GUID-5A0B8D0F-A802-417E-B1E7-C303F8C60EBC"></a>
<h3 id="GBDIN-GUID-5A0B8D0F-A802-417E-B1E7-C303F8C60EBC" class="sect3"><span class="enumeration_section">4.1.2</span> Configuring the Extract Parameters</h3>
<div>
<div class="section">
<p>The <a id="d4304e181" class="indexterm-anchor"></a>Extract <a id="d4304e186" class="indexterm-anchor"></a>parameter file contains the parameters needed to define and invoke the VAM. Sample Extract parameters for communicating with the VAM are shown in the table.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-5A0B8D0F-A802-417E-B1E7-C303F8C60EBC__GUID-BCF5B925-3BFF-4720-A79E-34FF938498BD">
<table class="cellalignment13" summary="This two-column table lists and describes the sample extract parameters for communicating with the VAM.">
<thead>
<tr class="cellalignment2">
<th class="cellalignment14" id="d4304e199">Parameter</th>
<th class="cellalignment15" id="d4304e202">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2">
<td class="cellalignment16" id="d4304e207" headers="d4304e199">
<pre dir="ltr">
EXTRACT jmsvam
</pre></td>
<td class="cellalignment17" headers="d4304e207 d4304e202">
<p>The name of the Extract process.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment16" id="d4304e214" headers="d4304e199">
<pre dir="ltr">
<a id="d4304e216" class="indexterm-anchor"></a>VAM ggjava_vam.dll,
PARAMS dirprm/jmsvam.properties
</pre></td>
<td class="cellalignment17" headers="d4304e214 d4304e202">
<p>Specifies the name of the VAM library and the location of the properties file. The VAM properties should be in the <code class="codeph">dirprm</code> directory of the Oracle GoldenGate installation location.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment16" id="d4304e226" headers="d4304e199">
<pre dir="ltr">
<a id="d4304e228" class="indexterm-anchor"></a>TRANLOGOPTIONS VAMCOMPATIBILITY 1
</pre></td>
<td class="cellalignment17" headers="d4304e226 d4304e202">
<p>Specifies the original (1) implementation of the VAM is to be used.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment16" id="d4304e237" headers="d4304e199">
<pre dir="ltr">
<a id="d4304e239" class="indexterm-anchor"></a>TRANLOGOPTIONS GETMETADATAFROMVAM
</pre></td>
<td class="cellalignment17" headers="d4304e237 d4304e202">
<p>Specifies that metadata will be sent by the VAM.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment16" id="d4304e248" headers="d4304e199">
<pre dir="ltr">
EXTTRAIL dirdat/id
</pre></td>
<td class="cellalignment17" headers="d4304e248 d4304e202">
<p>Specifies the identifier of the target trail Extract creates.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-message-capture.htm#GUID-648271F8-922F-4B14-8629-D80DDA817A54">Configuring the VAM Extract</a></p>
</div>
</div>
</div>
</div>
<a id="GBDIN133"></a>
<div class="props_rev_3"><a id="GUID-F0B824CD-75B6-4FCA-8E1B-688539AA0FBB"></a>
<h3 id="GBDIN-GUID-F0B824CD-75B6-4FCA-8E1B-688539AA0FBB" class="sect3"><span class="enumeration_section">4.1.3</span> Configuring Message Capture</h3>
<div>
<div class="section">
<p>Message capture is configured by the properties in the VAM properties file (Adapter Properties file. This file is identified by the <code class="codeph">PARAMS</code> option of the Extract <code class="codeph">VAM</code> parameter and used to determine logging characteristics, parser mappings and JMS connection settings.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-message-capture.htm#GUID-648271F8-922F-4B14-8629-D80DDA817A54">Configuring the VAM Extract</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GBDIN134"></a>
<div class="props_rev_3"><a id="GUID-155C27E4-70E1-4472-9FD5-81013E98FC5E"></a>
<h2 id="GBDIN-GUID-155C27E4-70E1-4472-9FD5-81013E98FC5E" class="sect2"><span class="enumeration_section">4.2</span> Connecting and Retrieving the Messages</h2>
<div>
<div class="section">
<p>To process JMS messages you must configure the connection to the JMS interface, retrieve and parse the messages in a transaction, write each message to a trail, commit the transaction, and remove its messages from the queue.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="configuring-message-capture.htm#GUID-2E1784AE-632B-4A27-970B-77A809FE1A6D">Connecting to JMS</a><br /></li>
<li class="ulchildlink"><a href="configuring-message-capture.htm#GUID-5CC1AD24-E061-4EE5-95BC-D71EA2BC7240">Retrieving Messages</a><br /></li>
<li class="ulchildlink"><a href="configuring-message-capture.htm#GUID-79C83D13-F584-4ED0-ABFE-7A9B8BF20772">Completing the Transaction</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-message-capture.htm#GUID-CCA5DFA8-BFD0-4E2F-9593-C32C2A73DC35" title="This chapter explains how to configure the VAM Extract to capture JMS messages.">Configuring Message Capture</a></p>
</div>
</div>
</div>
<a id="GBDIN135"></a>
<div class="props_rev_3"><a id="GUID-2E1784AE-632B-4A27-970B-77A809FE1A6D"></a>
<h3 id="GBDIN-GUID-2E1784AE-632B-4A27-970B-77A809FE1A6D" class="sect3"><span class="enumeration_section">4.2.1</span> Connecting to JMS</h3>
<div>
<div class="section">
<p>Connectivity to <a id="d4304e366" class="indexterm-anchor"></a>JMS is through a generic JMS interface. Properties can be set to configure the following characteristics of the connection:</p>
<ul style="list-style-type: disc;">
<li>
<p>Java classpath for the JMS client</p>
</li>
<li>
<p>Name of the JMS queue or topic source destination</p>
</li>
<li>
<p>Java Naming and Directory Interface (<a id="d4304e381" class="indexterm-anchor"></a>JNDI) connection properties</p>
<ul style="list-style-type: disc;">
<li>
<p>Connection properties for Initial Context</p>
</li>
<li>
<p>Connection factory name</p>
</li>
<li>
<p>Destination name</p>
</li>
</ul>
</li>
<li>
<p>Security information</p>
<ul style="list-style-type: disc;">
<li>
<p>JNDI authentication credentials</p>
</li>
<li>
<p>JMS user name and password</p>
</li>
</ul>
</li>
</ul>
<p>The Extract process that is configured to work with the VAM (such as the <code class="codeph">jmsvam</code> in the example) will connect to the message system. when it starts up.</p>
<div class="infobox-note" id="GUID-2E1784AE-632B-4A27-970B-77A809FE1A6D__GUID-A8594755-A2FB-4481-B135-89EA5D6C4986">
<p class="notep1">Note:</p>
<p>The Extract may be included in the Manger's <code class="codeph">AUTORESTART</code> list so it will automatically be restarted if there are connection problems during processing.</p>
</div>
<p>Currently the Oracle GoldenGate for Java message capture adapter supports only JMS text messages.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-message-capture.htm#GUID-155C27E4-70E1-4472-9FD5-81013E98FC5E">Connecting and Retrieving the Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GBDIN136"></a>
<div class="props_rev_3"><a id="GUID-5CC1AD24-E061-4EE5-95BC-D71EA2BC7240"></a>
<h3 id="GBDIN-GUID-5CC1AD24-E061-4EE5-95BC-D71EA2BC7240" class="sect3"><span class="enumeration_section">4.2.2</span> Retrieving Messages</h3>
<div>
<div class="section">
<p>The connection processing performs the following steps when asked for the next message:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Start a local JMS transaction if one is not already started.</p>
</li>
<li>
<p>Read a message from the message queue.</p>
</li>
<li>
<p>If the read fails because no message exists, return an end-of-file message.</p>
</li>
<li>
<p>Otherwise return the contents of the message.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-message-capture.htm#GUID-155C27E4-70E1-4472-9FD5-81013E98FC5E">Connecting and Retrieving the Messages</a></p>
</div>
</div>
</div>
</div>
<a id="GBDIN137"></a>
<div class="props_rev_3"><a id="GUID-79C83D13-F584-4ED0-ABFE-7A9B8BF20772"></a>
<h3 id="GBDIN-GUID-79C83D13-F584-4ED0-ABFE-7A9B8BF20772" class="sect3"><span class="enumeration_section">4.2.3</span> Completing the Transaction</h3>
<div>
<div class="section">
<p>Once all of the messages that make up a transaction have been successfully retrieved, parsed, and written to the Oracle GoldenGate trail, the local JMS transaction is committed and the messages removed from the queue or topic. If there is an error the local transaction is rolled back leaving the messages in the JMS queue.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-message-capture.htm#GUID-155C27E4-70E1-4472-9FD5-81013E98FC5E">Connecting and Retrieving the Messages</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1">
<tr>
<td class="cellalignment8">
<table class="cellalignment6">
<tr>
<td class="cellalignment5"><a href="capturing-jms-messages.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5"><a href="parsing-message.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2015, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment10">
<table class="cellalignment4">
<tr>
<td class="cellalignment5"><a href="http://docs.oracle.com/goldengate/bd123210/gg-bd/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
