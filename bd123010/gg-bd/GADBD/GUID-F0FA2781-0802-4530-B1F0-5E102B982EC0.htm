<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Using the Pluggable Formatters</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="dcterms.created" content="2016-12-07T16:58:45Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Integrating Oracle GoldenGate for Big Data" />
<meta name="dcterms.identifier" content="E79598-01" />
<meta name="dcterms.isVersionOf" content="GADBD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2015, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-084CCCD6-8D13-43C0-A6C4-4D2AC8B8FA86.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-F90702A9-0FFB-42D2-9261-89E2BB952C65.htm" title="Next" type="text/html" />
<link rel="alternate" href="GADBD.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="GADBD.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="GADBD.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0"></a> <span id="PAGE" style="display:none;">12/19</span> <!-- End Header -->
<a id="GADBD479"></a>
<h1 id="GADBD-GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0" class="sect1"><span class="enumeration_chapter">9</span> Using the Pluggable Formatters</h1>
<div>
<p>Formatters provide the functionality to convert operations from the Oracle GoldenGate trail file info formatted messages that can then be sent to Big Data targets by one of the Oracle GoldenGate for Big Data Handlers.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-7683E975-3283-440D-84B1-973BFE2551E7">Operation vs. Row Based Formatting</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C">Delimited Text Formatter</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-5B255190-419E-417C-B09D-4169E09B418E">JSON Formatter</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2">Avro Formatter</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D">XML Formatter</a></strong><br /></li>
</ul>
</div>
<a id="GADBD480"></a>
<div class="props_rev_3"><a id="GUID-7683E975-3283-440D-84B1-973BFE2551E7"></a>
<h2 id="GADBD-GUID-7683E975-3283-440D-84B1-973BFE2551E7" class="sect2"><span class="enumeration_section">9.1</span> Operation vs. Row Based Formatting</h2>
<div>
<div class="section">
<p>The Oracle GoldenGate for Big Data formatters are operations-based and row-based formatters.</p>
<p>Operation-based represent the individual insert, update, and delete events that occur on table data in the source database. Insert operations only provide after change data (or images) since a new row is being added to the source database. Update operations provide both before and after change data that shows how existing row data is modified. Delete operations only provide before change data to provide identification of the row being deleted. The operation-based formatters model the operation as it is exists in the source trail file. Operation-based formats include fields for the before and after images.</p>
<p>The row-based formatters model the row data as it exists after the operation data is applied. Row based formatters only contain a single image of the data. The following sections describe what data is displayed for both the operation-based and row based formatters.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-0ADE9CEC-1266-4CAA-BF67-882709AED73D">Operation Formatters</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-9EEFAE06-4CBE-427A-8C61-2B6964A27391">Row Formatters</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-6AE68474-48C6-4C20-81C8-628792C721E5">Table Row or Column Value States</a></strong><br /></li>
</ul>
</div>
<a id="GADBD481"></a>
<div class="props_rev_3"><a id="GUID-0ADE9CEC-1266-4CAA-BF67-882709AED73D"></a>
<h3 id="GADBD-GUID-0ADE9CEC-1266-4CAA-BF67-882709AED73D" class="sect3"><span class="enumeration_section">9.1.1</span> Operation Formatters</h3>
<div>
<p>The formatters that support operation-based formatting are JSON, Avro Operation, and XML. The output of operation-based formatters are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Insert operation - Before image data is NULL. After image data is output.</p>
</li>
<li>
<p>Update operation - Both before and after image data is output.</p>
</li>
<li>
<p>Delete operation - Before image data is output. After image data is NULL.</p>
</li>
<li>
<p>Truncate operation - Both before and after image data is NULL.</p>
</li>
</ul>
</div>
</div>
<a id="GADBD482"></a>
<div class="props_rev_3"><a id="GUID-9EEFAE06-4CBE-427A-8C61-2B6964A27391"></a>
<h3 id="GADBD-GUID-9EEFAE06-4CBE-427A-8C61-2B6964A27391" class="sect3"><span class="enumeration_section">9.1.2</span> Row Formatters</h3>
<div>
<p>The formatters that support row-based formatting area Delimited Text and Avro Row. Row-based formatters output the following information for the following operations.</p>
<ul style="list-style-type: disc;">
<li>
<p>Insert operation - After image data only.</p>
</li>
<li>
<p>Update operation - After image data only. Primary key updates are a special case which will be discussed in individual sections for the specific formatters.</p>
</li>
<li>
<p>Delete operation - Before image data only.</p>
</li>
<li>
<p>Truncate operation - Table name is provided but both before and after image data are NULL. Truncate table is a DDL operation and it may not support different database implementations. Refer to the Oracle GoldenGate documentation for your database implementation.</p>
</li>
</ul>
</div>
</div>
<div class="props_rev_3"><a id="GUID-6AE68474-48C6-4C20-81C8-628792C721E5"></a>
<h3 id="GADBD-GUID-6AE68474-48C6-4C20-81C8-628792C721E5" class="sect3"><span class="enumeration_section">9.1.3</span> Table Row or Column Value States</h3>
<div>
<ul style="list-style-type: disc;">
<li>
<p>In an RDBMS, table data for a specific row and column can only have one of two states. Either the table row/column value has a value or the row/column value is NULL. However; when data is transferred to the Oracle GoldenGate trail file by the Oracle GoldenGate capture process, this can expand to three possible states: the table row/column has a value, the row/column value is NULL, or the row/column value is missing.</p>
</li>
<li>
<p>For an insert operation, the after image contains data for all column values whether that column has a value or is NULL. However, the data included for update and delete operations may not always contain complete data for all columns. When replicating data to an RDBMS for an update operation the only data that is required to modify the data in the target database are the primary key values and the values of the columns that changed. In addition, for a delete operation it is only necessary to have the primary key values to delete the row from the target database. Therefore, even though table row/column values have a value in the source database, the values may be missing in the source trail file. Because it is possible for row/column data in the source trail file to have three states, the Plugable Formatters must also be able to represent data in the three states.</p>
</li>
<li>
<p>What row/column data is available in the Oracle GoldenGate trail file will have an impact on Big Data integrations. It is important for you to understand what data is required. You typically have control on the data that is included for operations in the Oracle GoldenGate trail file. For Oracle Databases, this is controlled by the supplemental logging level. Refer to the Oracle GoldenGate documentation for your specific source database implementation to understand how to control the row and olumn values that are included in the Oracle GoldenGate trail file.</p>
</li>
</ul>
</div>
</div>
</div>
<a id="GADBD483"></a>
<div class="props_rev_3"><a id="GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C"></a>
<h2 id="GADBD-GUID-D7986B13-1D90-45FB-A5F8-4CF69EA2EE6C" class="sect2"><span class="enumeration_section">9.2</span> Delimited Text Formatter</h2>
<div>
<div class="section">
<p>The Delimited Text Formatter is a row-based formatter. It formats database operations from the source trail file into a delimited text output. Each insert, update, delete, or truncate operation from the source trail will be formatted into an individual delimited message. Delimited text output is a fixed number of fields for each table separated by a field delimiter and terminated by a line delimiter. The fields are positionally relevant. Many Big Data analytical tools including Hive work well with HDFS files containing delimited text.</p>
<p>Column values for an operation from the source trail file can have one of three states: column has a value, column value is NULL, or column value is missing. By default the delimited text maps these column value states into the delimited text output as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Column has a value - The column value is output.</p>
</li>
<li>
<p>Column value is NULL - The default output value is <code>NULL</code>. The output for the case of a NULL column value is configurable.</p>
</li>
<li>
<p>Column value is missing - The default output value is "". The output for the case of a missing column value is configurable.</p>
</li>
</ul>
<p>This section contains the following topics:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-7C03E28E-E9C6-4E90-BC7E-98D1414B0FD1">Message Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-D40692C8-F135-473D-9DD1-F6E979BA4272">Sample Formatted Messages</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-863982E2-DCEC-42FB-A94F-76B63D8D071F">Additional Considerations</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-17311D59-40BF-4E62-B4C4-95148EEA26B2">Output Format Summary Log</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-ECCEB29A-9A84-4B0E-B924-D6B08216FC28">Delimited Text Format Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-9E69A0E7-70DF-4466-B7A5-AC71EB8F40A4">Sample Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-30A01FF3-B2AB-411D-A885-F56799047F8C">Metadata Change Events</a></strong><br /></li>
</ul>
</div>
<a id="GADBD484"></a>
<div class="props_rev_3"><a id="GUID-7C03E28E-E9C6-4E90-BC7E-98D1414B0FD1"></a>
<h3 id="GADBD-GUID-7C03E28E-E9C6-4E90-BC7E-98D1414B0FD1" class="sect3"><span class="enumeration_section">9.2.1</span> Message Formatting Details</h3>
<div>
<div class="section">
<p>The default format for output of data is the following, which is delimited by a semi-colon:</p>
<p>First is the row metadata:</p>
<pre dir="ltr">
<span class="italic">operation_type;fully_qualified_table_name;operation_timestamp;current_timestamp;trail_position;tokens;</span>
</pre>
<p>Next is the row data:</p>
<pre dir="ltr">
<span class="italic">column_</span>1<span class="italic">_value;column_n_value_then_line_delimeter</span>
</pre>
<p>Optionally, the column name can be included before each column value that changes the output format for the row data:</p>
<pre dir="ltr">
<span class="italic">column_</span>1<span class="italic">_name</span>;<span class="italic">column_</span>1<span class="italic">_value;column_n_name;column_n_value_then_line_delimeter</span>
</pre>
<p><span class="bold">Operation Type</span> - Operation type is the indicator of the type of database operation from the source trail file. Default values are <code>I</code> for insert, <code>U</code> for update, <code>D</code> for delete, <code>T</code> for truncate. Output of this field is suppressible.</p>
<p><span class="bold">Fully Qualified Table name</span> - The fully qualified table name is the source database table include including the catalog name and schema name. The format of the fully qualified table name is <span class="italic"><code>catalog_name.schema_name.table_name</code></span>. Output of this field is suppressible.</p>
<p><span class="bold">Operation Timestamp</span> - The operation timestamp is the commit record timestamp from the source system. All operations in a transaction (unbatched transaction) should have the same operation timestamp. This timestamp is fixed and the operation timestamp will be the same if the trail file is replayed. Output of this field is suppressible.</p>
<p><span class="bold">Current Timestamp</span> - The current timestamp is a timestamp of the current time when delimited text formatter processes the current operation record. This timestamp follows the ISO-8601 format and includes microsecond precision. Replaying the trail file will <span class="italic">not</span> result in the same timestamp for the same operation. Output of this field is suppressible.</p>
<p><span class="bold">Trail Position</span> - This is the concatenated sequence number and RBA number from the source trail file. The trail position provides traceability of the operation back to the source trail file. The sequence number is the source trail file number. The RBA number is the offset in the trail file. Output of this field is suppressible.</p>
<p><span class="bold">Tokens</span> - The tokens are the token key value pairs from the source trail file. The output of this field in the delimited text output is suppressed if the <code>includeTokens</code> configuration property on the corresponding handler is <span class="italic">not</span> explicitly set to <code>true</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD485"></a>
<div class="props_rev_3"><a id="GUID-D40692C8-F135-473D-9DD1-F6E979BA4272"></a>
<h3 id="GADBD-GUID-D40692C8-F135-473D-9DD1-F6E979BA4272" class="sect3"><span class="enumeration_section">9.2.2</span> Sample Formatted Messages</h3>
<div>
<div class="section">
<p>The following sections contain sample messages from the Delimited Text Formatter. The default field delimiter has been changed to a pipe character, <code>|</code>, to more clearly display the message.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-AD8754E0-631B-41AF-9C14-A9E2E47942DE">Sample Insert Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-0A2B43C3-5214-4EF6-BEA8-ED808FA6400D">Sample Update Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-A9C3FDD2-60CF-4E9F-B763-0D179F164BE6">Sample Delete Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-12535E15-FB93-4B88-BA99-2F347CDD792F">Sample Truncate Message</a></strong><br /></li>
</ul>
</div>
<a id="GADBD486"></a>
<div class="props_rev_3"><a id="GUID-AD8754E0-631B-41AF-9C14-A9E2E47942DE"></a>
<h4 id="GADBD-GUID-AD8754E0-631B-41AF-9C14-A9E2E47942DE" class="sect4"><span class="enumeration_section">9.2.2.1</span> Sample Insert Message</h4>
<div>
<div class="section">
<pre dir="ltr">
I|GG.TCUSTORD|2013-06-02
22:14:36.000000|2015-09-18T13:23:01.612001|00000000000000001444|R=AADPkvAAEAAEqL2A
AA|WILL|1994-09-30:15:33:00|CAR|144|17520.00|3|100
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD487"></a>
<div class="props_rev_3"><a id="GUID-0A2B43C3-5214-4EF6-BEA8-ED808FA6400D"></a>
<h4 id="GADBD-GUID-0A2B43C3-5214-4EF6-BEA8-ED808FA6400D" class="sect4"><span class="enumeration_section">9.2.2.2</span> Sample Update Message</h4>
<div>
<div class="section">
<pre dir="ltr">
U|GG.TCUSTORD|2013-06-02
22:14:41.000000|2015-09-18T13:23:01.987000|00000000000000002891|R=AADPkvAAEAAEqLzA
AA|BILL|1995-12-31:15:00:00|CAR|765|14000.00|3|100
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD488"></a>
<div class="props_rev_3"><a id="GUID-A9C3FDD2-60CF-4E9F-B763-0D179F164BE6"></a>
<h4 id="GADBD-GUID-A9C3FDD2-60CF-4E9F-B763-0D179F164BE6" class="sect4"><span class="enumeration_section">9.2.2.3</span> Sample Delete Message</h4>
<div>
<div class="section">
<pre dir="ltr">
D|GG.TCUSTORD|2013-06-02
22:14:41.000000|2015-09-18T13:23:02.000000|00000000000000004338|L=206080450,6=9.0.
80330,R=AADPkvAAEAAEqLzAAC|DAVE|1993-11-03:07:51:35|PLANE|600|||
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD489"></a>
<div class="props_rev_3"><a id="GUID-12535E15-FB93-4B88-BA99-2F347CDD792F"></a>
<h4 id="GADBD-GUID-12535E15-FB93-4B88-BA99-2F347CDD792F" class="sect4"><span class="enumeration_section">9.2.2.4</span> Sample Truncate Message</h4>
<div>
<div class="section">
<pre dir="ltr">
T|GG.TCUSTORD|2013-06-02
22:14:41.000000|2015-09-18T13:23:02.001000|00000000000000004515|R=AADPkvAAEAAEqL2A
AB|||||||
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<a id="GADBD490"></a>
<div class="props_rev_3"><a id="GUID-863982E2-DCEC-42FB-A94F-76B63D8D071F"></a>
<h3 id="GADBD-GUID-863982E2-DCEC-42FB-A94F-76B63D8D071F" class="sect3"><span class="enumeration_section">9.2.3</span> Additional Considerations</h3>
<div>
<div class="section">
<p>You should exercise care when choosing field and line delimiters. It is important to choose delimiter values that will not occur in the content of the data.</p>
<p>The Java Adapter configuration functionally trims leading and trailing characters from configuration values that are determined to be whitespace. You may want field delimiters, line delimiters, null value representations, and missing value representations that include or are fully considered to be whitespace. In these cases, you must employ specialized syntax in the Java Adapter configuration file to preserve the whitespace. Wrap the configuration value in a <code>CDATA[]</code> wrapper to preserve the whitespace when your configuration values contain leading or trailing characters that are considered whitespace. For example, a configuration value of <code>\n</code> should be configured as <code>CDATA[\n]</code>.</p>
<p>You can&nbsp;search column values using regular expressions then replace matches with a specified value. This search and replace functionality can be utilized in conjunction with the Delimited Text Formatter to ensure that there are no collisions between column value contents and field and line delimiters. For more information, see <a href="GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9.htm#GUID-8622DB66-C2A2-4700-9CB7-02D891DE66E8">Using Regular Expression Search and Replace</a>.</p>
<p>Big Data applications differ from RDBMSs in how data is stored. Update and delete operations in an RDBMS result in a change to the existing data. In contrast, data is not changed in Big Data applications rather appended to existing data. Therefore, the current state of a given row becomes a consolidation of all of the existing operations for that row in the HDFS system. This leads to some special scenarios as described in the following sections.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-D0B9B8BB-80FC-4619-B80B-485148603759">Primary Key Updates</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-0993E0F0-9376-437A-9E6F-042F31DD4E53">Data Consolidation</a></strong><br /></li>
</ul>
</div>
<a id="GADBD498"></a><a id="GADBD497"></a>
<div class="props_rev_3"><a id="GUID-D0B9B8BB-80FC-4619-B80B-485148603759"></a>
<h4 id="GADBD-GUID-D0B9B8BB-80FC-4619-B80B-485148603759" class="sect4"><span class="enumeration_section">9.2.3.1</span> Primary Key Updates</h4>
<div>
<div class="section">
<p>Primary key update operations require special consideration and planning for Big Data integrations. Primary key updates are update operations that modify one or more of the primary keys for the given row from the source database. Since data is simply appended in Big Data applications a primary key update operation looks more like a new insert than an update without any special handling. The Delimited Text formatter provides specialized handling for primary keys that is configurable to you. These are the configurable behaviors:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-D0B9B8BB-80FC-4619-B80B-485148603759__GUID-2E8B048A-FA52-411F-9D24-0AC9923492FC">
<p class="titleintable">Table 9-1 Configurable Behavior</p>
<table class="cellalignment52" title="Configurable Behavior" summary="A two column table explaining the configuration behavior of Delimited Text formatter">
<thead align="left">
<tr>
<th class="cellalignment74" id="d24646e579">Value</th>
<th class="cellalignment75" id="d24646e582">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment74" id="d24646e587" headers="d24646e579">
<p><code>abend</code></p>
</td>
<td class="cellalignment75" headers="d24646e587 d24646e582">
<p>The default behavior is that the delimited text formatter will abend in the case of a primary key update.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e595" headers="d24646e579">
<p><code>update</code></p>
</td>
<td class="cellalignment75" headers="d24646e595 d24646e582">
<p>With this configuration the primary key update will be treated just like any other update operation. This configuration alternative should only be selected if you can guarantee that the primary key that is being changed is not being used as the selection criteria when selecting row data from a Big Data system.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e603" headers="d24646e579">
<p><code>delete-insert</code></p>
</td>
<td class="cellalignment75" headers="d24646e603 d24646e582">
<p>Using this configuration the primary key update is treated as a special case of a delete using the before image data and an insert using the after image data. This configuration may more accurately model the effect of a primary key update in a Big Data application. However, if this configuration is selected it is important to have full supplemental logging enabled on replication at the source database. Without full supplemental logging, the delete operation will be correct, but the insert operation will not contain all of the data for all of the columns for a full representation of the row data in the Big Data application.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD499"></a>
<div class="props_rev_3"><a id="GUID-0993E0F0-9376-437A-9E6F-042F31DD4E53"></a>
<h4 id="GADBD-GUID-0993E0F0-9376-437A-9E6F-042F31DD4E53" class="sect4"><span class="enumeration_section">9.2.3.2</span> Data Consolidation</h4>
<div>
<div class="section">
<p>As previously stated, Big Data applications simply append data to the underlying storage. Analytic tools generally spawn MapReduce programs that traverse the data files and consolidate all the operations for a given row into a single output. Therefore, it is important to have an indicator of the order of operations. The Delimited Text formatter provides a number of metadata fields to fulfill this need. The operation timestamp may be sufficient to fulfill this requirement. However, two update operations may have the same operation timestamp especially if they share a common transaction. The trail position can provide a tie breaking field on the operation timestamp. Lastly, the current timestamp may provide the best indicator of order of operations in Big Data.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="GADBD491"></a>
<div class="props_rev_3"><a id="GUID-17311D59-40BF-4E62-B4C4-95148EEA26B2"></a>
<h3 id="GADBD-GUID-17311D59-40BF-4E62-B4C4-95148EEA26B2" class="sect3"><span class="enumeration_section">9.2.4</span> Output Format Summary Log</h3>
<div>
<div class="section">
<p>The Java <code>log4j</code> logging logs a summary of the delimited text output format if <code>INFO</code> level logging is enabled. A summary of the delimited fields is logged for each source table encountered and occurs when the first operation for that table is received by the Delimited Text formatter. You may find this detailed explanation of the fields of the delimited text output useful when performing an initial setup. With a metadata change event, the summary of the delimited fields is regenerated and logged again at the first operation for that table after the metadata change event.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD493"></a><a id="GADBD492"></a>
<div class="props_rev_3"><a id="GUID-ECCEB29A-9A84-4B0E-B924-D6B08216FC28"></a>
<h3 id="GADBD-GUID-ECCEB29A-9A84-4B0E-B924-D6B08216FC28" class="sect3"><span class="enumeration_section">9.2.5</span> Delimited Text Format Configuration</h3>
<div>
<div class="tblformalwide" id="GUID-ECCEB29A-9A84-4B0E-B924-D6B08216FC28__GUID-193C39F8-5BA1-4550-BC4B-6580EF1F0AB3">
<p class="titleintable">Table 9-2 Configuration Options</p>
<table class="cellalignment61" title="Configuration Options " summary="A five column table explaining the configuration options.">
<thead align="left">
<tr>
<th class="cellalignment67" id="d24646e686">Properties</th>
<th class="cellalignment67" id="d24646e689">Optional / Required</th>
<th class="cellalignment69" id="d24646e692">Legal Values</th>
<th class="cellalignment76" id="d24646e695">Default</th>
<th class="cellalignment77" id="d24646e698">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment67" id="d24646e703" headers="d24646e686">
<div class="p">
<pre dir="ltr">
gg.handler.<span class="italic">name</span>.format.includeColumnNames
</pre></div>
</td>
<td class="cellalignment67" headers="d24646e703 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e703 d24646e692">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment76" headers="d24646e703 d24646e695">
<p><code>false</code></p>
</td>
<td class="cellalignment77" headers="d24646e703 d24646e698">
<p>Controls the output of writing the column names as a delimited field preceding the column value. If true output is like:</p>
<div class="p">
<pre dir="ltr">
<span class="italic">COL1_Name</span>|<span class="italic">COL1_Value</span>|<span class="italic">COL2_Name</span>|<span class="italic">COL2_Value</span>
</pre></div>
<p>If the false output is like:</p>
<p><code><span class="codeinlineitalic">COL1_Value</span>|I</code></p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e748" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.includeOpTimestamp</code></p>
</td>
<td class="cellalignment67" headers="d24646e748 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e748 d24646e692">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment76" headers="d24646e748 d24646e695">
<p><code>true</code></p>
</td>
<td class="cellalignment77" headers="d24646e748 d24646e698">
<p>A <code>false</code> value suppresses the output of the operation timestamp from the source trail file in the output.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e778" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.includeCurrentTimestamp</code></p>
</td>
<td class="cellalignment67" headers="d24646e778 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e778 d24646e692">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment76" headers="d24646e778 d24646e695">
<p><code>true</code></p>
</td>
<td class="cellalignment77" headers="d24646e778 d24646e698">
<p>A <code>false</code> value suppresses the output of the current timestamp in the output.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e808" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.includeOpType</code></p>
</td>
<td class="cellalignment67" headers="d24646e808 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e808 d24646e692">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment76" headers="d24646e808 d24646e695">
<p><code>true</code></p>
</td>
<td class="cellalignment77" headers="d24646e808 d24646e698">
<p>A <code>false</code> value suppresses the output of the operation type in the output.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e838" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.insertOpKey</code></p>
</td>
<td class="cellalignment67" headers="d24646e838 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e838 d24646e692">
<p>Any string</p>
</td>
<td class="cellalignment76" headers="d24646e838 d24646e695">
<p><code>I</code></p>
</td>
<td class="cellalignment77" headers="d24646e838 d24646e698">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e861" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.updateOpKey</code></p>
</td>
<td class="cellalignment67" headers="d24646e861 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e861 d24646e692">
<p>Any string</p>
</td>
<td class="cellalignment76" headers="d24646e861 d24646e695">
<p><code>U</code></p>
</td>
<td class="cellalignment77" headers="d24646e861 d24646e698">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e884" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.deleteOpKey</code></p>
</td>
<td class="cellalignment67" headers="d24646e884 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e884 d24646e692">
<p>Any string</p>
</td>
<td class="cellalignment76" headers="d24646e884 d24646e695">
<p><code>D</code></p>
</td>
<td class="cellalignment77" headers="d24646e884 d24646e698">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e907" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.truncateOpKey</code></p>
</td>
<td class="cellalignment67" headers="d24646e907 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e907 d24646e692">
<p>Any string</p>
</td>
<td class="cellalignment76" headers="d24646e907 d24646e695">
<p><code>T</code></p>
</td>
<td class="cellalignment77" headers="d24646e907 d24646e698">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e930" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.encoding</code></p>
</td>
<td class="cellalignment67" headers="d24646e930 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e930 d24646e692">
<p>Any encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment76" headers="d24646e930 d24646e695">
<p>The native system encoding of the machine hosting the Oracle GoldenGate process.</p>
</td>
<td class="cellalignment77" headers="d24646e930 d24646e698">
<p>Determines the encoding of the output delimited text.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e952" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.fieldDelimiter</code></p>
</td>
<td class="cellalignment67" headers="d24646e952 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e952 d24646e692">
<p>Any String</p>
</td>
<td class="cellalignment76" headers="d24646e952 d24646e695">
<p><code>ASCII 001</code> (the default Hive delimiter)</p>
</td>
<td class="cellalignment77" headers="d24646e952 d24646e698">
<p>The delimiter used between delimited fields. This value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e979" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.lineDelimiter</code></p>
</td>
<td class="cellalignment67" headers="d24646e979 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e979 d24646e692">
<p>Any String</p>
</td>
<td class="cellalignment76" headers="d24646e979 d24646e695">
<p>Newline (the default Hive delimiter)</p>
</td>
<td class="cellalignment77" headers="d24646e979 d24646e698">
<p>The delimiter used between records. This value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e1005" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.includeTableName</code></p>
</td>
<td class="cellalignment67" headers="d24646e1005 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e1005 d24646e692">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment76" headers="d24646e1005 d24646e695">
<p><code>true</code></p>
</td>
<td class="cellalignment77" headers="d24646e1005 d24646e698">
<p>Use <code>false</code> to suppress the output of the table name in the output delimited data.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e1035" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.keyValueDelimiter</code></p>
</td>
<td class="cellalignment67" headers="d24646e1035 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e1035 d24646e692">
<p>Any string</p>
</td>
<td class="cellalignment76" headers="d24646e1035 d24646e695">
<p><code>=</code></p>
</td>
<td class="cellalignment77" headers="d24646e1035 d24646e698">
<p>Provides a delimiter between keys and values in a map. Key1=value1. Tokens are mapped values. Configuration value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e1061" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.keyValuePairDelimiter</code></p>
</td>
<td class="cellalignment67" headers="d24646e1061 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e1061 d24646e692">
<p>Any string</p>
</td>
<td class="cellalignment76" headers="d24646e1061 d24646e695">
<p><code>,</code></p>
</td>
<td class="cellalignment77" headers="d24646e1061 d24646e698">
<p>Provides a delimiter between key value pairs in a map. <code><span class="codeinlineitalic">Key1=Value1</span></code>,<code><span class="codeinlineitalic">Key2=Value2</span></code>. Tokens are mapped values. Configuration value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e1095" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.pkUpdateHandling</code></p>
</td>
<td class="cellalignment67" headers="d24646e1095 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e1095 d24646e692">
<p><code>abend</code> | <code>update</code> | <code>delete-insert</code></p>
</td>
<td class="cellalignment76" headers="d24646e1095 d24646e695">
<p>&nbsp;<code>abend</code></p>
</td>
<td class="cellalignment77" headers="d24646e1095 d24646e698">
<p>Provides configuration for how the formatter should handle update operations that change a primary key. Primary key operations can be problematic for the text formatter and require special consideration by you.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>abend</code> - indicates the process will abend</p>
</li>
<li>
<p><code>update</code> - indicates the process will treat this as a normal update</p>
</li>
<li>
<p><code>delete-insert</code> - indicates the process will treat this as a delete and an insert. Full supplemental logging needs to be enabled for this to work. Without full before and after row images the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e1142" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.nullValueRepresentation</code></p>
</td>
<td class="cellalignment67" headers="d24646e1142 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e1142 d24646e692">
<p>Any string</p>
</td>
<td class="cellalignment76" headers="d24646e1142 d24646e695">
<p>NULL</p>
</td>
<td class="cellalignment77" headers="d24646e1142 d24646e698">
<p>Allows you to configure what will be included in the delimited output in the case of a NULL value. Configuration value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e1167" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.missingValueRepresentation</code></p>
</td>
<td class="cellalignment67" headers="d24646e1167 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e1167 d24646e692">
<p>Any string</p>
</td>
<td class="cellalignment76" headers="d24646e1167 d24646e695">
<p><code>""</code> (no value)</p>
</td>
<td class="cellalignment77" headers="d24646e1167 d24646e698">
<p>Allows you to configure what will be included in the delimited text output in the case of a missing value. Configuration value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e1194" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.includePosition</code></p>
</td>
<td class="cellalignment67" headers="d24646e1194 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e1194 d24646e692">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment76" headers="d24646e1194 d24646e695">
<p><code>true</code></p>
</td>
<td class="cellalignment77" headers="d24646e1194 d24646e698">
<p>Allows you to suppress the output of the operation position from the source trail file.</p>
</td>
</tr>
<tr>
<td class="cellalignment67" id="d24646e1221" headers="d24646e686">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.iso8601Format</code></p>
</td>
<td class="cellalignment67" headers="d24646e1221 d24646e689">
<p>Optional</p>
</td>
<td class="cellalignment69" headers="d24646e1221 d24646e692">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment76" headers="d24646e1221 d24646e695">
<p><code>true</code></p>
</td>
<td class="cellalignment77" headers="d24646e1221 d24646e698">
<p>Controls the format of the current timestamp. The default is the ISO 8601 format. Set to <code>false</code> removes the <code>T</code> between the date and time in the current timestamp, which outputs a space instead.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD494"></a>
<div class="props_rev_3"><a id="GUID-9E69A0E7-70DF-4466-B7A5-AC71EB8F40A4"></a>
<h3 id="GADBD-GUID-9E69A0E7-70DF-4466-B7A5-AC71EB8F40A4" class="sect3"><span class="enumeration_section">9.2.6</span> Sample Configuration</h3>
<div>
<div class="section">
<p>The following is the sample configuration for the Delimited Text formatter from the Java Adapter configuration file:</p>
<pre dir="ltr">
gg.handler.hdfs.format.includeColumnNames=false
gg.handler.hdfs.format.includeOpTimestamp=true
gg.handler.hdfs.format.includeCurrentTimestamp=true
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.encoding=UTF-8
gg.handler.hdfs.format.fieldDelimiter=CDATA[\u0001]
gg.handler.hdfs.format.lineDelimiter=CDATA[\n]
gg.handler.hdfs.format.includeTableName=true
gg.handler.hdfs.format.keyValueDelimiter=CDATA[=]
gg.handler.hdfs.format.kevValuePairDelimiter=CDATA[,]
gg.handler.hdfs.format.pkUpdateHandling=abend
gg.handler.hdfs.format.nullValueRepresentation=NULL
gg.handler.hdfs.format.missingValueRepresentation=CDATA[]
gg.handler.hdfs.format.includePosition=true
gg.handler.hdfs.format=delimitedtext
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD495"></a>
<div class="props_rev_3"><a id="GUID-30A01FF3-B2AB-411D-A885-F56799047F8C"></a>
<h3 id="GADBD-GUID-30A01FF3-B2AB-411D-A885-F56799047F8C" class="sect3"><span class="enumeration_section">9.2.7</span> Metadata Change Events</h3>
<div>
<div class="section">
<p>Oracle GoldenGate for Big Data now handles metadata change events at runtime. This assumes the replicated database and upstream replication processes are propagating metadata change events. The Delimited Text Formatter changes the output format to accommodate the change and continue running.</p>
<p>It is important to understand that a metadata change may impact downstream applications. Delimited text formats are comprised of a fixed number of fields that are positionally relevant. Deleting a column in the source table can be handled seamlessly during Oracle GoldenGate runtime, but results in a change in the total number of fields and potentially the positional relevance of some fields. Adding an additional column or columns is probably the least impactful metadata change event assuming the new column is added to the end. You should consider the impact of a metadata change event before executing the event. When metadata change events will be frequent, Oracle recommends that you consider a more flexible and self describing format, such as, JSON or XML.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="GADBD500"></a>
<div class="props_rev_3"><a id="GUID-5B255190-419E-417C-B09D-4169E09B418E"></a>
<h2 id="GADBD-GUID-5B255190-419E-417C-B09D-4169E09B418E" class="sect2"><span class="enumeration_section">9.3</span> JSON Formatter</h2>
<div>
<div class="section">
<p>The JavaScripts Object Notation (JSON) formatter can output operations from the source trail file in either row based format or operation based format. It formats operation data from the source trail file into a JSON objects. Each individual insert, update, delete, and truncate operation is formatted into an individual JSON message.</p>
<p>This section contains the following topics:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-32A49341-08BF-46C0-9462-04330B9081BB">Operation Metadata Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-8ED6B4AA-8E8C-42B5-A9AE-0B29F20B9A29">Operation Data Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-4A00D3E2-F8B2-4856-8A64-248D1A93D86A">Row Data Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0">Sample JSON Messages</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-190C332E-BD36-4BE8-9124-5A40BF86539E">JSON Schemas</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-68FB5E05-153B-400D-8B19-319098BBE6B9">JSON Formatter Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-40056CE9-8E0C-4581-993B-6F508E17AD73">Sample Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-A1C88CE4-58E0-478A-8B7F-377DF40B71E1">Metadata Change Events</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-FAADA8EB-63FD-4AFF-B3B2-882F1209A3A2">JSON Primary Key Updates</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-93554EC3-3510-413D-8B3C-B88F7C08F0EC">Integrating Oracle Stream Analytics</a></strong><br /></li>
</ul>
</div>
<a id="GADBD503"></a><a id="GADBD502"></a>
<div class="props_rev_3"><a id="GUID-32A49341-08BF-46C0-9462-04330B9081BB"></a>
<h3 id="GADBD-GUID-32A49341-08BF-46C0-9462-04330B9081BB" class="sect3"><span class="enumeration_section">9.3.1</span> Operation Metadata Formatting Details</h3>
<div>
<div class="section">
<p>JSON objects generated by the JSON Formatter contain the following metadata fields at the beginning of each message:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-32A49341-08BF-46C0-9462-04330B9081BB__GUID-67B186FA-D10D-45DA-9EBC-9CCDCA465FDE">
<p class="titleintable">Table 9-3 JSON Metadata</p>
<table class="cellalignment52" title="JSON Metadata" summary="This two column table lists the JSON metadata">
<thead align="left">
<tr>
<th class="cellalignment74" id="d24646e1410">Value</th>
<th class="cellalignment75" id="d24646e1413">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment74" id="d24646e1418" headers="d24646e1410">
<p><code>table</code></p>
</td>
<td class="cellalignment75" headers="d24646e1418 d24646e1413">
<p>Contains fully qualified table name. The format of the fully qualified table name is: <span class="italic"><code>CATALOG NAME.SCHEMA NAME.TABLE NAME</code></span></p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e1429" headers="d24646e1410">
<p><code>op_type</code></p>
</td>
<td class="cellalignment75" headers="d24646e1429 d24646e1413">
<p>Contains the operation type that is the indicator of the type of database operation from the source trail file. Default values are <code>I</code> for insert, <code>U</code> for update, <code>D</code> for delete, and <code>T</code> for truncate.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e1449" headers="d24646e1410">
<p><code>op_ts</code></p>
</td>
<td class="cellalignment75" headers="d24646e1449 d24646e1413">
<p>The operation timestamp is the timestamp of the operation from the source trail file. Since this timestamp is from the source trail, it is fixed. Replaying the trail file results in the same timestamp for the same operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e1457" headers="d24646e1410">
<p><code>current_ts</code></p>
</td>
<td class="cellalignment75" headers="d24646e1457 d24646e1413">
<p>The current timestamp is a timestamp of the current time when delimited text formatter processes the current operation record. This timestamp follows the ISO-8601 format and includes microsecond precision. Replaying the trail file will <span class="italic">not</span> result in the same timestamp for the same operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e1468" headers="d24646e1410">
<p><code>pos</code></p>
</td>
<td class="cellalignment75" headers="d24646e1468 d24646e1413">
<p>This is the trail file position with is the concatenated sequence number and RBA number from the source trail file. The trail position provides traceability of the operation back to the source trail file. The sequence number is the source trail file number. The RBA number is the offset in the trail file.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e1476" headers="d24646e1410">
<p><code>primary_keys</code></p>
</td>
<td class="cellalignment75" headers="d24646e1476 d24646e1413">
<p>An array variable holding the column names of the primary keys of the source table. The <code>primary_keys</code> field is only include in the JSON output if the <code>includePrimaryKeys</code> configuration property is set to <code>true</code>.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e1493" headers="d24646e1410">
<p><code>tokens</code></p>
</td>
<td class="cellalignment75" headers="d24646e1493 d24646e1413">
<p>The tokens field is only included in the output if the <code>includeTokens</code> handler configuration property is set to <code>true</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD504"></a>
<div class="props_rev_3"><a id="GUID-8ED6B4AA-8E8C-42B5-A9AE-0B29F20B9A29"></a>
<h3 id="GADBD-GUID-8ED6B4AA-8E8C-42B5-A9AE-0B29F20B9A29" class="sect3"><span class="enumeration_section">9.3.2</span> Operation Data Formatting Details</h3>
<div>
<div class="section">
<p>JSON messages first contain the operation metadata fields, which are followed by the operation data fields. This data is represented by <code>before</code> and <code>after</code> members that are objects. These objects contain members with the keys being the column names and the values being the column values.</p>
<p>Operation data is modeled as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Inserts &ndash; Includes the after image data.</p>
</li>
<li>
<p>Updates &ndash; Includes both the before and after image data.</p>
</li>
<li>
<p>Deletes &ndash; Includes the before image data.</p>
</li>
</ul>
<p>Column values for an operation from the source trail file can have one of three states: column has a value, column value is NULL, or column value is missing. The JSON Formatter maps these column value states into the created JSON objects as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Column has a value - The column value is output. In the following example the member <code>STATE</code> has a value.</p>
<pre dir="ltr">
    "after":{        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",        "STATE":"CO"    }
</pre></li>
<li>
<p>Column value is NULL - The default output value is a JSON NULL. In the following example the member <code>STATE</code> is NULL.</p>
<pre dir="ltr">
    "after":{        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",        "STATE":null    }
</pre></li>
<li>
<p>Column value is missing - The JSON will contain no element for a missing column value. In the following example the member <code>STATE</code> is missing.</p>
<pre dir="ltr">
    "after":{        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",    }
</pre></li>
</ul>
<p>The default setting of the JSON Formatter is to map the data types from the source trail file to the associated JSON data type. JSON supports few data types so this functionality largely results in the mapping of numeric fields from the source trail file to members typed as numbers. This data type mapping is configurable to alternatively treat all data as strings.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-4A00D3E2-F8B2-4856-8A64-248D1A93D86A"></a>
<h3 id="GADBD-GUID-4A00D3E2-F8B2-4856-8A64-248D1A93D86A" class="sect3"><span class="enumeration_section">9.3.3</span> Row Data Formatting Details</h3>
<div>
<div class="section">
<p>JSON messages first contain the operation metadata fields, which are followed by the operation data fields. For row data formatting this is the source column names and source column values as JSON key value pairs. This data is represented by <code>before</code> and <code>after</code> members that are objects. These objects contain members with the keys being the column names and the values being the column values.</p>
<p>Row data is modeled as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Inserts &ndash; Includes the after image data.</p>
</li>
<li>
<p>Updates &ndash; Includes the after image data.</p>
</li>
<li>
<p>Deletes &ndash; Includes the before image data.</p>
</li>
</ul>
<p>Column values for an operation from the source trail file can have one of three states: column has a value, column value is NULL, or column value is missing. The JSON Formatter maps these column value states into the created JSON objects as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Column has a value - The column value is output. In the following example the member <code>STATE</code> has a value.</p>
<pre dir="ltr">
        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",        "STATE":"CO"    }
</pre></li>
<li>
<p>Column value is NULL - The default output value is a JSON NULL. In the following example the member <code>STATE</code> is NULL.</p>
<pre dir="ltr">
        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",        "STATE":null    }
</pre></li>
<li>
<p>Column value is missing - The JSON will contain no element for a missing column value. In the following example the member <code>STATE</code> is missing.</p>
<pre dir="ltr">
        "CUST_CODE":"BILL",        "NAME":"BILL'S USED CARS",        "CITY":"DENVER",    }
</pre></li>
</ul>
<p>The default setting of the JSON Formatter is to map the data types from the source trail file to the associated JSON data type. JSON supports few data types so this functionality largely results in the mapping of numeric fields from the source trail file to members typed as numbers. This data type mapping is configurable to alternatively treat all data as strings.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD505"></a>
<div class="props_rev_3"><a id="GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0"></a>
<h3 id="GADBD-GUID-EFBE916A-3DA3-451E-A21F-760B808BA2F0" class="sect3"><span class="enumeration_section">9.3.4</span> Sample JSON Messages</h3>
<div>
<div class="section">
<p>The following topics are sample JSON messages created by the JSON Formatter for insert, update, delete, and truncate operations.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-4870A1B1-89FE-450A-B5B0-40A226F8D443">Sample Operation Modeled JSON Messages</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-507F81F2-A98F-43A7-827C-F6A0B1C9806E">Sample Flattened Operation Modeled JSON Messages</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-C9B95EC9-B98D-4A77-AF24-C932B14BA71E">Sample Row Modeled JSON Messages</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-1610737C-53E0-4AAD-84C2-B9FB1C9F3D10">Sample Primary Key Output JSON Message</a></strong><br /></li>
</ul>
</div>
<a id="GADBD506"></a>
<div class="props_rev_3"><a id="GUID-4870A1B1-89FE-450A-B5B0-40A226F8D443"></a>
<h4 id="GADBD-GUID-4870A1B1-89FE-450A-B5B0-40A226F8D443" class="sect4"><span class="enumeration_section">9.3.4.1</span> Sample Operation Modeled JSON Messages</h4>
<div>
<div class="section">
<p class="subhead3">Insert:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"I",
    "op_ts":"2015-11-05 18:45:36.000000",
    "current_ts":"2016-10-05T10:15:51.267000",
    "pos":"00000000000000002928",
    "after":{
        "CUST_CODE":"WILL",
        "ORDER_DATE":"1994-09-30:15:33:00",
        "PRODUCT_CODE":"CAR",
        "ORDER_ID":144,
        "PRODUCT_PRICE":17520.00,
        "PRODUCT_AMOUNT":3,
        "TRANSACTION_ID":100
    }
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Update:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"U",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:15:51.310002",
    "pos":"00000000000000004300",
    "before":{
        "CUST_CODE":"BILL",
        "ORDER_DATE":"1995-12-31:15:00:00",
        "PRODUCT_CODE":"CAR",
        "ORDER_ID":765,
        "PRODUCT_PRICE":15000.00,
        "PRODUCT_AMOUNT":3,
        "TRANSACTION_ID":100
    },
    "after":{
        "CUST_CODE":"BILL",
        "ORDER_DATE":"1995-12-31:15:00:00",
        "PRODUCT_CODE":"CAR",
        "ORDER_ID":765,
        "PRODUCT_PRICE":14000.00
    }
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Delete:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"D",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:15:51.312000",
    "pos":"00000000000000005272",
    "before":{
        "CUST_CODE":"DAVE",
        "ORDER_DATE":"1993-11-03:07:51:35",
        "PRODUCT_CODE":"PLANE",
        "ORDER_ID":600,
        "PRODUCT_PRICE":135000.00,
        "PRODUCT_AMOUNT":2,
        "TRANSACTION_ID":200
    }
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Truncate:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"T",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:15:51.312001",
    "pos":"00000000000000005480",
}
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD507"></a>
<div class="props_rev_3"><a id="GUID-507F81F2-A98F-43A7-827C-F6A0B1C9806E"></a>
<h4 id="GADBD-GUID-507F81F2-A98F-43A7-827C-F6A0B1C9806E" class="sect4"><span class="enumeration_section">9.3.4.2</span> Sample Flattened Operation Modeled JSON Messages</h4>
<div>
<div class="section">
<p class="subhead3">Insert:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"I",
    "op_ts":"2015-11-05 18:45:36.000000",
    "current_ts":"2016-10-05T10:34:47.956000",
    "pos":"00000000000000002928",
    "after.CUST_CODE":"WILL",
    "after.ORDER_DATE":"1994-09-30:15:33:00",
    "after.PRODUCT_CODE":"CAR",
    "after.ORDER_ID":144,
    "after.PRODUCT_PRICE":17520.00,
    "after.PRODUCT_AMOUNT":3,
    "after.TRANSACTION_ID":100
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Update:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"U",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:34:48.192000",
    "pos":"00000000000000004300",
    "before.CUST_CODE":"BILL",
    "before.ORDER_DATE":"1995-12-31:15:00:00",
    "before.PRODUCT_CODE":"CAR",
    "before.ORDER_ID":765,
    "before.PRODUCT_PRICE":15000.00,
    "before.PRODUCT_AMOUNT":3,
    "before.TRANSACTION_ID":100,
    "after.CUST_CODE":"BILL",
    "after.ORDER_DATE":"1995-12-31:15:00:00",
    "after.PRODUCT_CODE":"CAR",
    "after.ORDER_ID":765,
    "after.PRODUCT_PRICE":14000.00
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Delete:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"D",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:34:48.193000",
    "pos":"00000000000000005272",
    "before.CUST_CODE":"DAVE",
    "before.ORDER_DATE":"1993-11-03:07:51:35",
    "before.PRODUCT_CODE":"PLANE",
    "before.ORDER_ID":600,
    "before.PRODUCT_PRICE":135000.00,
    "before.PRODUCT_AMOUNT":2,
    "before.TRANSACTION_ID":200
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Truncate:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"D",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T10:34:48.193001",
    "pos":"00000000000000005480",
    "before.CUST_CODE":"JANE",
    "before.ORDER_DATE":"1995-11-11:13:52:00",
    "before.PRODUCT_CODE":"PLANE",
    "before.ORDER_ID":256,
    "before.PRODUCT_PRICE":133300.00,
    "before.PRODUCT_AMOUNT":1,
    "before.TRANSACTION_ID":100
}
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD508"></a>
<div class="props_rev_3"><a id="GUID-C9B95EC9-B98D-4A77-AF24-C932B14BA71E"></a>
<h4 id="GADBD-GUID-C9B95EC9-B98D-4A77-AF24-C932B14BA71E" class="sect4"><span class="enumeration_section">9.3.4.3</span> Sample Row Modeled JSON Messages</h4>
<div>
<div class="section">
<p class="subhead3">Insert:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"I",
    "op_ts":"2015-11-05 18:45:36.000000",
    "current_ts":"2016-10-05T11:10:42.294000",
    "pos":"00000000000000002928",
    "CUST_CODE":"WILL",
    "ORDER_DATE":"1994-09-30:15:33:00",
    "PRODUCT_CODE":"CAR",
    "ORDER_ID":144,
    "PRODUCT_PRICE":17520.00,
    "PRODUCT_AMOUNT":3,
    "TRANSACTION_ID":100
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Update:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"U",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T11:10:42.350005",
    "pos":"00000000000000004300",
    "CUST_CODE":"BILL",
    "ORDER_DATE":"1995-12-31:15:00:00",
    "PRODUCT_CODE":"CAR",
    "ORDER_ID":765,
    "PRODUCT_PRICE":14000.00
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Delete:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"D",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T11:10:42.351002",
    "pos":"00000000000000005272",
    "CUST_CODE":"DAVE",
    "ORDER_DATE":"1993-11-03:07:51:35",
    "PRODUCT_CODE":"PLANE",
    "ORDER_ID":600,
    "PRODUCT_PRICE":135000.00,
    "PRODUCT_AMOUNT":2,
    "TRANSACTION_ID":200
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Truncate:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTORD",
    "op_type":"T",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-10-05T11:10:42.351003",
    "pos":"00000000000000005480",
}
</pre></div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-1610737C-53E0-4AAD-84C2-B9FB1C9F3D10"></a>
<h4 id="GADBD-GUID-1610737C-53E0-4AAD-84C2-B9FB1C9F3D10" class="sect4"><span class="enumeration_section">9.3.4.4</span> Sample Primary Key Output JSON Message</h4>
<div>
<pre dir="ltr">
{
    "table":"DDL_OGGSRC.TCUSTMER",
    "op_type":"I",
    "op_ts":"2015-10-26 03:00:06.000000",
    "current_ts":"2016-04-05T08:59:23.001000",
    "pos":"00000000000000006605",
    "primary_keys":[
        "CUST_CODE"
    ],
    "after":{
        "CUST_CODE":"WILL",
        "NAME":"BG SOFTWARE CO.",
        "CITY":"SEATTLE",
        "STATE":"WA"
    }
}
</pre></div>
</div>
</div>
<a id="GADBD510"></a>
<div class="props_rev_3"><a id="GUID-190C332E-BD36-4BE8-9124-5A40BF86539E"></a>
<h3 id="GADBD-GUID-190C332E-BD36-4BE8-9124-5A40BF86539E" class="sect3"><span class="enumeration_section">9.3.5</span> JSON Schemas</h3>
<div>
<div class="section">
<p>By default, JSON schemas are generated for each source table encountered. JSON schemas are generated on a just in time basis when an operation for that table is first encountered. A JSON schema is not required to parse a JSON object. However, many JSON parsers can use a JSON schema to perform a validating parse of a JSON object. Alternatively, you can review the JSON schemas to understand the layout of output JSON objects. The JSON schemas are created in the <span class="italic"><code>GoldenGate_Home</code></span><code>/dirdef</code> directory by default and are named by the following convention:</p>
<pre dir="ltr">
<span class="italic">FULLY_QUALIFIED_TABLE_NAME</span>.schema.json
</pre>
<p>The generation of the JSON schemas is suppressible.</p>
<dl>
<dt class="dlterm"><a id="GUID-190C332E-BD36-4BE8-9124-5A40BF86539E__GUID-8ACAD59B-5EBD-4D33-8F4D-20B48CC55E95"><!-- --></a>Following is a JSON schema example for the JSON object listed in <a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-4870A1B1-89FE-450A-B5B0-40A226F8D443">Sample Operation Modeled JSON Messages</a>:</dt>
<dd>
<pre dir="ltr">
{
    "$schema":"http://json-schema.org/draft-04/schema#",
    "title":"QASOURCE.TCUSTORD",
    "description":"JSON schema for table QASOURCE.TCUSTORD",
    "definitions":{
        "row":{
            "type":"object",
            "properties":{
                "CUST_CODE":{
                    "type":[
                        "string",
                        "null"
                    ]
                },
                "ORDER_DATE":{
                    "type":[
                        "string",
                        "null"
                    ]
                },
                "PRODUCT_CODE":{
                    "type":[
                        "string",
                        "null"
                    ]
                },
                "ORDER_ID":{
                    "type":[
                        "number",
                        "null"
                    ]
                },
                "PRODUCT_PRICE":{
                    "type":[
                        "number",
                        "null"
                    ]
                },
                "PRODUCT_AMOUNT":{
                    "type":[
                        "integer",
                        "null"
                    ]
                },
                "TRANSACTION_ID":{
                    "type":[
                        "number",
                        "null"
                    ]
                }
            },
            "additionalProperties":false
        },
        "tokens":{
            "type":"object",
            "description":"Token keys and values are free form key value pairs.",
            "properties":{
            },
            "additionalProperties":true
        }
    },
    "type":"object",
    "properties":{
        "table":{
            "description":"The fully qualified table name",
            "type":"string"
        },
        "op_type":{
            "description":"The operation type",
            "type":"string"
        },
        "op_ts":{
            "description":"The operation timestamp",
            "type":"string"
        },
        "current_ts":{
            "description":"The current processing timestamp",
            "type":"string"
        },
        "pos":{
            "description":"The position of the operation in the data source",
            "type":"string"
        },
        "primary_keys":{
            "description":"Array of the primary key column names.",
            "type":"array",
            "items":{
                "type":"string"
            },
            "minItems":0,
            "uniqueItems":true
        },
        "tokens":{
            "$ref":"#/definitions/tokens"
        },
        "before":{
            "$ref":"#/definitions/row"
        },
        "after":{
            "$ref":"#/definitions/row"
        }
    },
    "required":[
        "table",
        "op_type",
        "op_ts",
        "current_ts",
        "pos"
    ],
    "additionalProperties":false
}
</pre></dd>
<dt class="dlterm"><a id="GUID-190C332E-BD36-4BE8-9124-5A40BF86539E__GUID-69A369E9-C5AF-4DA7-9BC8-084FB60E4298"><!-- --></a>Following is a JSON schema example for the JSON object listed in <a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-507F81F2-A98F-43A7-827C-F6A0B1C9806E">Sample Flattened Operation Modeled JSON Messages</a>:</dt>
<dd>
<pre dir="ltr">
{
    "$schema":"http://json-schema.org/draft-04/schema#",
    "title":"QASOURCE.TCUSTORD",
    "description":"JSON schema for table QASOURCE.TCUSTORD",
    "definitions":{
        "tokens":{
            "type":"object",
            "description":"Token keys and values are free form key value pairs.",
            "properties":{
            },
            "additionalProperties":true
        }
    },
    "type":"object",
    "properties":{
        "table":{
            "description":"The fully qualified table name",
            "type":"string"
        },
        "op_type":{
            "description":"The operation type",
            "type":"string"
        },
        "op_ts":{
            "description":"The operation timestamp",
            "type":"string"
        },
        "current_ts":{
            "description":"The current processing timestamp",
            "type":"string"
        },
        "pos":{
            "description":"The position of the operation in the data source",
            "type":"string"
        },
        "primary_keys":{
            "description":"Array of the primary key column names.",
            "type":"array",
            "items":{
                "type":"string"
            },
            "minItems":0,
            "uniqueItems":true
        },
        "tokens":{
            "$ref":"#/definitions/tokens"
        },
        "before.CUST_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "before.ORDER_DATE":{
            "type":[
                "string",
                "null"
            ]
        },
        "before.PRODUCT_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "before.ORDER_ID":{
            "type":[
                "number",
                "null"
            ]
        },
        "before.PRODUCT_PRICE":{
            "type":[
                "number",
                "null"
            ]
        },
        "before.PRODUCT_AMOUNT":{
            "type":[
                "integer",
                "null"
            ]
        },
        "before.TRANSACTION_ID":{
            "type":[
                "number",
                "null"
            ]
        },
        "after.CUST_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "after.ORDER_DATE":{
            "type":[
                "string",
                "null"
            ]
        },
        "after.PRODUCT_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "after.ORDER_ID":{
            "type":[
                "number",
                "null"
            ]
        },
        "after.PRODUCT_PRICE":{
            "type":[
                "number",
                "null"
            ]
        },
        "after.PRODUCT_AMOUNT":{
            "type":[
                "integer",
                "null"
            ]
        },
        "after.TRANSACTION_ID":{
            "type":[
                "number",
                "null"
            ]
        }
    },
    "required":[
        "table",
        "op_type",
        "op_ts",
        "current_ts",
        "pos"
    ],
    "additionalProperties":false
}
</pre></dd>
<dt class="dlterm"><a id="GUID-190C332E-BD36-4BE8-9124-5A40BF86539E__GUID-BBCF5290-BEA8-4D9D-8111-3108848AF9CE"><!-- --></a>Following is a JSON schema example for the JSON object listed in <a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-C9B95EC9-B98D-4A77-AF24-C932B14BA71E">Sample Row Modeled JSON Messages</a>:</dt>
<dd>
<pre dir="ltr">
{
    "$schema":"http://json-schema.org/draft-04/schema#",
    "title":"QASOURCE.TCUSTORD",
    "description":"JSON schema for table QASOURCE.TCUSTORD",
    "definitions":{
        "tokens":{
            "type":"object",
            "description":"Token keys and values are free form key value pairs.",
            "properties":{
            },
            "additionalProperties":true
        }
    },
    "type":"object",
    "properties":{
        "table":{
            "description":"The fully qualified table name",
            "type":"string"
        },
        "op_type":{
            "description":"The operation type",
            "type":"string"
        },
        "op_ts":{
            "description":"The operation timestamp",
            "type":"string"
        },
        "current_ts":{
            "description":"The current processing timestamp",
            "type":"string"
        },
        "pos":{
            "description":"The position of the operation in the data source",
            "type":"string"
        },
        "primary_keys":{
            "description":"Array of the primary key column names.",
            "type":"array",
            "items":{
                "type":"string"
            },
            "minItems":0,
            "uniqueItems":true
        },
        "tokens":{
            "$ref":"#/definitions/tokens"
        },
        "CUST_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "ORDER_DATE":{
            "type":[
                "string",
                "null"
            ]
        },
        "PRODUCT_CODE":{
            "type":[
                "string",
                "null"
            ]
        },
        "ORDER_ID":{
            "type":[
                "number",
                "null"
            ]
        },
        "PRODUCT_PRICE":{
            "type":[
                "number",
                "null"
            ]
        },
        "PRODUCT_AMOUNT":{
            "type":[
                "integer",
                "null"
            ]
        },
        "TRANSACTION_ID":{
            "type":[
                "number",
                "null"
            ]
        }
    },
    "required":[
        "table",
        "op_type",
        "op_ts",
        "current_ts",
        "pos"
    ],
    "additionalProperties":false
}
</pre></dd>
</dl>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD512"></a><a id="GADBD511"></a>
<div class="props_rev_3"><a id="GUID-68FB5E05-153B-400D-8B19-319098BBE6B9"></a>
<h3 id="GADBD-GUID-68FB5E05-153B-400D-8B19-319098BBE6B9" class="sect3"><span class="enumeration_section">9.3.6</span> JSON Formatter Configuration</h3>
<div>
<div class="tblformalwide" id="GUID-68FB5E05-153B-400D-8B19-319098BBE6B9__GUID-43B6CC5F-C44E-4848-94BF-A11AEC3D0710">
<p class="titleintable">Table 9-4 JSON Formatter Configuration Properties</p>
<table class="cellalignment61" title="JSON Formatter Configuration Properties" summary="This two column table lists the configuration properties for JSON schemas.">
<thead align="left">
<tr>
<th class="cellalignment72" id="d24646e1903">Properties</th>
<th class="cellalignment57" id="d24646e1906">Required/ Optional</th>
<th class="cellalignment70" id="d24646e1909">Legal Values</th>
<th class="cellalignment70" id="d24646e1912">Default</th>
<th class="cellalignment78" id="d24646e1915">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment72" id="d24646e1920" headers="d24646e1903">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format</code></p>
</td>
<td class="cellalignment57" headers="d24646e1920 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e1920 d24646e1909">
<p><code>json</code> | <code>json_row</code></p>
</td>
<td class="cellalignment70" headers="d24646e1920 d24646e1912">
<p>None</p>
</td>
<td class="cellalignment78" headers="d24646e1920 d24646e1915">
<p>Controls whether the generated JSON output messages are operation modeled or row modeled. Set to <code>json</code> for operation modeled or<code>json_row</code> for row modeled.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e1950" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.insertOpKey</code></p>
</td>
<td class="cellalignment57" headers="d24646e1950 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e1950 d24646e1909">
<p>Any string</p>
</td>
<td class="cellalignment70" headers="d24646e1950 d24646e1912">
<p><code>I</code></p>
</td>
<td class="cellalignment78" headers="d24646e1950 d24646e1915">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e1973" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.updateOpKey</code></p>
</td>
<td class="cellalignment57" headers="d24646e1973 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e1973 d24646e1909">
<p>Any string</p>
</td>
<td class="cellalignment70" headers="d24646e1973 d24646e1912">
<p><code>U</code></p>
</td>
<td class="cellalignment78" headers="d24646e1973 d24646e1915">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e1996" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.deleteOpKey</code></p>
</td>
<td class="cellalignment57" headers="d24646e1996 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e1996 d24646e1909">
<p>Any string</p>
</td>
<td class="cellalignment70" headers="d24646e1996 d24646e1912">
<p><code>D</code></p>
</td>
<td class="cellalignment78" headers="d24646e1996 d24646e1915">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2019" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.truncateOpKey</code></p>
</td>
<td class="cellalignment57" headers="d24646e2019 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2019 d24646e1909">
<p>Any string</p>
</td>
<td class="cellalignment70" headers="d24646e2019 d24646e1912">
<p><code>T</code></p>
</td>
<td class="cellalignment78" headers="d24646e2019 d24646e1915">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2042" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.prettyPrint</code></p>
</td>
<td class="cellalignment57" headers="d24646e2042 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2042 d24646e1909">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment70" headers="d24646e2042 d24646e1912">
<p><code>false</code></p>
</td>
<td class="cellalignment78" headers="d24646e2042 d24646e1915">
<p>Controls the output format of the JSON data. True is pretty print, formatted with white space to be more easily read by humans. False is not pretty print, more compact but very difficult for humans to read.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2069" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.jsonDelimiter</code></p>
</td>
<td class="cellalignment57" headers="d24646e2069 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2069 d24646e1909">
<p>Any string</p>
</td>
<td class="cellalignment70" headers="d24646e2069 d24646e1912">
<p><code>""</code> (no value)</p>
</td>
<td class="cellalignment78" headers="d24646e2069 d24646e1915">
<p>Allows you to insert an optional delimiter between generated JSONs to allow them to be more easily parsed out of a continuous stream of data. Configuration value supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2096" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.generateSchema</code></p>
</td>
<td class="cellalignment57" headers="d24646e2096 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2096 d24646e1909">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment70" headers="d24646e2096 d24646e1912">
<p><code>true</code></p>
</td>
<td class="cellalignment78" headers="d24646e2096 d24646e1915">
<p>Controls the generation of JSON schemas for the generated JSON documents. JSON schemas are generated on a table by table basis. A JSON schema is not required to parse a JSON document. However, a JSON schema can provide you an indication of what the JSON documents will look like and can be used for a validating JSON parse.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2123" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.schemaDirectory</code></p>
</td>
<td class="cellalignment57" headers="d24646e2123 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2123 d24646e1909">
<p>Any legal, existing file system path</p>
</td>
<td class="cellalignment70" headers="d24646e2123 d24646e1912">
<p><code>./dirdef</code></p>
</td>
<td class="cellalignment78" headers="d24646e2123 d24646e1915">
<p>Controls the output location of generated JSON schemas.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2146" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.treatAllColumnsAsStrings</code></p>
</td>
<td class="cellalignment57" headers="d24646e2146 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2146 d24646e1909">
<p><code>true | false</code></p>
</td>
<td class="cellalignment70" headers="d24646e2146 d24646e1912">
<p><code>false</code></p>
</td>
<td class="cellalignment78" headers="d24646e2146 d24646e1915">
<p>Controls the output typing of generated JSON documents. If set to false then the formatter will attempt to map Oracle GoldenGate types to the corresponding JSON type. If set to true then all data will be treated as Strings in the generated JSONs and JSON schemas.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2170" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.encoding</code></p>
</td>
<td class="cellalignment57" headers="d24646e2170 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2170 d24646e1909">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment70" headers="d24646e2170 d24646e1912">
<p><code>UTF-8</code> (the JSON default)</p>
</td>
<td class="cellalignment78" headers="d24646e2170 d24646e1915">
<p>Controls the output encoding of generated JSON schemas and documents.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2195" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name</code></span><code>.format.versionSchemas</code></p>
</td>
<td class="cellalignment57" headers="d24646e2195 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2195 d24646e1909">
<p><code>true | false</code></p>
</td>
<td class="cellalignment70" headers="d24646e2195 d24646e1912">
<p><code>false</code></p>
</td>
<td class="cellalignment78" headers="d24646e2195 d24646e1915">
<p>Controls the version of created schemas. Schema versioning causes a schema with a timestamp to be created in the schema directory on the local file system every time a new schema is created. True enables schema versioning. False disables schema versioning.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2219" headers="d24646e1903">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment57" headers="d24646e2219 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2219 d24646e1909">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment70" headers="d24646e2219 d24646e1912">
<p><code>true</code></p>
</td>
<td class="cellalignment78" headers="d24646e2219 d24646e1915">
<p>Controls the format of the current timestamp. The default is the &nbsp;ISO 8601 format. Set to <code>false</code> removes the <code>&ldquo;T&rdquo;</code> between the date and time in the current timestamp, which outputs <code>&ldquo; &ldquo;</code> instead.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2254" headers="d24646e1903">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.includePrimaryKeys</code></p>
</td>
<td class="cellalignment57" headers="d24646e2254 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2254 d24646e1909">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment70" headers="d24646e2254 d24646e1912">
<p><code>false</code></p>
</td>
<td class="cellalignment78" headers="d24646e2254 d24646e1915">
<p>Set this configuration property to <code>true</code> to include an array of the primary key column names from the source table in the JSON output.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2283" headers="d24646e1903">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.flatten</code></p>
</td>
<td class="cellalignment57" headers="d24646e2283 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2283 d24646e1909">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment70" headers="d24646e2283 d24646e1912">
<p><code>false</code></p>
</td>
<td class="cellalignment78" headers="d24646e2283 d24646e1915">
<p>This property is only applicable to Operation Formatted JSON (<code>gg.handler.name.format=json</code>).</p>
<p>Controls sending flattened JSON formatted data to the target entity. This must be set to <code>true</code> for the following property to work.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2317" headers="d24646e1903">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.flattenDelimiter</code></p>
</td>
<td class="cellalignment57" headers="d24646e2317 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2317 d24646e1909">
<p>Any legal character or character string for a JSON field name.</p>
</td>
<td class="cellalignment70" headers="d24646e2317 d24646e1912">
<p><code>.</code></p>
</td>
<td class="cellalignment78" headers="d24646e2317 d24646e1915">
<p>Controls the delimiter for concatenated JSON element names. It supports <code>CDATA[]</code> wrapping to preserve whitespace. It is only relevant when <code>gg.handler.<span class="codeinlineitalic">name</span>.format.flatten</code> is set to <code>true</code>.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2350" headers="d24646e1903">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.beforeObjectName</code></p>
</td>
<td class="cellalignment57" headers="d24646e2350 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2350 d24646e1909">
<p>Any legal character or character string for a JSON field name.</p>
</td>
<td class="cellalignment70" headers="d24646e2350 d24646e1912">
<p>Any legal JSON attribute name.</p>
</td>
<td class="cellalignment78" headers="d24646e2350 d24646e1915">
<p>This property is only applicable to Operation Formatted JSON (<code>gg.handler.name.format=json</code>).</p>
<p>Allows you to set whether the JSON element, that contains the before change column values, can be renamed.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2375" headers="d24646e1903">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.afterObjectName</code></p>
</td>
<td class="cellalignment57" headers="d24646e2375 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2375 d24646e1909">
<p>Any legal character or character string for a JSON field name.</p>
</td>
<td class="cellalignment70" headers="d24646e2375 d24646e1912">
<p>Any legal JSON attribute name.</p>
</td>
<td class="cellalignment78" headers="d24646e2375 d24646e1915">
<p>This property is only applicable to Operation Formatted JSON (<code>gg.handler.name.format=json</code>).</p>
<p>Allows you to set whether the JSON element, that contains the after change column values, can be renamed.</p>
</td>
</tr>
<tr>
<td class="cellalignment72" id="d24646e2400" headers="d24646e1903">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.pkUpdateHandling</code></p>
</td>
<td class="cellalignment57" headers="d24646e2400 d24646e1906">
<p>Optional</p>
</td>
<td class="cellalignment70" headers="d24646e2400 d24646e1909">
<p><code>abend</code> | <code>update</code> | <code>delete-insert</code></p>
</td>
<td class="cellalignment70" headers="d24646e2400 d24646e1912">
<p><code>abend</code></p>
</td>
<td class="cellalignment78" headers="d24646e2400 d24646e1915">
<p>Provides configuration for how the formatter should handle update operations that change a primary key. Primary key operations can be problematic for the JSON formatter and require special consideration by you. You can only use this property in conjunction with the row modeled JSON output messages.</p>
<p>This property is only applicable to Row Formatted JSON (<code>gg.handler.name.format=json_row</code>).</p>
<ul style="list-style-type: disc;">
<li>
<p><code>abend</code> - indicates that the process will abend.</p>
</li>
<li>
<p><code>update</code> - indicates that the process will treat this as a normal update.</p>
</li>
<li>
<p><code>delete</code> or <code>insert</code> - indicates that the process will treat this as a delete and an insert. Full supplemental logging needs to be enabled for this to work. Without full before and after row images the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD513"></a>
<div class="props_rev_3"><a id="GUID-40056CE9-8E0C-4581-993B-6F508E17AD73"></a>
<h3 id="GADBD-GUID-40056CE9-8E0C-4581-993B-6F508E17AD73" class="sect3"><span class="enumeration_section">9.3.7</span> Sample Configuration</h3>
<div>
<div class="section">
<p>The following is sample configuration for the JSON Formatter from the Java Adapter configuration file:</p>
<pre dir="ltr">
gg.handler.hdfs.format=json
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.prettyPrint=false
gg.handler.hdfs.format.jsonDelimiter=CDATA[]
gg.handler.hdfs.format.generateSchema=true
gg.handler.hdfs.format.schemaDirectory=dirdef
gg.handler.hdfs.format.treatAllColumnsAsStrings=false
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD514"></a>
<div class="props_rev_3"><a id="GUID-A1C88CE4-58E0-478A-8B7F-377DF40B71E1"></a>
<h3 id="GADBD-GUID-A1C88CE4-58E0-478A-8B7F-377DF40B71E1" class="sect3"><span class="enumeration_section">9.3.8</span> Metadata Change Events</h3>
<div>
<div class="section">
<p>Metadata change events are handled at runtime. A metadata change event for a given table results in the regeneration of the JSON schema the next time an operation for that table is encountered. The content of created JSON messages is changed to reflect the metadata change. For example, if the metadata change is to add an additional column, the new column will be included in created JSON messages after the metadata change event.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD515"></a>
<div class="props_rev_3"><a id="GUID-FAADA8EB-63FD-4AFF-B3B2-882F1209A3A2"></a>
<h3 id="GADBD-GUID-FAADA8EB-63FD-4AFF-B3B2-882F1209A3A2" class="sect3"><span class="enumeration_section">9.3.9</span> JSON Primary Key Updates</h3>
<div>
<div class="section">
<p>When the JSON formatter is configured to model operation data, the primary key updates require no special treatment and are treated like any other update.. The before and after values reflect the change in the primary key.</p>
<p>When the JSON formatter is configured to model row data, the primary key updates are a concern. The default behavior is to abend. You can configure the JSON formatter to model row data using the <code>gg.handler.name.format.pkUpdateHandling</code> configuration property to treat primary key updates as either a regular update, or as delete and then insert operations. If configured to operate as a delete and insert operations, Oracle recommends that you configure your replication stream to contain the complete before and after image data for updates. Otherwise, the generated insert operation for a primary key update will be missing data for fields that did not change.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-93554EC3-3510-413D-8B3C-B88F7C08F0EC"></a>
<h3 id="GADBD-GUID-93554EC3-3510-413D-8B3C-B88F7C08F0EC" class="sect3"><span class="enumeration_section">9.3.10</span> Integrating Oracle Stream Analytics</h3>
<div>
<div class="section">
<p>You can integrate Oracle GoldenGate for Big Data with Oracle Stream Analytics (OSA) by sending operation modelled JSON messages to the Kafka Handler. This only works when the JSON formatter is configured to output operation modelled JSON messages.</p>
<p>OSA requires flattened JSON objects so a new feature was added to the JSON formatter generate flattened JSONs. You can use this feature by setting the JSON formatter property, <code>gg.handler.<span class="codeinlineitalic">name</span>.format.flatten=false</code> to <code>true</code>; <code>false</code> is the default. Following is an example of a flattened JSON file:</p>
<pre dir="ltr">
{
    "table":"QASOURCE.TCUSTMER",
    "op_type":"U",
    "op_ts":"2015-11-05 18:45:39.000000",
    "current_ts":"2016-06-22T13:38:45.335001",
    "pos":"00000000000000005100",
    "before.CUST_CODE":"ANN",
    "before.NAME":"ANN'S BOATS",
    "before.CITY":"SEATTLE",
    "before.STATE":"WA",
    "after.CUST_CODE":"ANN",
    "after.CITY":"NEW YORK",
    "after.STATE":"NY"
}
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2"></a>
<h2 id="GADBD-GUID-2E9B70EF-4ACC-4B7C-9836-B4B0271359D2" class="sect2"><span class="enumeration_section">9.4</span> Avro Formatter</h2>
<div>
<div class="section">
<p>Apache Avro is an open source data serialization and deserialization framework known for its flexibility, compactness of serialized data, and good serialization and deserialization performance. Apache Avro is commonly used in Big Data applications.</p>
<p><span class="bold">Topics:</span></p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5">Avro Row Formatter</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-D77D819B-FDA2-4348-9899-711B50302F96">Avro Operation Formatter</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-87FC20F6-E23C-442C-BC99-24311B0BE406">Avro Object Container File Formatter</a></strong><br /></li>
</ul>
</div>
<a id="GADBD516"></a>
<div class="props_rev_3"><a id="GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5"></a>
<h3 id="GADBD-GUID-3282CC22-92E8-4637-AD8D-E5E3F48BE9F5" class="sect3"><span class="enumeration_section">9.4.1</span> Avro Row Formatter</h3>
<div>
<div class="section">
<p>The Avro Row Formatter formats operation data from the source trail file into messages in an Avro binary array format. Each individual insert, update, delete, and truncate operation is formatted into an individual Avro message. The source trail file contains the before and after images of the operation data. The Avro Row Formatter takes that before and after image data and formats the data into an Avro binary representation of the operation data.</p>
<p>The Avro Row Formatter formats operations from the source trail file into a format that represents the row data. This format is more compact than the output from the Avro Operation Formatter for that the Avro messages model the change data operation.</p>
<p>The Avro Row Formatter may be a good choice when streaming Avro data to HDFS. Hive supports data files in HDFS in an Avro format.</p>
<p>This section contains the following topics:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-466CFF40-8EF4-4CC2-A860-A27BB2C3F3D7">Operation Metadata Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-3FDA8982-8146-4663-8CFF-AA1144F174C0">Operation Data Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC">Sample Avro Row Messages</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-A97788B6-FEA1-4586-8E86-18B298340D3C">Avro Schemas</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-2345E761-DA5D-4214-9C8C-80C4E70B9AC1">Avro Row Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-5AB2D030-A209-4CD3-A6B6-37355FF1612B">Sample Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-54A079BF-B672-47B2-9F11-A6F734C7563B">Metadata Change Events</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-7E290838-F287-453C-AB55-EAF41930CD81">Special Considerations</a></strong><br /></li>
</ul>
</div>
<a id="GADBD519"></a><a id="GADBD518"></a>
<div class="props_rev_3"><a id="GUID-466CFF40-8EF4-4CC2-A860-A27BB2C3F3D7"></a>
<h4 id="GADBD-GUID-466CFF40-8EF4-4CC2-A860-A27BB2C3F3D7" class="sect4"><span class="enumeration_section">9.4.1.1</span> Operation Metadata Formatting Details</h4>
<div>
<div class="section">
<p>Avro messages generated by the Avro Row Formatter contain the following seven metadata fields that begin the message:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-466CFF40-8EF4-4CC2-A860-A27BB2C3F3D7__GUID-26618B89-8EF0-4EBF-AC29-4DB77F3BED09">
<p class="titleintable">Table 9-5 Avro Formatter Metadata</p>
<table class="cellalignment52" title="Avro Formatter Metadata" summary="This two column table lists the Avro formatter metadata">
<thead align="left">
<tr>
<th class="cellalignment74" id="d24646e2702">Value</th>
<th class="cellalignment75" id="d24646e2705">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment74" id="d24646e2710" headers="d24646e2702">
<p><code>table</code></p>
</td>
<td class="cellalignment75" headers="d24646e2710 d24646e2705">
<p>The fully qualified table name. The format of the fully qualified table name is: <span class="italic"><code>CATALOG_NAME.SCHEMA_NAME.TABLE_NAME</code></span></p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e2722" headers="d24646e2702">
<p><code>op_type</code></p>
</td>
<td class="cellalignment75" headers="d24646e2722 d24646e2705">
<p>The operation type that is the indicator of the type of database operation from the source trail file. Default values are <code>I</code> for insert, <code>U</code> for update, <code>D</code> for delete, and <code>T</code> for truncate.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e2742" headers="d24646e2702">
<p><code>op_ts</code></p>
</td>
<td class="cellalignment75" headers="d24646e2742 d24646e2705">
<p>The operation timestamp is the timestamp of the operation from the source trail file. Since this timestamp is from the source trail it is fixed. Replaying the trail file results in the same timestamp for the same operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e2750" headers="d24646e2702">
<p><code>current_ts</code></p>
</td>
<td class="cellalignment75" headers="d24646e2750 d24646e2705">
<p>The current timestamp is the current time when the formatter processed the current operation record. This timestamp follows the ISO-8601 format and includes microsecond precision. Replaying the trail file will <span class="italic">not</span> result in the same timestamp for the same operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e2761" headers="d24646e2702">
<p><code>pos</code></p>
</td>
<td class="cellalignment75" headers="d24646e2761 d24646e2705">
<p>The trail file position is the concatenated sequence number and rba number from the source trail file. The trail position provides traceability of the operation back to the source trail file. The sequence number is the source trail file number. The rba number is the offset in the trail file.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e2769" headers="d24646e2702">
<p><code>primary_keys</code></p>
</td>
<td class="cellalignment75" headers="d24646e2769 d24646e2705">
<p>An array variable holding the column names of the primary keys of the source table.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e2777" headers="d24646e2702">
<p><code>tokens</code></p>
</td>
<td class="cellalignment75" headers="d24646e2777 d24646e2705">
<p>A map variable holding the token key value pairs from the source trail file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD520"></a>
<div class="props_rev_3"><a id="GUID-3FDA8982-8146-4663-8CFF-AA1144F174C0"></a>
<h4 id="GADBD-GUID-3FDA8982-8146-4663-8CFF-AA1144F174C0" class="sect4"><span class="enumeration_section">9.4.1.2</span> Operation Data Formatting Details</h4>
<div>
<div class="section">
<p>The data following the operation metadata is the operation data. This data is represented as individual fields identified by the column names.</p>
<p>Column values for an operation from the source trail file can have one of three states: column has a value, column value is NULL, or column value is missing. Avro attributes only support two states, column has a value or column value is NULL. Missing column values will be treated the same as NULL values. Oracle recommends that when using the Avro Row Formatter, you configure the Oracle GoldenGate capture process to provide full image data for all columns in the source trail file.</p>
<p>The default setting of the Avro Row Formatter is to map the data types from the source trail file to the associated Avro data type. Avro provides limited support for data types so source columns map into Avro long, double, float, binary, or string data types. This data type mapping is configurable to alternatively treat all data as strings.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD521"></a>
<div class="props_rev_3"><a id="GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC"></a>
<h4 id="GADBD-GUID-DA3D0062-E28C-4090-B1AB-DFA6D73FEFAC" class="sect4"><span class="enumeration_section">9.4.1.3</span> Sample Avro Row Messages</h4>
<div>
<div class="section">
<p>Avro messages are binary so not human readable. The following topics are sample messages and the JSON representation of the messages are displayed in them.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-77685BA1-15DA-46DE-A375-23CFAA162760">Sample Insert Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-7092DFEC-37B2-4A32-A881-7FEAF13790FB">Sample Update Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-37630F6F-1295-4E08-A695-119F7D5B5AD8">Sample Delete Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-5AA0CC47-A24F-4D38-A223-73BC59A93F7F">Sample Truncate Message</a></strong><br /></li>
</ul>
</div>
<a id="GADBD522"></a>
<div class="props_rev_3"><a id="GUID-77685BA1-15DA-46DE-A375-23CFAA162760"></a>
<h5 id="GADBD-GUID-77685BA1-15DA-46DE-A375-23CFAA162760" class="sect5"><span class="enumeration_section">9.4.1.3.1</span> Sample Insert Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "I", 
"op_ts": "2013-06-02 22:14:36.000000", 
"current_ts": "2015-09-18T10:13:11.172000", 
"pos": "00000000000000001444", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], 
"tokens": {"R": "AADPkvAAEAAEqL2AAA"}, 
"CUST_CODE": "WILL", 
"ORDER_DATE": "1994-09-30:15:33:00", 
"PRODUCT_CODE": "CAR", 
"ORDER_ID": "144", 
"PRODUCT_PRICE": 17520.0, 
"PRODUCT_AMOUNT": 3.0, 
"TRANSACTION_ID": "100"}
</pre></div>
</div>
<a id="GADBD523"></a>
<div class="props_rev_3"><a id="GUID-7092DFEC-37B2-4A32-A881-7FEAF13790FB"></a>
<h5 id="GADBD-GUID-7092DFEC-37B2-4A32-A881-7FEAF13790FB" class="sect5"><span class="enumeration_section">9.4.1.3.2</span> Sample Update Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "U", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:13:11.492000", 
"pos": "00000000000000002891", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqLzAAA"}, 
"CUST_CODE": "BILL", 
"ORDER_DATE": "1995-12-31:15:00:00", 
"PRODUCT_CODE": "CAR", 
"ORDER_ID": "765", 
"PRODUCT_PRICE": 14000.0, 
"PRODUCT_AMOUNT": 3.0, 
"TRANSACTION_ID": "100"}
</pre></div>
</div>
<a id="GADBD524"></a>
<div class="props_rev_3"><a id="GUID-37630F6F-1295-4E08-A695-119F7D5B5AD8"></a>
<h5 id="GADBD-GUID-37630F6F-1295-4E08-A695-119F7D5B5AD8" class="sect5"><span class="enumeration_section">9.4.1.3.3</span> Sample Delete Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD",
"op_type": "D", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:13:11.512000", 
"pos": "00000000000000004338", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"L": "206080450", "6": "9.0.80330", "R": "AADPkvAAEAAEqLzAAC"}, "CUST_CODE":
 "DAVE", 
"ORDER_DATE": "1993-11-03:07:51:35", 
"PRODUCT_CODE": "PLANE", 
"ORDER_ID": "600", 
"PRODUCT_PRICE": null, 
"PRODUCT_AMOUNT": null, 
"TRANSACTION_ID": null}
</pre></div>
</div>
<a id="GADBD525"></a>
<div class="props_rev_3"><a id="GUID-5AA0CC47-A24F-4D38-A223-73BC59A93F7F"></a>
<h5 id="GADBD-GUID-5AA0CC47-A24F-4D38-A223-73BC59A93F7F" class="sect5"><span class="enumeration_section">9.4.1.3.4</span> Sample Truncate Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "T", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:13:11.514000", 
"pos": "00000000000000004515", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqL2AAB"}, 
"CUST_CODE": null, 
"ORDER_DATE": null, 
"PRODUCT_CODE": null, 
"ORDER_ID": null, 
"PRODUCT_PRICE": null, 
"PRODUCT_AMOUNT": null, 
"TRANSACTION_ID": null}
</pre></div>
</div>
</div>
<a id="GADBD526"></a>
<div class="props_rev_3"><a id="GUID-A97788B6-FEA1-4586-8E86-18B298340D3C"></a>
<h4 id="GADBD-GUID-A97788B6-FEA1-4586-8E86-18B298340D3C" class="sect4"><span class="enumeration_section">9.4.1.4</span> Avro Schemas</h4>
<div>
<div class="section">
<p>Avro uses JSONs to represent schemas. Avro schemas define the format of generated Avro messages and are required to serialize and deserialize Avro messages. Schemas are generated on a just in time basis when the first operation for a table is encountered. Generated Avro schemas are specific to a table definition that means that a separate Avro schema is generated for every table encountered for processed operations. By default, Avro schemas are written to the <span class="italic"><code>GoldenGate_Home</code></span><code>/dirdef</code> directory although the write location is configurable. Avro schema file names adhere to the following naming convention: <span class="italic"><code>Fully_Qualified_Table_Name</code></span><code>.avsc</code>.</p>
<p>The following is a sample Avro schema for the Avro Row Format for the previous references examples:</p>
<pre dir="ltr">
{
  "type" : "record",
  "name" : "TCUSTORD",
  "namespace" : "GG",
  "fields" : [ {
    "name" : "table",
    "type" : "string"
  }, {
    "name" : "op_type",
    "type" : "string"
  }, {
    "name" : "op_ts",
    "type" : "string"
  }, {
    "name" : "current_ts",
    "type" : "string"
  }, {
    "name" : "pos",
    "type" : "string"
  }, {
    "name" : "primary_keys",
    "type" : {
      "type" : "array",
      "items" : "string"
    }
  }, {
    "name" : "tokens",
    "type" : {
      "type" : "map",
      "values" : "string"
    },
    "default" : { }
  }, {
    "name" : "CUST_CODE",
    "type" : [ "null", "string" ],
    "default" : null
  }, {
    "name" : "ORDER_DATE",
    "type" : [ "null", "string" ],
    "default" : null
  }, {
    "name" : "PRODUCT_CODE",
    "type" : [ "null", "string" ],
    "default" : null
  }, {
    "name" : "ORDER_ID",
    "type" : [ "null", "string" ],
    "default" : null
  }, {
    "name" : "PRODUCT_PRICE",
    "type" : [ "null", "double" ],
    "default" : null
  }, {
    "name" : "PRODUCT_AMOUNT",
    "type" : [ "null", "double" ],
    "default" : null
  }, {
    "name" : "TRANSACTION_ID",
    "type" : [ "null", "string" ],
    "default" : null
  } ]
}
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD528"></a><a id="GADBD527"></a>
<div class="props_rev_3"><a id="GUID-2345E761-DA5D-4214-9C8C-80C4E70B9AC1"></a>
<h4 id="GADBD-GUID-2345E761-DA5D-4214-9C8C-80C4E70B9AC1" class="sect4"><span class="enumeration_section">9.4.1.5</span> Avro Row Configuration</h4>
<div>
<div class="tblformal" id="GUID-2345E761-DA5D-4214-9C8C-80C4E70B9AC1__GUID-9F43C7C7-284C-452C-9283-8E7A2AD72E46">
<p class="titleintable">Table 9-6 Avro Row Configuration Options</p>
<table class="cellalignment52" title="Avro Row Configuration Options" summary="This five column table lists the Avro Row configuration properties.">
<thead align="left">
<tr>
<th class="cellalignment79" id="d24646e2994">Properties</th>
<th class="cellalignment80" id="d24646e2997">Optional/ Required</th>
<th class="cellalignment57" id="d24646e3000">Legal Values</th>
<th class="cellalignment81" id="d24646e3003">Default</th>
<th class="cellalignment82" id="d24646e3006">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment79" id="d24646e3011" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.insertOpKey</code></p>
</td>
<td class="cellalignment80" headers="d24646e3011 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3011 d24646e3000">
<p>Any string</p>
</td>
<td class="cellalignment81" headers="d24646e3011 d24646e3003">
<p><code>I</code></p>
</td>
<td class="cellalignment82" headers="d24646e3011 d24646e3006">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3034" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.updateOpKey</code></p>
</td>
<td class="cellalignment80" headers="d24646e3034 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3034 d24646e3000">
<p>Any string</p>
</td>
<td class="cellalignment81" headers="d24646e3034 d24646e3003">
<p><code>U</code></p>
</td>
<td class="cellalignment82" headers="d24646e3034 d24646e3006">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3057" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.deleteOpKey</code></p>
</td>
<td class="cellalignment80" headers="d24646e3057 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3057 d24646e3000">
<p>Any string</p>
</td>
<td class="cellalignment81" headers="d24646e3057 d24646e3003">
<p><code>D</code></p>
</td>
<td class="cellalignment82" headers="d24646e3057 d24646e3006">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3080" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.truncateOpKey</code></p>
</td>
<td class="cellalignment80" headers="d24646e3080 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3080 d24646e3000">
<p>Any string</p>
</td>
<td class="cellalignment81" headers="d24646e3080 d24646e3003">
<p><code>T</code></p>
</td>
<td class="cellalignment82" headers="d24646e3080 d24646e3006">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3103" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.encoding</code></p>
</td>
<td class="cellalignment80" headers="d24646e3103 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3103 d24646e3000">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment81" headers="d24646e3103 d24646e3003">
<p>UTF-8 (the JSON default)</p>
</td>
<td class="cellalignment82" headers="d24646e3103 d24646e3006">
<p>Controls the output encoding of generated Avro schema that is a JSON. The JSON default is UTF-8. Avro messages are binary and support their own internal representation of encoding.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3125" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.treatAllColumnsAsStrings</code></p>
</td>
<td class="cellalignment80" headers="d24646e3125 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3125 d24646e3000">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment81" headers="d24646e3125 d24646e3003">
<p><code>false</code></p>
</td>
<td class="cellalignment82" headers="d24646e3125 d24646e3006">
<p>Controls the output typing of generated Avro messages. If set to false then the formatter will attempt to map Oracle GoldenGate types to the corresponding AVRO type. If set to true then all data will be treated as Strings in the generated Avro messages and schemas.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3152" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.pkUpdateHandlingformat.pkUpdateHandling</code></p>
</td>
<td class="cellalignment80" headers="d24646e3152 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3152 d24646e3000">
<p><code>abend</code> | <code>update</code> | <code>delete-insert</code></p>
</td>
<td class="cellalignment81" headers="d24646e3152 d24646e3003">
<p><code>abend</code></p>
</td>
<td class="cellalignment82" headers="d24646e3152 d24646e3006">
<p>Provides configuration for how the formatter should handle update operations that change a primary key. Primary key operations can be problematic for the Avro Row formatter and require special consideration by you.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>abend</code> - indicates the process will abend.</p>
</li>
<li>
<p><code>update</code> - indicates the process will treat this as a normal update.</p>
</li>
<li>
<p><code>delete</code> or <code>insert</code> - indicates the process will treat this as a delete and an insert. Full supplemental logging needs to be enabled for this to work. Without full before and after row images the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3201" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.lineDelimiter</code></p>
</td>
<td class="cellalignment80" headers="d24646e3201 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3201 d24646e3000">
<p>Any string</p>
</td>
<td class="cellalignment81" headers="d24646e3201 d24646e3003">
<p>no value</p>
</td>
<td class="cellalignment82" headers="d24646e3201 d24646e3006">
<p>Optionally allows a user to insert a delimiter after each Avro message. This is not considered the best practice but in certain use cases customers may wish to parse a stream of data and extract individual Avro messages from the stream. This property allows the customer that option. Select a unique delimiter that cannot occur in any Avro message. This property supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3226" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.versionSchemas</code></p>
</td>
<td class="cellalignment80" headers="d24646e3226 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3226 d24646e3000">
<p><code>true</code>|<code>false</code></p>
</td>
<td class="cellalignment81" headers="d24646e3226 d24646e3003">
<p><code>false</code></p>
</td>
<td class="cellalignment82" headers="d24646e3226 d24646e3006">
<p>The created Avro schemas always follow the convention<span class="italic"><code>fully_qualified_table_name</code></span><code>.avsc</code>. Setting this property to <code>true</code> creates an additional Avro schema in the schema directory named <span class="italic"><code>fully_qualified_table_name</code></span><code>_</code><span class="italic"><code>current_timestamp</code></span><code>.avsc</code>. The additional Avro schema does not get destroyed or removed and thereby provides a history of schema evolution.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3273" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.wrapMessageInGenericAvroSchema</code></p>
</td>
<td class="cellalignment80" headers="d24646e3273 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3273 d24646e3000">
<p><code>true</code>|<code>false</code></p>
</td>
<td class="cellalignment81" headers="d24646e3273 d24646e3003">
<p><code>false</code></p>
</td>
<td class="cellalignment82" headers="d24646e3273 d24646e3006">
<p>Provides functionality to wrap the Avro messages for operations from the source trail file in a generic Avro wrapper message. For more information, see <a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-24CC9E72-20A4-478E-8503-9777B9029A9B">Generic Wrapper Functionality</a>.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3303" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.schemaDirectory</code></p>
</td>
<td class="cellalignment80" headers="d24646e3303 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3303 d24646e3000">
<p>Any legal, existing file system path.</p>
</td>
<td class="cellalignment81" headers="d24646e3303 d24646e3003">
<p><code>./dirdef</code></p>
</td>
<td class="cellalignment82" headers="d24646e3303 d24646e3006">
<p>Controls the output location of generated Avro schemas.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3327" headers="d24646e2994">
<p><code>gg.handler.</code><span class="italic"><code>name</code></span><code>.schemaFilePath=</code></p>
</td>
<td class="cellalignment80" headers="d24646e3327 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3327 d24646e3000">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment81" headers="d24646e3327 d24646e3003">
<p><code>./dirdef</code></p>
</td>
<td class="cellalignment82" headers="d24646e3327 d24646e3006">
<p>Controls the configuration property to a file directory inside of HDFS where you want schemas to be output. A metadata change event causes the schema to be overwritten when the next operation for the associated table is encountered. Schemas follow the same naming convention as schemas written to the local file system, <code><span class="codeinlineitalic">catalog.schema.table</span></code><code>.avsc</code>.</p>
</td>
</tr>
<tr>
<td class="cellalignment79" id="d24646e3356" headers="d24646e2994">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment80" headers="d24646e3356 d24646e2997">
<p>Optional</p>
</td>
<td class="cellalignment57" headers="d24646e3356 d24646e3000">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment81" headers="d24646e3356 d24646e3003">
<p><code>true</code></p>
</td>
<td class="cellalignment82" headers="d24646e3356 d24646e3006">Controls the format of the current timestamp. The default is the &nbsp;ISO 8601 format. Set to <code>false</code> removes the <code>T</code> between the date and time in the current timestamp, which outputs a space instead.</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD529"></a>
<div class="props_rev_3"><a id="GUID-5AB2D030-A209-4CD3-A6B6-37355FF1612B"></a>
<h4 id="GADBD-GUID-5AB2D030-A209-4CD3-A6B6-37355FF1612B" class="sect4"><span class="enumeration_section">9.4.1.6</span> Sample Configuration</h4>
<div>
<div class="section">
<p>The following is sample configuration for the Avro Row Formatter from the Java Adapter properties file:</p>
<pre dir="ltr">
gg.handler.hdfs.format=avro_row
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.encoding=UTF-8
gg.handler.hdfs.format.pkUpdateHandling=abend
gg.handler.hafs.format.wrapMessageInGenericAvroMessage=false
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD530"></a>
<div class="props_rev_3"><a id="GUID-54A079BF-B672-47B2-9F11-A6F734C7563B"></a>
<h4 id="GADBD-GUID-54A079BF-B672-47B2-9F11-A6F734C7563B" class="sect4"><span class="enumeration_section">9.4.1.7</span> Metadata Change Events</h4>
<div>
<div class="section">
<p>The Avro Row Formatter is capable of taking action in the case of a metadata change event. This assumes that the replicated database and upstream Oracle GoldenGate replication process can propagate metadata change events. Metadata change events are of particular importance when formatting using Avro due to the tight dependency of Avro messages to its corresponding schema.</p>
<p>Metadata change events are handled seamlessly by the Avro Row Formatter and an updated Avro schema will be generated upon the first encounter of an operation of that table after the metadata change event. You should understand the impact of a metadata change event and change downstream targets to the new Avro schema. The tight dependency of Avro messages to Avro schemas may result in compatibility issues. Avro messages generated before the schema change may not be able to be deserialized with the newly generated Avro schema.</p>
<p>Conversely, Avro messages generated after the schema change may not be able to be deserialized with the previous Avro schema. It is a best practice to use the same version of the Avro schema that was used to generate the message. Consult the Apache Avro documentation for more details.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD531"></a>
<div class="props_rev_3"><a id="GUID-7E290838-F287-453C-AB55-EAF41930CD81"></a>
<h4 id="GADBD-GUID-7E290838-F287-453C-AB55-EAF41930CD81" class="sect4"><span class="enumeration_section">9.4.1.8</span> Special Considerations</h4>
<div>
<div class="section">
<p>This sections describes these special considerations:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-823DADB3-ED30-414B-8F73-816DE6624CC0">Troubleshooting</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-0DB9EC9C-C060-4AEE-A60C-4251AFFFA99C">Primary Key Updates</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-24CC9E72-20A4-478E-8503-9777B9029A9B">Generic Wrapper Functionality</a></strong><br /></li>
</ul>
</div>
<a id="GADBD532"></a>
<div class="sect5"><a id="GUID-823DADB3-ED30-414B-8F73-816DE6624CC0"></a>
<h5 id="GADBD-GUID-823DADB3-ED30-414B-8F73-816DE6624CC0" class="sect5"><span class="enumeration_section">9.4.1.8.1</span> Troubleshooting</h5>
<div>
<p>Avro is a binary format so is not human readable. Since Avro messages are in binary format, it is difficult to debug any issue so the Avro Row Formatter provides a special feature to mitigate this issue. When the <code>log4j</code> Java logging level is set to <code>TRACE</code> the created Avro messages are deserialized and displayed in the log file as a JSON object. This allows you to view the structure and contents of the created Avro messages. <code>TRACE</code> should never be enabled in a production environment as it has substantial negative impact on performance. Alternatively, you may want to consider switching to use a formatter that produces human readable content for content troubleshooting. The XML or JSON formatters both produce content in human readable format that may facilitate troubleshooting.</p>
</div>
</div>
<a id="GADBD534"></a><a id="GADBD533"></a>
<div class="sect5"><a id="GUID-0DB9EC9C-C060-4AEE-A60C-4251AFFFA99C"></a>
<h5 id="GADBD-GUID-0DB9EC9C-C060-4AEE-A60C-4251AFFFA99C" class="sect5"><span class="enumeration_section">9.4.1.8.2</span> Primary Key Updates</h5>
<div>
<p>Primary key update operations require special consideration and planning for Big Data integrations. Primary key updates are update operations that modify one or more of the primary keys for the given row from the source database. Since data is simply appended in Big Data applications, a primary key update operation looks more like a new insert than an update without any special handling. The Avro Row Formatter provides specialized handling for primary keys that is configurable by you as follows:</p>
<div class="tblformal" id="GUID-0DB9EC9C-C060-4AEE-A60C-4251AFFFA99C__GUID-5114468F-E637-4CB0-8C5B-1FCFBF6F4400">
<p class="titleintable">Table 9-7 Configurable behavior</p>
<table class="cellalignment52" title="Configurable behavior" summary="This two column table lists the configurable behavior for Avro Row Formatter">
<thead align="left">
<tr>
<th class="cellalignment74" id="d24646e3529">Value</th>
<th class="cellalignment75" id="d24646e3532">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment74" id="d24646e3537" headers="d24646e3529">
<p><code>abend</code></p>
</td>
<td class="cellalignment75" headers="d24646e3537 d24646e3532">
<p>The default behavior is that the delimited text formatter abends with a primary key update.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e3545" headers="d24646e3529">
<p><code>update</code></p>
</td>
<td class="cellalignment75" headers="d24646e3545 d24646e3532">
<p>With this configuration the primary key update will be treated just like any other update operation. This configuration alternative should only be selected if you can guarantee that the primary key that is being changed is not being used as the selection criteria when selecting row data from a Big Data system.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e3553" headers="d24646e3529">
<p><code>delete-insert</code></p>
</td>
<td class="cellalignment75" headers="d24646e3553 d24646e3532">
<p>Using this configuration the primary key update is treated as a special case of a delete using the before image data and an insert using the after image data. This configuration may more accurately model the effect of a primary key update in a Big Data application. However, if this configuration is selected it is important to have full supplemental logging enabled on Replication at the source database. Without full supplemental logging the delete operation will be correct, however, the insert operation will not contain all of the data for all of the columns for a full representation of the row data in the Big Data application.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD535"></a>
<div class="sect5"><a id="GUID-24CC9E72-20A4-478E-8503-9777B9029A9B"></a>
<h5 id="GADBD-GUID-24CC9E72-20A4-478E-8503-9777B9029A9B" class="sect5"><span class="enumeration_section">9.4.1.8.3</span> Generic Wrapper Functionality</h5>
<div>
<p>Avro messages are not self describing, which means that the receiver of the message must know the schema associated with the message before the message can be deserialized. Avro messages are binary and provide no consistent or reliable way to inspect the message contents in order to ascertain the message type. Therefore, Avro can be especially troublesome when messages are interlaced into a single stream of data like Kafka.</p>
<p>The Avro formatter provides a special feature to wrap the Avro message in a generic Avro message. This functionality is enabled by setting the following configuration property.</p>
<pre dir="ltr">
gg.handler.<span class="italic">name</span>.format.wrapMessageInGenericAvroMessage=true
</pre>
<p>The generic message is Avro message wrapping the Avro payload message that is common to all Avro messages that are output. The schema for the generic message is name <code>generic_wrapper.avsc</code> and is written to the output schema directory. This message has the following three fields.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>table_name</code> - The fully qualified source table name.</p>
</li>
<li>
<p><code>schema_fingerprint</code> - The fingerprint of the Avro schema of the wrapped message. The fingerprint is generated using the Avro <code>SchemaNormalization.parsingFingerprint64(schema)</code> call.</p>
</li>
<li>
<p><code>payload</code> - The wrapped Avro message.</p>
</li>
</ul>
<p>The following is the Avro Formatter generic wrapper schema.</p>
<pre dir="ltr">
{
  "type" : "record",
  "name" : "generic_wrapper",
  "namespace" : "oracle.goldengate",
  "fields" : [ {
    "name" : "table_name",
    "type" : "string"
  }, {
    "name" : "schema_fingerprint",
    "type" : "long"
  }, {
    "name" : "payload",
    "type" : "bytes"
  } ]
}
</pre></div>
</div>
</div>
</div>
<a id="GADBD536"></a>
<div class="props_rev_3"><a id="GUID-D77D819B-FDA2-4348-9899-711B50302F96"></a>
<h3 id="GADBD-GUID-D77D819B-FDA2-4348-9899-711B50302F96" class="sect3"><span class="enumeration_section">9.4.2</span> Avro Operation Formatter</h3>
<div>
<div class="section">
<p>The Avro Operation Formatter formats operation data from the source trail file into messages in an Avro binary array format. Each individual insert, update, delete, and truncate operation will be formatted into an individual Avro message. The source trail file will contain the before and after images of the operation data. The Avro Operation Formatter takes that before and after image data and formats the data into an Avro binary representation of the operation data.</p>
<p>The Avro Operation Formatter formats operations from the source trail file into a format that represents the operation data. This format is more verbose than the output from the Avro Row Formatter for which the Avro messages model the row data.</p>
<p>This section contains the following topics:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-B4F1C3BC-6B95-4184-B98F-CCF2AD2BC3D2">Operation Metadata Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-EECE0A95-2A5A-4154-A1B7-72D59909AC87">Operation Data Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5">Sample Avro Operation Messages</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-7D8D519D-7358-46D8-AABB-AE7487498394">Avro Schema</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-98614A46-1E3F-4003-A965-5B3CA6F27668">Avro Operation Formatter Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-2993BB83-4F79-4835-A40D-E53C52CD18AD">Sample Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-A314CBB0-AA5F-4141-A74A-DABE57106A9E">Metadata Change Events</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565">Special Considerations</a></strong><br /></li>
</ul>
</div>
<a id="GADBD539"></a><a id="GADBD538"></a>
<div class="props_rev_3"><a id="GUID-B4F1C3BC-6B95-4184-B98F-CCF2AD2BC3D2"></a>
<h4 id="GADBD-GUID-B4F1C3BC-6B95-4184-B98F-CCF2AD2BC3D2" class="sect4"><span class="enumeration_section">9.4.2.1</span> Operation Metadata Formatting Details</h4>
<div>
<p>Avro messages, generated by the Avro Operation Formatter, contain the following metadata fields that begin the message:</p>
<div class="tblformal" id="GUID-B4F1C3BC-6B95-4184-B98F-CCF2AD2BC3D2__GUID-6B772FE4-0C97-4F3F-8039-C480AD1C4168">
<p class="titleintable">Table 9-8 Avro Messages and its Metadata</p>
<table class="cellalignment52" title="Avro Messages and its Metadata " summary="This two column table lists the Avro Messages and its Metadata">
<thead align="left">
<tr>
<th class="cellalignment83" id="d24646e3718">Fields</th>
<th class="cellalignment84" id="d24646e3721">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment83" id="d24646e3726" headers="d24646e3718">
<p><code>table</code></p>
</td>
<td class="cellalignment84" headers="d24646e3726 d24646e3721">
<p><span class="italic"><code>CATALOG_NAME.SCHEMA NAME.TABLE NAME</code></span>The fully qualified table name. The format of the fully qualified table name is the following:</p>
</td>
</tr>
<tr>
<td class="cellalignment83" id="d24646e3737" headers="d24646e3718">
<p><code>op_type</code></p>
</td>
<td class="cellalignment84" headers="d24646e3737 d24646e3721">
<p>The operation type that is the indicator of the type of database operation from the source trail file. Default values are <code>I</code>for insert, <code>U</code>for update, <code>D</code>for delete, and <code>T</code>for truncate.</p>
</td>
</tr>
<tr>
<td class="cellalignment83" id="d24646e3757" headers="d24646e3718">
<p><code>op_ts</code></p>
</td>
<td class="cellalignment84" headers="d24646e3757 d24646e3721">
<p>The operation timestamp is the timestamp of the operation from the source trail file. Since this timestamp is from the source trail, it is fixed. Replaying the trail file results in the same timestamp for the same operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment83" id="d24646e3765" headers="d24646e3718">
<p><code>current_ts</code></p>
</td>
<td class="cellalignment84" headers="d24646e3765 d24646e3721">
<p>The current timestamp is the current time when the formatter processed the current operation record. This timestamp follows the ISO-8601 format and includes microsecond precision. Replaying the trail file will <span class="italic">not</span> result in the same timestamp for the same operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment83" id="d24646e3777" headers="d24646e3718">
<p><code>pos</code></p>
</td>
<td class="cellalignment84" headers="d24646e3777 d24646e3721">
<p>The trail file position with is the concatenated sequence number and rba number from the source trail file. The trail position provides traceability of the operation back to the source trail file. The sequence number is the source trail file number. The rba number is the offset in the trail file.</p>
</td>
</tr>
<tr>
<td class="cellalignment83" id="d24646e3785" headers="d24646e3718">
<p><code>primary_keys</code></p>
</td>
<td class="cellalignment84" headers="d24646e3785 d24646e3721">
<p>An array variable holding the column names of the primary keys of the source table.</p>
</td>
</tr>
<tr>
<td class="cellalignment83" id="d24646e3793" headers="d24646e3718">
<p><code>tokens</code></p>
</td>
<td class="cellalignment84" headers="d24646e3793 d24646e3721">
<p>A map variable holding the token key value pairs from the source trail file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD540"></a>
<div class="props_rev_3"><a id="GUID-EECE0A95-2A5A-4154-A1B7-72D59909AC87"></a>
<h4 id="GADBD-GUID-EECE0A95-2A5A-4154-A1B7-72D59909AC87" class="sect4"><span class="enumeration_section">9.4.2.2</span> Operation Data Formatting Details</h4>
<div>
<p>The operation data is represented as individual fields identified by the column names.</p>
<p>Column values for an operation from the source trail file can have one of three states: column has a value, column value is NULL, or column value is missing. Avro attributes only support two states, column has a value or column value is NULL. The Avro Operation Formatter contains an additional Boolean field for each column as a special indicator if the column value is missing or not. This Boolean field is named, <span class="italic"><code>COLUMN_NAME</code></span><code>_isMissing</code>. Using the combination of the <span class="italic"><code>COLUMN_NAME</code></span> field, all three states can be defined.</p>
<ul style="list-style-type: disc;">
<li>
<p>State 1: Column has a value</p>
<p><span class="italic"><code>COLUMN_NAME</code></span> field has a value</p>
<p><span class="italic"><code>COLUMN_NAME</code></span><code>_isMissing</code> field is false</p>
</li>
<li>
<p>State 2: Column value is NULL</p>
<p><span class="italic"><code>COLUMN_NAME</code></span> field value is NULL</p>
<p><span class="italic"><code>COLUMN_NAME</code></span><code>_isMissing</code> field is false</p>
</li>
<li>
<p>State 3: Column value is missing</p>
<p><span class="italic"><code>COLUMN_NAME</code></span> field value is NULL</p>
<p><span class="italic"><code>COLUMN_NAME</code></span><code>_isMissing</code> field is true</p>
</li>
</ul>
<p>The default setting of the Avro Row Formatter is to map the data types from the source trail file to the associated Avro data type. Avro supports few data types so this functionality largely results in the mapping of numeric fields from the source trail file to members typed as numbers. This data type mapping is configurable to alternatively treat all data as strings.</p>
</div>
</div>
<a id="GADBD541"></a>
<div class="props_rev_3"><a id="GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5"></a>
<h4 id="GADBD-GUID-008821C9-4F2D-435A-A1E8-7BF05248FCF5" class="sect4"><span class="enumeration_section">9.4.2.3</span> Sample Avro Operation Messages</h4>
<div>
<div class="section">
<p>Avro messages are binary and therefore not human readable. The following topics are sample messages the JSON representation of the messages displayed:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-410F0B9F-B1AB-4C3A-AB64-8591A30A21C3">Sample Insert Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-FC3BB6A5-9083-489C-8533-A8EB4AB25624">Sample Update Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-75AF4E0C-5C56-4B9B-AF25-F3E3E858BEC7">Sample Delete Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-FD998BB6-9992-413C-965E-2BC1510AEC3E">Sample Truncate Message</a></strong><br /></li>
</ul>
</div>
<a id="GADBD542"></a>
<div class="props_rev_3"><a id="GUID-410F0B9F-B1AB-4C3A-AB64-8591A30A21C3"></a>
<h5 id="GADBD-GUID-410F0B9F-B1AB-4C3A-AB64-8591A30A21C3" class="sect5"><span class="enumeration_section">9.4.2.3.1</span> Sample Insert Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD",
"op_type": "I", 
"op_ts": "2013-06-02 22:14:36.000000", 
"current_ts": "2015-09-18T10:17:49.570000", 
"pos": "00000000000000001444", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqL2AAA"}, 
"before": null, 
"after": {
"CUST_CODE": "WILL", 
"CUST_CODE_isMissing": false, 
"ORDER_DATE": "1994-09-30:15:33:00", 
"ORDER_DATE_isMissing": false, 
"PRODUCT_CODE": "CAR", 
"PRODUCT_CODE_isMissing": false, 
"ORDER_ID": "144", "ORDER_ID_isMissing": false, 
"PRODUCT_PRICE": 17520.0, 
"PRODUCT_PRICE_isMissing": false, 
"PRODUCT_AMOUNT": 3.0, "PRODUCT_AMOUNT_isMissing": false, 
"TRANSACTION_ID": "100", 
"TRANSACTION_ID_isMissing": false}}
</pre></div>
</div>
<a id="GADBD543"></a>
<div class="props_rev_3"><a id="GUID-FC3BB6A5-9083-489C-8533-A8EB4AB25624"></a>
<h5 id="GADBD-GUID-FC3BB6A5-9083-489C-8533-A8EB4AB25624" class="sect5"><span class="enumeration_section">9.4.2.3.2</span> Sample Update Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "U", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:17:49.880000", 
"pos": "00000000000000002891", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqLzAAA"}, 
"before": {
"CUST_CODE": "BILL", 
"CUST_CODE_isMissing": false, 
"ORDER_DATE": "1995-12-31:15:00:00", 
"ORDER_DATE_isMissing": false, 
"PRODUCT_CODE": "CAR", 
"PRODUCT_CODE_isMissing": false, 
"ORDER_ID": "765", 
"ORDER_ID_isMissing": false, 
"PRODUCT_PRICE": 15000.0, 
"PRODUCT_PRICE_isMissing": false, 
"PRODUCT_AMOUNT": 3.0, 
"PRODUCT_AMOUNT_isMissing": false, 
"TRANSACTION_ID": "100", 
"TRANSACTION_ID_isMissing": false}, 
"after": {
"CUST_CODE": "BILL", 
"CUST_CODE_isMissing": false, 
"ORDER_DATE": "1995-12-31:15:00:00", 
"ORDER_DATE_isMissing": false, 
"PRODUCT_CODE": "CAR", 
"PRODUCT_CODE_isMissing": false, 
"ORDER_ID": "765", 
"ORDER_ID_isMissing": false, 
"PRODUCT_PRICE": 14000.0, 
"PRODUCT_PRICE_isMissing": false, 
"PRODUCT_AMOUNT": 3.0, 
"PRODUCT_AMOUNT_isMissing": false, 
"TRANSACTION_ID": "100", 
"TRANSACTION_ID_isMissing": false}}
</pre></div>
</div>
<a id="GADBD544"></a>
<div class="props_rev_3"><a id="GUID-75AF4E0C-5C56-4B9B-AF25-F3E3E858BEC7"></a>
<h5 id="GADBD-GUID-75AF4E0C-5C56-4B9B-AF25-F3E3E858BEC7" class="sect5"><span class="enumeration_section">9.4.2.3.3</span> Sample Delete Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "D", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:17:49.899000", 
"pos": "00000000000000004338", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"L": "206080450", "6": "9.0.80330", "R": "AADPkvAAEAAEqLzAAC"}, "before": {
"CUST_CODE": "DAVE", 
"CUST_CODE_isMissing": false, 
"ORDER_DATE": "1993-11-03:07:51:35", 
"ORDER_DATE_isMissing": false, 
"PRODUCT_CODE": "PLANE", 
"PRODUCT_CODE_isMissing": false, 
"ORDER_ID": "600", 
"ORDER_ID_isMissing": false, 
"PRODUCT_PRICE": null, 
"PRODUCT_PRICE_isMissing": true, 
"PRODUCT_AMOUNT": null, 
"PRODUCT_AMOUNT_isMissing": true, 
"TRANSACTION_ID": null, 
"TRANSACTION_ID_isMissing": true}, 
"after": null}
</pre></div>
</div>
<a id="GADBD545"></a>
<div class="props_rev_3"><a id="GUID-FD998BB6-9992-413C-965E-2BC1510AEC3E"></a>
<h5 id="GADBD-GUID-FD998BB6-9992-413C-965E-2BC1510AEC3E" class="sect5"><span class="enumeration_section">9.4.2.3.4</span> Sample Truncate Message</h5>
<div>
<pre dir="ltr">
{"table": "GG.TCUSTORD", 
"op_type": "T", 
"op_ts": "2013-06-02 22:14:41.000000", 
"current_ts": "2015-09-18T10:17:49.900000", 
"pos": "00000000000000004515", 
"primary_keys": ["CUST_CODE", "ORDER_DATE", "PRODUCT_CODE", "ORDER_ID"], "tokens":
 {"R": "AADPkvAAEAAEqL2AAB"}, 
"before": null, 
"after": null}
</pre></div>
</div>
</div>
<a id="GADBD546"></a>
<div class="props_rev_3"><a id="GUID-7D8D519D-7358-46D8-AABB-AE7487498394"></a>
<h4 id="GADBD-GUID-7D8D519D-7358-46D8-AABB-AE7487498394" class="sect4"><span class="enumeration_section">9.4.2.4</span> Avro Schema</h4>
<div>
<div class="section">
<p>Avro schemas are represented as JSONs. Avro schemas define the format of generated Avro messages and are required to serialize and deserialize Avro messages. Avro schemas are generated on a just in time basis when the first operation for a table is encountered. Avro schemas are specific to a table definition, which means that a separate Avro schema is generated for every table encountered for processed operations. By default, Avro schemas are written to the <span class="italic"><code>GoldenGate_Home</code></span><code>/dirdef</code> directory although the write location is configurable. Avro schema file names adhere to the following naming convention: <code><span class="codeinlineitalic">Fully_Qualified_Table_Name</span>.avsc</code> directory although the write location is configurable. Avro schema file names adhere to the following naming convention: .</p>
<p>The following is a sample Avro schema for the Avro Operation Format for the samples in the preceding sections:</p>
<pre dir="ltr">
{
  "type" : "record",
  "name" : "TCUSTORD",
  "namespace" : "GG",
  "fields" : [ {
    "name" : "table",
    "type" : "string"
  }, {
    "name" : "op_type",
    "type" : "string"
  }, {
    "name" : "op_ts",
    "type" : "string"
  }, {
    "name" : "current_ts",
    "type" : "string"
  }, {
    "name" : "pos",
    "type" : "string"
  }, {
    "name" : "primary_keys",
    "type" : {
      "type" : "array",
      "items" : "string"
    }
  }, {
    "name" : "tokens",
    "type" : {
      "type" : "map",
      "values" : "string"
    },
    "default" : { }
  }, {
    "name" : "before",
    "type" : [ "null", {
      "type" : "record",
      "name" : "columns",
      "fields" : [ {
        "name" : "CUST_CODE",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "CUST_CODE_isMissing",
        "type" : "boolean"
      }, {
        "name" : "ORDER_DATE",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "ORDER_DATE_isMissing",
        "type" : "boolean"
      }, {
        "name" : "PRODUCT_CODE",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "PRODUCT_CODE_isMissing",
        "type" : "boolean"
      }, {
        "name" : "ORDER_ID",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "ORDER_ID_isMissing",
        "type" : "boolean"
      }, {
        "name" : "PRODUCT_PRICE",
        "type" : [ "null", "double" ],
        "default" : null
      }, {
        "name" : "PRODUCT_PRICE_isMissing",
        "type" : "boolean"
      }, {
        "name" : "PRODUCT_AMOUNT",
        "type" : [ "null", "double" ],
        "default" : null
      }, {
        "name" : "PRODUCT_AMOUNT_isMissing",
        "type" : "boolean"
      }, {
        "name" : "TRANSACTION_ID",
        "type" : [ "null", "string" ],
        "default" : null
      }, {
        "name" : "TRANSACTION_ID_isMissing",
        "type" : "boolean"
      } ]
    } ],
    "default" : null
  }, {
    "name" : "after",
    "type" : [ "null", "columns" ],
    "default" : null
  } ]
}
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD548"></a><a id="GADBD547"></a>
<div class="props_rev_3"><a id="GUID-98614A46-1E3F-4003-A965-5B3CA6F27668"></a>
<h4 id="GADBD-GUID-98614A46-1E3F-4003-A965-5B3CA6F27668" class="sect4"><span class="enumeration_section">9.4.2.5</span> Avro Operation Formatter Configuration</h4>
<div>
<div class="tblformal" id="GUID-98614A46-1E3F-4003-A965-5B3CA6F27668__GUID-B233ED06-584F-49F8-A5DC-89A102FF2836">
<p class="titleintable">Table 9-9 Configuration Options</p>
<table class="cellalignment52" title="Configuration Options" summary="This two column table lists the configuration options for Avro Schema">
<thead align="left">
<tr>
<th class="cellalignment85" id="d24646e4064">Properties</th>
<th class="cellalignment80" id="d24646e4067">Optional Y/N</th>
<th class="cellalignment66" id="d24646e4070">Legal Values</th>
<th class="cellalignment80" id="d24646e4073">Default</th>
<th class="cellalignment74" id="d24646e4076">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment85" id="d24646e4081" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.insertOpKey</code></p>
</td>
<td class="cellalignment80" headers="d24646e4081 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4081 d24646e4070">
<p>Any string</p>
</td>
<td class="cellalignment80" headers="d24646e4081 d24646e4073">
<p><code>I</code></p>
</td>
<td class="cellalignment74" headers="d24646e4081 d24646e4076">
<p>Indicator to be inserted into the output record to indicate an insert operation</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4104" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.updateOpKey</code></p>
</td>
<td class="cellalignment80" headers="d24646e4104 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4104 d24646e4070">
<p>Any string</p>
</td>
<td class="cellalignment80" headers="d24646e4104 d24646e4073">
<p><code>U</code></p>
</td>
<td class="cellalignment74" headers="d24646e4104 d24646e4076">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4127" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.deleteOpKey</code></p>
</td>
<td class="cellalignment80" headers="d24646e4127 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4127 d24646e4070">
<p>Any string</p>
</td>
<td class="cellalignment80" headers="d24646e4127 d24646e4073">
<p><code>D</code></p>
</td>
<td class="cellalignment74" headers="d24646e4127 d24646e4076">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4150" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.truncateOpKey</code></p>
</td>
<td class="cellalignment80" headers="d24646e4150 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4150 d24646e4070">
<p>Any string</p>
</td>
<td class="cellalignment80" headers="d24646e4150 d24646e4073">
<p><code>T</code></p>
</td>
<td class="cellalignment74" headers="d24646e4150 d24646e4076">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4173" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.encoding</code></p>
</td>
<td class="cellalignment80" headers="d24646e4173 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4173 d24646e4070">
<p>Any legal encoding name or alias supported by Java</p>
</td>
<td class="cellalignment80" headers="d24646e4173 d24646e4073">
<p>UTF-8 (the JSON default)</p>
</td>
<td class="cellalignment74" headers="d24646e4173 d24646e4076">
<p>Controls the output encoding of generated Avro schema that is a JSON. JSON default is UTF-8. Avro messages are binary and support their own internal representation of encoding.</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4195" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.treatAllColumnsAsStrings</code></p>
</td>
<td class="cellalignment80" headers="d24646e4195 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4195 d24646e4070">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment80" headers="d24646e4195 d24646e4073">
<p><code>false</code></p>
</td>
<td class="cellalignment74" headers="d24646e4195 d24646e4076">
<p>Controls the output typing of generated Avro messages. If set to <code>false</code>, then the formatter attempts to map Oracle GoldenGate types to the corresponding Avro type. If set to <code>true</code>, then all data is treated as Strings in the generated Avro messages and schemas.</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4228" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.lineDelimiter</code></p>
</td>
<td class="cellalignment80" headers="d24646e4228 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4228 d24646e4070">
<p>Any string</p>
</td>
<td class="cellalignment80" headers="d24646e4228 d24646e4073">
<p>no value</p>
</td>
<td class="cellalignment74" headers="d24646e4228 d24646e4076">
<p>Optionally allows a user to insert a delimiter after each Avro message. This is not considered the best practice but in certain use cases customers may wish to parse a stream of data and extract individual Avro messages from the stream. This property allows the customer that option. Select a unique delimiter that cannot occur in any Avro message. This property supports <code>CDATA[]</code> wrapping.</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4253" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.schemaDirectory</code></p>
</td>
<td class="cellalignment80" headers="d24646e4253 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4253 d24646e4070">
<p>Any legal, existing file system path.</p>
</td>
<td class="cellalignment80" headers="d24646e4253 d24646e4073">
<p><code>./dirdef</code></p>
</td>
<td class="cellalignment74" headers="d24646e4253 d24646e4076">
<p>Controls the output location of generated Avro schemas.</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4276" headers="d24646e4064">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.wrapMessageInGenericAvroSchema</code></p>
</td>
<td class="cellalignment80" headers="d24646e4276 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4276 d24646e4070">
<p><code>true</code>|<code>false</code></p>
</td>
<td class="cellalignment80" headers="d24646e4276 d24646e4073">
<p><code>false</code></p>
</td>
<td class="cellalignment74" headers="d24646e4276 d24646e4076">
<p>Provides functionality to wrap the Avro messages for operations from the source trail file in a generic Avro wrapper message. For more information, see <a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-24CC9E72-20A4-478E-8503-9777B9029A9B">Generic Wrapper Functionality</a>.</p>
</td>
</tr>
<tr>
<td class="cellalignment85" id="d24646e4306" headers="d24646e4064">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment80" headers="d24646e4306 d24646e4067">
<p>Optional</p>
</td>
<td class="cellalignment66" headers="d24646e4306 d24646e4070">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment80" headers="d24646e4306 d24646e4073">
<p><code>true</code></p>
</td>
<td class="cellalignment74" headers="d24646e4306 d24646e4076">Controls the format of the current timestamp. The default is the &nbsp;ISO 8601 format. Set to <code>false</code> removes the <code>T</code> between the date and time in the current timestamp, which outputs a space instead.</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD549"></a>
<div class="props_rev_3"><a id="GUID-2993BB83-4F79-4835-A40D-E53C52CD18AD"></a>
<h4 id="GADBD-GUID-2993BB83-4F79-4835-A40D-E53C52CD18AD" class="sect4"><span class="enumeration_section">9.4.2.6</span> Sample Configuration</h4>
<div>
<div class="section">
<p>The following is a sample configuration for the Avro Operation Formatter from the Java Adapter <code>properg.handlerties</code> file:</p>
<pre dir="ltr">
gg.hdfs.format=avro_op
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.encoding=UTF-8
gg.handler.hafs.format.wrapMessageInGenericAvroMessage=false
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD550"></a>
<div class="props_rev_3"><a id="GUID-A314CBB0-AA5F-4141-A74A-DABE57106A9E"></a>
<h4 id="GADBD-GUID-A314CBB0-AA5F-4141-A74A-DABE57106A9E" class="sect4"><span class="enumeration_section">9.4.2.7</span> Metadata Change Events</h4>
<div>
<div class="section">
<p>The Avro Operation Formatter is capable of taking action with a metadata change event. This assumes that the replicated database and upstream Oracle GoldenGate replication process can propagate metadata change events. Metadata change events are of particular importance when formatting using Avro due to the tight dependency of Avro messages to its corresponding schema. Metadata change events are handled seamlessly by the Avro Operation Formatter and an updated Avro schema is generated upon the first encounter of an operation of that table after the metadata change event. You should understand the impact of a metadata change event and change downstream targets to the new Avro schema. The tight dependency of Avro messages to Avro schemas may result in compatibility issues. Avro messages generated before the schema change may not be able to be deserialized with the newly generated Avro schema. Conversely, Avro messages generated after the schema change may not be able to be deserialized with the previous Avro schema. It is a best practice to use the same version of the Avro schema that was used to generate the message. Consult the Apache Avro documentation for more details.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD551"></a>
<div class="props_rev_3"><a id="GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565"></a>
<h4 id="GADBD-GUID-A53F03AC-F2CF-40E9-AE37-3CF5702CF565" class="sect4"><span class="enumeration_section">9.4.2.8</span> Special Considerations</h4>
<div>
<div class="section">
<p>This section describes these special considerations:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-33524400-58C4-4E9F-9DDF-D1A57AA465A0">Troubleshooting</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-EF02EE2F-0C4E-4A27-9356-66B88AD31718">Primary Key Updates</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-D130B867-16FE-4EE5-8AEE-E22341699E36">Generic Wrapper Message</a></strong><br /></li>
</ul>
</div>
<a id="GADBD552"></a>
<div class="props_rev_3"><a id="GUID-33524400-58C4-4E9F-9DDF-D1A57AA465A0"></a>
<h5 id="GADBD-GUID-33524400-58C4-4E9F-9DDF-D1A57AA465A0" class="sect5"><span class="enumeration_section">9.4.2.8.1</span> Troubleshooting</h5>
<div>
<p>Avro is a binary format so is not human readable. Since Avro messages are in binary format, it is difficult to debug any issues. When the <code>log4j</code> Java logging level is set to <code>TRACE</code>, the created Avro messages are deserialized and displayed in the log file as a JSON object. This allows you to view the structure and contents of the created Avro messages. <code>TRACE</code> should never be enabled in a production environment as it has a substantial impact on performance.</p>
</div>
</div>
<a id="GADBD553"></a>
<div class="props_rev_3"><a id="GUID-EF02EE2F-0C4E-4A27-9356-66B88AD31718"></a>
<h5 id="GADBD-GUID-EF02EE2F-0C4E-4A27-9356-66B88AD31718" class="sect5"><span class="enumeration_section">9.4.2.8.2</span> Primary Key Updates</h5>
<div>
<p>The Avro Operation Formatter creates messages with complete data of before and after images for update operations. Therefore, the Avro Operation Formatter requires no special treatment for primary key updates.</p>
</div>
</div>
<a id="GADBD554"></a>
<div class="props_rev_3"><a id="GUID-D130B867-16FE-4EE5-8AEE-E22341699E36"></a>
<h5 id="GADBD-GUID-D130B867-16FE-4EE5-8AEE-E22341699E36" class="sect5"><span class="enumeration_section">9.4.2.8.3</span> Generic Wrapper Message</h5>
<div>
<p>Avro messages are not self describing, which means the receiver of the message must know the schema associated with the message before the message can be deserialized. Avro messages are binary and provide no consistent or reliable way to inspect the message contents in order to ascertain the message type. Therefore, Avro can be especially troublesome when messages are interlaced into a single stream of data like Kafka.</p>
<p>The Avro formatter provides a special feature to wrap the Avro message in a generic Avro message. This functionality is enabled by setting the following configuration property.</p>
<pre dir="ltr">
gg.handler.<span class="italic">name</span>.format.wrapMessageInGenericAvroMessage=true
</pre>
<p>The generic message is Avro message wrapping the Avro payload message that is common to all Avro messages that are output. The schema for the generic message is name <code>generic_wrapper.avsc</code> and is written to the output schema directory. This message has the following three fields.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>table_name</code> - The fully qualified source table name.</p>
</li>
<li>
<p><code>schema_fingerprint</code> - &nbsp;The fingerprint of the of the Avro schema generating the messages. The fingerprint is generated using the <code>parsingFingerprint64(Schema s)</code> method on the <code>org.apache.avro.SchemaNormalization</code> class.</p>
</li>
<li>
<p><code>payload</code> - The wrapped Avro message.</p>
</li>
</ul>
<p>The following is the Avro Formatter generic wrapper schema:</p>
<pre dir="ltr">
{
  "type" : "record",
  "name" : "generic_wrapper",
  "namespace" : "oracle.goldengate",
  "fields" : [ {
    "name" : "table_name",
    "type" : "string"
  }, {
    "name" : "schema_fingerprint",
    "type" : "long"
  }, {
    "name" : "payload",
    "type" : "bytes"
  } ]
}
</pre></div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-87FC20F6-E23C-442C-BC99-24311B0BE406"></a>
<h3 id="GADBD-GUID-87FC20F6-E23C-442C-BC99-24311B0BE406" class="sect3"><span class="enumeration_section">9.4.3</span> Avro Object Container File Formatter</h3>
<div>
<p>Oracle GoldenGate for Big Data can write to HDFS in Avro Object Container File (OCF) format. Using Avro OCF is a good choice for data formatting into HDFS because it handles schema evolution more efficiently than other formats. Compression and decompression is also supported in the Avro OCF Formatter to allow more efficient use of disk space.</p>
<p>The HDFS Handler integration with the Avro formatters to write files to HDFS in Avro OCF format is a specialized use case of the HDFS Handler. The Avro OCF format is required for Hive to be able to read Avro data in HDFS. The Avro OCF format is detailed in the Avro specification.</p>
<p><a href="http://avro.apache.org/docs/current/spec.html#Object+Container+Files" target="_blank">http://avro.apache.org/docs/current/spec.html#Object+Container+Files</a></p>
<p>Another important feature is that you can configure the HDFS Handler to stream data in Avro OCF format, generate table definitions in Hive, and update table definitions in Hive in the case of a metadata change event using the following:</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-494E0A44-756B-40FF-A46C-A300EFB54A05">Avro OCF Formatter Configuration</a></strong><br /></li>
</ul>
</div>
<div class="sect4"><a id="GUID-494E0A44-756B-40FF-A46C-A300EFB54A05"></a>
<h4 id="GADBD-GUID-494E0A44-756B-40FF-A46C-A300EFB54A05" class="sect4"><span class="enumeration_section">9.4.3.1</span> Avro OCF Formatter Configuration</h4>
<div>
<div class="tblformal" id="GUID-494E0A44-756B-40FF-A46C-A300EFB54A05__GUID-3B00C87F-58A3-49B7-A2C5-DB47018A829C">
<table class="cellalignment52" summary="Five column table describing the Avro OCF Formatter configuration.">
<thead align="left">
<tr>
<th class="cellalignment54" id="d24646e4584">Properties</th>
<th class="cellalignment54" id="d24646e4587">Optional / Required</th>
<th class="cellalignment54" id="d24646e4590">Legal Values</th>
<th class="cellalignment54" id="d24646e4593">Default</th>
<th class="cellalignment54" id="d24646e4596">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment54" id="d24646e4601" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.insertOpKey</code></p>
</td>
<td class="cellalignment54" headers="d24646e4601 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4601 d24646e4590">
<p>Any string</p>
</td>
<td class="cellalignment54" headers="d24646e4601 d24646e4593">
<p><code>I</code></p>
</td>
<td class="cellalignment54" headers="d24646e4601 d24646e4596">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4622" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.updateOpKey</code></p>
</td>
<td class="cellalignment54" headers="d24646e4622 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4622 d24646e4590">
<p>Any string</p>
</td>
<td class="cellalignment54" headers="d24646e4622 d24646e4593">
<p><code>U</code></p>
</td>
<td class="cellalignment54" headers="d24646e4622 d24646e4596">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4643" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.truncateOpKey</code></p>
</td>
<td class="cellalignment54" headers="d24646e4643 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4643 d24646e4590">
<p>Any string</p>
</td>
<td class="cellalignment54" headers="d24646e4643 d24646e4593">
<p><code>T</code></p>
</td>
<td class="cellalignment54" headers="d24646e4643 d24646e4596">
<p>Indicator to be truncated into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4664" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.deleteOpKey</code></p>
</td>
<td class="cellalignment54" headers="d24646e4664 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4664 d24646e4590">
<p>Any string</p>
</td>
<td class="cellalignment54" headers="d24646e4664 d24646e4593">
<p><code>D</code></p>
</td>
<td class="cellalignment54" headers="d24646e4664 d24646e4596">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4685" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.encoding</code></p>
</td>
<td class="cellalignment54" headers="d24646e4685 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4685 d24646e4590">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment54" headers="d24646e4685 d24646e4593">
<p><code>UTF-8</code></p>
</td>
<td class="cellalignment54" headers="d24646e4685 d24646e4596">
<p>Controls the output encoding of generated Avro schema, which is a JSON. JSON default is UTF-8. Avro messages are binary and support their own internal representation of encoding.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4706" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.treatAllColumnsAsStrings</code></p>
</td>
<td class="cellalignment54" headers="d24646e4706 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4706 d24646e4590">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment54" headers="d24646e4706 d24646e4593">
<p><code>false</code></p>
</td>
<td class="cellalignment54" headers="d24646e4706 d24646e4596">
<p>Controls the output typing of generated Avro messages. If set to <code>false</code>, then the formatter attempts to map Oracle GoldenGate types to the corresponding Avro type. If set to <code>true</code>, then all data is treated as strings in the generated Avro messages and schemas.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4737" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.pkUpdateHandling</code></p>
</td>
<td class="cellalignment54" headers="d24646e4737 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4737 d24646e4590">
<p><code>abend</code> | <code>update</code> | <code>delete-insert</code></p>
</td>
<td class="cellalignment54" headers="d24646e4737 d24646e4593">
<p><code>abend</code></p>
</td>
<td class="cellalignment54" headers="d24646e4737 d24646e4596">
<p>Controls how the formatter should handle update operations that change a primary key. Primary key operations can be problematic for the Avro Row formatter and require special consideration by you.</p>
<ul style="list-style-type: disc;">
<li>
<p><code>abend</code> - indicates the process will abend</p>
</li>
<li>
<p><code>update</code> - indicates the process will treat this as a normal update</p>
</li>
<li>
<p><code>delete</code> and <code>insert</code> - indicates the process will treat this as a delete and an insert. The full before image is required for this feature to work properly. This can be achieved by using full supplemental logging in Oracle. Without full before and after row images the insert data will be incomplete.</p>
</li>
</ul>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4784" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.generateSchema</code></p>
</td>
<td class="cellalignment54" headers="d24646e4784 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4784 d24646e4590">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment54" headers="d24646e4784 d24646e4593">
<p><code>true</code></p>
</td>
<td class="cellalignment54" headers="d24646e4784 d24646e4596">
<p>Schemas must be generated for Avro serialization so this property can be set to <code>false</code> to suppress the writing of the generated schemas to the local file system.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4812" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.schemaDirectory</code></p>
</td>
<td class="cellalignment54" headers="d24646e4812 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4812 d24646e4590">
<p>Any legal, existing file system path</p>
</td>
<td class="cellalignment54" headers="d24646e4812 d24646e4593">
<p><code>./dirdef</code></p>
</td>
<td class="cellalignment54" headers="d24646e4812 d24646e4596">
<p>Controls the output location of generated Avro schemas to the local file system. This property does not control where the Avro schema is written to in HDFS; that is controlled by an HDFS Handler property.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4833" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment54" headers="d24646e4833 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4833 d24646e4590">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment54" headers="d24646e4833 d24646e4593">
<p><code>true</code></p>
</td>
<td class="cellalignment54" headers="d24646e4833 d24646e4596">
<p>The default format for the current timestamp is ISO8601. Set to <code>false</code> to remove the <code>T</code> between the date and time in the current timestamp and output a space instead.</p>
</td>
</tr>
<tr>
<td class="cellalignment54" id="d24646e4864" headers="d24646e4584">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.versionSchemas</code></p>
</td>
<td class="cellalignment54" headers="d24646e4864 d24646e4587">
<p>Optional</p>
</td>
<td class="cellalignment54" headers="d24646e4864 d24646e4590">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment54" headers="d24646e4864 d24646e4593">
<p><code>false</code></p>
</td>
<td class="cellalignment54" headers="d24646e4864 d24646e4596">
<p>If set to true, an Avro schema is created in the schema directory and versioned by a time stamp. The format of the schema is the following:</p>
<p><code><span class="codeinlineitalic">fully_qualifiedtable_name_time stamp</span>.avsc</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
</div>
<a id="GADBD555"></a>
<div class="props_rev_3"><a id="GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D"></a>
<h2 id="GADBD-GUID-2EBC39AB-CF4E-45DC-AD50-A16465AB534D" class="sect2"><span class="enumeration_section">9.5</span> XML Formatter</h2>
<div>
<div class="section">
<p>The XML Formatter formats operation data from the source trail file into a XML documents. The XML Formatter takes that before and after image data and formats the data into an XML document representation of the operation data. The format of the XML document is effectively the same as the XML format in the previous releases of the Oracle GoldenGate Java Adapter product.</p>
<p>This section contains the following topics:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-F2FF4D61-3683-4AC1-A3B6-837EC9CC5F1F">Message Formatting Details</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-FC5D016C-74D8-430A-A47B-026372C395F9">Sample XML Messages</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-1A3CA163-4EE9-48CA-A8C9-A7CB932F454D">XML Schema</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-B0DC7FC1-332C-4425-B412-9F7D3178CE42">XML Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-2538C4A2-8D62-4B09-8EE7-0446714E82E0">Sample Configuration</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-936298A4-A4B6-4081-AD93-386B035BACA8">Metadata Change Events</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-C86FE871-3F4E-474E-91D7-A9BC83E1323E">Primary Key Updates</a></strong><br /></li>
</ul>
</div>
<a id="GADBD557"></a><a id="GADBD556"></a>
<div class="props_rev_3"><a id="GUID-F2FF4D61-3683-4AC1-A3B6-837EC9CC5F1F"></a>
<h3 id="GADBD-GUID-F2FF4D61-3683-4AC1-A3B6-837EC9CC5F1F" class="sect3"><span class="enumeration_section">9.5.1</span> Message Formatting Details</h3>
<div>
<div class="section">
<p>The XML formatted messages contain the following information:</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-F2FF4D61-3683-4AC1-A3B6-837EC9CC5F1F__GUID-89187670-98F6-4BB7-A854-59B0E489DCB6">
<p class="titleintable">Table 9-10 XML formatting details</p>
<table class="cellalignment52" title="XML formatting details" summary="This two column table lists the XML formatting details">
<thead align="left">
<tr>
<th class="cellalignment74" id="d24646e4991">Value</th>
<th class="cellalignment75" id="d24646e4994">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment74" id="d24646e4999" headers="d24646e4991">
<p><code>table</code></p>
</td>
<td class="cellalignment75" headers="d24646e4999 d24646e4994">
<p>The fully qualified table name.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e5007" headers="d24646e4991">
<p><code>type</code></p>
</td>
<td class="cellalignment75" headers="d24646e5007 d24646e4994">
<p>The operation type.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e5015" headers="d24646e4991">
<p><code>current_ts</code></p>
</td>
<td class="cellalignment75" headers="d24646e5015 d24646e4994">
<p>The current timestamp is the time when the formatter processed the current operation record. This timestamp follows the ISO-8601 format and includes micro second precision. Replaying the trail file does not result in the same timestamp for the same operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e5023" headers="d24646e4991">
<p><code>pos</code></p>
</td>
<td class="cellalignment75" headers="d24646e5023 d24646e4994">
<p>The position from the source trail file.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e5031" headers="d24646e4991">
<p><code>numCols</code></p>
</td>
<td class="cellalignment75" headers="d24646e5031 d24646e4994">
<p>The total number of columns in the source table.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e5039" headers="d24646e4991">
<p><code>col</code></p>
</td>
<td class="cellalignment75" headers="d24646e5039 d24646e4994">
<p>The <code>col</code> element is a repeating element that contains the before and after images of operation data.</p>
</td>
</tr>
<tr>
<td class="cellalignment74" id="d24646e5050" headers="d24646e4991">
<p><code>tokens</code></p>
</td>
<td class="cellalignment75" headers="d24646e5050 d24646e4994">
<p>The <code>tokens</code> element contains the token values from the source trail file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD558"></a>
<div class="props_rev_3"><a id="GUID-FC5D016C-74D8-430A-A47B-026372C395F9"></a>
<h3 id="GADBD-GUID-FC5D016C-74D8-430A-A47B-026372C395F9" class="sect3"><span class="enumeration_section">9.5.2</span> Sample XML Messages</h3>
<div>
<div class="section">
<p>This sections provides the following sample XML messages:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-62055326-22F2-4937-9375-02A6AFE939AE">Sample Insert Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-5ABD698C-FBC3-4A11-BFE1-E65FA784ECD7">Sample Update Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-83BDF19C-07EB-4A84-B61E-217EA7DA66DC">Sample Delete Message</a></strong><br /></li>
<li class="ulchildlink"><strong><a href="GUID-F0FA2781-0802-4530-B1F0-5E102B982EC0.htm#GUID-612A00F6-AC94-4C17-939C-243D4849603A">Sample Truncate Message</a></strong><br /></li>
</ul>
</div>
<a id="GADBD559"></a>
<div class="props_rev_3"><a id="GUID-62055326-22F2-4937-9375-02A6AFE939AE"></a>
<h4 id="GADBD-GUID-62055326-22F2-4937-9375-02A6AFE939AE" class="sect4"><span class="enumeration_section">9.5.2.1</span> Sample Insert Message</h4>
<div>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;operation table='GG.TCUSTORD' type='I' ts='2013-06-02 22:14:36.000000' current_ts='2015-10-06T12:21:50.100001' pos='00000000000000001444' numCols='7'&gt;
 &lt;col name='CUST_CODE' index='0'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[WILL]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_DATE' index='1'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[1994-09-30:15:33:00]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_CODE' index='2'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[CAR]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_ID' index='3'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[144]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_PRICE' index='4'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[17520.00]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_AMOUNT' index='5'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[3]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='TRANSACTION_ID' index='6'&gt;
   &lt;before missing='true'/&gt;
   &lt;after&gt;&lt;![CDATA[100]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;tokens&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[R]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[AADPkvAAEAAEqL2AAA]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
 &lt;/tokens&gt;
&lt;/operation&gt;
</pre></div>
</div>
<a id="GADBD560"></a>
<div class="props_rev_3"><a id="GUID-5ABD698C-FBC3-4A11-BFE1-E65FA784ECD7"></a>
<h4 id="GADBD-GUID-5ABD698C-FBC3-4A11-BFE1-E65FA784ECD7" class="sect4"><span class="enumeration_section">9.5.2.2</span> Sample Update Message</h4>
<div>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;operation table='GG.TCUSTORD' type='U' ts='2013-06-02 22:14:41.000000' current_ts='2015-10-06T12:21:50.413000' pos='00000000000000002891' numCols='7'&gt;
 &lt;col name='CUST_CODE' index='0'&gt;
   &lt;before&gt;&lt;![CDATA[BILL]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[BILL]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_DATE' index='1'&gt;
   &lt;before&gt;&lt;![CDATA[1995-12-31:15:00:00]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[1995-12-31:15:00:00]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_CODE' index='2'&gt;
   &lt;before&gt;&lt;![CDATA[CAR]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[CAR]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_ID' index='3'&gt;
   &lt;before&gt;&lt;![CDATA[765]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[765]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_PRICE' index='4'&gt;
   &lt;before&gt;&lt;![CDATA[15000.00]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[14000.00]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_AMOUNT' index='5'&gt;
   &lt;before&gt;&lt;![CDATA[3]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[3]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;col name='TRANSACTION_ID' index='6'&gt;
   &lt;before&gt;&lt;![CDATA[100]]&gt;&lt;/before&gt;
   &lt;after&gt;&lt;![CDATA[100]]&gt;&lt;/after&gt;
 &lt;/col&gt;
 &lt;tokens&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[R]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[AADPkvAAEAAEqLzAAA]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
 &lt;/tokens&gt;
&lt;/operation&gt;
</pre></div>
</div>
<a id="GADBD561"></a>
<div class="props_rev_3"><a id="GUID-83BDF19C-07EB-4A84-B61E-217EA7DA66DC"></a>
<h4 id="GADBD-GUID-83BDF19C-07EB-4A84-B61E-217EA7DA66DC" class="sect4"><span class="enumeration_section">9.5.2.3</span> Sample Delete Message</h4>
<div>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;operation table='GG.TCUSTORD' type='D' ts='2013-06-02 22:14:41.000000' current_ts='2015-10-06T12:21:50.415000' pos='00000000000000004338' numCols='7'&gt;
 &lt;col name='CUST_CODE' index='0'&gt;
   &lt;before&gt;&lt;![CDATA[DAVE]]&gt;&lt;/before&gt;
   &lt;after missing='true'/&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_DATE' index='1'&gt;
   &lt;before&gt;&lt;![CDATA[1993-11-03:07:51:35]]&gt;&lt;/before&gt;
   &lt;after missing='true'/&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_CODE' index='2'&gt;
   &lt;before&gt;&lt;![CDATA[PLANE]]&gt;&lt;/before&gt;
   &lt;after missing='true'/&gt;
 &lt;/col&gt;
 &lt;col name='ORDER_ID' index='3'&gt;
   &lt;before&gt;&lt;![CDATA[600]]&gt;&lt;/before&gt;
   &lt;after missing='true'/&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_PRICE' index='4'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_AMOUNT' index='5'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;col name='TRANSACTION_ID' index='6'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;tokens&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[L]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[206080450]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[6]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[9.0.80330]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[R]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[AADPkvAAEAAEqLzAAC]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
 &lt;/tokens&gt;
&lt;/operation&gt;
</pre></div>
</div>
<a id="GADBD562"></a>
<div class="props_rev_3"><a id="GUID-612A00F6-AC94-4C17-939C-243D4849603A"></a>
<h4 id="GADBD-GUID-612A00F6-AC94-4C17-939C-243D4849603A" class="sect4"><span class="enumeration_section">9.5.2.4</span> Sample Truncate Message</h4>
<div>
<pre dir="ltr">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;operation table='GG.TCUSTORD' type='T' ts='2013-06-02 22:14:41.000000' current_ts='2015-10-06T12:21:50.415001' pos='00000000000000004515' numCols='7'&gt;
 &lt;col name='CUST_CODE' index='0'&gt;
   &lt;missing/&gt; 
 &lt;/col&gt;
 &lt;col name='ORDER_DATE' index='1'&gt;
   &lt;missing/&gt; 
 &lt;/col&gt;
 &lt;col name='PRODUCT_CODE' index='2'&gt;
   &lt;missing/&gt; 
 &lt;/col&gt;
 &lt;col name='ORDER_ID' index='3'&gt;
   &lt;missing/&gt; 
 &lt;/col&gt;
 &lt;col name='PRODUCT_PRICE' index='4'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;col name='PRODUCT_AMOUNT' index='5'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;col name='TRANSACTION_ID' index='6'&gt;
  &lt;missing/&gt;
 &lt;/col&gt;
 &lt;tokens&gt;
   &lt;token&gt;
     &lt;Name&gt;&lt;![CDATA[R]]&gt;&lt;/Name&gt;
     &lt;Value&gt;&lt;![CDATA[AADPkvAAEAAEqL2AAB]]&gt;&lt;/Value&gt;
   &lt;/token&gt;
 &lt;/tokens&gt;
&lt;/operation&gt;
</pre></div>
</div>
</div>
<a id="GADBD563"></a>
<div class="props_rev_3"><a id="GUID-1A3CA163-4EE9-48CA-A8C9-A7CB932F454D"></a>
<h3 id="GADBD-GUID-1A3CA163-4EE9-48CA-A8C9-A7CB932F454D" class="sect3"><span class="enumeration_section">9.5.3</span> XML Schema</h3>
<div>
<div class="section">
<p>An XML schema (XSD) is not generated as part of the XML Formatter functionality. The XSD is generic to all messages generated by the XML Formatter. An XSD defining the structure of output XML documents is defined as follows:</p>
<pre dir="ltr">
&lt;xs:schema attributeFormDefault="unqualified" 
elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
   &lt;xs:element name="operation"&gt;
     &lt;xs:complexType&gt;
       &lt;xs:sequence&gt;
          &lt;xs:element name="col" maxOccurs="unbounded" minOccurs="0"&gt;
           &lt;xs:complexType&gt;
             &lt;xs:sequence&gt;
               &lt;xs:element name="before" minOccurs="0"&gt;
                 &lt;xs:complexType&gt;
                   &lt;xs:simpleContent&gt;
                     &lt;xs:extension base="xs:string"&gt;
                       &lt;xs:attribute type="xs:string" name="missing" 
use="optional"/&gt;
                     &lt;/xs:extension&gt;
                   &lt;/xs:simpleContent&gt;
                 &lt;/xs:complexType&gt;
               &lt;/xs:element&gt;
               &lt;xs:element name="after" minOccurs="0"&gt;
                 &lt;xs:complexType&gt;
                   &lt;xs:simpleContent&gt;
                     &lt;xs:extension base="xs:string"&gt;
                       &lt;xs:attribute type="xs:string" name="missing" 
use="optional"/&gt;
                     &lt;/xs:extension&gt;
                   &lt;/xs:simpleContent&gt;
                 &lt;/xs:complexType&gt;
               &lt;/xs:element&gt;
               &lt;xs:element type="xs:string" name="missing" minOccurs="0"/&gt;
             &lt;/xs:sequence&gt;
             &lt;xs:attribute type="xs:string" name="name"/&gt;
             &lt;xs:attribute type="xs:short" name="index"/&gt;
           &lt;/xs:complexType&gt;
         &lt;/xs:element&gt;
         &lt;xs:element name="tokens" minOccurs="0"&gt;
           &lt;xs:complexType&gt;
             &lt;xs:sequence&gt;
               &lt;xs:element name="token" maxOccurs="unbounded" minOccurs="0"&gt;
                 &lt;xs:complexType&gt;
                   &lt;xs:sequence&gt;
                     &lt;xs:element type="xs:string" name="Name"/&gt;
                     &lt;xs:element type="xs:string" name="Value"/&gt;
                   &lt;/xs:sequence&gt;
                 &lt;/xs:complexType&gt;
               &lt;/xs:element&gt;
             &lt;/xs:sequence&gt;
           &lt;/xs:complexType&gt;
         &lt;/xs:element&gt;
       &lt;/xs:sequence&gt;
       &lt;xs:attribute type="xs:string" name="table"/&gt;
       &lt;xs:attribute type="xs:string" name="type"/&gt;
       &lt;xs:attribute type="xs:string" name="ts"/&gt;
       &lt;xs:attribute type="xs:dateTime" name="current_ts"/&gt;
       &lt;xs:attribute type="xs:long" name="pos"/&gt;
       &lt;xs:attribute type="xs:short" name="numCols"/&gt;
     &lt;/xs:complexType&gt;
   &lt;/xs:element&gt;
&lt;/xs:schema&gt;
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD565"></a><a id="GADBD564"></a>
<div class="props_rev_3"><a id="GUID-B0DC7FC1-332C-4425-B412-9F7D3178CE42"></a>
<h3 id="GADBD-GUID-B0DC7FC1-332C-4425-B412-9F7D3178CE42" class="sect3"><span class="enumeration_section">9.5.4</span> XML Configuration</h3>
<div>
<div class="tblformal" id="GUID-B0DC7FC1-332C-4425-B412-9F7D3178CE42__GUID-7C15176F-9D19-40BA-A184-CAD7F100D83B">
<p class="titleintable">Table 9-11 Configuration Options</p>
<table class="cellalignment52" title="Configuration Options" summary="This five column table lists the XML configuration options">
<thead align="left">
<tr>
<th class="cellalignment86" id="d24646e5232">Properties</th>
<th class="cellalignment70" id="d24646e5235">Optional Y/N</th>
<th class="cellalignment87" id="d24646e5238">Legal Values</th>
<th class="cellalignment55" id="d24646e5241">Default</th>
<th class="cellalignment72" id="d24646e5244">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="cellalignment86" id="d24646e5249" headers="d24646e5232">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.insertOpKey</code></p>
</td>
<td class="cellalignment70" headers="d24646e5249 d24646e5235">
<p>Optional</p>
</td>
<td class="cellalignment87" headers="d24646e5249 d24646e5238">
<p>Any string</p>
</td>
<td class="cellalignment55" headers="d24646e5249 d24646e5241">
<p><code>I</code></p>
</td>
<td class="cellalignment72" headers="d24646e5249 d24646e5244">
<p>Indicator to be inserted into the output record to indicate an insert operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment86" id="d24646e5272" headers="d24646e5232">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.updateOpKey</code></p>
</td>
<td class="cellalignment70" headers="d24646e5272 d24646e5235">
<p>Optional</p>
</td>
<td class="cellalignment87" headers="d24646e5272 d24646e5238">
<p>Any string</p>
</td>
<td class="cellalignment55" headers="d24646e5272 d24646e5241">
<p><code>U</code></p>
</td>
<td class="cellalignment72" headers="d24646e5272 d24646e5244">
<p>Indicator to be inserted into the output record to indicate an update operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment86" id="d24646e5295" headers="d24646e5232">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.deleteOpKey</code></p>
</td>
<td class="cellalignment70" headers="d24646e5295 d24646e5235">
<p>Optional</p>
</td>
<td class="cellalignment87" headers="d24646e5295 d24646e5238">
<p>Any string</p>
</td>
<td class="cellalignment55" headers="d24646e5295 d24646e5241">
<p><code>D</code></p>
</td>
<td class="cellalignment72" headers="d24646e5295 d24646e5244">
<p>Indicator to be inserted into the output record to indicate a delete operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment86" id="d24646e5318" headers="d24646e5232">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.truncateOpKey</code></p>
</td>
<td class="cellalignment70" headers="d24646e5318 d24646e5235">
<p>Optional</p>
</td>
<td class="cellalignment87" headers="d24646e5318 d24646e5238">
<p>Any string</p>
</td>
<td class="cellalignment55" headers="d24646e5318 d24646e5241">
<p><code>T</code></p>
</td>
<td class="cellalignment72" headers="d24646e5318 d24646e5244">
<p>Indicator to be inserted into the output record to indicate a truncate operation.</p>
</td>
</tr>
<tr>
<td class="cellalignment86" id="d24646e5341" headers="d24646e5232">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.encoding</code></p>
</td>
<td class="cellalignment70" headers="d24646e5341 d24646e5235">
<p>Optional</p>
</td>
<td class="cellalignment87" headers="d24646e5341 d24646e5238">
<p>Any legal encoding name or alias supported by Java.</p>
</td>
<td class="cellalignment55" headers="d24646e5341 d24646e5241">
<p>UTF-8 (the XML default)</p>
</td>
<td class="cellalignment72" headers="d24646e5341 d24646e5244">
<p>Controls the output encoding of generated XML documents.</p>
</td>
</tr>
<tr>
<td class="cellalignment86" id="d24646e5363" headers="d24646e5232">
<p><code>gg.handler.</code><span class="italic"><code>name.</code></span><code>format.includeProlog</code></p>
</td>
<td class="cellalignment70" headers="d24646e5363 d24646e5235">
<p>Optional</p>
</td>
<td class="cellalignment87" headers="d24646e5363 d24646e5238">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment55" headers="d24646e5363 d24646e5241">
<p><code>false</code></p>
</td>
<td class="cellalignment72" headers="d24646e5363 d24646e5244">
<p>Controls the output of an XML prolog on generated XML documents. The XML prolog is optional for well formed XML. Sample XML prolog looks like: <code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;</code></p>
</td>
</tr>
<tr>
<td class="cellalignment86" id="d24646e5392" headers="d24646e5232">
<p><code>gg.handler.<span class="codeinlineitalic">name</span>.format.iso8601Format</code></p>
</td>
<td class="cellalignment70" headers="d24646e5392 d24646e5235">
<p>Optional</p>
</td>
<td class="cellalignment87" headers="d24646e5392 d24646e5238">
<p><code>true</code> | <code>false</code></p>
</td>
<td class="cellalignment55" headers="d24646e5392 d24646e5241">
<p><code>true</code></p>
</td>
<td class="cellalignment72" headers="d24646e5392 d24646e5244">
<p>Controls the format of the current timestamp in the XML message. Set to <code>false</code> to suppress the <code>T</code> between the date and time and instead include blank space.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GADBD566"></a>
<div class="props_rev_3"><a id="GUID-2538C4A2-8D62-4B09-8EE7-0446714E82E0"></a>
<h3 id="GADBD-GUID-2538C4A2-8D62-4B09-8EE7-0446714E82E0" class="sect3"><span class="enumeration_section">9.5.5</span> Sample Configuration</h3>
<div>
<div class="section">
<p>The following is sample configuration for the XML Formatter from the Java Adapter properties file:</p>
<pre dir="ltr">
gg.handler.hdfs.format=xml
gg.handler.hdfs.format.insertOpKey=I
gg.handler.hdfs.format.updateOpKey=U
gg.handler.hdfs.format.deleteOpKey=D
gg.handler.hdfs.format.truncateOpKey=T
gg.handler.hdfs.format.encoding=ISO-8859-1
gg.handler.hdfs.format.includeProlog=false
</pre></div>
<!-- class="section" --></div>
</div>
<a id="GADBD567"></a>
<div class="props_rev_3"><a id="GUID-936298A4-A4B6-4081-AD93-386B035BACA8"></a>
<h3 id="GADBD-GUID-936298A4-A4B6-4081-AD93-386B035BACA8" class="sect3"><span class="enumeration_section">9.5.6</span> Metadata Change Events</h3>
<div>
<div class="section">
<p>The XML Formatter will seamlessly handle metadata change events. The format of the XML document is such that a metadata change event does not even result in a change to the XML schema. The XML schema is designed to be generic so that the same schema represents the data of any operation from any table.</p>
<p>The XML Formatter is capable of taking action with a metadata change event. This assumes that the replicated database and upstream Oracle GoldenGate replication process can propagate metadata change events. The format of the XML document is such that a metadata change event does not result in a change to the XML schema. The XML schema is generic so that the same schema represents the data of any operation form any table. The resulting changes in the metadata will be reflected in messages after the metadata change event. For example in the case of adding a column, the new column and column data will begin showing up in XML messages for that table after the metadata change event.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GADBD568"></a>
<div class="props_rev_3"><a id="GUID-C86FE871-3F4E-474E-91D7-A9BC83E1323E"></a>
<h3 id="GADBD-GUID-C86FE871-3F4E-474E-91D7-A9BC83E1323E" class="sect3"><span class="enumeration_section">9.5.7</span> Primary Key Updates</h3>
<div>
<div class="section">
<p>Updates to a primary key require no special handling by the XML formatter. The XML formatter creates messages that model the database operations. For update operations, this includes before and after images of column values. Primary key changes are simply represented in this format as a change to a column value just like a change to any other column value</p>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment40">
<tr>
<td class="cellalignment47">
<table class="cellalignment51">
<tr>
<td class="cellalignment44"><a href="GUID-084CCCD6-8D13-43C0-A6C4-4D2AC8B8FA86.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment44"><a href="GUID-F90702A9-0FFB-42D2-9261-89E2BB952C65.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2015, 2016, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment49">
<table class="cellalignment43">
<tr>
<td class="cellalignment44"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment44"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment44"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment44"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
