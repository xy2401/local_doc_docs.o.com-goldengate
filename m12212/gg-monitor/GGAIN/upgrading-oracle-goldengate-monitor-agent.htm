<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Upgrading Oracle GoldenGate Monitor Agent</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="Use this step by step process&nbsp;to upgrade your Oracle GoldenGate&nbsp;Monitor Agent&nbsp;from 11g&nbsp;to 12c&nbsp;or to upgrade the original JAgent that was delivered with 12c." />
<meta name="dcterms.created" content="2017-11-28T02:10:18Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="GoldenGate Installing, Configuring, and Upgrading Oracle GoldenGate Monitor Agent" />
<meta name="dcterms.identifier" content="E79732-03" />
<meta name="dcterms.isVersionOf" content="GGAIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="creating-and-configuring-instance1.htm" title="Previous" type="text/html" />
<link rel="Next" href="installation-screens.htm" title="Next" type="text/html" />
<link rel="alternate" href="GGAIN.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518"></a> <span id="PAGE" style="display:none;">8/9</span> <!-- End Header -->
<a id="GGAIN147"></a><a id="GGAIN148"></a><a id="GGAIN149"></a><a id="GGAIN150"></a><a id="GGAIN151"></a><a id="GGAIN152"></a><a id="GGAIN154"></a><a id="GGAIN177"></a><a id="GGAIN155"></a><a id="GGAIN156"></a><a id="GGAIN146"></a>
<h1 id="GGAIN-GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518" class="sect1"><span class="enumeration_chapter">4</span> Upgrading <span>Oracle GoldenGate Monitor Agent</span></h1>
<div>
<div><span>Use this step by step process&nbsp;to upgrade your Oracle GoldenGate&nbsp;Monitor Agent&nbsp;from 11<span class="italic">g</span>&nbsp;to 12<span class="italic">c</span>&nbsp;or to upgrade the original JAgent that was delivered with 12<span class="italic">c</span>.</span></div>
<div class="infobox-note" id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__GUID-BD90A081-9365-483C-AAAB-05D4071507A9">
<p class="notep1">Note:</p>
<p>Do <span class="italic">not</span> follow the instructions in this chapter if you have installed <span>Oracle GoldenGate Monitor Agent</span> 12<span class="italic">c</span> for the first time; the upgrade occurs automatically.</p>
</div>
<p>Use the following tasks to upgrade your existing <span>Oracle GoldenGate Monitor Agent</span>(<code class="codeph">$OGG_HOME/dirjar</code>) 11<span class="italic">g</span> to 12<span class="italic">c</span>:</p>
<dl>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABGHBAD"><!-- --></a>Task 1&nbsp;&nbsp;&nbsp;Obtain <span>Oracle GoldenGate Monitor Agent</span></dt>
<dd>
<p>Obtain the product distribution by following the instructions in <a href="GUID-5B808D41-6759-4970-A5C4-FB0B3E51571D.htm#GUID-3A426E5C-5F14-4407-BC41-4B1883CE02E7">Downloading Oracle GoldenGate Monitor Agent</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABBBFCC"><!-- --></a>Task 2&nbsp;&nbsp;&nbsp;Backup the Existing <span>Oracle GoldenGate Monitor Agent</span></dt>
<dd>
<p>Create a backup copy of your entire pre-upgrade <span>Oracle GoldenGate Monitor Agent</span> environment before you upgrade by copying the following to a backup location:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">OGG_HOME</code></span><code class="codeph">/cfg</code> directory</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OGG_HOME</code></span><code class="codeph">/dirjar</code> directory</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OGG_HOME</code></span><code class="codeph">/pw_agent_util.*</code> files</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OGG_HOME</code></span><code class="codeph">/jagent.*</code> files</p>
</li>
<li>
<p><code class="codeph">OGG_HOME/dirwlt</code> directory</p>
</li>
</ul>
</dd>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABBJIIF"><!-- --></a>Task 3&nbsp;&nbsp;&nbsp;Configuring the JRE</dt>
<dd>
<p>Configure your JRE as follows:</p>
<ol>
<li>
<p>Set your <code class="codeph">$JAVA_HOME</code> environment variable to use your installed JRE.</p>
</li>
<li>
<p>Set <code class="codeph">$JAVA_HOME/bin</code> <span class="italic">first</span> in your <code class="codeph">$PATH</code> environment variable.</p>
</li>
<li>
<p>Verify that <code class="codeph">$JAVA_HOME</code> and <code class="codeph">$JAVA_HOME/bin</code> are setup correctly by running the following command:</p>
<p><span class="bold"><code class="codeph">java -version</code></span></p>
<p>The Java version is displayed and should be similar to the following:</p>
<pre dir="ltr">
java version "1.8.0_40"
Java(TM) SE Runtime Environment (build 1.8.0_40-b19)
Java HotSpot(TM) 64-Bit Server VM (build 24.60-b09, mixed mode)
</pre></li>
</ol>
</dd>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABDAEBF"><!-- --></a>Task 4&nbsp;&nbsp;&nbsp;Installing <span>Oracle GoldenGate Monitor Agent</span></dt>
<dd>
<p>Install <span>Oracle GoldenGate Monitor Agent</span> in a separate, standalone location using the instructions in one of the following dependent on your database:</p>
<p>For non-z/OS platforms, use <a href="installing-and-configuring.htm#GUID-3D2C95B4-A78B-48DC-B884-986D600801D4" title="Use this step by step guide to install and configure&nbsp;Oracle GoldenGate Monitor Agent for all non-z/OS platforms.">Installing and Configuring Oracle GoldenGate Monitor Agent</a>.</p>
<p>For z/OS platforms, use <a href="installing-and-configuring-z-os-and-db2-i.htm#GUID-6A6BC3BA-7DEB-410F-9EF2-C718CFC9D0B0" title="Use this step by step guide to install and configure&nbsp;Oracle GoldenGate Monitor Agent for&nbsp;the z/OS and DB2 for i platforms.">Installing and Configuring Oracle GoldenGate Monitor Agent for z/OS and DB2 for i</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABDDHBA"><!-- --></a>Task 5&nbsp;&nbsp;&nbsp;Stopping JAgent</dt>
<dd>
<p>Go to the Oracle GoldenGate Core GGSCI terminal and stop the <span>Oracle GoldenGate Monitor Agent</span> by executing the <code class="codeph">stop</code> <code class="codeph">jagent</code> command:</p>
<pre dir="ltr">
GGSCI&gt;<span class="bold">stop jagent</span>
</pre>
<p>Verify that there are no remaining <code class="codeph">jagent</code> processes after by running the following command:</p>
<pre dir="ltr">
<span class="bold">ps -ef |grep jagent</span>
</pre>
<p>Use the <code class="codeph">kill -9</code> command to stop if any stray <code class="codeph">jagent</code> processes.</p>
</dd>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABIIBCG"><!-- --></a>Task 6&nbsp;&nbsp;&nbsp;Copying Files to the New Agent Directories</dt>
<dd>
<p>Copy the existing <span class="italic"><code class="codeph">$Monitor_Server_Domain</code></span><code class="codeph">/config/monitorserver/cfg</code> directory, including all content, to the new Agent directory, <span class="italic"><code class="codeph">$AGENT_HOME</code></span><code class="codeph">/cfg_templates</code>.</p>
</dd>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABDBAFH"><!-- --></a>Task 7&nbsp;&nbsp;&nbsp;Creating the Instance</dt>
<dd>
<p>Use one of the following subsections to either create or upgrade your Monitor instance:</p>
<p><span class="bold">11g Upgrades: Creating a New Instance</span></p>
<p>Create a new instance using the instructions in one of the following dependent on your operating system:</p>
<p>For non-z/OS platforms, use <a href="installing-and-configuring.htm#GUID-30155A7F-AA6C-472E-8397-1A86728FF207">Create the Oracle GoldenGate Monitor Agent Instance</a>.</p>
<p>For z/OS platforms, use <a href="creating-and-configuring-instance1.htm#GUID-56A7A32C-0C75-4300-9A2C-53F0AB6C6AC4">Create the Instance</a>.</p>
<p>This modifies the <code class="codeph">$OGG_HOME/dirprm/jagent.prm</code> file as in the following example:</p>
<pre dir="ltr">
COMMAND java -Dconfig.dir=/home/oracle/oggmon_agent/oggmon/cfg -Djava.util.logging.config.class=oracle.core.ojdl.logging.LoggingConfiguration -Doracle.core.ojdl.logging.config.file=/home/oracle/oggmon_
agent/oggmon/cfg/logging-config.xml -Doracle.core.ojdl.logging.componentId=JAGENT -jar -Xms512m -Xmx1024m /home/oracle/oggmon_agent/oggmon/ogg_agent/dirjar/jagent.jar
</pre>
<p>In this example, the <code class="codeph">jagent</code> that will now be used is in <code class="codeph">/home/oracle/oggmon_agent/oggmon/ogg_agent/dirjar/jagent.jar</code> and its configuration file is in the <code class="codeph">/home/oracle/oggmon_agent/oggmon/cfg</code> directory.</p>
<p><span class="bold">12c Upgrades: Upgrading the Existing Instance</span></p>
<p>Run the Monitor Agent upgrade utility by entering the following command:</p>
<ol>
<li>
<p>Go to the <span class="italic"><code class="codeph">$AGENT_HOME</code></span> directory. For example:</p>
<pre dir="ltr">
cd /u01/app/oracle/product/wls/oggmon/ogg_agent
</pre></li>
<li>
<p>Run the upgrade script:</p>
<div class="tblformal" id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__GUID-92BBC862-EB56-411C-856A-69FCD9B1A047">
<table class="cellalignment108" summary="Two-column table that lists, in the left-hand column, an operating system and in the right-hand column, the command you would use to launch the installer for the associated operating system.">
<thead>
<tr class="cellalignment92">
<th class="cellalignment109" id="d5760e324">For this Operating System</th>
<th class="cellalignment110" id="d5760e327">Use this command</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment92">
<td class="cellalignment111" id="d5760e332" headers="d5760e324">
<p>Unix</p>
</td>
<td class="cellalignment112" headers="d5760e332 d5760e327">
<pre dir="ltr">
$ ./upgradeToMonitorAgent1221.sh <span class="variable">From JAgent Version</span>
</pre></td>
</tr>
<tr class="cellalignment92">
<td class="cellalignment111" id="d5760e341" headers="d5760e324">
<p>Windows</p>
</td>
<td class="cellalignment112" headers="d5760e341 d5760e327">
<pre dir="ltr">
C:\ upgradeToMonitorAgent1221.bat <span class="variable">From JAgent Version</span>
</pre></td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>For example: To upgrade from version 12.2.1.0.0 to version 12.2.1.2.0 use the command <code class="codeph">./upgradeToMonitorAgent1221.sh</code> <span class="variable">12.2.1.0.0</span></p>
<div class="infobox-note" id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__GUID-A7535CDE-B4AB-4E41-ADB7-B714F0B61D32">
<p class="notep1">Note:</p>
<p>An error is displayed if the JAgent version is not provided.</p>
</div>
<p>The system responds:</p>
<pre dir="ltr">
Please enter absolute path of Oracle GoldenGate home directory: 
</pre></li>
<li>
<p>Enter the absolute path to your Oracle GoldenGate home directory. For example, <code class="codeph">/u01/ogg/replication/oggcore1</code>.</p>
<p>The system responds:</p>
<pre dir="ltr">
Please enter absolute path of OGG Agent instance : 
</pre></li>
<li>
<p>Enter the directory that contains your <span>Oracle GoldenGate Monitor Agent</span> instance, which can be an existing directory. For example, <code class="codeph">/u01/ogg/agents/oggmon/agent1</code>. This directory should be different than the Oracle GoldenGate home directory to avoid overwriting your <span>Oracle GoldenGate Monitor Agent</span> JAR and configuration files the next time you install or patch Oracle GoldenGate.</p>
<div class="infobox-note" id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__GUID-3819CEAE-BEC1-4877-B982-4CD840BB0297">
<p class="notep1">Note:</p>
<p>For Windows, you must ensure that you provide the absolute JDK8 directory path explicitly or the Monitor Agent cannot connect to the Monitor server. This directory path can also be defined in the <code class="codeph">jagent.prm</code> file.</p>
</div>
<p>The <span>Oracle GoldenGate Monitor Agent</span> Instance directory can be an existing directory location. In that case, you are prompted:</p>
<pre dir="ltr">
OGG Agent instance directory already exists, do you want to overwrite the contents (yes | no)". 
</pre>
<p>If you choose <code class="codeph">yes</code>, the execution of the script will continue and all the contents related to <span>Oracle GoldenGate Monitor Agent</span> will be overwritten on that location. If you choose <code class="codeph">no</code>, the execution of the script will stop.</p>
<p>The system responds:</p>
<pre dir="ltr">
Please enter unique name to replace timestamp in startMonitorAgent script.
</pre></li>
<li>
<p>Enter the unique name that you want to replace the timestamp in the <code class="codeph">startMonitorAgent.sh</code> script file.</p>
</li>
</ol>
<p>Once the Monitor Agent upgrade completes successfully, the Monitor Agent wallet credentials are also updated.</p>
<div class="infobox-note" id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__GUID-468410B3-454C-4731-BAFB-909E256A9785">
<p class="notep1">Note:</p>
If you want to install a second instance of the JAgent, then ensure to remove <code>$OGG_HOME/dirprm/jagent.prm</code>, and then run the <code class="codeph"><span class="codeinlineitalic">CreateMonitorAgentInstance.sh</span></code> script again.</div>
</dd>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABDIJGG"><!-- --></a>Task 8&nbsp;&nbsp;&nbsp;Starting the Agent</dt>
<dd>
<p>Go to the Oracle GoldenGate Core GGSCI terminal and restart the <span>Oracle GoldenGate Monitor Agent</span> by executing the following commands:</p>
<pre dir="ltr">
<span class="bold">stop manager</span>
start manager
start jagent
</pre>
<p>Monitor the new Agent log file, <code class="codeph">$AGENT_HOME/logs/ogg_agent.log</code> and resolve any issues.</p>
<p>If you are using the Oracle GoldenGate EM Plug-in, after <code class="codeph">jagent</code> starts correctly you must restart the Oracle Enterprise Manager (OEM) Agent then login to the OEM 12c console to ensure that the out of sync status issues for Oracle GoldenGate registered targets are resolved.</p>
</dd>
<dt class="dlterm"><a id="GUID-EE46A3EC-4905-4349-BA3A-D9C1A9895518__BABIJIJC"><!-- --></a>Task 9&nbsp;&nbsp;&nbsp;Removing the Previous <span>Oracle GoldenGate Monitor Agent</span> Software</dt>
<dd>
<p>Remove the previous <span>Oracle GoldenGate Monitor Agent</span> software that was bundled with Oracle GoldenGate Software by deleting the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">OGG_HOME</code></span><code class="codeph">/cfg</code> directory</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OGG_HOME</code></span><code class="codeph">/dirjar</code> directory</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OGG_HOME</code></span><code class="codeph">/pw_agent_util.*</code> files</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OGG_HOME</code></span><code class="codeph">/jagent.*</code> files</p>
</li>
<li>
<p>(Optional) If you do <span class="italic">not</span> store anything related to Oracle GoldenGate Instance in Oracle Wallet, then delete the <code class="codeph">OGG_HOME/dirwlt</code> directory.</p>
</li>
</ul>
</dd>
</dl>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment91">
<tr>
<td class="cellalignment103">
<table class="cellalignment106">
<tr>
<td class="cellalignment95"><a href="creating-and-configuring-instance1.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment95"><a href="installation-screens.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment105">
<table class="cellalignment94">
<tr>
<td class="cellalignment95"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment95"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
