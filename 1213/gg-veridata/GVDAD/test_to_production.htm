<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Moving from a Test to Production Environment</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="description" content="This appendix describes how to move an Oracle GoldenGate Veridata installation from a test environment (a source environment) to a production environment (a target environment)." />
<meta name="dcterms.created" content="2015-06-29T10:16:2Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="GoldenGate Administering Oracle GoldenGate Veridata" />
<meta name="dcterms.identifier" content="E29293-02" />
<meta name="dcterms.isVersionOf" content="GVDAD" />
<link rel="Start" href="../../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="configuration_parameters.htm" title="Previous" type="text/html" />
<link rel="Next" href="sample.htm" title="Next" type="text/html" />
<link rel="alternate" href="GVDAD.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="GVDAD.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="GVDAD.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">12/15</span> <!-- End Header -->
<div id="GVDAD1122" class="appendix"><a id="sthref187"></a>
<h1 class="appendix"><span class="secnum">A</span> Moving from a Test to Production Environment</h1>
<p><a id="GVDAD280"></a>This appendix describes how to move an Oracle GoldenGate Veridata installation from a test environment (a source environment) to a production environment (a target environment).</p>
<p>This appendix includes the following sections:</p>
<ul>
<li>
<p><a href="#A1042339">Moving Installations from a Source Environment to a Target Environment</a></p>
</li>
<li>
<p><a href="#A1042476">Additional Steps for Moving Oracle GoldenGate Veridata Repository</a></p>
</li>
</ul>
<a id="A1042339"></a>
<div id="GVDAD281" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">A.1</span> Moving Installations from a Source Environment to a Target Environment</h2>
<p>Oracle Fusion Middleware provides various scripts that you use to move your environment.</p>
<p>To move Oracle Home that contains all binary files of your Veridata installation, use the <code dir="ltr">copyBinary</code> and <code dir="ltr">pasteBinary</code> scripts. After moving the Oracle Home, use the <code dir="ltr">copyConfig</code> and <code dir="ltr">pasteConfig</code> scripts to move a copy of the Veridata domain configuration including the Administration Server, Managed Server, and other components in the domain to the target environment.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Test to production migration is not supported for a compact domain or for repository databases other than Oracle.</div>
<p>For more information about using these scripts, see "Common Procedures for Moving to a Target Environment" in <a class="olink ASADM" href="http://www.oracle.com/pls/topic/lookup?ctx=gg1213&amp;id=ASADM"><span class="italic">Administering Oracle Fusion Middleware</span></a>.</p>
</div>
<!-- class="sect1" -->
<a id="A1042476"></a>
<div id="GVDAD282" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">A.2</span> Additional Steps for Moving Oracle GoldenGate Veridata Repository</h2>
<p>In addition to the common procedures described in the guide <a class="olink ASADM" href="http://www.oracle.com/pls/topic/lookup?ctx=gg1213&amp;id=ASADM"><span class="italic">Administering Oracle Fusion Middleware</span></a>, follow the instructions below for moving the Oracle GoldenGate Veridata repository to a target environment:</p>
<div id="GVDAD1117" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref188"></a>
<h3 class="sect2"><span class="secnum">A.2.1</span> Moving Veridata Configuration Data from Test to Production</h3>
<p>To export and import Veridata repository configuration data, use the scripts available in the <code dir="ltr">ORACLE_HOME/veridata/t2p/scripts</code> directory.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must have the tools sqlplus, impdp, and expdb installed on the system where you run the scripts.</div>
<p>To export the repository from the test environment, run the script as follows:</p>
<pre dir="ltr">
ORACLE_HOME/veridata/t2p/scripts/oracle_exp_imp.sh  --export --dba_user system --db_inst
ora11203 --vdt_user DEV31_VERIDATA --work_dir /tmp/work1
</pre>
<p>To import the repository to the production environment, run the script as follows:</p>
<pre dir="ltr">
ORACLE_HOME/veridata/t2p/scripts/oracle_exp_imp.sh  --import --dba_user system --db_inst ora11203--vdt_user DEV32_VERIDATA --work_dir /tmp/work1
</pre>
<p><a href="#CACHBAFI">Table A-1</a> describes the arguments you specify while running the <code dir="ltr">oracle_exp_imp.sh/oracle_exp_imp.bat</code> script.</p>
<div id="GVDAD1118" class="tblformal">
<p class="titleintable"><a id="sthref189"></a><a id="CACHBAFI"></a>Table A-1 Arguments for the Veridata Test to Production Scripts</p>
<table class="cellalignment51" title="Arguments for the Veridata Test to Production Scripts" summary="script arguments" dir="ltr">
<thead>
<tr class="cellalignment40">
<th class="cellalignment52" id="r1c1-t4">Argument</th>
<th class="cellalignment52" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment40">
<td class="cellalignment46" id="r2c1-t4" headers="r1c1-t4">
<p>export</p>
</td>
<td class="cellalignment46" headers="r2c1-t4 r1c2-t4">
<p>Indicates that the script is exporting Veridata data from the test environment.</p>
</td>
</tr>
<tr class="cellalignment40">
<td class="cellalignment46" id="r3c1-t4" headers="r1c1-t4">
<p>import</p>
</td>
<td class="cellalignment46" headers="r3c1-t4 r1c2-t4">
<p>Indicates that the script is importing Veridata data to the production environment.</p>
</td>
</tr>
<tr class="cellalignment40">
<td class="cellalignment46" id="r4c1-t4" headers="r1c1-t4">
<p>dba_user &lt;user_name&gt;</p>
</td>
<td class="cellalignment46" headers="r4c1-t4 r1c2-t4">
<p>Specifies a database user with DBA privileges.</p>
</td>
</tr>
<tr class="cellalignment40">
<td class="cellalignment46" id="r5c1-t4" headers="r1c1-t4">
<p>db_inst &lt;oracle_sid&gt;</p>
</td>
<td class="cellalignment46" headers="r5c1-t4 r1c2-t4">
<p>Specifies the database connect descriptor name, basically defined in the <code dir="ltr">$TNS_ADMIN/tnsnames.ora</code> file.</p>
</td>
</tr>
<tr class="cellalignment40">
<td class="cellalignment46" id="r6c1-t4" headers="r1c1-t4">
<p>vdt_user &lt;veridata_user&gt;</p>
</td>
<td class="cellalignment46" headers="r6c1-t4 r1c2-t4">
<p>Specifies the Veridata user or schema name for which the export or import is being done.</p>
</td>
</tr>
<tr class="cellalignment40">
<td class="cellalignment46" id="r7c1-t4" headers="r1c1-t4">
<p>work_dir &lt;work_dir&gt;</p>
</td>
<td class="cellalignment46" headers="r7c1-t4 r1c2-t4">
<p>Specifies the temporary directory for database dump and to save logs.</p>
</td>
</tr>
<tr class="cellalignment40">
<td class="cellalignment46" id="r8c1-t4" headers="r1c1-t4">
<p>pwd_file &lt;dba password file&gt;</p>
</td>
<td class="cellalignment46" headers="r8c1-t4 r1c2-t4">
<p>Specifies the file that contains the DBA user password.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<div id="GVDAD1119" class="sect2"><a id="sthref190"></a>
<h3 class="sect2"><span class="secnum">A.2.2</span> Applying Configuration Changes while Moving from Test to Production</h3>
<p>While moving from a test to production environment, if there are any configuration changes for the Veridata Agent such as host and port changes OR if there is any schema or catalog name changes in the compare pairs, execute the following statements as appropriate to your database:</p>
<p><span class="bold">For all databases:</span></p>
<pre dir="ltr">
UPDATE TABLE_INFO set SRC_SCHEMA_NAME =  <span class="codeinlineitalic">production_source_schema</span> WHERE SRC_SCHEMA_NAME<span class="codeinlineitalic"> = test_source_schema</span>
</pre>
<pre dir="ltr">
UPDATE TABLE_INFO set TARG_SCHEMA_NAME =  <span class="codeinlineitalic">production_target_schema</span> WHERE TARG_SCHEMA_NAME<span class="codeinlineitalic"> = test_target_schema</span>
</pre>
<p><span class="bold">For SQL Server and Sybase databases:</span></p>
<pre dir="ltr">
UPDATE TABLE_INFO set SRC_CATALOG_NAME =  <span class="codeinlineitalic">production_source_catalog</span> WHERE SRC_CATALOG_NAME<span class="codeinlineitalic"> = test_source_catalog</span>
</pre>
<pre dir="ltr">
UPDATE TABLE_INFO set TARG_CATALOG_NAME =  <span class="codeinlineitalic">production_target_catalog</span> WHERE TARG_CATALOG_NAME<span class="codeinlineitalic"> = test_target_catalog</span>
</pre>
<p><span class="bold">For NSK:</span></p>
<p>Update the table names in the COMPARE_PAIR table to replace the test node names and disk volume names with the production names.</p>
<p>The statements for various database repositories are given below.</p>
<p>For Oracle:</p>
<pre dir="ltr">
Update COMPARE_PAIRS SET  SRC_TABLE_NAME = '\SPROD.$PDATA' || SUBSTR(SRC_TABLE_NAME, 12) Where SRC_TABLE_NAME like '\STEST.TDATA%'
</pre>
<pre dir="ltr">
Update COMPARE_PAIRS SET  TARG_TABLE_NAME = '\TPROD.$PDATA' ||
    SUBSTR(TARG_TABLE_NAME, 12) Where TARG_TABLE_NAME like '\TTEST.TDATA%'
</pre>
<p>For SQL Server:</p>
<pre dir="ltr">
Update COMPARE_PAIRS SET  SRC_TABLE_NAME = '\SPROD.$PDATA' +
    SUBSTRING(SRC_TABLE_NAME, 12, LEN(SRC_TABLE_NAME) -  12) Where SRC_TABLE_NAME
    like '\STEST.TDATA%'

Update COMPARE_PAIRS SET  TARG_TABLE_NAME = '\TPROD.$PDATA' +
    SUBSTRING(TARG_TABLE_NAME, 12, LEN(TARG_TABLE_NAME) -12) Where TARG_TABLE_NAME
    like '\TTEST.TDATA%'
</pre>
<p>For MYSQL:</p>
<pre dir="ltr">
Update COMPARE_PAIRS SET  SRC_TABLE_NAME = CONCAT( '\SPROD.$PDATA' ,
    SUBSTRING(SRC_TABLE_NAME, 12)) Where SRC_TABLE_NAME like '\STEST.TDATA%'

Update COMPARE_PAIRS SET  TARG_TABLE_NAME = CONCAT('\TPROD.$PDATA',
    SUBSTRING(TARG_TABLE_NAME, 12)) Where TARG_TABLE_NAME like '\TTEST.TDATA%'
</pre></div>
<!-- class="sect2" -->
<div id="GVDAD1120" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref191"></a>
<h3 class="sect2"><span class="secnum">A.2.3</span> Modifying the Agent details in the Production Environment</h3>
<p>Update the Veridata Agent details in the CONNECTIONS table of the production environment host as described below:</p>
<ul>
<li>
<p>If only the Agent host name needs to be changed, update the database as follows:</p>
<pre dir="ltr">
Update CONNECTIONS set MGR_NAME = 'prod host' where MGR_NAME 'test host'
</pre></li>
<li>
<p>If there are more changes to the Veridata Agent, such as changes to the port number, User ID, password, and Repair User ID, then you should start the Veridata application and update the environment using the UI or command-line tool. Start the Veridata agent after making these changes.</p>
</li>
</ul>
<p>For example, create an xml as below:</p>
<pre dir="ltr">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE configuration SYSTEM
"http://@VeridataServerHost@:@veridataServerPort@/veridata/configuration.dtd"&gt;
    &lt;configuration validation="required"&gt;
    &lt;connection name="@conneciotnName@" host="@sqlManagerHostSrc@" 
        port="@sqlManagerPortSrc@" user="@sqlConn0User@"
        password="@sqlConn0Password@" repairUser="@repairUsername@"
        repairPassword="@repairPassword@" agent-timeout="4000" 
        truncate-spaces="false" fetch-size="3" use-ssl="false"&gt;
           &lt;description&gt;
            &lt;![CDATA[
                SQL Scripting Source Connection
            ]]&gt;
            &lt;/description&gt;
   &lt;/connection&gt;
   &lt;/configuration&gt;
</pre>
<p><code dir="ltr">VERIDATA_DOMAIN_HOME/veridata/bin/veridata_scripting.sh -update /tmp/con.xml -wlUser &lt;cmd user&gt;</code></p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment39">
<tr>
<td class="cellalignment46">
<table class="cellalignment44">
<tr>
<td class="cellalignment43"><a href="configuration_parameters.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment43"><a href="sample.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment48">
<table class="cellalignment42">
<tr>
<td class="cellalignment43"><a href="../../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment43"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment43"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment43"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
