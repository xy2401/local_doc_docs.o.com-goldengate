<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Moving from a Test to Production Environment</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1071" />
<meta name="description" content="This appendix describes how to move an Oracle GoldenGate Veridata installation from a test environment (a source environment) to a production environment (a target environment)." />
<meta name="dcterms.created" content="2015-10-12T20:5:0Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="GoldenGate Administering Oracle GoldenGate Veridata" />
<meta name="dcterms.identifier" content="E60970-01" />
<meta name="dcterms.isVersionOf" content="GVDAD" />
<link rel="Start" href="../../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="configuration_parameters.htm" title="Previous" type="text/html" />
<link rel="Next" href="sample.htm" title="Next" type="text/html" />
<link rel="alternate" href="E60970-01.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="E60970-01.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="E60970-01.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns"><span id="PAGE" style="display:none;">11/13</span> <!-- End Header -->
<div id="GVDAD1122" class="appendix"><a id="sthref129"></a>
<h1 class="appendix"><span class="secnum">A</span> Moving from a Test to Production Environment</h1>
<p><a id="GVDAD280"></a>This appendix describes how to move an Oracle GoldenGate Veridata installation from a test environment (a source environment) to a production environment (a target environment).</p>
<p>This appendix includes the following sections:</p>
<ul>
<li>
<p><a href="#A1042339">Moving Installations from a Source Environment to a Target Environment</a></p>
</li>
<li>
<p><a href="#A1042476">Additional Steps for Moving Oracle GoldenGate Veridata Repository</a></p>
</li>
</ul>
<a id="A1042339"></a>
<div id="GVDAD281" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">A.1</span> Moving Installations from a Source Environment to a Target Environment</h2>
<p>Oracle Fusion Middleware provides various scripts that you use to move your environment.</p>
<p>To move Oracle Home that contains all binary files of your Veridata installation, use the <code dir="ltr">copyBinary</code> and <code dir="ltr">pasteBinary</code> scripts. After moving the Oracle Home, use the <code dir="ltr">copyConfig</code> and <code dir="ltr">pasteConfig</code> scripts to move a copy of the Veridata domain configuration including the Administration Server, Managed Server, and other components in the domain to the target environment.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Test to production migration is not supported for a compact domain or for repository databases other than Oracle and SQL Server.</div>
<p>For more information about using these scripts, see "Common Procedures for Moving to a Target Environment" in <a class="olink ASADM" href="http://www.oracle.com/pls/topic/lookup?ctx=E63732-01&amp;id=ASADM"><span class="italic">Administering Oracle Fusion Middleware</span></a>.</p>
</div>
<!-- class="sect1" -->
<a id="A1042476"></a>
<div id="GVDAD282" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">A.2</span> Additional Steps for Moving Oracle GoldenGate Veridata Repository</h2>
<p>In addition to the common procedures described in the guide <a class="olink ASADM" href="http://www.oracle.com/pls/topic/lookup?ctx=E63732-01&amp;id=ASADM"><span class="italic">Administering Oracle Fusion Middleware</span></a>, follow the instructions below for moving the Oracle GoldenGate Veridata repository to a target environment:</p>
<div id="GVDAD1117" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref130"></a>
<h3 class="sect2"><span class="secnum">A.2.1</span> Moving Veridata Configuration Data from Test to Production</h3>
<p>To export and import Veridata repository configuration data, use the scripts available in the <code dir="ltr">DOMAIN_HOME/veridata/bin</code> directory use the following steps:</p>
<ol>
<li>
<p>To export the repository from the test environment, run the export script as follows:</p>
<pre dir="ltr">
DOMAIN_HOME/veridata/bin/veridata_export.sh  -export /tmp/export.xml -all -wluser <span class="italic">cmd_user</span> -exportPassword
</pre>
<p><a href="#CACHBAFI">Table A-1</a> describes the arguments you specify while running the export and import scripts.</p>
<div id="GVDAD1118" class="tblformal">
<p class="titleintable"><a id="sthref131"></a><a id="CACHBAFI"></a>Table A-1 Arguments for the Veridata Test to Production Scripts</p>
<table class="cellalignment11" title="Arguments for the Veridata Test to Production Scripts" summary="script arguments">
<thead>
<tr class="cellalignment2">
<th class="cellalignment12" id="r1c1-t3">Argument</th>
<th class="cellalignment12" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2">
<td class="cellalignment8" id="r2c1-t3" headers="r1c1-t3">
<p><code dir="ltr">export</code></p>
</td>
<td class="cellalignment8" headers="r2c1-t3 r1c2-t3">
<p>Indicates that the script is exporting Veridata data from the test environment.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment8" id="r3c1-t3" headers="r1c1-t3">
<p><code dir="ltr">import</code></p>
</td>
<td class="cellalignment8" headers="r3c1-t3 r1c2-t3">
<p>Indicates that the script is importing Veridata data to the production environment.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment8" id="r4c1-t3" headers="r1c1-t3">
<p><code dir="ltr">wluser</code> <code dir="ltr"><span class="codeinlineitalic">cmd_user</span></code></p>
</td>
<td class="cellalignment8" headers="r4c1-t3 r1c2-t3">
<p>Specifies the administrative WebLogic Server user.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment8" id="r5c1-t3" headers="r1c1-t3">
<p><code dir="ltr">exportPassword</code></p>
</td>
<td class="cellalignment8" headers="r5c1-t3 r1c2-t3">
<p>Indicates that the script is exporting the <code dir="ltr"><span class="codeinlineitalic">cmd_user</span></code> password.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></li>
<li>
<p>Verify that any Veridata Agent host, port, and user password specifiers for the production host are updated in the just created <code dir="ltr">/tmp/export.xml</code> file.</p>
</li>
<li>
<p>If the Veridata Agent host or port has changed, then you must manually update the generated <code dir="ltr">export.xml</code> file with the new host and port informations for the Connections.</p>
</li>
<li>
<p>The export operation exports all of the data in the repository to XML file without validation. If your environment has some compare pairs for which the Validation Status is not successful, then the import operation will fail with the XML file generated by the export operation. To prevent failure of the import operation, you have the option to disable the compare pair validation. You can do this by updating the generated XML with these steps:</p>
<ol>
<li>
<p>Open the generated XML file.</p>
</li>
<li>
<p>Search for the <code dir="ltr">configuration</code> tag. This tag has the <code dir="ltr">validation</code> attribute, which is set to <code dir="ltr">required</code>, by default.</p>
</li>
<li>
<p>Set the <code dir="ltr">validation</code> attribute to one of the following values:</p>
<p><code dir="ltr">omit-failures</code> &mdash; Indicates that all successfully validated compare pairs will be added to the repository and other specified compare pairs will be ignored.</p>
<p><code dir="ltr">none</code> &mdash; Indicates that no compare pair validation is done before adding the compare pairs to the repository. You and then use the Veridata GUI to review and fix the validation problems. For example:</p>
<p>Old tag: <code dir="ltr">&lt;configuration operation="update" validation="required"&gt;</code></p>
<p>Updated tag: <code dir="ltr">&lt;configuration operation="update" validation="omit-failures"&gt;</code></p>
</li>
</ol>
</li>
<li>
<p>To import the repository to the production environment, run the import script as follows:</p>
<pre dir="ltr">
DOMAIN_HOME/veridata/bin/veridata_import.sh -update  /tmp/export.xml -wluser  <span class="italic">cmd_user</span>
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<div id="GVDAD1119" class="sect2"><a id="sthref132"></a>
<h3 class="sect2"><span class="secnum">A.2.2</span> Applying Configuration Changes while Moving from Test to Production</h3>
<p>While moving from a test to production environment, if there are any configuration changes for the Veridata Agent such as host and port changes <span class="italic">or</span> if there is any schema or catalog name changes in the compare pairs, you must first execute the following statements:</p>
<dl>
<dd><a id="GVDAD1175"></a><a id="sthref133"></a></dd>
<dt class="seghead">Task 1&nbsp;&nbsp;&nbsp;For all databases</dt>
<dd>
<pre dir="ltr">
Update <span class="italic">DEV_VERIDATA</span>.TABLE_INFO set  SRC_SCHEMA_NAME = <span class="italic">production_source_schema</span> Where    SRC_SCHEMA_NAME  = <span class="italic">test_source_schema</span>
 Update TABLE_INFO set  TARG_SCHEMA_NAME = <span class="italic">production_target_schema</span> Where    TARG_SCHEMA_NAME  = <span class="italic">test_target_schema</span>
</pre>
<p>Where <code dir="ltr"><span class="codeinlineitalic">DEV_VERIDATA</span></code> is the name of the production repository schema.</p>
<p>Where <code dir="ltr"><span class="codeinlineitalic">production_source_schema</span></code> is the name of the production source schema and <code dir="ltr"><span class="codeinlineitalic">production_target_schema</span></code> is the name of the production target schema.</p>
<p>Where <code dir="ltr"><span class="codeinlineitalic">test_source_schema</span></code> is the name of the test source schema and <code dir="ltr"><span class="codeinlineitalic">test_target_schema</span></code> is the name of the test target schema.</p>
</dd>
<dd><a id="GVDAD1176"></a><a id="sthref134"></a></dd>
<dt class="seghead">Task 2&nbsp;&nbsp;&nbsp;Appropriate to your database</dt>
<dd>
<dl>
<dt>For SQL Server and Sybase databases:</dt>
<dd>
<pre dir="ltr">
Update TABLE_INFO set  SRC_CATALOG_NAME = <span class="italic">production_source_catalog</span> Where    SRC_CATALOG_NAME  = <span class="italic">test_source_catalog</span>
</pre>
<pre dir="ltr">
Update TABLE_INFO set  TARG_CATALOG_NAME = <span class="italic">production_target_catalog</span> Where    TARG_CATALOG_NAME  = <span class="italic">test_target_catalog</span>
</pre>
<p>Where <code dir="ltr"><span class="codeinlineitalic">production_source_catalog</span></code> is the name of the production source catalog and <code dir="ltr"><span class="codeinlineitalic">production_target_catalog</span></code> is the name of the production target catalog.</p>
<p>Where <code dir="ltr"><span class="codeinlineitalic">test_source_catalog</span></code> is the name of the test source catalog and <code dir="ltr"><span class="codeinlineitalic">test_target _catalog</span></code> is the name of the test target catalog.</p>
</dd>
<dt>For NSK:</dt>
<dd>
<p>Update the table names in the <code dir="ltr">COMPARE_PAIR</code> table to replace the test node names and disk volume names with the production names using one of the following appropriate for your database:</p>
<ul>
<li>
<p><span class="bold">For Oracle:</span></p>
<pre dir="ltr">
Update COMPARE_PAIRS SET  SRC_TABLE_NAME = '\SPROD.$PDATA' ||    SUBSTR(SRC_TABLE_NAME, 12) Where SRC_TABLE_NAME like '\STEST.TDATA%'
Update COMPARE_PAIRS SET  TARG_TABLE_NAME = '\TPROD.$PDATA' ||
    SUBSTR(TARG_TABLE_NAME, 12) Where TARG_TABLE_NAME like '\TTEST.TDATA%'
</pre></li>
<li>
<p><span class="bold">For SQL Server:</span></p>
<pre dir="ltr">
Update COMPARE_PAIRS SET  SRC_TABLE_NAME = '\SPROD.$PDATA' +    SUBSTRING(SRC_TABLE_NAME, 12, LEN(SRC_TABLE_NAME) -  12) Where SRC_TABLE_
    NAME like '\STEST.TDATA%'
Update COMPARE_PAIRS SET  TARG_TABLE_NAME = '\TPROD.$PDATA' +    SUBSTRING(TARG_TABLE_NAME, 12, LEN(TARG_TABLE_NAME) -12) Where TARG_TABLE_
    NAME like '\TTEST.TDATA%'
</pre></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div>
<!-- class="sect2" -->
<div id="GVDAD1120" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref135"></a>
<h3 class="sect2"><span class="secnum">A.2.3</span> Modifying the Agent details in the Production Environment</h3>
<p>Update the Veridata Agent details in the <code dir="ltr">CONNECTIONS</code> table of the production environment host as described below:</p>
<ul>
<li>
<p>If only the Agent host name needs to be changed, update the database as follows:</p>
<pre dir="ltr">
Update CONNECTIONS set MGR_NAME = 'prod host' where MGR_NAME 'test host'
</pre></li>
<li>
<p>If there are more changes to the Veridata Agent, such as changes to the port number, User ID, password, and Repair User ID, then you should start the Veridata application and update the environment using the UI or command-line tool.</p>
<p>For example, create an <code dir="ltr">/tmp/con.xml</code> XML file as follows:</p>
<pre dir="ltr">
#Create xml as below by filling placeholders between @ and connections can be more than one.
    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;!DOCTYPE configuration SYSTEM
    "http://@VeridataServerHost@:@veridataServerPort@/veridata/configuration.dtd"&gt;
    &lt;configuration validation="required"&gt;
    &lt;connection name="@conneciotnName@" host="@sqlManagerHostSrc@" 
        port="@sqlManagerPortSrc@" user="@sqlConn0User@"
        password="@sqlConn0Password@" repairUser="@repairUsername@"
        repairPassword="@repairPassword@" agent-timeout="4000" 
        truncate-spaces="false" fetch-size="3" use-ssl="false"&gt;
           &lt;description&gt;
            &lt;![CDATA[
                SQL Scripting Source Connection
            ]]&gt;
            &lt;/description&gt;
   &lt;/connection&gt;
   &lt;/configuration&gt;
</pre>
<p>Update the Veridata Agent with your XML file using:</p>
<pre dir="ltr">
DOMAIN_HOME/veridata/bin/veridata_import.sh -update /tmp/con.xml -wlUser <span class="italic">cmd_user</span>
</pre>
<p>Start the Veridata Agent after making these changes.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1">
<tr>
<td class="cellalignment8">
<table class="cellalignment6">
<tr>
<td class="cellalignment5"><a href="configuration_parameters.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5"><a href="sample.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment10">
<table class="cellalignment4">
<tr>
<td class="cellalignment5"><a href="../../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
