<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Automatic Conflict Detection and Resolution</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="You can configure Oracle GoldenGate to automatically detect and resolve conflicts that occur when same data is updated concurrently at different sites." />
<meta name="dcterms.created" content="2018-07-26T05:17:29Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Using Oracle GoldenGate for Oracle Database" />
<meta name="dcterms.identifier" content="E88785-05" />
<meta name="dcterms.isVersionOf" content="GGODB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2010, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="managing-ddl-replication-environment.htm" title="Previous" type="text/html" />
<link rel="Next" href="using-parallel-replicat.htm" title="Next" type="text/html" />
<link rel="alternate" href="GGODB.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-EB3D5499-7F28-45B6-A64E-53BF786E32A5"></a> <span id="PAGE" style="display:none;">19/28</span> <!-- End Header -->
<h1 id="GGODB-GUID-EB3D5499-7F28-45B6-A64E-53BF786E32A5" class="sect1"><span class="enumeration_chapter">16</span> Automatic Conflict Detection and Resolution</h1>
<div>
<p>You can configure Oracle GoldenGate to automatically detect and resolve conflicts that occur when same data is updated concurrently at different sites.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-4E475E42-AAEB-4D7F-9FED-EFED63C8A39A">About Automatic Conflict Detection and Resolution</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-46AD2AD0-65A4-4FB0-A8E3-B4D84F30BABE">Configuring Automatic Conflict Detection and Resolution</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5">Managing Automatic Conflict Detection and Resolution</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-5C302D04-E696-4454-A63B-34ADF26FE90E">Monitoring Automatic Conflict Detection and Resolution</a><br /></li>
</ul>
</div>
<div class="sect2"><a id="GUID-4E475E42-AAEB-4D7F-9FED-EFED63C8A39A"></a>
<h2 id="GGODB-GUID-4E475E42-AAEB-4D7F-9FED-EFED63C8A39A" class="sect2"><span class="enumeration_section">16.1</span> About Automatic Conflict Detection and Resolution</h2>
<div>
<p>When Oracle GoldenGate replicates changes between Oracle Databases, you can configure and manage Oracle GoldenGate automatic conflict detection and resolution in these databases. To do this, you must ensure that PL/SQL call is done at the source and the target databases. This feature is intended for use with bi-directional replication.</p>
<div class="infobox-note" id="GUID-4E475E42-AAEB-4D7F-9FED-EFED63C8A39A__GUID-A666E4E1-2E25-4295-AC30-F1CFE339C973">
<p class="notep1">Note:</p>
<p>This chapter is for the automatic conflict detection and resolution feature that is specific to Oracle GoldenGate 12<span class="italic">c</span> (12.3.0.1) and Oracle Database 12<span class="italic">c</span> Release 2 (12.2) and later, which is configured in an Oracle Database. There is also a general Oracle GoldenGate feature for conflict detection and resolution, which is called Oracle GoldenGate conflict detection and resolution (CDR). Oracle GoldenGate CDR is configured in the Replicat parameter file.</p>
</div>
<p>You can configure only one of the following types of automatic conflict detection and resolution for a single table:</p>
<ul style="list-style-type: disc;">
<li>
<p>The automatic conflict detection and resolution feature that is specific to Oracle Database 12<span class="italic">c</span> Release 2 (12.2)</p>
</li>
<li>
<p>Oracle GoldenGate CDR</p>
</li>
</ul>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-7E2DD471-08E3-413C-A199-E7C4A2E244A2">Automatic Conflict Detection and Resolution</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-38FFAF93-379A-417D-8202-795963C31E2C">Latest Timestamp Conflict Detection and Resolution</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-E44EE4A0-CFDA-4534-819A-DA27E69E40E2">Delta Conflict Detection and Resolution</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-A0A03425-1227-4D61-BE41-B89B59265063">Column Groups</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-EB3D5499-7F28-45B6-A64E-53BF786E32A5" title="You can configure Oracle GoldenGate to automatically detect and resolve conflicts that occur when same data is updated concurrently at different sites.">Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-7E2DD471-08E3-413C-A199-E7C4A2E244A2"></a>
<h3 id="GGODB-GUID-7E2DD471-08E3-413C-A199-E7C4A2E244A2" class="sect3"><span class="enumeration_section">16.1.1</span> Automatic Conflict Detection and Resolution</h3>
<div>
<p>You can configure automatic conflict detection and resolution in an Oracle GoldenGate configuration that replicates tables between Oracle Databases. To configure conflict detection and resolution for a table, call the <code class="codeph">ADD_AUTO_CDR</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package.</p>
<p>When Oracle GoldenGate captures changes that originated at an Oracle Database, each change is encapsulated in a row logical change record (LCR). A row LCR is a structured representation of a DML row change. Each row LCR includes the operation type, old column values, and new column values. Multiple row LCRs can be part of a single database transaction.</p>
<p>When more than one replica of a table allows changes to the table, a conflict can occur when a change is made to the same row in two different databases at nearly the same time. Oracle GoldenGate replicates changes using the row LCRs. It detects a conflict by comparing the old values in the row LCR for the initial change from the origin database with the current values of the corresponding table row at the destination database identified by the key columns. If any column value does not match, then there is a conflict.</p>
<p>After a conflict is detected, Oracle GoldenGate can resolve the conflict by overwriting values in the row with some values from the row LCR, ignoring the values in the row LCR, or computing a delta to update the row values.</p>
<p>Automatic conflict detection and resolution does not require application changes for the following reasons:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Database automatically creates and maintains invisible timestamp columns.</p>
</li>
<li>
<p>Inserts, updates, and deletes use the delete tombstone log table to determine if a row was deleted.</p>
</li>
<li>
<p>LOB column conflicts can be detected.</p>
</li>
<li>
<p>Oracle Database automatically configures supplemental logging on required columns.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-7E2DD471-08E3-413C-A199-E7C4A2E244A2__GUID-3BAE78C4-B26F-4946-B64C-E3337D449850">
<p class="notep1">Note:</p>
<p>If you use the classic Replicat on tables that have Automatic Change Detection and Resolution enabled, the Extract might abend with the OGG-10461 Failed to retrieve timestamp error. This is because the internal trigger that inserts the records into tombstone tables, only fires on user DMLs. A classic Replicat suppresses all the triggers from firing, which results in missing inserts on tombstone tables.</p>
</div>
<p>Supplemental logging is required to ensure that each row LCR has the information required to detect and resolve a conflict. Supplemental logging places additional information in the redo log for the columns of a table when a DML operation is performed on the table. When you configure a table for Oracle GoldenGate conflict detection and resolution, supplemental logging is configured automatically for all of the columns in the table. The additional information in the redo log is placed in an LCR when a table change is replicated.</p>
</div>
<div>
<div class="infoboxnotealso" id="GUID-7E2DD471-08E3-413C-A199-E7C4A2E244A2__GUID-C3E6ECD8-582C-4E52-BB53-DD3509702ADC">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SUTIL1582" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E81615-01&amp;id=SUTIL1582"><span class="italic">Oracle Database Utilities</span></a> for information about supplemental logging</p>
</li>
</ul>
</div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-4E475E42-AAEB-4D7F-9FED-EFED63C8A39A">About Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-38FFAF93-379A-417D-8202-795963C31E2C"></a>
<h3 id="GGODB-GUID-38FFAF93-379A-417D-8202-795963C31E2C" class="sect3"><span class="enumeration_section">16.1.2</span> Latest Timestamp Conflict Detection and Resolution</h3>
<div>
<p>When you run the <code class="codeph">ADD_AUTO_CDR</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package to configure a table for automatic Oracle GoldenGate conflict detection and resolution, a hidden timestamp column is added to the table. This hidden timestamp column records the time of a row change, and this information is used to detect and resolve conflicts.</p>
<p>When a row LCR is applied, a conflict can occur for an <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code> operation. The following table describes each type of conflict and how it is resolved.</p>
<div class="tblformal" id="GUID-38FFAF93-379A-417D-8202-795963C31E2C__LATESTTIMESTAMPCONFLICTDETECTIONAND-C76FDE0A">
<p class="titleintable">Table 16-1 Latest Timestamp Conflict Detection and Resolution</p>
<table class="cellalignment489" title="Latest Timestamp Conflict Detection and Resolution" summary="This table describes conflict detection and conflict resolution for each type of DML operation.">
<thead>
<tr class="cellalignment483">
<th class="cellalignment490" id="d46496e247">Operation</th>
<th class="cellalignment490" id="d46496e249">Conflict Detection</th>
<th class="cellalignment490" id="d46496e251">Conflict Resolution</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment483">
<td class="cellalignment491" id="d46496e255" headers="d46496e247">
<p><code class="codeph">INSERT</code></p>
</td>
<td class="cellalignment491" headers="d46496e255 d46496e249">
<p>A conflict is detected when the table has the same value for a key column as the new value in the row LCR.</p>
</td>
<td class="cellalignment491" headers="d46496e255 d46496e251">
<p>If the timestamp of the row LCR is later than the timestamp in the table row, then the values in the row LCR replace the values in the table.</p>
<p>If the timestamp of the row LCR is earlier than the timestamp in the table row, then the row LCR is discarded, and the table values are retained.</p>
</td>
</tr>
<tr class="cellalignment483">
<td class="cellalignment491" id="d46496e268" headers="d46496e247">
<p><code class="codeph">UPDATE</code></p>
</td>
<td class="cellalignment491" headers="d46496e268 d46496e249">
<p>A conflict is detected in each of the following cases:</p>
<ul style="list-style-type: disc;">
<li>
<p>There is a mismatch between the timestamp value in the row LCR and the timestamp value of the corresponding row in the table.</p>
</li>
<li>
<p>There is a mismatch between an old value in a column group in the row LCR does not match the column value in the corresponding table row. A column group is a logical grouping of one or more columns in a replicated table.</p>
</li>
<li>
<p>The table row does not exist. If the row is in the tombstone table, then this is referred to as an update-delete conflict.</p>
</li>
</ul>
</td>
<td class="cellalignment491" headers="d46496e268 d46496e251">
<p>If there is a value mismatch and the timestamp of the row LCR is later than the timestamp in the table row, then the values in the row LCR replace the values in the table.</p>
<p>If there is a value mismatch and the timestamp of the row LCR is earlier than the timestamp in the table row, then the row LCR is discarded, and the table values are retained.</p>
<p>If the table row does not exist and the timestamp of the row LCR is later than the timestamp in the tombstone table row, then the row LCR is converted from an <code class="codeph">UPDATE</code> operation to an <code class="codeph">INSERT</code> operation and inserted into the table.</p>
<p>If the table row does not exist and the timestamp of the row LCR is earlier than the timestamp in the tombstone table row, then the row LCR is discarded.</p>
<p>If the table row does not exist and there is no corresponding row in the tombstone table, then the row LCR is converted from an <code class="codeph">UPDATE</code> operation to an <code class="codeph">INSERT</code> operation and inserted into the table.</p>
</td>
</tr>
<tr class="cellalignment483">
<td class="cellalignment491" id="d46496e309" headers="d46496e247">
<p><code class="codeph">DELETE</code></p>
</td>
<td class="cellalignment491" headers="d46496e309 d46496e249">
<p>A conflict is detected in each of the following cases:</p>
<ul style="list-style-type: disc;">
<li>
<p>There is a mismatch between the timestamp value in the row LCR and the timestamp value of the corresponding row in the table.</p>
</li>
<li>
<p>The table row does not exist.</p>
</li>
</ul>
</td>
<td class="cellalignment491" headers="d46496e309 d46496e251">
<p>If the timestamp of the row LCR is later than the timestamp in the table, then delete the row from the table.</p>
<p>If the timestamp of the row LCR is earlier than the timestamp in the table, then the row LCR is discarded, and the table values are retained.</p>
<p>If the delete is successful, then log the row LCR by inserting it into the tombstone table.</p>
<p>If the table row does not exist, then log the row LCR by inserting it into the tombstone table.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-4E475E42-AAEB-4D7F-9FED-EFED63C8A39A">About Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-E44EE4A0-CFDA-4534-819A-DA27E69E40E2"></a>
<h3 id="GGODB-GUID-E44EE4A0-CFDA-4534-819A-DA27E69E40E2" class="sect3"><span class="enumeration_section">16.1.3</span> Delta Conflict Detection and Resolution</h3>
<div>
<p>With delta conflict detection, a conflict occurs when a value in the old column list of the row LCR differs from the value for the corresponding row in the table.</p>
<p>To configure delta conflict detection and resolution for a table, run the <code class="codeph">ADD_AUTO_CDR_DELTA_RES</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package. The delta resolution method does not depend on a timestamp or an extra resolution column. With delta conflict resolution, the conflict is resolved by adding the difference between the new and old values in the row LCR to the value in the table. This resolution method is generally used for financial data such as an account balance. For example, if a bank balance is updated at two sites concurrently, then the converged value accounts for all debits and credits.</p>
<div class="figure" id="GUID-E44EE4A0-CFDA-4534-819A-DA27E69E40E2__DELTACONFLICTDETECTIONANDRESOLUTION-C77D562F">
<p class="titleinfigure">Figure 16-1 Delta Conflict Detection and Resolution</p>
<img width="686" height="882" src="img/xstrm_3v_086a.png" alt="Description of Figure 16-1 follows" title="Description of Figure 16-1 follows" /><br />
<a href="img_text/xstrm_3v_086a.htm">Description of "Figure 16-1 Delta Conflict Detection and Resolution"</a></div>
<!-- class="figure" -->
<p>This example shows a row being replicated at database A and database B. The <code class="codeph">Balance</code> column is designated as the column on which delta conflict resolution is performed, and the <code class="codeph">TS1</code> column is the invisible timestamp column to track the time of each change to the <code class="codeph">Balance</code> column. A change is made to the <code class="codeph">Balance</code> value in the row in both databases at nearly the same time (<code class="codeph">@T20</code> in database A and <code class="codeph">@T22</code> in database B). These changes result in a conflict, and delta conflict resolution is used to resolve the conflict in the following way:</p>
<ul style="list-style-type: disc;">
<li>
<p>At database A, the value of <code class="codeph">Balance</code> was changed from <code class="codeph">100</code> to <code class="codeph">110</code>. Therefore, the value was increased by 10.</p>
</li>
<li>
<p>At database B, the value of <code class="codeph">Balance</code> was changed from <code class="codeph">100</code> to <code class="codeph">120</code>. Therefore, the value was increased by 20.</p>
</li>
<li>
<p>To resolve the conflict at database A, the value of the difference between the new and old values in the row LCR to the value in the table. The difference between the new and old values in the LCR is 20 (120&ndash;100=20). Therefore, the current value in the table (110) is increased by 20 so that the value after conflict resolution is 130.</p>
</li>
<li>
<p>To resolve the conflict at database B, the value of the difference between the new and old values in the row LCR to the value in the table. The difference between the new and old values in the LCR is 10 (110&ndash;100=10). Therefore, the current value in the table (120) is increased by 10 so that the value after conflict resolution is 130.</p>
</li>
</ul>
<p>After delta conflict resolution, the value of the <code class="codeph">Balance</code> column is the same for the row at database A and database B.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-4E475E42-AAEB-4D7F-9FED-EFED63C8A39A">About Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-A0A03425-1227-4D61-BE41-B89B59265063"></a>
<h3 id="GGODB-GUID-A0A03425-1227-4D61-BE41-B89B59265063" class="sect3"><span class="enumeration_section">16.1.4</span> Column Groups</h3>
<div>
<p>A column group is a logical grouping of one or more columns in a replicated table. When you add a column group, conflict detection and resolution is performed on the columns in the column group separately from the other columns in the table.</p>
<p>When you configure a table for Oracle GoldenGate conflict detection and resolution with the <code class="codeph">ADD_AUTO_CDR</code> procedure, all of the scalar columns in the table are added to a default column group. To define other column groups for the table, run the <code class="codeph">ADD_AUTO_CDR_COLUMN_GROUP</code> procedure. Any columns in the table that are not part of a user-defined column group remain in the default column group for the table.</p>
<p>Column groups enable different databases to update different columns in the same row at nearly the same time without causing a conflict. When column groups are configured for a table, conflicts can be avoided even if different databases update the same row in the table. A conflict is not detected if the updates change the values of columns in different column groups.</p>
<div class="figure" id="GUID-A0A03425-1227-4D61-BE41-B89B59265063__COLUMNGROUPS-C77E3B66">
<p class="titleinfigure">Figure 16-2 Column Groups Conflict Detection</p>
<img width="686" height="882" src="img/xstrm_3v_086a.png" alt="Description of Figure 16-2 follows" title="Description of Figure 16-2 follows" /><br />
<a href="img_text/xstrm_3v_086a.htm">Description of "Figure 16-2 Column Groups Conflict Detection"</a></div>
<!-- class="figure" -->
<p>This example shows a row being replicated at database A and database B. The following two column groups are configured for the replicated table at each database:</p>
<ul style="list-style-type: disc;">
<li>
<p>One column group includes the <code class="codeph">Office</code> column. The invisible timestamp column for this column group is <code class="codeph">TS1</code>.</p>
</li>
<li>
<p>Another column group includes the <code class="codeph">Title</code> and <code class="codeph">Salary</code> columns. The invisible timestamp column for this column group is <code class="codeph">TS2</code>.</p>
</li>
</ul>
<p>These column groups enable database A and database B to update the same row at nearly the same time without causing a conflict. Specifically, the following changes are made:</p>
<ul style="list-style-type: disc;">
<li>
<p>At database A, the value of <code class="codeph">Office</code> was changed from <code class="codeph">1080</code> to <code class="codeph">1030</code>.</p>
</li>
<li>
<p>At database B, the value of <code class="codeph">Title</code> was changed from <code class="codeph">MTS1</code> to <code class="codeph">MTS2</code>.</p>
</li>
</ul>
<p>Because the <code class="codeph">Office</code> column and the <code class="codeph">Title</code> column are in different column groups, the changes are replicated without a conflict being detected. The result is that values in the row are same at both databases after each change has been replicated.</p>
<div class="section">
<p class="subhead3">Piecewise LOB Updates</p>
<p>A set of lob operations composed of <code class="codeph">LOB WRITE</code>, <code class="codeph">LOB ERASE</code>, and <code class="codeph">LOB TRIM</code> is a piecewise LOB update. When a table that contains LOB columns is configured for conflict detection and resolution, each LOB column is placed in its own column group, and the column group has its own hidden timestamp column. The timestamp column is updated on the first piecewise LOB operation.</p>
<p>For a LOB column, a conflict is detected and resolved in the following ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>If the timestamp for the LOB&rsquo;s column group is later than the corresponding LOB column group in the row, then the piecewise LOB update is applied.</p>
</li>
<li>
<p>If the timestamp for the LOB&rsquo;s column group is earlier than the corresponding LOB column group in the row, then the LOB in the table row is retained.</p>
</li>
<li>
<p>If the row does not exist in the table, then an error occurs</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-4E475E42-AAEB-4D7F-9FED-EFED63C8A39A">About Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-46AD2AD0-65A4-4FB0-A8E3-B4D84F30BABE"></a>
<h2 id="GGODB-GUID-46AD2AD0-65A4-4FB0-A8E3-B4D84F30BABE" class="sect2"><span class="enumeration_section">16.2</span> Configuring Automatic Conflict Detection and Resolution</h2>
<div>
<p>You can configure Oracle GoldenGate automatic conflict detection and resolution in Oracle Database with the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package. For the Replicat parameter file you need to add a <code class="codeph">MAP</code> statement that includes the table to be replicated and the <code class="codeph">MAPINVISIBLECOLUMNS</code> parameter.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-737CF4CA-C65B-4657-A986-04F7525D170C">Configuring Latest Timestamp Conflict Detection and Resolution</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-956180B3-7209-4903-B315-DBAC8D226A24">Configuring Delta Conflict Detection and Resolution</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-EB3D5499-7F28-45B6-A64E-53BF786E32A5" title="You can configure Oracle GoldenGate to automatically detect and resolve conflicts that occur when same data is updated concurrently at different sites.">Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-737CF4CA-C65B-4657-A986-04F7525D170C"></a>
<h3 id="GGODB-GUID-737CF4CA-C65B-4657-A986-04F7525D170C" class="sect3"><span class="enumeration_section">16.2.1</span> Configuring Latest Timestamp Conflict Detection and Resolution</h3>
<div>
<div class="section">The <code class="codeph">ADD_AUTO_CDR</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package configures latest timestamp conflict detection and resolution. The <code class="codeph">ADD_AUTO_CDR_COLUMN_GROUP</code> procedure adds optional column groups.</div>
<!-- class="section" -->
<div class="section">With latest timestamp conflict detection and resolution, a conflict is detected when the timestamp column of the row LCR does not match the timestamp of the corresponding table row. The row LCR is applied if its timestamp is later. Otherwise, the row LCR is discarded, and the table row is not changed. When you run the <code class="codeph">ADD_AUTO_CDR</code> procedure, it adds an invisible timestamp column for each row in the specified table and configures timestamp conflict detection and resolution. When you use the <code class="codeph">ADD_AUTO_CDR_COLUMN_GROUP</code> procedure to add one or more column groups, it adds a timestamp for the column group and configures timestamp conflict detection and resolution for the column group.</div>
<!-- class="section" -->
<div class="p">You can configure an Oracle GoldenGate administrator using the <code class="codeph">GRANT_ADMIN_PRIVILEGE</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package.</div>
<!-- class="section" -->
<ol id="GUID-737CF4CA-C65B-4657-A986-04F7525D170C__CONNECTTOTHEINBOUNDSERVERDATABASEAS-C77EFDDF">
<li><span>Connect to the inbound server database as a Oracle GoldenGate administrator.</span></li>
<li><span>Run the <code class="codeph">ADD_AUTO_CDR</code> procedure and specify the table to configure for latest timestamp conflict detection and resolution.</span></li>
<li><strong>Optional:</strong> <span>Run the <code class="codeph">ADD_AUTO_CDR_COLUMN_GROUP</code> procedure and specify one or more column groups in the table.</span></li>
<li><span>Repeat the previous steps in each Oracle Database that replicates the table.</span></li>
</ol>
<div class="example" id="GUID-737CF4CA-C65B-4657-A986-04F7525D170C__CONFIGURINGLATESTTIMESTAMPCONFLICTD-C77EFEFA">
<p class="titleinexample">Example 16-1 Configuring the Latest Timestamp Conflict Detection and Resolution for a Table</p>
<p>This example configures latest timestamp conflict detection and resolution for the <code class="codeph">hr.employees</code> table.</p>
<pre dir="ltr">
BEGIN
  DBMS_GOLDENGATE_ADM.ADD_AUTO_CDR(
    schema_name =&gt; 'hr',
    table_name  =&gt; 'employees');
END;
/
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-737CF4CA-C65B-4657-A986-04F7525D170C__CONFIGURINGCOLUMNGROUPS-C77F078F">
<p class="titleinexample">Example 16-2 Configuring Column Groups</p>
<p>This example configures the following column groups for timestamp conflict resolution on the <code class="codeph">hr.employees</code> table:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code class="codeph">job_identifier_cg</code> column group includes the <code class="codeph">job_id</code>, <code class="codeph">department_id</code>, and <code class="codeph">manager_id</code> columns.</p>
</li>
<li>
<p>The <code class="codeph">compensation_cg</code> column group includes the <code class="codeph">salary</code> and <code class="codeph">commission_pct</code> columns.</p>
</li>
</ul>
<pre dir="ltr">
BEGIN
  DBMS_GOLDENGATE_ADM.ADD_AUTO_CDR_COLUMN_GROUP(
    schema_name       =&gt; 'hr',
    table_name        =&gt; 'employees',
    column_list       =&gt; 'job_id,department_id,manager_id',
    column_group_name =&gt; 'job_identifier_cg');
END;
/

BEGIN
  DBMS_GOLDENGATE_ADM.ADD_AUTO_CDR_COLUMN_GROUP(
    schema_name       =&gt; 'hr',
    table_name        =&gt; 'employees',
    column_list       =&gt; 'salary,commission_pct',
    column_group_name =&gt; 'compensation_cg');
END;
/
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-46AD2AD0-65A4-4FB0-A8E3-B4D84F30BABE">Configuring Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-956180B3-7209-4903-B315-DBAC8D226A24"></a>
<h3 id="GGODB-GUID-956180B3-7209-4903-B315-DBAC8D226A24" class="sect3"><span class="enumeration_section">16.2.2</span> Configuring Delta Conflict Detection and Resolution</h3>
<div>
<div class="section">The <code class="codeph">ADD_AUTO_CDR_DELTA_RES</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package configures delta conflict detection and resolution.</div>
<!-- class="section" -->
<div class="section">With delta conflict resolution, you specify one column for which conflicts are detected and resolved. The conflict is detected if the value of the column in the row LCR does not match the corresponding value in the table. The conflict is resolved by adding the difference between the new and old values in the row LCR to the value in the table.</div>
<!-- class="section" -->
<div class="p">You can configure an Oracle GoldenGate administrator using the <code class="codeph">GRANT_ADMIN_PRIVILEGE</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the inbound server database as an Oracle GoldenGate administrator.</span></li>
<li><span>Run the <code class="codeph">ADD_AUTO_CDR</code> procedure and specify the table to configure for latest timestamp conflict detection and resolution.</span></li>
<li><span>Run the <code class="codeph">ADD_AUTO_CDR_DELTA_RES</code> procedure and specify the column on which delta conflict detection and resolution is performed.</span></li>
<li><span>Repeat the previous steps in each Oracle Database that replicates the table.</span></li>
</ol>
<div class="example" id="GUID-956180B3-7209-4903-B315-DBAC8D226A24__CONFIGURINGDELTACONFLICTDETECTIONAN-C77F44C1">
<p class="titleinexample">Example 16-3 Configuring Delta Conflict Detection and Resolution for a Table</p>
<p>This example configures delta conflict detection and resolution for the <code class="codeph">order_total</code> column in the <code class="codeph">oe.orders</code> table.</p>
<pre dir="ltr">
BEGIN
  DBMS_GOLDENGATE_ADM.ADD_AUTO_CDR(
    schema_name =&gt; 'oe',
    table_name  =&gt; 'orders');
END;
/

BEGIN
  DBMS_GOLDENGATE_ADM.ADD_AUTO_CDR_DELTA_RES(
    schema_name =&gt; 'oe',
    table_name  =&gt; 'orders',
    column_name =&gt; 'order_total');
END;
/
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-46AD2AD0-65A4-4FB0-A8E3-B4D84F30BABE">Configuring Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5"></a>
<h2 id="GGODB-GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5" class="sect2"><span class="enumeration_section">16.3</span> Managing Automatic Conflict Detection and Resolution</h2>
<div>
<p>You can manage Oracle GoldenGate automatic conflict detection and resolution in Oracle Database with the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-42AA3CD0-DD7F-4175-8F94-CAC1705F5BFA">Altering Conflict Detection and Resolution for a Table</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-5DDCE5F4-E685-493D-A934-2EAF9C567F86">Altering a Column Group</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-423C6EE8-1C62-4085-899C-8454B8FB9C92">Purging Tombstone Rows</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-29EDF7BF-6BD8-4E02-98AB-DDBB4719D038">Removing Conflict Detection and Resolution From a Table</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-F4727BAC-2FDB-4011-9F63-482810C2B0B9">Removing a Column Group</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-A53C470A-247E-4326-9E9D-01AC5A34C127">Removing Delta Conflict Detection and Resolution</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-EB3D5499-7F28-45B6-A64E-53BF786E32A5" title="You can configure Oracle GoldenGate to automatically detect and resolve conflicts that occur when same data is updated concurrently at different sites.">Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-42AA3CD0-DD7F-4175-8F94-CAC1705F5BFA"></a>
<h3 id="GGODB-GUID-42AA3CD0-DD7F-4175-8F94-CAC1705F5BFA" class="sect3"><span class="enumeration_section">16.3.1</span> Altering Conflict Detection and Resolution for a Table</h3>
<div>
<div class="section">The <code class="codeph">ALTER_AUTO_CDR</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package alters conflict detection and resolution for a table.</div>
<!-- class="section" -->
<div class="p">Oracle GoldenGate automatic conflict detection and resolution must be configured for the table:</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the inbound server database as the Oracle GoldenGate administrator.</span></li>
<li><span>Run the <code class="codeph">ALTER_AUTO_CDR</code> procedure and specify the table to configure for latest timestamp conflict detection and resolution.</span></li>
<li><span>Repeat all of the previous steps in each Oracle Database that replicates the table.</span></li>
</ol>
<div class="example" id="GUID-42AA3CD0-DD7F-4175-8F94-CAC1705F5BFA__ALTERINGCONFLICTDETECTIONANDRESOLUT-C77F7E53">
<p class="titleinexample">Example 16-4 Altering Conflict Detection and Resolution for a Table</p>
<p>This example alters conflict detection and resolution for the <code class="codeph">hr.employees</code> table to specify that delete conflicts are tracked in a tombstone table.</p>
<pre dir="ltr">
BEGIN
  DBMS_GOLDENGATE_ADM.ALTER_AUTO_CDR(
    schema_name       =&gt; 'hr',
    table_name        =&gt; 'employees',
    tombstone_deletes =&gt; TRUE);
END;
/
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5">Managing Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-5DDCE5F4-E685-493D-A934-2EAF9C567F86"></a>
<h3 id="GGODB-GUID-5DDCE5F4-E685-493D-A934-2EAF9C567F86" class="sect3"><span class="enumeration_section">16.3.2</span> Altering a Column Group</h3>
<div>
<div class="p">The <code class="codeph">ALTER_AUTO_CDR_COLUMN_GROUP</code> procedure alters a column group.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the inbound server database as an Oracle GoldenGate administrator.</span></li>
<li><span>Run the <code class="codeph">ALTER_AUTO_CDR_COLUMN_GROUP</code> procedure and specify one or more column groups in the table.</span></li>
<li><span>Repeat all of the previous steps in each Oracle Database that replicates the table.</span></li>
</ol>
<div class="example" id="GUID-5DDCE5F4-E685-493D-A934-2EAF9C567F86__ALTERINGACOLUMNGROUP-C77F9DC7">
<p class="titleinexample">Example 16-5 Altering a Column Group</p>
<p>This example removes the <code class="codeph">manager_id</code> column from the <code class="codeph">job_identifier_cg</code> column group for the <code class="codeph">hr.employees</code> table.</p>
<pre dir="ltr">
BEGIN
  DBMS_GOLDENGATE_ADM.ALTER_AUTO_CDR_COLUMN_GROUP(
    schema_name        =&gt; 'hr',
    table_name         =&gt; 'employees',
    column_group_name  =&gt; 'job_identifier_cg',
    remove_column_list =&gt; 'manager_id');
END;
/
</pre>
<div class="infobox-note" id="GUID-5DDCE5F4-E685-493D-A934-2EAF9C567F86__GUID-949C8859-B1CA-4748-9BA5-B8E96ED0A2A7">
<p class="notep1">Note:</p>
If there is more than one column, then use a comma-separated list.</div>
</div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5">Managing Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-423C6EE8-1C62-4085-899C-8454B8FB9C92"></a>
<h3 id="GGODB-GUID-423C6EE8-1C62-4085-899C-8454B8FB9C92" class="sect3"><span class="enumeration_section">16.3.3</span> Purging Tombstone Rows</h3>
<div>
<div class="section">The <code class="codeph">PURGE_TOMBSTONES</code> procedure removes tombstone rows that were recorded before a specified date and time. This procedure removes the tombstone rows for all tables configured for conflict resolution in the database.</div>
<!-- class="section" -->
<div class="section">It might be necessary to purge tombstone rows periodically to keep the tombstone log from growing too large over time.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the inbound server database as an Oracle GoldenGate administrator.</span></li>
<li><span>Run the <code class="codeph">PURGE_TOMBSTONES</code> procedure and specify the date and time.</span></li>
</ol>
<div class="example" id="GUID-423C6EE8-1C62-4085-899C-8454B8FB9C92__PURGINGTOMBSTONEROWS-C77FC9DE">
<p class="titleinexample">Example 16-6 Purging Tombstone Rows</p>
<p>This example purges all tombstone rows recorded before 3:00 p.m. on December, 1, 2015 Eastern Standard Time. The timestamp must be entered in <code class="codeph">TIMESTAMP WITH TIME ZONE</code> format.</p>
<pre dir="ltr">
EXEC DBMS_GOLDENGATE_ADM.PURGE_TOMBSTONES('2015-12-01 15:00:00.000000 EST');
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5">Managing Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-29EDF7BF-6BD8-4E02-98AB-DDBB4719D038"></a>
<h3 id="GGODB-GUID-29EDF7BF-6BD8-4E02-98AB-DDBB4719D038" class="sect3"><span class="enumeration_section">16.3.4</span> Removing Conflict Detection and Resolution From a Table</h3>
<div>
<div class="section">The <code class="codeph">REMOVE_AUTO_CDR</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package removes automatic conflict detection and resolution from a table. This procedure also removes any column groups and delta conflict detection and resolution configured for the table.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the inbound server database as an Oracle GoldenGate administrator.</span></li>
<li><span>Run the <code class="codeph">REMOVE_AUTO_CDR</code> procedure and specify the table.</span></li>
<li><span>Repeat all of the previous steps in each Oracle Database that replicates the table.</span></li>
</ol>
<div class="example" id="GUID-29EDF7BF-6BD8-4E02-98AB-DDBB4719D038__REMOVINGCONFLICTDETECTIONANDRESOLUT-C77FE605">
<p class="titleinexample">Example 16-7 Removing Conflict Detection and Resolution for a Table</p>
<p>This example removes conflict detection and resolution for the <code class="codeph">hr.employees</code> table.</p>
<pre dir="ltr">
BEGIN
  DBMS_GOLDENGATE_ADM.REMOVE_AUTO_CDR(
    schema_name =&gt; 'hr',
    table_name  =&gt; 'employees');
END;
/
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5">Managing Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-F4727BAC-2FDB-4011-9F63-482810C2B0B9"></a>
<h3 id="GGODB-GUID-F4727BAC-2FDB-4011-9F63-482810C2B0B9" class="sect3"><span class="enumeration_section">16.3.5</span> Removing a Column Group</h3>
<div>
<div class="section">The <code class="codeph">REMOVE_AUTO_CDR_COLUMN_GROUP</code> procedure removes a column group.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the inbound server database as an Oracle GoldenGate administrator.</span></li>
<li><span>Run the <code class="codeph">REMOVE_AUTO_CDR_COLUMN_GROUP</code> procedure and specify the name of the column group.</span></li>
<li><span>Repeat all of the previous steps in each Oracle Database that replicates the table.</span></li>
</ol>
<div class="example" id="GUID-F4727BAC-2FDB-4011-9F63-482810C2B0B9__REMOVINGACOLUMNGROUP-C77FFDAE">
<p class="titleinexample">Example 16-8 Removing a Column Group</p>
<p>This example removes the <code class="codeph">compensation_cg</code> column group from the <code class="codeph">hr.employees</code> table.</p>
<pre dir="ltr">
BEGIN
  DBMS_GOLDENGATE_ADM.REMOVE_AUTO_CDR_COLUMN_GROUP(
    schema_name       =&gt; 'hr',
    table_name        =&gt; 'employees',
    column_group_name =&gt; 'compensation_cg');
END;
/
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5">Managing Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-A53C470A-247E-4326-9E9D-01AC5A34C127"></a>
<h3 id="GGODB-GUID-A53C470A-247E-4326-9E9D-01AC5A34C127" class="sect3"><span class="enumeration_section">16.3.6</span> Removing Delta Conflict Detection and Resolution</h3>
<div>
<div class="section">The <code class="codeph">REMOVE_AUTO_CDR_DELTA_RES</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package removes delta conflict detection and resolution for a column.</div>
<!-- class="section" -->
<div class="p">Delta conflict detection and resolution must be configured for the specified column.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the inbound server database as an Oracle GoldenGate administrator.</span></li>
<li><span>Run the <code class="codeph">REMOVE_AUTO_CDR_DELTA_RES</code> procedure and specify the column.</span></li>
<li><span>Repeat all of the previous steps in each Oracle Database that replicates the table.</span></li>
</ol>
<div class="example" id="GUID-A53C470A-247E-4326-9E9D-01AC5A34C127__REMOVINGDELTACONFLICTDETECTIONANDRE-C78019B8">
<p class="titleinexample">Example 16-9 Removing Delta Conflict Detection and Resolution for a Table</p>
<p>This example removes delta conflict detection and resolution for the <code class="codeph">order_total</code> column in the <code class="codeph">oe.orders</code> table.</p>
<pre dir="ltr">
BEGIN
  DBMS_GOLDENGATE_ADM.REMOVE_AUTO_CDR_DELTA_RES(
    schema_name =&gt; 'oe',
    table_name  =&gt; 'orders',
    column_name =&gt; 'order_total');
END;
/
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-75FFCDEE-1146-4344-91ED-DE8CE0DB4BE5">Managing Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-5C302D04-E696-4454-A63B-34ADF26FE90E"></a>
<h2 id="GGODB-GUID-5C302D04-E696-4454-A63B-34ADF26FE90E" class="sect2"><span class="enumeration_section">16.4</span> Monitoring Automatic Conflict Detection and Resolution</h2>
<div>
<p>You can monitor Oracle GoldenGate automatic conflict detection and resolution in an Oracle Database by querying data dictionary views.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-DB342C35-D5CA-4C78-BFDF-DA7CF485B983">Displaying Information About the Tables Configured for Conflicts</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-9686B13B-3793-42C7-81E8-4030BA2976C4">Displaying Information About Conflict Resolution Columns</a><br /></li>
<li class="ulchildlink"><a href="automatic-conflict-detection-and-resolution2.htm#GUID-017040BD-5DF7-49AB-88D6-208511E55061">Displaying Information About Column Groups</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-EB3D5499-7F28-45B6-A64E-53BF786E32A5" title="You can configure Oracle GoldenGate to automatically detect and resolve conflicts that occur when same data is updated concurrently at different sites.">Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-DB342C35-D5CA-4C78-BFDF-DA7CF485B983"></a>
<h3 id="GGODB-GUID-DB342C35-D5CA-4C78-BFDF-DA7CF485B983" class="sect3"><span class="enumeration_section">16.4.1</span> Displaying Information About the Tables Configured for Conflicts</h3>
<div>
<div class="section">The <code class="codeph">ALL_GG_AUTO_CDR_TABLES</code> view displays information about the tables configured for Oracle GoldenGate automatic conflict detection and resolution.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the database.</span></li>
<li><span>Query the <code class="codeph">ALL_GG_AUTO_CDR_TABLES</code> view.</span></li>
</ol>
<div class="example" id="GUID-DB342C35-D5CA-4C78-BFDF-DA7CF485B983__DISPLAYINGINFORMATIONABOUTTHETABLES-C7803E7D">
<p class="titleinexample">Example 16-10 Displaying Information About the Tables Configured for Conflict Detection and Resolution</p>
<p>This query displays the following information about the tables that are configured for conflict detection and resolution:</p>
<ul style="list-style-type: disc;">
<li>
<p>The table owner for each table.</p>
</li>
<li>
<p>The table name for each table.</p>
</li>
<li>
<p>The tombstone table used to store rows deleted for update-delete conflicts, if a tombstone table is configured for the table.</p>
</li>
<li>
<p>The hidden timestamp column used for conflict resolution for each table.</p>
</li>
</ul>
<pre dir="ltr">
COLUMN TABLE_OWNER FORMAT A15
COLUMN TABLE_NAME FORMAT A15
COLUMN TOMBSTONE_TABLE FORMAT A15
COLUMN ROW_RESOLUTION_COLUMN FORMAT A25

SELECT TABLE_OWNER,
       TABLE_NAME, 
       TOMBSTONE_TABLE,
       ROW_RESOLUTION_COLUMN 
  FROM ALL_GG_AUTO_CDR_TABLES
  ORDER BY TABLE_OWNER, TABLE_NAME;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">
TABLE_OWNER     TABLE_NAME      TOMBSTONE_TABLE ROW_RESOLUTION_COLUMN
--------------- --------------- --------------- -------------------------
HR              EMPLOYEES       DT$_EMPLOYEES   CDRTS$ROW
OE              ORDERS          DT$_ORDERS      CDRTS$ROW
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-5C302D04-E696-4454-A63B-34ADF26FE90E">Monitoring Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-9686B13B-3793-42C7-81E8-4030BA2976C4"></a>
<h3 id="GGODB-GUID-9686B13B-3793-42C7-81E8-4030BA2976C4" class="sect3"><span class="enumeration_section">16.4.2</span> Displaying Information About Conflict Resolution Columns</h3>
<div>
<div class="section">The <code class="codeph">ALL_GG_AUTO_CDR_COLUMNS</code> view displays information about the columns configured for Oracle GoldenGate automatic conflict detection and resolution.</div>
<!-- class="section" -->
<div class="section">The columns can be configured for row or column automatic conflict detection and resolution. The columns can be configured for latest timestamp conflict resolution in a column group. In addition, a column can be configured for delta conflict resolution.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the database as an Oracle GoldenGate administrator.</span></li>
<li><span>Query the <code class="codeph">ALL_GG_AUTO_CDR_COLUMNS</code> view.</span></li>
</ol>
<div class="example" id="GUID-9686B13B-3793-42C7-81E8-4030BA2976C4__DISPLAYINGINFORMATIONABOUTCOLUMNGRO-C7806A6A">
<p class="titleinexample">Example 16-11 Displaying Information About Column Groups</p>
<p>This query displays the following information about the tables that are configured for conflict detection and resolution:</p>
<ul style="list-style-type: disc;">
<li>
<p>The table owner for each table.</p>
</li>
<li>
<p>The table name for each table.</p>
</li>
<li>
<p>If the column is in a column group, then the name of the column group.</p>
</li>
<li>
<p>The column name.</p>
</li>
<li>
<p>If the column is configured for latest timestamp conflict resolution, then the name of the hidden timestamp column for the column.</p>
</li>
</ul>
<pre dir="ltr">
COLUMN TABLE_OWNER FORMAT A10
COLUMN TABLE_NAME FORMAT A10
COLUMN COLUMN_GROUP_NAME FORMAT A17
COLUMN COLUMN_NAME FORMAT A15
COLUMN RESOLUTION_COLUMN FORMAT A23

SELECT TABLE_OWNER,
       TABLE_NAME, 
       COLUMN_GROUP_NAME,
       COLUMN_NAME,
       RESOLUTION_COLUMN 
  FROM ALL_GG_AUTO_CDR_COLUMNS
  ORDER BY TABLE_OWNER, TABLE_NAME;
</pre>
<p>Your output looks similar to the following:</p>
<pre dir="ltr">
TABLE_OWNE TABLE_NAME COLUMN_GROUP_NAME COLUMN_NAME     RESOLUTION_COLUMN
---------- ---------- ----------------- --------------- -----------------------
HR         EMPLOYEES  COMPENSATION_CG   COMMISSION_PCT  CDRTS$COMPENSATION_CG
HR         EMPLOYEES  COMPENSATION_CG   SALARY          CDRTS$COMPENSATION_CG
HR         EMPLOYEES  JOB_IDENTIFIER_CG MANAGER_ID      CDRTS$JOB_IDENTIFIER_CG
HR         EMPLOYEES  JOB_IDENTIFIER_CG JOB_ID          CDRTS$JOB_IDENTIFIER_CG
HR         EMPLOYEES  JOB_IDENTIFIER_CG DEPARTMENT_ID   CDRTS$JOB_IDENTIFIER_CG
HR         EMPLOYEES  IMPLICIT_COLUMNS$ PHONE_NUMBER    CDRTS$ROW
HR         EMPLOYEES  IMPLICIT_COLUMNS$ LAST_NAME       CDRTS$ROW
HR         EMPLOYEES  IMPLICIT_COLUMNS$ HIRE_DATE       CDRTS$ROW
HR         EMPLOYEES  IMPLICIT_COLUMNS$ FIRST_NAME      CDRTS$ROW
HR         EMPLOYEES  IMPLICIT_COLUMNS$ EMAIL           CDRTS$ROW
HR         EMPLOYEES  IMPLICIT_COLUMNS$ EMPLOYEE_ID     CDRTS$ROW
OE         ORDERS     IMPLICIT_COLUMNS$ ORDER_MODE      CDRTS$ROW
OE         ORDERS     IMPLICIT_COLUMNS$ ORDER_ID        CDRTS$ROW
OE         ORDERS     IMPLICIT_COLUMNS$ ORDER_DATE      CDRTS$ROW
OE         ORDERS     IMPLICIT_COLUMNS$ CUSTOMER_ID     CDRTS$ROW
OE         ORDERS     DELTA$            ORDER_TOTAL
OE         ORDERS     IMPLICIT_COLUMNS$ PROMOTION_ID    CDRTS$ROW
OE         ORDERS     IMPLICIT_COLUMNS$ ORDER_STATUS    CDRTS$ROW
OE         ORDERS     IMPLICIT_COLUMNS$ SALES_REP_ID    CDRTS$ROW
</pre>
<p>In this example, the columns with <code class="codeph">IMPLICIT_COLUMNS$</code> for the column group name are configured for row conflict detection and resolution, but they are not part of a column group. The columns with <code class="codeph">DELTA$</code> for the column group name are configured for delta conflict detection and resolution, and these columns do not have a resolution column.</p>
</div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-5C302D04-E696-4454-A63B-34ADF26FE90E">Monitoring Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-017040BD-5DF7-49AB-88D6-208511E55061"></a>
<h3 id="GGODB-GUID-017040BD-5DF7-49AB-88D6-208511E55061" class="sect3"><span class="enumeration_section">16.4.3</span> Displaying Information About Column Groups</h3>
<div>
<div class="section">The <code class="codeph">ALL_GG_AUTO_CDR_COLUMN_GROUPS</code> view displays information about the column groups configured for Oracle GoldenGate automatic conflict detection and resolution.</div>
<!-- class="section" -->
<div class="section">You can configure Oracle GoldenGate automatic conflict detection and resolution using the <code class="codeph">ADD_AUTO_CDR</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package. You can configure column groups using the <code class="codeph">ADD_AUTO_CDR_COLUMN_GROUP</code> procedure in the <code class="codeph">DBMS_GOLDENGATE_ADM</code> package.</div>
<!-- class="section" -->
<ol>
<li><span>Connect to the database as an Oracle GoldenGate administrator.</span></li>
<li><span>Query the <code class="codeph">ALL_GG_AUTO_CDR_COLUMN_GROUPS</code> view.</span></li>
</ol>
<div class="example" id="GUID-017040BD-5DF7-49AB-88D6-208511E55061__DISPLAYINGINFORMATIONABOUTCOLUMNGRO-C7808D3E">
<p class="titleinexample">Example 16-12 Displaying Information About Column Groups</p>
<p>This query displays the following information about the tables that are configured for conflict detection and resolution:</p>
<ul style="list-style-type: disc;">
<li>
<p>The table owner.</p>
</li>
<li>
<p>The table name.</p>
</li>
<li>
<p>The name of the column group.</p>
</li>
<li>
<p>The hidden timestamp column used for conflict resolution for each column group.</p>
</li>
</ul>
<pre dir="ltr">
COLUMN TABLE_OWNER FORMAT A15
COLUMN TABLE_NAME FORMAT A15
COLUMN COLUMN_GROUP_NAME FORMAT A20
COLUMN RESOLUTION_COLUMN FORMAT A25

SELECT TABLE_OWNER,
       TABLE_NAME, 
       COLUMN_GROUP_NAME,
       RESOLUTION_COLUMN 
  FROM ALL_GG_AUTO_CDR_COLUMN_GROUPS
  ORDER BY TABLE_OWNER, TABLE_NAME;
</pre>
<p>The output looks similar to the following:</p>
<pre dir="ltr">
TABLE_OWNER     TABLE_NAME      COLUMN_GROUP_NAME    RESOLUTION_COLUMN
--------------- --------------- -------------------- -------------------------
HR              EMPLOYEES       COMPENSATION_CG      CDRTS$COMPENSATION_CG
HR              EMPLOYEES       JOB_IDENTIFIER_CG    CDRTS$JOB_IDENTIFIER_CG
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="automatic-conflict-detection-and-resolution2.htm#GUID-5C302D04-E696-4454-A63B-34ADF26FE90E">Monitoring Automatic Conflict Detection and Resolution</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment482">
<tr>
<td class="cellalignment492">
<table class="cellalignment487">
<tr>
<td class="cellalignment486"><a href="managing-ddl-replication-environment.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment486"><a href="using-parallel-replicat.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2010, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment494">
<table class="cellalignment485">
<tr>
<td class="cellalignment486"><a href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment486"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment486"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
