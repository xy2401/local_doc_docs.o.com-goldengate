<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Configuring a Downstream Mining Database</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This appendix contains instructions for preparing a downstream Oracle mining database to support Extract in integrated capture mode." />
<meta name="dcterms.created" content="2018-07-26T05:17:29Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Using Oracle GoldenGate for Oracle Database" />
<meta name="dcterms.identifier" content="E88785-05" />
<meta name="dcterms.isVersionOf" content="GGODB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2010, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="optional-parameters-integrated-modes.htm" title="Previous" type="text/html" />
<link rel="Next" href="example-downstream-mining-configuration.htm" title="Next" type="text/html" />
<link rel="alternate" href="GGODB.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-E265AB7E-6255-496E-896F-32E943C362D9"></a> <span id="PAGE" style="display:none;">24/28</span> <!-- End Header -->
<h1 id="GGODB-GUID-E265AB7E-6255-496E-896F-32E943C362D9" class="sect1"><span class="enumeration_chapter">B</span> Configuring a Downstream Mining Database</h1>
<div>
<div><span>This appendix contains instructions for preparing a downstream Oracle mining database to support Extract in integrated capture mode.</span></div>
<p>For more information about integrated capture, see <a href="choosing-capture-and-apply-modes.htm#GUID-C50C9C10-1BDC-454A-9AD2-3638F4203723">Deciding Which Capture Method to Use</a>.</p>
<p>For examples of the downstream mining configuration, see <a href="example-downstream-mining-configuration.htm#GUID-6BF05ABF-D4C8-491C-8E9D-58AC640DAC0F" title="This appendix contains examples for preparing a downstream Oracle mining database to support Extract in integrated capture mode.">Example Downstream Mining Configuration</a>.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-5D3479C9-A8FF-4375-9C70-D506898D526B">Evaluating Capture Options for a Downstream Deployment</a><br /></li>
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-3FA98170-8F19-4E40-B9C2-BF0BCFD5CAA3">Preparing the Source Database for Downstream Deployment</a><br /></li>
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-A5125A6D-5D61-4600-96D4-6C2639FA352F">Preparing the Downstream Mining Database</a><br /></li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-5D3479C9-A8FF-4375-9C70-D506898D526B"></a>
<h2 id="GGODB-GUID-5D3479C9-A8FF-4375-9C70-D506898D526B" class="sect2"><span class="enumeration_section">B.1</span> Evaluating Capture Options for a Downstream Deployment</h2>
<div>
<div class="section">
<p>Downstream deployment allows you to offload the source database. The source database ships its redo logs to a downstream database, and Extract uses the logmining server at the downstream database to mine the redo logs. A downstream mining database can accept both archived logs and online redo logs from a source database.</p>
<p>Multiple source databases can send their redo data to a single downstream database; however the downstream mining database can accept <span class="italic">online</span> redo logs from only one of those source databases. The rest of the source databases must ship archived logs.</p>
<p>When online logs are shipped to the downstream database, <span class="italic">real-time capture</span> by Extract is possible. Changes are captured as though Extract is reading from the source logs. In order to accept online redo logs from a source database, the downstream mining database must have standby redo logs configured.</p>
When using a downstream mining configuration, the source database and mining database must be the same endian and same bitsize, which is 64 bits. For example, if the source database was on Linux 64-bit, you can have the mining&nbsp;database run on Windows 64-bit, because they have the same endian and bitsize.</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-E265AB7E-6255-496E-896F-32E943C362D9" title="This appendix contains instructions for preparing a downstream Oracle mining database to support Extract in integrated capture mode.">Configuring a Downstream Mining Database</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-3FA98170-8F19-4E40-B9C2-BF0BCFD5CAA3"></a>
<h2 id="GGODB-GUID-3FA98170-8F19-4E40-B9C2-BF0BCFD5CAA3" class="sect2"><span class="enumeration_section">B.2</span> Preparing the Source Database for Downstream Deployment</h2>
<div>
<div class="section">
<p>This section guides you in the process of:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-92BAC73D-F031-4152-8E21-FB8B1320AE05">Creating the Source User Account</a><br /></li>
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-C6A991D9-1AAA-4B7D-A0FB-F7E26DFDDFC0">Configuring Redo Transport from Source to Downstream Mining Database</a><br />
To set up the transfer of redo log files from a source database to the downstream mining database, and to prepare the downstream mining database to accept these redo log files, perform the steps given in this topic.</li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-E265AB7E-6255-496E-896F-32E943C362D9" title="This appendix contains instructions for preparing a downstream Oracle mining database to support Extract in integrated capture mode.">Configuring a Downstream Mining Database</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-92BAC73D-F031-4152-8E21-FB8B1320AE05"></a>
<h3 id="GGODB-GUID-92BAC73D-F031-4152-8E21-FB8B1320AE05" class="sect3"><span class="enumeration_section">B.2.1</span> Creating the Source User Account</h3>
<div>
<div class="section">
<p>There must be an Extract user on the source database. Extract uses the credentials of this user to do metadata queries and to fetch column values as needed from the source database. The source user is specified by the <code class="codeph">USERIDALIAS</code> parameter.</p>
<p>To assign the required privileges, follow the procedure in <a href="establishing-oracle-goldengate-credentials.htm#GUID-E40B375A-5042-4195-B563-BE7EDC251880" title="Learn how to create database users for the processes that interacts with the database, assign the correct privileges, and secure the credentials from unauthorized use.">Establishing Oracle GoldenGate Credentials</a></p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-3FA98170-8F19-4E40-B9C2-BF0BCFD5CAA3">Preparing the Source Database for Downstream Deployment</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-C6A991D9-1AAA-4B7D-A0FB-F7E26DFDDFC0"></a>
<h3 id="GGODB-GUID-C6A991D9-1AAA-4B7D-A0FB-F7E26DFDDFC0" class="sect3"><span class="enumeration_section">B.2.2</span> Configuring Redo Transport from Source to Downstream Mining Database</h3>
<div>
<p>To set up the transfer of redo log files from a source database to the downstream mining database, and to prepare the downstream mining database to accept these redo log files, perform the steps given in this topic.</p>
<div class="section">
<p>The following summarizes the rules for supporting multiple sources sending redo to a single downstream mining database:</p>
<ul style="list-style-type: disc;">
<li>
<p>Only one source database can be configured to send <span class="italic">online</span> redo to the standby redo logs at the downstream mining database. The <code class="codeph">log_archive_dest_n</code> setting for this source database should <span class="italic">not</span> have a <code class="codeph">TEMPLATE</code> clause.</p>
</li>
<li>
<p>Source databases that are <span class="italic">not</span> sending online redo to the standby redo logs of the downstream mining database <span class="italic">must have</span> a <code class="codeph">TEMPLATE</code> clause specified in the <code class="codeph">log_archive_dest_n</code> parameter.</p>
</li>
<li>
<p>Each of the source databases that sends redo to the downstream mining database must have a unique <code class="codeph">DBID</code>. You can select the <code class="codeph">DBID</code> column from the <code class="codeph">v$database</code> view of these source databases to ensure that the DBIDs are unique.</p>
</li>
<li>
<p>The <code class="codeph">FAL_SERVER</code> value must be set to the downstream mining database. <code class="codeph">FAL_SERVER</code> specifies the FAL (fetch archive log) server for a standby database. The value is a list of Oracle Net service names, which are assumed to be configured properly on the standby database system to point to the desired FAL servers. The list contains the net service name of any database that can potentially ship redo to the downstream database.</p>
</li>
<li>
<p>When using redo transport, there could be a delay in processing redo due to network latency. In case of Integrated Extract, this latency is monitored by measuring the delay between LCRs received from source database and reporting it. If the latency exceeds a threshold, a warning message appears in the report file and a subsequent information message appears when the lag drops to normal values. The default value for the threshold is 10 seconds.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-C6A991D9-1AAA-4B7D-A0FB-F7E26DFDDFC0__GUID-F72B1DDF-12BB-482E-8BE5-CE857E6C0C95">
<p class="notep1">Note:</p>
<p>The archived logs shipped from the source databases are called <span class="italic">foreign archived logs</span>. You must not use the recovery area at the downstream mining database to store foreign archived logs. Such a configuration is not supported by Integrated Capture.</p>
</div>
<p>These instructions take into account the requirements to ship redo from multiple sources, if required. You must configure an Extract process for each of those sources.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To Configure Redo Transport</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Configure Oracle Net so that each source database can communicate with the mining database. For instructions, see <a class="olink NETAG" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E81615-01&amp;id=NETAG"><span class="italic"><span><cite>Oracle Database Net Services Administrator's Guide</cite></span></span></a>.</span></li>
<li class="stepexpand"><span>Configure authentication at each source database and at the downstream mining database to support the transfer of redo data. Redo transport sessions are authenticated using either the Secure Sockets Layer (SSL) protocol or a remote login password file. If a source database has a remote login password file, copy it to the appropriate directory of the mining database system. The password file must be the same at all source databases, and at the mining database. For more information about authentication requirements for redo transport, see "Preparing the Primary Database for Standby Database Creation" in <a class="olink SBYDB" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E81615-01&amp;id=SBYDB"><span class="italic"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></span></a>.</span></li>
<li class="stepexpand"><span>At each source database, configure one <code class="codeph">LOG_ARCHIVE_DEST_n</code> initialization parameter to transmit redo data to the downstream mining database. Set the attributes of this parameter as shown in one of the following examples, depending on whether real-time or archived-log-only capture mode is to be used.</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>Example for real-time capture at the downstream logmining server, where the source database sends its online redo logs to the downstream database:</p>
<pre dir="ltr">
ALTER SYSTEM 
SET LOG_ARCHIVE_DEST_2='SERVICE=DBMSCAP.EXAMPLE.COM ASYNC NOREGISTER
VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE)DB_UNIQUE_NAME=dbmscap'
</pre></li>
<li>
<p>Example for archived-log-only capture at the downstream logmining server:</p>
<pre dir="ltr">
ALTER SYSTEM SET
LOG_ARCHIVE_DEST_2='SERVICE=DMBSCAP.EXAMPLE.COM ASYNC NOREGISTER
VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE)
TEMPLATE=/usr/oracle/log_for_dbms1/dbms1_arch_%t_%s_%r.log
DB_UNIQUE_NAME=dbmscap'
</pre></li>
</ul>
<div class="infobox-note" id="GUID-C6A991D9-1AAA-4B7D-A0FB-F7E26DFDDFC0__GUID-11C9F497-CDC6-4A56-A0CF-A001693234A7">
<p class="notep1">Note:</p>
<p>When using an archived-log-only downstream mining database, you must specify a value for the <code class="codeph">TEMPLATE</code> attribute. Oracle also recommends that you use the <code class="codeph">TEMPLATE</code> clause in the source databases so that the log files from all remote source databases are kept separated from the local database log files, and from each other.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>At the source database, set a value of <code class="codeph">ENABLE</code> for the <code class="codeph">LOG_ARCHIVE_DEST_STATE_n</code> initialization parameter that corresponds with the <code class="codeph">LOG_ARCHIVE_DEST_n</code> parameter that corresponds to the destination for the downstream mining database, as shown in the following example.</span>
<div>
<pre dir="ltr">
ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_2=ENABLE
</pre></div>
</li>
<li class="stepexpand"><span>At the source database, and at the downstream mining database, set the <code class="codeph">DG_CONFIG</code> attribute of the <code class="codeph">LOG_ARCHIVE_CONFIG</code> initialization parameter to include the <code class="codeph">DB_UNIQUE_NAME</code> of the source database and the downstream database, as shown in the following example.</span>
<div>
<pre dir="ltr">
ALTER SYSTEM SET LOG_ARCHIVE_CONFIG='DG_CONFIG=(dbms1,dbmscap)'
</pre></div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-3FA98170-8F19-4E40-B9C2-BF0BCFD5CAA3">Preparing the Source Database for Downstream Deployment</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A5125A6D-5D61-4600-96D4-6C2639FA352F"></a>
<h2 id="GGODB-GUID-A5125A6D-5D61-4600-96D4-6C2639FA352F" class="sect2"><span class="enumeration_section">B.3</span> Preparing the Downstream Mining Database</h2>
<div>
<div class="section">
<p>The following sections explain how to prepare the downstream mining database:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-8C7BADAA-2876-40EB-AE69-544565267A65">Creating the Downstream Mining User Account</a><br /></li>
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-7CE0ED76-EFE4-42E1-AC30-954DE1E2ECFE">Configuring the Mining Database to Archive Local Redo Log Files</a><br /></li>
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-04B25BAE-9A99-416C-8778-20357138A732">Preparing a Downstream Mining Database for Real-time Capture</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-E265AB7E-6255-496E-896F-32E943C362D9" title="This appendix contains instructions for preparing a downstream Oracle mining database to support Extract in integrated capture mode.">Configuring a Downstream Mining Database</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-8C7BADAA-2876-40EB-AE69-544565267A65"></a>
<h3 id="GGODB-GUID-8C7BADAA-2876-40EB-AE69-544565267A65" class="sect3"><span class="enumeration_section">B.3.1</span> Creating the Downstream Mining User Account</h3>
<div>
<div class="section">
<p>When using a downstream mining configuration, there must be an Extract mining user on the downstream database. The mining Extract process uses the credentials of this user to interact with the downstream logmining server. The downstream mining user is specified by the <code class="codeph">TRANLOGOPTIONS</code> parameter with the <code class="codeph">MININGUSERALIAS</code> option. See <a href="establishing-oracle-goldengate-credentials.htm#GUID-E40B375A-5042-4195-B563-BE7EDC251880" title="Learn how to create database users for the processes that interacts with the database, assign the correct privileges, and secure the credentials from unauthorized use.">Establishing Oracle GoldenGate Credentials</a> to assign the correct credentials for the version of your database.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-A5125A6D-5D61-4600-96D4-6C2639FA352F">Preparing the Downstream Mining Database</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-7CE0ED76-EFE4-42E1-AC30-954DE1E2ECFE"></a>
<h3 id="GGODB-GUID-7CE0ED76-EFE4-42E1-AC30-954DE1E2ECFE" class="sect3"><span class="enumeration_section">B.3.2</span> Configuring the Mining Database to Archive Local Redo Log Files</h3>
<div>
<div class="section">
<p>This procedure configures the downstream mining database to archive redo data in its online redo logs. These are redo logs that are generated at the downstream mining database.</p>
<p>Archiving must be enabled at the downstream mining database if you want to run Extract in real-time integrated capture mode, but it is also recommended for archive-log-only capture. Extract in integrated capture mode writes state information in the database. Archiving and regular backups will enable you to recover this state information in case there are disk failures or corruption at the downstream mining database.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To Archive Local Redo Log Files</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Alter the downstream mining database to be in archive log mode. You can do this by issuing the following DDL.</span>
<div>
<pre dir="ltr">
STARTUP MOUNT;
ALTER DATABASE ARCHIVELOG;
ALTER DATABASE OPEN;
</pre></div>
</li>
<li class="stepexpand"><span>At the downstream mining database, set the first archive log destination in the <code class="codeph">LOG_ARCHIVE_DEST_n</code> initialization parameter as shown in the following example:</span>
<div>
<pre dir="ltr">
ALTER SYSTEM SET
LOG_ARCHIVE_DEST_1='LOCATION=/home/arc_dest/local
VALID_FOR=(ONLINE_LOGFILE,PRIMARY_ROLE)'
</pre>
<p>Alternatively, you can use a command like this example:</p>
<pre dir="ltr">
ALTER SYSTEM SET
LOG_ARCHIVE_DEST_1='LOCATION='USE_DB_RECOVERY_FILE_DEST' valid_for=(ONLINE_LOGFILE,PRIMARY_ROLE)'
</pre>
<div class="infobox-note" id="GUID-7CE0ED76-EFE4-42E1-AC30-954DE1E2ECFE__GUID-7ACE0354-3E3E-4A9D-9396-DECCF523A7E4">
<p class="notep1">Note:</p>
<p>The online redo logs generated by the downstream mining database can be archived to a recovery area. However, you must not use the recovery area of the downstream mining database to stage foreign archived logs or to archive standby redo logs. For information about configuring a fast recovery area, see <a class="olink BRADV" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E81615-01&amp;id=BRADV"><span class="italic"><span><cite>Oracle Database Backup and Recovery User&rsquo;s Guide</cite></span></span></a>.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Enable the local archive destination.</span>
<div>
<pre dir="ltr">
ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_1=ENABLE
 
</pre></div>
</li>
</ol>
<div class="section">
<p>For more information about these initialization parameters, see <a class="olink SBYDB" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E81615-01&amp;id=SBYDB"><span class="italic"><span><cite>Oracle Data Guard Concepts and Administration</cite></span></span></a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-A5125A6D-5D61-4600-96D4-6C2639FA352F">Preparing the Downstream Mining Database</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-04B25BAE-9A99-416C-8778-20357138A732"></a>
<h3 id="GGODB-GUID-04B25BAE-9A99-416C-8778-20357138A732" class="sect3"><span class="enumeration_section">B.3.3</span> Preparing a Downstream Mining Database for Real-time Capture</h3>
<div>
<div class="section">
<p>This procedure is only required if you want to use real-time capture at a downstream mining database. It is not required to use archived-log-only capture mode. To use real-time capture, it is assumed that the downstream database has already been configured to archive its local redo data as shown in <a href="configuring-downstream-mining-database.htm#GUID-7CE0ED76-EFE4-42E1-AC30-954DE1E2ECFE">Configuring the Mining Database to Archive Local Redo Log Files</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-D06A5434-6929-4E79-AC5F-1344816090D5">Create the Standby Redo Log Files</a><br /></li>
<li class="ulchildlink"><a href="configuring-downstream-mining-database.htm#GUID-77F675AA-3E7E-4ACB-94E0-72A8983D1F46">Configure the Database to Archive Standby Redo Log Files Locally</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-A5125A6D-5D61-4600-96D4-6C2639FA352F">Preparing the Downstream Mining Database</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-D06A5434-6929-4E79-AC5F-1344816090D5"></a>
<h4 id="GGODB-GUID-D06A5434-6929-4E79-AC5F-1344816090D5" class="sect4"><span class="enumeration_section">B.3.3.1</span> Create the Standby Redo Log Files</h4>
<div>
<div class="section">
<p>The following steps outline the procedure for adding standby redo log files to the downstream mining database. The following summarizes the rules for creating the standby redo logs:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Each standby redo log file must be at least as large as the largest redo log file of the redo source database. For administrative ease, Oracle recommends that all redo log files at source database and the standby redo log files at the downstream mining database be of the same size.</p>
</li>
<li>
<p>The standby redo log must have at least one more redo log group than the redo log at the source database, for each redo thread at the source database.</p>
</li>
</ul>
<p>The specific steps and SQL statements that are required to add standby redo log files depend on your environment. See Oracle Data Guard Concepts and Administration 11g Release 2 (11.2) for detailed instructions about adding standby redo log files to a database.</p>
<div class="infobox-note" id="GUID-D06A5434-6929-4E79-AC5F-1344816090D5__GUID-626FF558-FC0D-4736-AC5E-3AEBE9605BDE">
<p class="notep1">Note:</p>
<p>If there will be multiple source databases sending redo to a single downstream mining database, only one of those sources can send redo to the standby redo logs of the mining database. An Extract process that mines the redo from this source database can run in real-time mode. All other source databases must send only their archived logs to the downstream mining database, and the Extracts that read this data must be configured to run in archived-log-only mode.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To Create the Standby Redo Log Files</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>In SQL*Plus, connect to the source database as an administrative user.</span></li>
<li class="stepexpand"><span>Determine the size of the source log file. Make note of the results.</span>
<div>
<pre dir="ltr">
SELECT BYTES FROM V$LOG;
</pre></div>
</li>
<li class="stepexpand"><span>Determine the number of online log file groups that are configured on the source database. Make note of the results.</span>
<div>
<pre dir="ltr">
SELECT COUNT(GROUP#) FROM V$LOG;
</pre></div>
</li>
<li class="stepexpand"><span>Connect to the downstream mining database as an administrative user.</span></li>
<li class="stepexpand"><span>Add the standby log file groups to the mining database. The standby log file size must be at least the size of the source log file size. The number of standby log file groups must be at least one more than the number of source online log file groups. This applies to each instance (thread) in a RAC installation. So if you have "n" threads at the source database, each having "m" redo log groups, you should configure n*(m+1) redo log groups at the downstream mining database.</span>
<div>
<p>The following example shows three standby log groups.</p>
<pre dir="ltr">
ALTER DATABASE ADD STANDBY LOGFILE GROUP 3
('/oracle/dbs/slog3a.rdo', '/oracle/dbs/slog3b.rdo') SIZE 500M;
ALTER DATABASE ADD STANDBY LOGFILE GROUP 4
('/oracle/dbs/slog4.rdo', '/oracle/dbs/slog4b.rdo') SIZE 500M;
ALTER DATABASE ADD STANDBY LOGFILE GROUP 5
('/oracle/dbs/slog5.rdo', '/oracle/dbs/slog5b.rdo') SIZE 500M;
</pre></div>
</li>
<li class="stepexpand"><span>Confirm that the standby log file groups were added successfully.</span>
<div>
<pre dir="ltr">
SELECT GROUP#, THREAD#, SEQUENCE#, ARCHIVED, STATUS
FROM V$STANDBY_LOG;
</pre>
<p>The output should be similar to the following:</p>
<pre dir="ltr">
GROUP#     THREAD#    SEQUENCE#  ARC STATUS
---------- ---------- ---------- --- ----------
         3          0          0 YES UNASSIGNED
         4          0          0 YES UNASSIGNED
         5          0          0 YES UNASSIGNED
</pre></div>
</li>
<li class="stepexpand"><span>Ensure that log files from the source database are appearing in the location that is specified in the <code class="codeph">LOCATION</code> attribute of the local <code class="codeph">LOG_ARCHIVE_DEST_n</code> that you set. You might need to switch the log file at the source database to see files in the directory.</span></li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-04B25BAE-9A99-416C-8778-20357138A732">Preparing a Downstream Mining Database for Real-time Capture</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-77F675AA-3E7E-4ACB-94E0-72A8983D1F46"></a>
<h4 id="GGODB-GUID-77F675AA-3E7E-4ACB-94E0-72A8983D1F46" class="sect4"><span class="enumeration_section">B.3.3.2</span> Configure the Database to Archive Standby Redo Log Files Locally</h4>
<div>
<div class="section">
<p>This procedure configures the downstream mining database to archive the standby redo logs that receive redo data from the online redo logs of the source database. Keep in mind that foreign archived logs should not be archived in the recovery area of the downstream mining database.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To Archive Standby Redo Logs Locally</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>At the downstream mining database, set the second archive log destination in the <code class="codeph">LOG_ARCHIVE_DEST_n</code> initialization parameter as shown in the following example.</span>
<div>
<pre dir="ltr">
ALTER SYSTEM SET
LOG_ARCHIVE_DEST_2='LOCATION=/home/arc_dest/srl_dbms1
VALID_FOR=(STANDBY_LOGFILE,PRIMARY_ROLE)'
</pre>
<p>Oracle recommends that foreign archived logs (logs from remote source databases) be kept separate from local mining database log files, and from each other. You must not use the recovery area of the downstream mining database to stage foreign archived logs..</p>
</div>
</li>
<li class="stepexpand"><span>Enable the <code class="codeph">LOG_ARCHIVE_DEST_2</code> parameter you set in the previous step as shown in the following example.</span>
<div>
<pre dir="ltr">
ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_2=ENABLE 
</pre></div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="configuring-downstream-mining-database.htm#GUID-04B25BAE-9A99-416C-8778-20357138A732">Preparing a Downstream Mining Database for Real-time Capture</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment482">
<tr>
<td class="cellalignment492">
<table class="cellalignment487">
<tr>
<td class="cellalignment486"><a href="optional-parameters-integrated-modes.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment486"><a href="example-downstream-mining-configuration.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2010, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment494">
<table class="cellalignment485">
<tr>
<td class="cellalignment486"><a href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment486"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment486"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
