<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>User Exit Functions</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This chapter describes the Oracle GoldenGate user exit functions and their syntax and includes the following topics:" />
<meta name="dcterms.created" content="2018-09-07T12:04:07Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Reference for Oracle GoldenGate" />
<meta name="dcterms.identifier" content="E81608-08" />
<meta name="dcterms.isVersionOf" content="GWURF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="valoneof.htm" title="Previous" type="text/html" />
<link rel="Next" href="calling-user-exit.htm" title="Next" type="text/html" />
<link rel="alternate" href="GWURF.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-74F59B86-AF52-4ADE-8FC8-4EA56720CEC8"></a> <span id="PAGE" style="display:none;">306/356</span> <!-- End Header -->
<a id="GWURF1170"></a><a id="GWURF831"></a>
<h1 id="GWURF-GUID-74F59B86-AF52-4ADE-8FC8-4EA56720CEC8" class="sect1"><span class="enumeration_chapter">8</span> User Exit Functions</h1>
<div>
<div><span>This chapter describes the Oracle GoldenGate user exit functions and their syntax and includes the following topics:</span></div>
<p>For more information about using Oracle GoldenGate user exits, see <a class="olink GWUAD607" target="_blank" href="../GWUAD/customizing-oracle-goldengate-processing.htm#GWUAD607"><span class="italic"><span id="GUID-74F59B86-AF52-4ADE-8FC8-4EA56720CEC8__GWUAD"><cite>Administering Oracle GoldenGate</cite></span></span></a>.</p>
<p><span class="bold">Topics:</span></p>
</div>
<a id="GWURF835"></a><a id="GWURF834"></a>
<div class="props_rev_3"><a id="GUID-59C458AF-8BEC-403F-BF7F-8A3CD31BEC79"></a>
<h2 id="GWURF-GUID-59C458AF-8BEC-403F-BF7F-8A3CD31BEC79" class="sect2"><span class="enumeration_section">8.1</span> Using EXIT_CALL_TYPE</h2>
<div>
<p>Use <code class="codeph">EXIT_CALL_TYPE</code> to indicate when, during processing, the Extract or Replicat process (the caller) calls a user exit routine. A process can call a routine with the following calls.</p>
<div class="tblformalwide" id="GUID-59C458AF-8BEC-403F-BF7F-8A3CD31BEC79__GUID-6152CE10-EE29-455D-8C21-851B733B8178">
<p class="titleintable">Table 8-1 User Exit Calls</p>
<table class="cellalignment386" title="User Exit Calls" summary="This table lists the user exit calls. It gives the call type and processing point.">
<thead>
<tr class="cellalignment351">
<th class="cellalignment361" id="d110869e62">Call type</th>
<th class="cellalignment362" id="d110869e65">Processing point</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e70" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_ABORT_TRANS</code></p>
</td>
<td class="cellalignment364" headers="d110869e70 d110869e65">
<p>Valid when the <code class="codeph">RECOVERYOPTIONS</code> mode is <code class="codeph">APPEND</code> (the default). Called when a data pump or Replicat reads a <code class="codeph">RESTART ABEND</code> record from the trail, placed there by a writer process that abended. (The writer process can be the primary Extract writing to a local trail read by a data pump, or a data pump writing to a remote trail read by Replicat.) This call type enables the user exit to abort or discard the transaction that was left incomplete when the writer process stopped, and then to recover and resume processing at the start of the previous completed transaction.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e87" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_BEGIN_TRANS</code></p>
</td>
<td class="cellalignment364" headers="d110869e87 d110869e65">
<p>Called just before either of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>a <code class="codeph">BEGIN</code> record of a transaction that is read by a data pump</p>
</li>
<li>
<p>the start of a Replicat transaction</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e105" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_CHECKPOINT</code></p>
</td>
<td class="cellalignment364" headers="d110869e105 d110869e65">
<p>Called just before an Extract or Replicat checkpoint is written.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e114" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_DISCARD_ASCII_RECORD</code></p>
</td>
<td class="cellalignment364" headers="d110869e114 d110869e65">
<p>Called during Extract processing before an ASCII input record is written to the discard file. The associated ASCII buffer can be retrieved and manipulated by the user exit using callback routines.</p>
<p>This call type is not applicable for use with the Replicat process.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e124" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_DISCARD_RECORD</code></p>
</td>
<td class="cellalignment364" headers="d110869e124 d110869e65">
<p>Called during Replicat processing before a record is written to the discard file. Records can be discarded for several reasons, such as when a value in the Oracle GoldenGate change record is different from the current version in the target table.The associated discard buffer can be retrieved and manipulated by the user exit using callback routines.</p>
<p>This call type is not applicable for use with the Extract process.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e134" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_END_TRANS</code></p>
</td>
<td class="cellalignment364" headers="d110869e134 d110869e65">
<p>Called just after either of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>an <code class="codeph">END</code> record of a transaction that is read by a data pump</p>
</li>
<li>
<p>the last record in a Replicat transaction</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e153" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_FATAL_ERROR</code></p>
</td>
<td class="cellalignment364" headers="d110869e153 d110869e65">
<p>Called during Extract or Replicat processing just before Oracle GoldenGate terminates after a fatal error.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e162" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_PROCESS_MARKER</code></p>
</td>
<td class="cellalignment364" headers="d110869e162 d110869e65">
<p>Called during Replicat processing when a marker from a NonStop server is read from the trail, and before writing to the marker history file.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e171" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_PROCESS_RECORD</code></p>
</td>
<td class="cellalignment364" headers="d110869e171 d110869e65">
<ul style="list-style-type: disc;">
<li>
<p>For Extract, called before a record buffer is output to the trail.</p>
</li>
<li>
<p>For Replicat, called just before a replicated operation is performed.</p>
</li>
</ul>
<p>This call is the basis of most user exit processing. When <code class="codeph">EXIT_CALL_PROCESS_RECORD</code> is called, the record buffer and other record information are available to the user exit through callback routines. If source-target mapping is specified in the parameter file, the mapping is performed before the <code class="codeph">EXIT_CALL_PROCESS_RECORD</code> event takes place. The user exit can map, transform, clean, or perform virtually any other operation with the record. The user exit can return a status indicating whether the caller should process or ignore the record.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e193" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_START</code></p>
</td>
<td class="cellalignment364" headers="d110869e193 d110869e65">
<p>Called at the start of processing. The user exit can perform initialization work, such as opening files and initializing variables.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e202" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_STOP</code></p>
</td>
<td class="cellalignment364" headers="d110869e202 d110869e65">
<p>Called before the process stops gracefully or ends abnormally. The user exit can perform completion work, such as closing files or outputting totals.</p>
</td>
</tr>
<tr class="cellalignment351">
<td class="cellalignment363" id="d110869e212" headers="d110869e62">
<p><code class="codeph">EXIT_CALL_RESULT</code></p>
</td>
<td class="cellalignment364" headers="d110869e212 d110869e65">
<p>Set by the user exit routines to instruct the caller how to respond when each exit call completes.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="GWURF882"></a>
<div class="props_rev_3"><a id="GUID-73BC400A-7EF3-4138-9E86-1F2B0E31081E"></a>
<h2 id="GWURF-GUID-73BC400A-7EF3-4138-9E86-1F2B0E31081E" class="sect2"><span class="enumeration_section">8.2</span> SET_SESSION_CHARSET</h2>
<div>
<div class="section">
<p class="subhead2">Valid For</p>
<p>Extract and Replicat</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Description</p>
<p>Use the <code class="codeph">SET_SESSION_CHARSET</code> function to set the character set of the user exit. The character set of the user exit session indicates the encoding of any character-based callback structure members that are used between the user exit and the caller process (Extract, data pump, Replicat), including metadata such as (but not limited to):</p>
<ul style="list-style-type: disc;">
<li>
<p>database names and locales</p>
</li>
<li>
<p>table and column names</p>
</li>
<li>
<p>DDL text</p>
</li>
<li>
<p>error messages</p>
</li>
<li>
<p>character-type columns such as <code class="codeph">CHAR</code> and <code class="codeph">NCHAR</code></p>
</li>
<li>
<p>date-time and numeric columns that are represented in string form</p>
</li>
</ul>
<p>This function can be called at any time that the user exit has control. When the user exit sets the session character set, it takes effect immediately, and all character values start being converted to the specified set. The recommended place to call this function is with call type <code class="codeph">EXIT_CALL_START</code>.</p>
<div class="infobox-note" id="GUID-73BC400A-7EF3-4138-9E86-1F2B0E31081E__GUID-667ABE79-AEFC-476F-9FA0-CC31B6884444">
<p class="notep1">Note:</p>
<p><code class="codeph">SET_SESSION_CHARSET</code> is not thread-safe.</p>
</div>
<p>If <code class="codeph">SET_SESSION_CHARSET</code> is not called, the session gets set to the default character set of the operating system, which is a predefined enumerated type value in <code class="codeph">ULIB_CS_DEFAULT</code> in the <code class="codeph">ucharset.h</code> file. When the session character set is a default from <code class="codeph">ULIB_CS_DEFAULT</code>, no conversion is performed by Oracle GoldenGate for character-type values that are exchanged between the user exit and the caller process. In addition, the object-name metadata of the database are considered to be the default character set of the operating system. Keep in mind that the default may not be correct.</p>
<p>The character set of the user exit is printed to the report file when the user exit is loaded and when <code class="codeph">SET_SESSION_CHARSET</code> is called. If the session character set is <code class="codeph">ULIB_CS_DEFAULT</code>, there is a message stating that no column data character-set conversion is being performed.</p>
<p>For more information about globalization support, see <a class="olink GWUAD" target="_blank" href="../GWUAD/toc.htm"><span class="italic"><span id="GUID-73BC400A-7EF3-4138-9E86-1F2B0E31081E__GWUAD"><cite>Administering Oracle GoldenGate</cite></span></span></a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">
#include usrdecs.h
short result_code;
session_def session_charset_def;
ERCALLBACK (SET_SESSION_CHARSET, &amp;session_charset_def, &amp;result_code);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Buffer</p>
<pre dir="ltr">
typedef struct
{
ULibCharSet  session_charset;
} session_def;
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Input</p>
<dl>
<dt class="dlterm"><a id="GUID-73BC400A-7EF3-4138-9E86-1F2B0E31081E__GUID-D58E43FE-2E92-40CB-817A-0DE1137796E2"><!-- --></a><code class="codeph">session_charset</code></dt>
<dd>
<p>The valid values of the session character set are defined in the header file <code class="codeph">ucharset.h</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Output</p>
<p>None</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Return Values</p>
<pre dir="ltr">
EXIT_FN_RET_OK
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment350">
<tr>
<td class="cellalignment357">
<table class="cellalignment355">
<tr>
<td class="cellalignment354"><a href="valoneof.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment354"><a href="calling-user-exit.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment359">
<table class="cellalignment353">
<tr>
<td class="cellalignment354"><a href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment354"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment354"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
