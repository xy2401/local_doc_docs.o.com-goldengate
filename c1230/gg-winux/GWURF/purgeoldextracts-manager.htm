<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>PURGEOLDEXTRACTS for Manager</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="dcterms.created" content="2018-09-07T12:04:07Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Reference for Oracle GoldenGate" />
<meta name="dcterms.identifier" content="E81608-08" />
<meta name="dcterms.isVersionOf" content="GWURF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="purgeoldextracts-extract-and-replicat.htm" title="Previous" type="text/html" />
<link rel="Next" href="purgeoldtasks.htm" title="Next" type="text/html" />
<link rel="alternate" href="GWURF.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A"></a> <span id="PAGE" style="display:none;">46/356</span> <!-- End Header -->
<a id="GWURF598"></a><a id="GWURF599"></a><a id="GWURF600"></a><a id="GWURF1025"></a>
<h1 id="GWURF-GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A" class="sect1"><span class="enumeration_section">2.20</span> PURGEOLDEXTRACTS for Manager</h1>
<div>
<div class="section">
<p class="subhead1">Valid For</p>
<p>Manager</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Description</p>
<p>Use the <code class="codeph">PURGEOLDEXTRACTS</code> parameter in a Manager parameter file to purge trail files when Oracle GoldenGate has finished processing them. Without using <code class="codeph">PURGEOLDEXTRACTS</code>, no purging is performed, and trail files can consume significant disk space.</p>
<p>Using <code class="codeph">PURGEOLDEXTRACTS</code> as a Manager parameter is recommended rather than using the Extract or Replicat version of <code class="codeph">PURGEOLDEXTRACTS</code>. As a Manager parameter, <code class="codeph">PURGEOLDEXTRACTS</code> allows you to manage trail files in a centralized fashion and take into account multiple processes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">How to Use PURGEOLDEXTRACTS for Manager</p>
<p>To control the purging, follow these rules:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">USECHECKPOINTS</code> triggers a purge when all processes are finished with a file as indicated by their checkpoints. Basing the purges on checkpoints ensures that Manager does not delete any data until all processes are finished with it. This is essential in a production environment to ensure data integrity. <code class="codeph">USECHECKPOINTS</code> considers the checkpoints of both Extract and Replicat before purging. Because <code class="codeph">USECHECKPOINTS</code> is the default, it need not be specified in the <code class="codeph">PURGEOLDEXTRACTS</code> statement. Manager obeys <code class="codeph">USECHECKPOINTS</code> unless there is an explicit <code class="codeph">NOUSECHECKPOINTS</code> entry.</p>
</li>
<li>
<p>Use the <code class="codeph">MINKEEP</code> rules to set a minimum amount of time to keep data:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use <code class="codeph">MINKEEPHOURS</code> or <code class="codeph">MINKEEPDAYS</code> to keep data for <span class="italic"><code class="codeph">n</code></span> hours or days.</p>
</li>
<li>
<p>Use <code class="codeph">MINKEEPFILES</code> to keep at least <span class="italic"><code class="codeph">n</code></span> trail files including the active file. The default number of files to keep is <code class="codeph">1</code>.</p>
</li>
</ul>
<p>Use only one of the <code class="codeph">MINKEEP</code> options. If more than one is used, Oracle GoldenGate selects one of them based on the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>If both <code class="codeph">MINKEEPHOURS</code> and <code class="codeph">MINKEEPDAYS</code> are specified, only the last one is accepted, and the other is ignored.</p>
</li>
<li>
<p>If either <code class="codeph">MINKEEPHOURS</code> or <code class="codeph">MINKEEPDAYS</code> is used with <code class="codeph">MINKEEPFILES</code>, then <code class="codeph">MINKEEPHOURS</code> or <code class="codeph">MINKEEPDAYS</code> is accepted, and <code class="codeph">MINKEEPFILES</code> is ignored.</p>
</li>
</ul>
</li>
</ul>
<p>Manager evaluates potential maintenance tasks based on the value set for the <code class="codeph">CHECKMINUTES</code> parameter. When that value is reached, Manager determines which files to purge based on the Extract and Replicat processes configured on the local system. If at least one process reads a trail file, Manager applies the specified rules; otherwise, the rules do not take effect. The following are possible <code class="codeph">PURGEOLDEXTRACT</code> rule combinations and the actions that Manager takes for them:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">USECHECKPOINTS</code> without <code class="codeph">MINKEEP</code> rules: If checkpoints indicate that a file has been processed completely, it will be purged unless doing so would violate the default rule to keep at least one file.</p>
</li>
<li>
<p><code class="codeph">USECHECKPOINTS</code> with <code class="codeph">MINKEEP</code> rules: If checkpoints indicate that a file has been processed completely, it will be purged unless doing so would violate the <code class="codeph">MINKEEP</code> rules.</p>
</li>
<li>
<p><code class="codeph">NOUSECHECKPOINTS</code> without <code class="codeph">MINKEEP</code> rules: The checkpoints are not considered, and the file will be purged unless doing so would violate the default rule to keep at least one file.</p>
</li>
<li>
<p><code class="codeph">NOUSECHECKPOINTS</code> with <code class="codeph">MINKEEP</code> rules: A file will be purged unless doing so would violate the <code class="codeph">MINKEEP</code> rules.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Additional Guidelines for PURGEOLDEXTRACTS for Manager</p>
<ul style="list-style-type: disc;">
<li>
<p>Do not use more than 500 <code class="codeph">PURGEOLDEXTRACTS</code> parameter statements in the same Manager parameter file.</p>
</li>
<li>
<p>When using this parameter, do not permit trail files to be deleted by any user or program other than Oracle GoldenGate. It will cause <code class="codeph">PURGEOLDEXTRACTS</code> to function improperly.</p>
</li>
<li>
<p>When trails are stored on NFS, there is a difference in system time between the NFS drive and the local system where Manager is running. The trail is created with the NFS time, but the timestamps of the records in the trail are compared with the local system time to determine whether to purge them or not. Take into account any time differences when you create your <code class="codeph">MINKEEP</code> rules.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Default</p>
<pre dir="ltr">
USECHECKPOINTS
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax</p>
<pre dir="ltr">
PURGEOLDEXTRACTS <span class="italic">trail</span>
[, USECHECKPOINTS | NOUSECHECKPOINTS]
[, <span class="italic">MINKEEP_rule</span>]
[, <span class="italic">frequency</span>]
</pre>
<dl>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-260257D8-8D73-401D-B0B1-10E41404CA7D"><!-- --></a><span class="italic"><code class="codeph">trail</code></span></dt>
<dd>
<p>The trail to purge. Use a relative or fully qualified name.</p>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-EC18BCBC-C2F0-49AD-9A7D-1300F1279C97"><!-- --></a><code class="codeph">USECHECKPOINTS</code></dt>
<dd>
<p>Allows purging according to any <code class="codeph">MINKEEP</code> rules after all Extract and Replicat processes are done with the data as indicated by checkpoints. When using <code class="codeph">USECHECKPOINTS</code>, you can use the <code class="codeph">USERID</code> or <code class="codeph">USERIDALIAS</code> parameters in the Manager parameter file, so that Manager can query the Replicat checkpoint table to get checkpoint information though it is not required.</p>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-C97E7FBE-216F-4172-AD08-0016E4EBDFC9"><!-- --></a><code class="codeph">NOUSECHECKPOINTS</code></dt>
<dd>
<p>Allows purging without considering checkpoints, based either on the default rule to keep a minimum of one file (if no <code class="codeph">MINKEEP</code> rule is used) or the number of files specified with a <code class="codeph">MINKEEP</code> rule.</p>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-922E0DFD-7DAE-4663-B116-1444077D82C8"><!-- --></a><span class="italic"><code class="codeph">MINKEEP_rule</code></span></dt>
<dd>
<p>Can be one of the following to set rules for the minimum amount of time to keep an inactive file.</p>
<dl>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-902C59FD-41AE-486D-A950-1F3827C5A473"><!-- --></a><code class="codeph">MINKEEPHOURS</code> <span class="italic"><code class="codeph">n</code></span></dt>
<dd>
<p>Keeps an inactive file for at least the specified number of hours. The minimum is 1 and the maximum is 1000.</p>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-BC747A6A-E11F-4FE4-84CB-DCF1880B5F17"><!-- --></a><code class="codeph">MINKEEPDAYS</code> <span class="italic"><code class="codeph">n</code></span></dt>
<dd>
<p>Keeps an inactive file for at least the specified number of days. The minimum is 1 and the maximum is 365.</p>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-448F14AD-4CF2-4DBA-804D-B15E2FCBD9EB"><!-- --></a><code class="codeph">MINKEEPFILES</code> <span class="italic"><code class="codeph">n</code></span></dt>
<dd>
<p>Keeps at least <span class="italic"><code class="codeph">n</code></span> trail files, including the active file. The minimum is 1 and the maximum is 100. The default is 1.</p>
</dd>
</dl>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-AF680B99-D9C4-473B-A67F-C7759ACBF376"><!-- --></a><span class="italic"><code class="codeph">frequency</code></span></dt>
<dd>
<p>Sets the frequency with which to purge inactive trail files. The default time for Manager to evaluate potential maintenance tasks is 10 minutes, as specified with the <code class="codeph">CHECKMINUTES</code> parameter. At that interval, Manager evaluates the <code class="codeph">PURGEOLDEXTRACTS</code> frequency and conducts the purge after the specified <span class="italic"><code class="codeph">frequency</code></span>.</p>
<p><span class="italic"><code class="codeph">frequency</code></span> can be one of the following:</p>
<dl>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-8BDBEE11-254C-4DA2-851A-D97FDEC36299"><!-- --></a><code class="codeph">FREQUENCYMINUTES</code> <span class="italic"><code class="codeph">n</code></span></dt>
<dd>
<p>Sets the frequency in minutes. The default purge frequency is 60 minutes. The minimum is 1 and the maximum is 360.</p>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-7ABDDC7C-A367-45A5-9AE2-443444EFE8F6"><!-- --></a><code class="codeph">FREQUENCYHOURS</code> <span class="italic"><code class="codeph">n</code></span></dt>
<dd>
<p>Sets the frequency in hours. The minimum is 1 and the maximum is 24.</p>
</dd>
</dl>
</dd>
</dl>
<p>See <span class="q">"<a href="checkminutes.htm#GUID-0C7CA97F-E7AC-4A0C-BADF-C7AD158F4981">CHECKMINUTES</a>"</span> for more information about controlling the Manager maintenance check interval.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
<dl>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-AFE14E95-3961-4159-BFF7-FB1DB3C3EE0E"><!-- --></a>Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p><span class="italic"><code class="codeph">Status:</code></span> Trail files <code class="codeph">AA000000</code>, <code class="codeph">AA000001</code>, and <code class="codeph">AA000002</code> exist. Replicat has been stopped for four hours and is not finished processing any of the files<code class="codeph">.</code> The Manager parameters include:</p>
<pre dir="ltr">
PURGEOLDEXTRACTS /ggs/dirdat/AA*, USECHECKPOINTS, MINKEEPHOURS 2
</pre>
<p><span class="italic"><code class="codeph">Result:</code></span> The amount of time that files must be retained was exceeded, but no files will be purged because checkpoints indicate that Replicat is not finished processing them.</p>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-E44B031D-C50D-4A3A-8732-C79165DEC54B"><!-- --></a>Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p><span class="italic"><code class="codeph">Status:</code></span> Trail files <code class="codeph">AA000000</code>, <code class="codeph">AA000001</code>, and <code class="codeph">AA000002</code> exist. Replicat has been stopped for four hours and is not finished processing any of the files<code class="codeph">.</code> The Manager parameters include:</p>
<pre dir="ltr">
PURGEOLDEXTRACTS /ggs/dirdat/AA*, NOUSECHECKPOINTS, MINKEEPHOURS 2
</pre>
<p><span class="italic"><code class="codeph">Result:</code></span> All of the trail files will be purged because the minimum time to keep them was satisfied, and checkpoints are not considered before purging.</p>
</dd>
<dt class="dlterm"><a id="GUID-5B8E97C6-E2F4-4F5A-BB0E-CDFAC8E7E04A__GUID-8FD3901D-D396-4B51-AB04-DB8B6BBABBC6"><!-- --></a>Example 3&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p><span class="italic"><code class="codeph">Status:</code></span> Replicat and Extract are finished processing data. There has been no access to the trail files for the last five hours. Trail files <code class="codeph">AA000000</code>, <code class="codeph">AA000001</code>, and <code class="codeph">AA000002</code> exist. The Manager parameters include:</p>
<pre dir="ltr">
PURGEOLDEXTRACTS /ggs/dirdat/AA*, USECHECKPOINTS, MINKEEPHOURS 4, &amp;
MINKEEPFILES 4
</pre>
<p><span class="italic"><code class="codeph">Result:</code></span> This is an example of why only one of the <code class="codeph">MINKEEP</code> options should be set. <code class="codeph">USECHECKPOINTS</code> requirements were satisfied, so the <code class="codeph">MINKEEP</code> rules are considered when determining whether to purge <code class="codeph">AA000002</code>. Only two files will remain if <code class="codeph">AA000002</code> is purged, and that violates the <code class="codeph">MINKEEPFILES</code> rule. Because both <code class="codeph">MINKEEPFILES</code> and <code class="codeph">MINKEEPHOURS</code> are specified, however, <code class="codeph">MINKEEPFILES</code> is ignored. The file will be purged because it has not been accessed for five hours, and that satisfies the <code class="codeph">MINKEEPHOURS</code> requirement of four hours.</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment350">
<tr>
<td class="cellalignment357">
<table class="cellalignment355">
<tr>
<td class="cellalignment354"><a href="purgeoldextracts-extract-and-replicat.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment354"><a href="purgeoldtasks.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment359">
<table class="cellalignment353">
<tr>
<td class="cellalignment354"><a href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment354"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment354"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
