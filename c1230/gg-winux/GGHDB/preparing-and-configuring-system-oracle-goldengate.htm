<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Preparing and Configuring Your System for Oracle GoldenGate</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database." />
<meta name="dcterms.created" content="2018-09-07T08:20:49Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Using Oracle GoldenGate for Heterogeneous Databases" />
<meta name="dcterms.identifier" content="E88786-08" />
<meta name="dcterms.isVersionOf" content="GGHDB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="understanding-whats-supported-mysql.htm" title="Previous" type="text/html" />
<link rel="Next" href="using-ddl-replication.htm" title="Next" type="text/html" />
<link rel="alternate" href="GGHDB.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE"></a> <span id="PAGE" style="display:none;">21/37</span> <!-- End Header -->
<h1 id="GGHDB-GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" class="sect1"><span class="enumeration_chapter">13</span> Preparing and Configuring Your System for Oracle GoldenGate</h1>
<div>
<div><span>Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.</span></div>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-E4A69B00-DD67-4D08-A932-359A1AF7B77A">Ensuring Data Availability</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-46690378-7A36-41F6-BBE7-299C15C15947">Setting Logging Parameters</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-8E962158-A6ED-4BC5-814F-F44FA2229292">Adding Host Names</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-9745DC6C-CCBC-403D-890D-DBC6D730C181">Setting the Session Character Set</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-A446DD2C-6B01-4F84-9CA6-1AB4E2039AE7">Preparing Tables for Processing</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-45C31C8D-A5EF-452C-AE6D-5B785C4ECD0B">Changing the Log-Bin Location</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-2EF9F1ED-A685-4F59-95E5-3A9DC2D9B582">Configuring Bi-Directional Replication</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-41F158D6-9B69-4E7D-B7E7-3075CFE4E5BF">Capturing on Amazon Relational Database Service using a MySQL Replication Slave</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-434837B2-C14C-42B4-8B11-E92D2F28A0CC">Other Oracle GoldenGate Parameters for MySQL</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-A2FDBF55-48DA-4C7F-9F1F-152275206D71">Positioning Extract to a Specific Start Point</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-oracle-goldengate-mysql.htm" title="Oracle GoldenGate for MySQL supports replication from a MySQL source database to a MySQL target database or to a supported database of another type to perform an initial load or change data replication.">Using Oracle GoldenGate with MySQL</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-E4A69B00-DD67-4D08-A932-359A1AF7B77A"></a>
<h2 id="GGHDB-GUID-E4A69B00-DD67-4D08-A932-359A1AF7B77A" class="sect2"><span class="enumeration_section">13.1</span> Ensuring Data Availability</h2>
<div>
<div class="section">
<p>Retain enough binary log data so that if you stop Extract or there is an unplanned outage, Extract can start again from its checkpoints. Extract must have access to the binary log that contains the start of the oldest uncommitted unit of work, and all binary logs thereafter. The recommended retention period is at least 24 hours worth of transaction data, including both active and archived information. You might need to do some testing to determine the best retention time given your data volume and business requirements.</p>
<p>If data that Extract needs during processing was not retained, either in active or backup logs, one of the following corrective actions might be required:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Alter Extract to capture from a later point in time for which binary log data is available (and accept possible data loss on the target).</p>
</li>
<li>
<p>Resynchronize the source and target tables, and then start the Oracle GoldenGate environment over again.</p>
</li>
</ul>
<p>To determine where the Extract checkpoints are, use the <code class="codeph">INFO EXTRACT</code> command. For more information, see <a class="olink GWURF-GUID-14CA8B88-7B90-4C8D-ADB1-13B5F1D75CC1" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E81615-01&amp;id=GWURF-GUID-14CA8B88-7B90-4C8D-ADB1-13B5F1D75CC1">INFO EXTRACT</a> in <cite><span><cite>Reference for Oracle GoldenGate</cite></span></cite></p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-46690378-7A36-41F6-BBE7-299C15C15947"></a>
<h2 id="GGHDB-GUID-46690378-7A36-41F6-BBE7-299C15C15947" class="sect2"><span class="enumeration_section">13.2</span> Setting Logging Parameters</h2>
<div>
<div class="section">
<p>To capture from the MySQL transaction logs, the Oracle GoldenGate Extract process must be able to find the index file. index file in turn contains the paths of all binary log files.</p>
<div class="infobox-note" id="GUID-46690378-7A36-41F6-BBE7-299C15C15947__GUID-984F7AF3-AF3C-4521-9D38-319610C4944B">
<p class="notep1">Note:</p>
<p>Extract expects that all of the table columns are in the binary log. As a result, only <code class="codeph">binlog_row_image</code> set as <code class="codeph">full</code> is supported and this is the default. Other values of <code class="codeph">binlog_row_image</code> are not supported.</p>
</div>
<p>Extract checks the following parameter settings to get this index file path:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Extract <code class="codeph">TRANLOGOPTIONS</code> parameter with the <code class="codeph">ALTLOGDEST</code> option: If this parameter specifies a location for the log index file, Extract accepts this location over any default that is specified in the MySQL Server configuration file. When <code class="codeph">ALTLOGDEST</code> is used, the binary log index file must also be stored in the specified directory. This parameter should be used if the MySQL configuration file does not specify the full index file path name, specifies an incorrect location, or if there are multiple installations of MySQL on the same machine</span>
<div>
<p>To specify the index file path with <code class="codeph">TRANLOGICOPTIONS</code> with <code class="codeph">ALTLOGDEST</code>, use the following command format on Windows:</p>
<pre dir="ltr">
TRANLOGOPTIONS ALTLOGDEST "C:\\Program Files\\MySQL\\logs\\binlog.index"
</pre>
<p>On Linux, use this format:</p>
<pre dir="ltr">
TRANLOGOPTIONS ALTLOGDEST "/mnt/rdbms/mysql/data/logs/binlog.index" 
</pre></div>
</li>
<li class="stepexpand"><span>The MySQL Server configuration file: The configuration file stores default startup options for the MySQL server and clients. On Windows, the name of the configuration file is <code class="codeph">my.ini</code>. On other platforms, it is <code class="codeph">my.cnf</code>. In the absence of <code class="codeph">TRANLOGOPTIONS</code> with <code class="codeph">ALTLOGDEST</code>, Extract gets information about the location of the log files from the configuration file; however, even with <code class="codeph">ALTLOGDEST</code>, these Extract parameters must be set correctly:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">binlog-ignore-db=oggddl</code>: This prevents DDL logging history table entries in the <code class="codeph">binlog</code> and is set in the <code>my.cnf</code> or <code>my.ini</code> file. This is required only if DDL replication is enabled.</p>
</li>
<li>
<p><code class="codeph">log-bin</code>: This parameter is used to enable binary logging. This parameter also specifies the location of the binary log index file and is a required parameter for Oracle GoldenGate, even if <code class="codeph">ALTLOGDEST</code> is used. If log-bin is not specified, binary logging will be disabled and Extract returns an error.</p>
</li>
<li>
<p><code class="codeph">log-bin-index</code>: This parameter specifies the location of the binary log index. If it is not used, Extract assumes that the index file is in the same location as the log files. If this parameter is used and specifies a different directory from the one that contains the binary logs, the binary logs must not be moved once Extract is started.</p>
</li>
<li>
<p><code class="codeph">binlog_format</code>: This parameter sets the format of the logs. It must be set to the value of <code class="codeph">ROW</code>, which directs the database to log DML statements in binary format. Any other log format (<code class="codeph">MIXED</code> or <code class="codeph">STATEMENT</code>) causes Extract to abend.</p>
<div class="infobox-note" id="GUID-46690378-7A36-41F6-BBE7-299C15C15947__GUID-9B2DFAB5-9D99-410F-939D-5EAA7185F212">
<p class="notep1">Note:</p>
<p>MySQL binary logging does not allow logging to be enabled or disabled for specific tables. It applies globally to all tables in the database.</p>
</div>
</li>
</ul>
<p>To locate the configuration file, Extract checks the <code class="codeph">MYSQL_HOME</code> environment variable: If <code class="codeph">MYSQL_HOME</code> is set, Extract uses the configuration file in the specified directory. If <code class="codeph">MYSQL_HOME</code> is not set, Extract queries the <code class="codeph">information_schema.global_variables</code> table to determine the MySQL installation directory. If a configuration file exists in that directory, Extract uses it.</p>
</div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-8E962158-A6ED-4BC5-814F-F44FA2229292"></a>
<h2 id="GGHDB-GUID-8E962158-A6ED-4BC5-814F-F44FA2229292" class="sect2"><span class="enumeration_section">13.3</span> Adding Host Names</h2>
<div>
<div class="section">
<p>Oracle GoldenGate gets the name of the database it is supposed to connect to from the <code class="codeph">SOURCEDB</code> parameter. A successful connection depends on the localhost entry being properly configured in the system host file. To avoid issues that arise from improper local host configuration, you can use <code class="codeph">SOURCEDB</code> in the following format:</p>
<p><code class="codeph">SOURCEDB</code> <span class="italic"><code class="codeph">database_name</code></span><code class="codeph">@</code><span class="italic"><code class="codeph">host_name</code></span></p>
<p>Where: <span class="italic"><code class="codeph">database_name</code></span> is the name of the MySQL instance, and <span class="italic"><code class="codeph">host_name</code></span> is the name or IP address of the local host. If using an unqualified host name, that name must be properly configured in the DNS database. Otherwise, use the fully qualified host name, for example <code class="codeph">myhost.company.com</code>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-9745DC6C-CCBC-403D-890D-DBC6D730C181"></a>
<h2 id="GGHDB-GUID-9745DC6C-CCBC-403D-890D-DBC6D730C181" class="sect2"><span class="enumeration_section">13.4</span> Setting the Session Character Set</h2>
<div>
<div class="section">
<p>The <code class="codeph">GGSCI</code>, Extract and Replicat processes use a session character set when connecting to the database. For MySQL, the session character set is taken from the <code class="codeph">SESSIONCHARSET</code> option of <code class="codeph">SOURCEDB</code> and <code class="codeph">TARGETDB</code>. Make certain you specify a session character set in one of these ways when you configure Oracle GoldenGate.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A446DD2C-6B01-4F84-9CA6-1AB4E2039AE7"></a>
<h2 id="GGHDB-GUID-A446DD2C-6B01-4F84-9CA6-1AB4E2039AE7" class="sect2"><span class="enumeration_section">13.5</span> Preparing Tables for Processing</h2>
<div>
<div class="section">
<p>This section describes how to prepare the tables for processing. Table preparation requires these tasks:</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-4587B6A7-73AE-475C-BA44-9E2F3C035E51">Assigning Row Identifiers</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-8D9781A5-E858-4555-A6F4-A23370478C62">Limiting Row Changes in Tables That Do Not Have a Key</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-08091052-194E-4197-BF83-644363E34071">Disabling Triggers and Cascade Constraints</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-4587B6A7-73AE-475C-BA44-9E2F3C035E51"></a>
<h3 id="GGHDB-GUID-4587B6A7-73AE-475C-BA44-9E2F3C035E51" class="sect3"><span class="enumeration_section">13.5.1</span> Assigning Row Identifiers</h3>
<div>
<p>Oracle GoldenGate requires some form of unique row identifier on the source and target tables to locate the correct target rows for replicated updates and deletes.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-69F2117B-F9EB-42D5-972B-6DB6491C419B">How Oracle GoldenGate Determines the Kind of Row Identifier to Use</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-E91019F7-FAD8-4071-9844-DB707246A2AF">Tables with a Primary Key Derived from a Unique Index</a><br /></li>
<li class="ulchildlink"><a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-5E2F58A6-4313-410B-805E-3B727642CCD2">How to Specify Your Own Key for Oracle GoldenGate to Use</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-A446DD2C-6B01-4F84-9CA6-1AB4E2039AE7">Preparing Tables for Processing</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-69F2117B-F9EB-42D5-972B-6DB6491C419B"></a>
<h4 id="GGHDB-GUID-69F2117B-F9EB-42D5-972B-6DB6491C419B" class="sect4"><span class="enumeration_section">13.5.1.1</span> How Oracle GoldenGate Determines the Kind of Row Identifier to Use</h4>
<div>
<div class="section">
<p>Unless a <code class="codeph">KEYCOLS</code> clause is used in the <code class="codeph">TABLE</code> or <code class="codeph">MAP</code> statement, Oracle GoldenGate selects a row identifier to use in the following order of priority:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Primary key</span></li>
<li class="stepexpand"><span>First unique key alphanumerically that does not contain a timestamp or non-materialized computed column.</span></li>
<li class="stepexpand"><span>If none of the preceding key types exist (even though there might be other types of keys defined on the table) Oracle GoldenGate constructs a pseudo key of all columns that the database allows to be used in a unique key, excluding those that are not supported by Oracle GoldenGate in a key or those that are excluded from the Oracle GoldenGate configuration.</span>
<div>
<div class="infobox-note" id="GUID-69F2117B-F9EB-42D5-972B-6DB6491C419B__GUID-6340DEB3-05B9-47C9-83E7-B704418316B2">
<p class="notep1">Note:</p>
<p>If there are other, non-usable keys on a table or if there are no keys at all on the table, Oracle GoldenGate logs an appropriate message to the report file. Constructing a key from all of the columns impedes the performance of Oracle GoldenGate on the source system. On the target, this key causes Replicat to use a larger, less efficient <code class="codeph">WHERE</code> clause.</p>
</div>
</div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-4587B6A7-73AE-475C-BA44-9E2F3C035E51">Assigning Row Identifiers</a></p>
</div>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-E91019F7-FAD8-4071-9844-DB707246A2AF"></a>
<h4 id="GGHDB-GUID-E91019F7-FAD8-4071-9844-DB707246A2AF" class="sect4"><span class="enumeration_section">13.5.1.2</span> Tables with a Primary Key Derived from a Unique Index</h4>
<div>
<p>In the absence of a primary key on a table, MySQL will promote a unique index to primary key if the indexed column is <code class="codeph">NOT NULL</code>. If there are more than one of these not-null indexes, the first one that was created becomes the primary key. To avoid Replicat errors, create these indexes in the same order on the source and target tables.</p>
<p>For example, assume that source and target tables named <code class="codeph">ggvam.emp</code> each have columns named first, middle, and last, and all are defined as <code class="codeph">NOT NULL</code>. If you create unique indexes in the following order, Oracle GoldenGate will abend on the target because the table definitions do not match.</p>
<p>Source:</p>
<pre dir="ltr">
mysql&gt; create unique index uq1 on ggvam.emp(first); 
mysql&gt; create unique index uq2 on ggvam.emp(middle); 
mysql&gt; create unique index uq3 on ggvam.emp(last); 
</pre>
<p>Target:</p>
<pre dir="ltr">
mysql&gt; create unique index uq1 on ggvam.emp(last); 
mysql&gt; create unique index uq2 on ggvam.emp(first); 
mysql&gt; create unique index uq3 on ggvam.emp(middle); 
</pre>
<p>The result of this sequence is that MySQL promotes the index on the source "first" column to primary key, and it promotes the index on the target "last" column to primary key. Oracle GoldenGate will select the primary keys as identifiers when it builds its metadata record, and the metadata will not match. To avoid this error, decide which column you want to promote to primary key, and create that index first on the source and target.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-4587B6A7-73AE-475C-BA44-9E2F3C035E51">Assigning Row Identifiers</a></p>
</div>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-5E2F58A6-4313-410B-805E-3B727642CCD2"></a>
<h4 id="GGHDB-GUID-5E2F58A6-4313-410B-805E-3B727642CCD2" class="sect4"><span class="enumeration_section">13.5.1.3</span> How to Specify Your Own Key for Oracle GoldenGate to Use</h4>
<div>
<p>If a table does not have one of the preceding types of row identifiers, or if you prefer those identifiers not to be used, you can define a substitute key if the table has columns that always contain unique values. You define this substitute key by including a <code class="codeph">KEYCOLS</code> clause within the Extract <code class="codeph">TABLE</code> parameter and the Replicat <code class="codeph">MAP</code> parameter. The specified key will override any existing primary or unique key that Oracle GoldenGate finds.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-4587B6A7-73AE-475C-BA44-9E2F3C035E51">Assigning Row Identifiers</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-8D9781A5-E858-4555-A6F4-A23370478C62"></a>
<h3 id="GGHDB-GUID-8D9781A5-E858-4555-A6F4-A23370478C62" class="sect3"><span class="enumeration_section">13.5.2</span> Limiting Row Changes in Tables That Do Not Have a Key</h3>
<div>
<p>If a target table does not have a primary key or a unique key, duplicate rows can exist. In this case, Oracle GoldenGate could update or delete too many target rows, causing the source and target data to go out of synchronization without error messages to alert you. To limit the number of rows that are updated, use the <code class="codeph">DBOPTIONS</code> parameter with the <code class="codeph">LIMITROWS</code> option in the Replicat parameter file. <code class="codeph">LIMITROWS</code> can increase the performance of Oracle GoldenGate on the target system because only one row is processed.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-A446DD2C-6B01-4F84-9CA6-1AB4E2039AE7">Preparing Tables for Processing</a></p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-08091052-194E-4197-BF83-644363E34071"></a>
<h3 id="GGHDB-GUID-08091052-194E-4197-BF83-644363E34071" class="sect3"><span class="enumeration_section">13.5.3</span> Disabling Triggers and Cascade Constraints</h3>
<div>
<p>Disable triggers, cascade delete constraints, and cascade update constraints on the target tables, or alter them to ignore changes made by the Oracle GoldenGate database user. Oracle GoldenGate replicates DML that results from a trigger or cascade constraint. If the same trigger or constraint gets activated on the target table, it becomes redundant because of the replicated version, and the database returns an error. Consider the following example, where the source tables are <code class="codeph">emp_src</code> and <code class="codeph">salary_src</code> and the target tables are <code class="codeph">emp_targ</code> and <code class="codeph">salary_targ</code>.</p>
<ol>
<li>
<p>A delete is issued for <code class="codeph">emp_src</code>.</p>
</li>
<li>
<p>It cascades a delete to <code class="codeph">salary_src</code>.</p>
</li>
<li>
<p>Oracle GoldenGate sends both deletes to the target.</p>
</li>
<li>
<p>The parent delete arrives first and is applied to <code class="codeph">emp_targ</code>.</p>
</li>
<li>
<p>The parent delete cascades a delete to <code class="codeph">salary_targ</code>.</p>
</li>
<li>
<p>The cascaded delete from <code class="codeph">salary_src</code> is applied to <code class="codeph">salary_targ</code>.</p>
</li>
<li>
<p>The row cannot be located because it was already deleted in step 5.</p>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-A446DD2C-6B01-4F84-9CA6-1AB4E2039AE7">Preparing Tables for Processing</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-45C31C8D-A5EF-452C-AE6D-5B785C4ECD0B"></a>
<h2 id="GGHDB-GUID-45C31C8D-A5EF-452C-AE6D-5B785C4ECD0B" class="sect2"><span class="enumeration_section">13.6</span> Changing the Log-Bin Location</h2>
<div>
<div class="section">
<p>Modifying the binary log location by using the <code class="codeph">log-bin</code> variable in the MySQL configuration file might result in two different path entries inside the index file, which could result in errors. To avoid any potential errors, change the log-bin location by doing the following:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Stop any new DML operations.</span></li>
<li><span>Let the extract finish processing all of the existing binary logs. You can verify this by noting when the checkpoint position reaches the offset of the last log.</span></li>
<li><span>After Extract finishes processing the data, stop the Extract group and, if necessary, back up the binary logs.</span></li>
<li><span>Stop the MySQL database.</span></li>
<li><span>Modify the <code class="codeph">log-bin</code> path for the new location.</span></li>
<li><span>Start the MySQL database.</span></li>
<li><span>To clean the old log name entries from index file, use <code class="codeph">flush master</code> or <code class="codeph">reset master</code> (based on your MySQL version).</span></li>
<li><span>Start Extract.</span></li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-2EF9F1ED-A685-4F59-95E5-3A9DC2D9B582"></a>
<h2 id="GGHDB-GUID-2EF9F1ED-A685-4F59-95E5-3A9DC2D9B582" class="sect2"><span class="enumeration_section">13.7</span> Configuring Bi-Directional Replication</h2>
<div>
<div class="section">
<p>In a bi-directional configuration, there are Extract and Replicat processes on both the source and target systems to support the replication of transactional changes on each system to the other system. To support this configuration, each Extract must be able to filter the transactions applied by the local Replicat, so that they are not recaptured and sent back to their source in a continuous loop. Additionally, <code class="codeph">AUTO_INCREMENT</code> columns must be set so that there is no conflict between the values on each system.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Configure Oracle GoldenGate for high availability or active-active replication according to the instructions in the <a class="olink GWUAD-GUID-5B271027-13F4-4D0A-A0A7-33AD2C489AF3" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E81615-01&amp;id=GWUAD-GUID-5B271027-13F4-4D0A-A0A7-33AD2C489AF3">Overview of Replicat</a> in <cite><span><cite>Administering Oracle GoldenGate</cite></span></cite></span></li>
<li class="stepexpand"><span>To filter out Replicat operations in a bi-directional configuration so that the applied operations are not captured and looped back to the source again, take the following steps on each MySQL database:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>Configure each Replicat process to use a checkpoint table. Replicat writes a checkpoint to this table at the end of each transaction. You can use one global checkpoint table or one per Replicat process See <a class="olink GWUAD-GUID-5B271027-13F4-4D0A-A0A7-33AD2C489AF3" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E81615-01&amp;id=GWUAD-GUID-5B271027-13F4-4D0A-A0A7-33AD2C489AF3">Overview of Replicat</a> in <cite><span><cite>Administering Oracle GoldenGate</cite></span></cite>.</p>
</li>
<li>
<p>Specify the name of the checkpoint table with the <code class="codeph">FILTERTABLE</code> option of the <code class="codeph">TRANLOGOPTIONS</code> parameter in the Extract parameter file. The Extract process will ignore transactions that end with an operation to the specified table, which should only be those of Replicat.</p>
<div class="infobox-note" id="GUID-2EF9F1ED-A685-4F59-95E5-3A9DC2D9B582__GUID-45A3EBC5-7712-4D4C-BBA3-C8ACF090ECD7">
<p class="notep1">Note:</p>
<p>Although optional for other supported databases as a means of enhancing recovery, the use of a checkpoint table is required for MySQL when using bi-directional replication (and likewise, will enhance recovery).</p>
</div>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Edit the MySQL server configuration file to set the <code class="codeph">auto_increment_increment</code> and <code class="codeph">auto_increment_offset</code> parameters to avoid discrepancies that could be caused by the bi-directional operations. The following illustrates these parameters, assuming two servers: <span class="bold">ServerA</span> and <span class="bold">ServerB</span>.</span>
<div>
<p><span class="bold">ServerA</span>:</p>
<pre dir="ltr">
auto-increment-increment = 2
auto-increment-offset = 1
</pre>
<p><span class="bold">ServerB</span>:</p>
<pre dir="ltr">
auto-increment-increment = 2
auto-increment-offset = 2
</pre></div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-41F158D6-9B69-4E7D-B7E7-3075CFE4E5BF"></a>
<h2 id="GGHDB-GUID-41F158D6-9B69-4E7D-B7E7-3075CFE4E5BF" class="sect2"><span class="enumeration_section">13.8</span> Capturing on Amazon Relational Database Service using a MySQL Replication Slave</h2>
<div>
<div class="section">
<p>You can configure a MySQL replication slave on <span class="bold">Amazon Relational Database Service (</span><span class="bold">Amazon RDS)</span> to capture the master's binary log events from the slave.</p>
<p>Typically, the transactions applied by the slave are logged into the relay logs and not into the slave's <code class="codeph">binlog</code>. For the slave to write transactions in its <code class="codeph">binlog</code>, that it receives from the master , you must start the replication slave with the <code class="codeph">log-slave-updates</code> option as <code class="codeph">1</code> in <code>my.cnf</code> in conjunction with the other binary logging parameters for Oracle GoldenGate. After the master's transactions are in the slave's <code class="codeph">binlog</code> , you can set up a regular Oracle GoldenGate capture on the slave to capture and process the slave's <code class="codeph">binlog</code>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-434837B2-C14C-42B4-8B11-E92D2F28A0CC"></a>
<h2 id="GGHDB-GUID-434837B2-C14C-42B4-8B11-E92D2F28A0CC" class="sect2"><span class="enumeration_section">13.9</span> Other Oracle GoldenGate Parameters for MySQL</h2>
<div>
<p>The following parameters may be of use in MySQL installations, and might be required if non-default settings are used for the MySQL database. Other Oracle GoldenGate parameters will be required in addition to these, depending on your intended business use and configuration.</p>
<div class="tblformal" id="GUID-434837B2-C14C-42B4-8B11-E92D2F28A0CC__GUID-A2631AA0-F0BF-4309-B720-711BC06894EF">
<p class="titleintable">Table 13-1 Other Parameters for Oracle GoldenGate for MySQL</p>
<table class="cellalignment124" title="Other Parameters for Oracle GoldenGate for MySQL " summary="This table describes other Oracle GoldenGate parameters for MySQL.">
<thead>
<tr class="cellalignment115">
<th class="cellalignment125" id="d21766e1025">Parameter</th>
<th class="cellalignment126" id="d21766e1028">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment115">
<td class="cellalignment127" id="d21766e1033" headers="d21766e1025">
<p><code class="codeph">DBOPTIONS</code> with <code class="codeph">CONNECTIONPORT</code> <span class="italic"><code class="codeph">port_number</code></span></p>
</td>
<td class="cellalignment128" headers="d21766e1033 d21766e1028">
<p>Required to specify to the VAM the TCP/IP connection port number of the MySQL instance to which an Oracle GoldenGate process must connect if MySQL is not running on the default of 3306.</p>
<pre dir="ltr">
DBOPTIONS CONNECTIONPORT 3307 
</pre></td>
</tr>
<tr class="cellalignment115">
<td class="cellalignment127" id="d21766e1049" headers="d21766e1025">
<p><code class="codeph">DBOPTIONS</code> with <code class="codeph">HOST</code> <span class="italic"><code class="codeph">host_id</code></span></p>
</td>
<td class="cellalignment128" headers="d21766e1049 d21766e1028">
<p>Specifies the DNS name or IP address of the system hosting MySQL to which Replicat must connect.</p>
</td>
</tr>
<tr class="cellalignment115">
<td class="cellalignment127" id="d21766e1064" headers="d21766e1025">
<p><code class="codeph">DBOPTIONS</code> with <code class="codeph">ALLOWLOBDATATRUNCATE</code></p>
</td>
<td class="cellalignment128" headers="d21766e1064 d21766e1028">
<p>Prevents Replicat from abending when replicated LOB data is too large for a target MySQL <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR</code>, <code class="codeph">BINARY</code> or <code class="codeph">VARBINARY</code> column.</p>
</td>
</tr>
<tr class="cellalignment115">
<td class="cellalignment127" id="d21766e1087" headers="d21766e1025">
<p><code class="codeph">SOURCEDB with USERID</code> and <code class="codeph">PASSWORD</code></p>
</td>
<td class="cellalignment128" headers="d21766e1087 d21766e1028">
<p>Specifies database connection information consisting of the database, user name and password to use by an Oracle GoldenGate process that connects to a MySQL database. If MySQL is not running on the default port of 3306, you must specify a complete connection string that includes the port number: <code class="codeph">SOURCEDB</code> <span class="italic"><code class="codeph">dbname@hostname:port</code></span>, <code class="codeph">USERID</code> <span class="italic"><code class="codeph">user</code></span>, <code class="codeph">PASSWORD</code> <span class="italic"><code class="codeph">password</code></span>.Example:</p>
<p><code class="codeph">SOURCEDB mydb@mymachine:3307, USERID myuser, PASSWORD mypassword</code></p>
<p>If you are not running the MySQL database on port 3306, you must also specify the connection port of the MySQL database in the <code class="codeph">DBLOGIN</code> command when issuing commands that affect the database through GGSCI:</p>
<pre dir="ltr">
DBLOGIN SOURCEDB <span class="italic">dbname</span>@<span class="italic">hostname</span>:<span class="italic">port</span>, USERID <span class="italic">user</span>, PASSWORD <span class="italic">password</span>
</pre>
<p>For example:</p>
<pre dir="ltr">
GGSCI&gt; DBLOGIN SOURCEDB mydb@mymachine:3307, USERID myuser, PASSWORD mypassword 
</pre></td>
</tr>
<tr class="cellalignment115">
<td class="cellalignment127" id="d21766e1149" headers="d21766e1025">
<p><code class="codeph">SQLEXEC</code></p>
</td>
<td class="cellalignment128" headers="d21766e1149 d21766e1028">
<p>To enable Replicat to bypass the MySQL connection timeout, configure the following command in a <code class="codeph">SQLEXEC</code> statement in the Replicat parameter file.</p>
<p><code class="codeph">SQLEXEC "select CURRENT_TIME();" EVERY</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">MINUTES</code></p>
<p><span class="bold">Where</span>: <span class="italic"><code class="codeph">n</code></span> is the maximum interval after which you want Replicat to reconnect. The recommended connection timeout 31536000 seconds (365 days).</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A2FDBF55-48DA-4C7F-9F1F-152275206D71"></a>
<h2 id="GGHDB-GUID-A2FDBF55-48DA-4C7F-9F1F-152275206D71" class="sect2"><span class="enumeration_section">13.10</span> Positioning Extract to a Specific Start Point</h2>
<div>
<div class="section">
<p>You can position the <code class="codeph">ADD EXTRACT</code> and <code class="codeph">ALTER EXTRACT</code> commands to a specific start point in the transaction logs with the following command.</p>
<p><code class="codeph">{ADD | ALTER EXTRACT}</code> <span class="italic"><code class="codeph">group</code></span><code class="codeph">, VAM, LOGNUM</code> <span class="italic"><code class="codeph">log_num</code></span><code class="codeph">, LOGPOS</code> <span class="italic"><code class="codeph">log_pos</code></span></p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">group</code></span> is the name of the Oracle GoldenGate Extract group for which the start position is required.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">log_num</code></span> is the log file number. For example, if the required log file name is <code class="codeph">test.000034</code>, this value is 34. Extract will search for this log file.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">log_pos</code></span> is an event offset value within the log file that identifies a specific transaction record. Event offset values are stored in the header section of a log record. To position at the beginning of a <code>binlog</code> file, set the <code class="codeph">log_pos</code> as 4. The <code class="codeph">log_pos</code> 0 or 1 are not valid offsets to start reading and processing.</p>
</li>
</ul>
<p>In MySQL logs, an event offset value can be unique only within a given binary file. The combination of the position value and a log number will uniquely identify a transaction record and cannot exceed a length of 37. Transactional records available after this position within the specified log will be captured by Extract. In addition, you can position an Extract using a timestamp.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-and-configuring-system-oracle-goldengate.htm#GUID-C29C9BC2-4831-43D3-9531-6BF0B65EA1CE" title="Learn about how to prepare your system for running Oracle GoldenGate and how to configure it with your MySQL database.">Preparing and Configuring Your System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment114">
<tr>
<td class="cellalignment121">
<table class="cellalignment119">
<tr>
<td class="cellalignment118"><a href="understanding-whats-supported-mysql.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment118"><a href="using-ddl-replication.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment123">
<table class="cellalignment117">
<tr>
<td class="cellalignment118"><a href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment118"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment118"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
