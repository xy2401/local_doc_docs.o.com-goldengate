<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Preparing the System for Oracle GoldenGate</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This chapter describes how to prepare the environment to run Oracle GoldenGate on DB2 LUW." />
<meta name="dcterms.created" content="2018-09-07T08:20:49Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Using Oracle GoldenGate for Heterogeneous Databases" />
<meta name="dcterms.identifier" content="E88786-08" />
<meta name="dcterms.isVersionOf" content="GGHDB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="understanding-whats-supported-db2-luw.htm" title="Previous" type="text/html" />
<link rel="Next" href="configuring-oracle-goldengate-db2-luw.htm" title="Next" type="text/html" />
<link rel="alternate" href="GGHDB.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-3255B9A9-ED32-49C0-BAA1-40C87341F665"></a> <span id="PAGE" style="display:none;">7/37</span> <!-- End Header -->
<h1 id="GGHDB-GUID-3255B9A9-ED32-49C0-BAA1-40C87341F665" class="sect1"><span class="enumeration_chapter">2</span> Preparing the System for Oracle GoldenGate</h1>
<div>
<div><span>This chapter describes how to prepare the environment to run <span>Oracle GoldenGate</span> on DB2 LUW.</span></div>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-4025EB70-BF61-450B-99F4-28E32BAAE815">Configuring the Transaction Logs for Oracle GoldenGate</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-8C940934-3A21-4272-A90E-FB13FB91006A">Preparing Tables for Processing</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-5638743D-95FD-41F0-AE29-764F7546F56E">Setting the Session Character Set</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-1271DE51-6AD1-4946-815B-79AB27DA7DBD">Preparing for Initial Extraction</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-0EAEC6F1-0994-4AC8-B864-83C3BA4BC5D7">Specifying the DB2 LUW Database in Parameter Files</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="using-oracle-goldengate-db2-luw.htm" title="With the Oracle GoldenGate for DB2 LUW databases, you can replicate data to and from the supported DB2 LUW versions or between a DB2 LUW database and a database of another type. Oracle GoldenGate for DB2 LUW supports data filtering, mapping, and transformation unless noted otherwise in this documentation.">Using Oracle GoldenGate with DB2 LUW</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-4025EB70-BF61-450B-99F4-28E32BAAE815"></a>
<h2 id="GGHDB-GUID-4025EB70-BF61-450B-99F4-28E32BAAE815" class="sect2"><span class="enumeration_section">2.1</span> Configuring the Transaction Logs for Oracle GoldenGate</h2>
<div>
<div class="section">
<p>To capture DML operations, <span>Oracle GoldenGate</span>reads the DB2 LUW online logs by default. However, it reads the archived logs if an online log is not available. To ensure the continuity and integrity of <span>Oracle GoldenGate</span>processing, configure the logs as follows.</p>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-111DBFDF-30F4-4456-95A5-B4EF2857AC82">Retaining the Transaction Logs</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-C5A507CF-5D5F-4BA2-8258-25126BBA1826">Specifying the Archive Path</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-3255B9A9-ED32-49C0-BAA1-40C87341F665" title="This chapter describes how to prepare the environment to run Oracle GoldenGate on DB2 LUW.">Preparing the System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-111DBFDF-30F4-4456-95A5-B4EF2857AC82"></a>
<h3 id="GGHDB-GUID-111DBFDF-30F4-4456-95A5-B4EF2857AC82" class="sect3"><span class="enumeration_section">2.1.1</span> Retaining the Transaction Logs</h3>
<div>
<div class="section">
<p>Configure the database to retain the transaction logs for roll forward recovery by enabling one of the following parameter sets, depending on the database version.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>DB2 LUW 9.5 and later:</p>
<p>Set the <code class="codeph">LOGARCHMETH</code> parameters as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Set <code class="codeph">LOGARCHMETH1</code> to <code class="codeph">LOGRETAIN</code>.</p>
</li>
<li>
<p>Set <code class="codeph">LOGARCHMETH2</code> to <code class="codeph">OFF</code>.</p>
</li>
</ul>
<p>Alternatively, you can use any other <code class="codeph">LOGARCHMETH</code> options, as long as forward recovery is enabled. For example, the following is valid:</p>
<ul style="list-style-type: disc;">
<li>
<p>Set <code class="codeph">LOGARCHMETH1</code> to <code class="codeph">DISK</code>.</p>
</li>
<li>
<p>Set <code class="codeph">LOGARCHMETH2</code> to <code class="codeph">TSM</code>.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To determine the log retention parameters:</p>
</div>
<!-- class="section" -->
<div class="section">
<ol>
<li>
<p>Connect to the database.</p>
<pre dir="ltr">
db2 connect to <span class="italic">database</span> user <span class="italic">username</span> using <span class="italic">password</span> 
</pre></li>
<li>
<p>Get the database name.</p>
<pre dir="ltr">
db2 list db directory 
</pre></li>
<li>
<p>Get the database configuration for the database.</p>
<pre dir="ltr">
db2 get db cfg for <span class="italic">database</span> 
</pre>
<p>The fields to view are:</p>
<pre dir="ltr">
Log retain for recovery status = RECOVERY 
User exit for logging status = YES 
</pre></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To set the log retention parameters:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Issue one of the following commands.</span>
<div>
<p>To enable <code class="codeph">USEREXIT</code>:</p>
<pre dir="ltr">
db2 update db cfg for <span class="italic">database</span> using USEREXIT ON 
</pre>
<p>If not using <code class="codeph">USEREXIT</code>, use this command:</p>
<pre dir="ltr">
db2 update db cfg for <span class="italic">database</span> using LOGRETAIN RECOVERY 
</pre>
<p>To set <code class="codeph">LOGARCHMETH</code>:</p>
<pre dir="ltr">
db2 update db cfg for <span class="italic">database</span> using LOGARCHMETH1 LOGRETAIN 
db2 update db cfg for <span class="italic">database</span> using LOGARCHMETH2 OFF 
</pre></div>
</li>
<li class="stepexpand"><span>Make a full backup of the database by issuing the following command.</span>
<div>
<pre dir="ltr">
db2 backup db <span class="italic">database</span> to <span class="italic">device</span>
</pre></div>
</li>
<li class="stepexpand"><span>Place the backup in a directory to which DB2 LUW has access rights. If you get the following message, contact your systems administrator:</span>
<div>
<pre dir="ltr">
SQL2061N An attempt to access media "device" is denied. 
</pre></div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-4025EB70-BF61-450B-99F4-28E32BAAE815">Configuring the Transaction Logs for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-C5A507CF-5D5F-4BA2-8258-25126BBA1826"></a>
<h3 id="GGHDB-GUID-C5A507CF-5D5F-4BA2-8258-25126BBA1826" class="sect3"><span class="enumeration_section">2.1.2</span> Specifying the Archive Path</h3>
<div>
<div class="section">
<p>Set the DB2 LUW <code class="codeph">OVERFLOWLOGPATH</code> parameter to the archive log directory. The node attaches automatically to the path variable that you specify.</p>
<pre dir="ltr">
db2 connect to <span class="italic">database</span>
db2 update db cfg using overflowlogpath "<span class="italic">path</span>" 
</pre>
<p>Exclude the node itself from the path. For example, if the full path to the archive log directory is <code class="codeph">/sdb2logarch/oltpods1/archive/OLTPODS1/NODE0000</code>, then the <code class="codeph">OVERFLOWLOGPATH</code> value should be specified as <code class="codeph">/sdb2logarch/oltpods1/archive/OLTPODS1.</code></p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-4025EB70-BF61-450B-99F4-28E32BAAE815">Configuring the Transaction Logs for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-8C940934-3A21-4272-A90E-FB13FB91006A"></a>
<h2 id="GGHDB-GUID-8C940934-3A21-4272-A90E-FB13FB91006A" class="sect2"><span class="enumeration_section">2.2</span> Preparing Tables for Processing</h2>
<div>
<p>The following table attributes must be addressed in an Oracle GoldenGate environment.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-08091052-194E-4197-BF83-644363E34071">Disabling Triggers and Cascade Constraints</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-C82D0E7D-E034-40B6-84A6-399677D4C0A7">Assigning Row Identifiers</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-DA54BCC7-8EC0-4995-8AB9-55F2A4EDB733">Preventing Key Changes</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-75379FDD-56C9-40AC-8022-0366EF522466">Enabling Change Capture</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-2E461C7D-86B3-4DC0-9F5A-B371C987149B">Maintaining Materialized Query Tables</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-3255B9A9-ED32-49C0-BAA1-40C87341F665" title="This chapter describes how to prepare the environment to run Oracle GoldenGate on DB2 LUW.">Preparing the System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-08091052-194E-4197-BF83-644363E34071"></a>
<h3 id="GGHDB-GUID-08091052-194E-4197-BF83-644363E34071" class="sect3"><span class="enumeration_section">2.2.1</span> Disabling Triggers and Cascade Constraints</h3>
<div>
<p>Disable triggers, cascade delete constraints, and cascade update constraints on the target tables, or alter them to ignore changes made by the Oracle GoldenGate database user. Oracle GoldenGate replicates DML that results from a trigger or cascade constraint. If the same trigger or constraint gets activated on the target table, it becomes redundant because of the replicated version, and the database returns an error. Consider the following example, where the source tables are <code class="codeph">emp_src</code> and <code class="codeph">salary_src</code> and the target tables are <code class="codeph">emp_targ</code> and <code class="codeph">salary_targ</code>.</p>
<ol>
<li>
<p>A delete is issued for <code class="codeph">emp_src</code>.</p>
</li>
<li>
<p>It cascades a delete to <code class="codeph">salary_src</code>.</p>
</li>
<li>
<p>Oracle GoldenGate sends both deletes to the target.</p>
</li>
<li>
<p>The parent delete arrives first and is applied to <code class="codeph">emp_targ</code>.</p>
</li>
<li>
<p>The parent delete cascades a delete to <code class="codeph">salary_targ</code>.</p>
</li>
<li>
<p>The cascaded delete from <code class="codeph">salary_src</code> is applied to <code class="codeph">salary_targ</code>.</p>
</li>
<li>
<p>The row cannot be located because it was already deleted in step 5.</p>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-8C940934-3A21-4272-A90E-FB13FB91006A">Preparing Tables for Processing</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-C82D0E7D-E034-40B6-84A6-399677D4C0A7"></a>
<h3 id="GGHDB-GUID-C82D0E7D-E034-40B6-84A6-399677D4C0A7" class="sect3"><span class="enumeration_section">2.2.2</span> Assigning Row Identifiers</h3>
<div>
<p>Oracle GoldenGate requires some form of unique row identifier on the source and target tables to locate the correct target rows for replicated updates and deletes.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-C6CA001F-E118-4DE5-AE8A-E406224E130B">How Oracle GoldenGate Determines the Kind of Row Identifier to Use</a><br /></li>
<li class="ulchildlink"><a href="preparing-system-oracle-goldengate.htm#GUID-3F42E864-CECC-40D5-B951-A0FEDC062145">Using KEYCOLS to Specify a Custom Key</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-8C940934-3A21-4272-A90E-FB13FB91006A">Preparing Tables for Processing</a></p>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-C6CA001F-E118-4DE5-AE8A-E406224E130B"></a>
<h4 id="GGHDB-GUID-C6CA001F-E118-4DE5-AE8A-E406224E130B" class="sect4"><span class="enumeration_section">2.2.2.1</span> How Oracle GoldenGate Determines the Kind of Row Identifier to Use</h4>
<div>
<p>Unless a <code class="codeph">KEYCOLS</code> clause is used in the <code class="codeph">TABLE</code> or <code class="codeph">MAP</code> statement, Oracle GoldenGate selects a row identifier to use in the following order of priority:</p>
<ol>
<li>
<p>Primary key</p>
</li>
<li>
<p>First unique key alphanumerically that does not contain a timestamp or non-materialized computed column.</p>
</li>
<li>
<p>If none of the preceding key types exist (even though there might be other types of keys defined on the table) Oracle GoldenGate constructs a pseudo key of all columns that the database allows to be used in a unique key, excluding those that are not supported by Oracle GoldenGate in a key or those that are excluded from the Oracle GoldenGate configuration.</p>
</li>
</ol>
<div class="infobox-note" id="GUID-C6CA001F-E118-4DE5-AE8A-E406224E130B__GUID-2EFA9DE2-B7C0-4F74-A5B3-FB1C062310A5">
<p class="notep1">Note:</p>
<p>If there are other, non-usable keys on a table or if there are no keys at all on the table, Oracle GoldenGate logs an appropriate message to the report file. Constructing a key from all of the columns impedes the performance of Oracle GoldenGate on the source system. On the target, this key causes Replicat to use a larger, less efficient <code class="codeph">WHERE</code> clause.</p>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-C82D0E7D-E034-40B6-84A6-399677D4C0A7">Assigning Row Identifiers</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-3F42E864-CECC-40D5-B951-A0FEDC062145"></a>
<h4 id="GGHDB-GUID-3F42E864-CECC-40D5-B951-A0FEDC062145" class="sect4"><span class="enumeration_section">2.2.2.2</span> Using <code class="codeph">KEYCOLS</code> to Specify a Custom Key</h4>
<div>
<p>If a table does not have one of the preceding types of row identifiers, or if you prefer those identifiers not to be used, you can define a substitute key if the table has columns that always contain unique values. You define this substitute key by including a <code class="codeph">KEYCOLS</code> clause within the Extract <code class="codeph">TABLE</code> parameter and the Replicat <code class="codeph">MAP</code> parameter. The specified key will override any existing primary or unique key that Oracle GoldenGate finds.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-C82D0E7D-E034-40B6-84A6-399677D4C0A7">Assigning Row Identifiers</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-DA54BCC7-8EC0-4995-8AB9-55F2A4EDB733"></a>
<h3 id="GGHDB-GUID-DA54BCC7-8EC0-4995-8AB9-55F2A4EDB733" class="sect3"><span class="enumeration_section">2.2.3</span> Preventing Key Changes</h3>
<div>
<p>Do not add columns to a key after Oracle GoldenGate starts extracting data from the table. This rule applies to a primary key, a unique key, a <code class="codeph">KEYCOLS</code> key, or an all-column key. DB2 LUW does not supply a before image for columns that are added to a table. If any columns in a key are updated on the source, Oracle GoldenGate needs a before image to compare with the current values in the target table when it replicates the update.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-8C940934-3A21-4272-A90E-FB13FB91006A">Preparing Tables for Processing</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-75379FDD-56C9-40AC-8022-0366EF522466"></a>
<h3 id="GGHDB-GUID-75379FDD-56C9-40AC-8022-0366EF522466" class="sect3"><span class="enumeration_section">2.2.4</span> Enabling Change Capture</h3>
<div>
<div class="section">
<p>Configure DB2 to log data changes in the expanded format that is supplied by the <code class="codeph">DATA CAPTURE CHANGES</code> feature of the <code class="codeph">CREATE TABLE</code> and <code class="codeph">ALTER TABLE</code> commands. This format provides Oracle GoldenGate with the entire before and after images of rows that are changed by update statements. You can use GGSCI to issue the <code class="codeph">ALTER TABLE</code> command as follows.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To Enable Change Capture from GGSCI:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>From the Oracle GoldenGate directory, run GGSCI.</span></li>
<li class="stepexpand"><span>Log on to DB2 from GGSCI as a user that has <code class="codeph">ALTER TABLE</code> privileges. Specify the data source name with <code class="codeph">SOURCEDB</code> and specify the user login with <code class="codeph">USERID</code> and <code class="codeph">PASSWORD</code>.</span>
<div>
<pre dir="ltr">
DBLOGIN SOURCEDB <span class="italic">dsn</span>, USERID <span class="italic">user</span>[, PASSWORD <span class="italic">password</span>] 
</pre></div>
</li>
<li class="stepexpand"><span>Issue the following command. where <span class="italic"><code class="codeph">owner.table</code></span> is the fully qualified name of the table. You can use a wildcard to specify multiple table names. Only the asterisk (*) wildcard is supported for DB2 LUW.</span>
<div>
<pre dir="ltr">
ADD TRANDATA <span class="italic">owner.table</span>
</pre>
<p><code class="codeph">ADD TRANDATA</code> issues the following command, which includes logging the before image of <code class="codeph">LONGVAR</code> columns:</p>
<pre dir="ltr">
ALTER TABLE <span class="italic">name</span> DATA CAPTURE CHANGES INCLUDE LONGVAR COLUMNS; 
</pre></div>
</li>
</ol>
<div class="example" id="GUID-75379FDD-56C9-40AC-8022-0366EF522466__GUID-0EF2BF65-036D-47DF-912E-5B020D664687">
<p class="titleinexample">Example 2-1 To Exclude <code class="codeph">LONGVAR</code> Logging:</p>
<p>To omit the <code class="codeph">INCLUDE LONGVAR COLUMNS</code> clause from the <code class="codeph">ALTER TABLE</code> command, use <code class="codeph">ADD TRANDATA</code> with the <code class="codeph">EXCLUDELONG</code> option.</p>
<pre dir="ltr">
ADD TRANDATA <span class="italic">owner.table</span>, EXCLUDELONG 
</pre>
<div class="infobox-note" id="GUID-75379FDD-56C9-40AC-8022-0366EF522466__GUID-CC08F42D-90B6-4AA0-B821-B06D7B7A09BA">
<p class="notep1">Note:</p>
<p>If <code class="codeph">LONGVAR</code> columns are excluded from logging, the Oracle GoldenGate features that require before images, such as the <code class="codeph">GETUPDATEBEFORES</code>, <code class="codeph">NOCOMPRESSUPDATES</code>, and <code class="codeph">NOCOMPRESSDELETES</code> parameters, might return errors if tables contain those columns. For a workaround, see the <code class="codeph">REQUIRELONGDATACAPTURECHANGES</code> | <code class="codeph">NOREQUIRELONGDATACAPTURECHANGES</code> options of the <code class="codeph">TRANLOGOPTIONS</code> parameter.</p>
</div>
</div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-8C940934-3A21-4272-A90E-FB13FB91006A">Preparing Tables for Processing</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-2E461C7D-86B3-4DC0-9F5A-B371C987149B"></a>
<h3 id="GGHDB-GUID-2E461C7D-86B3-4DC0-9F5A-B371C987149B" class="sect3"><span class="enumeration_section">2.2.5</span> Maintaining Materialized Query Tables</h3>
<div>
<p>To maintain parity between source and target materialized query tables (MQT), you replicate the base tables, but not the MQTs. The target database maintains the MQTs based on the changes that Replicat applies to the base tables.</p>
<p>The following are the rules for configuring these tables:</p>
<ul style="list-style-type: disc;">
<li>
<p>Include the base tables in your <code class="codeph">TABLE</code> and <code class="codeph">MAP</code> statements.</p>
</li>
<li>
<p>Do not include MQTs in the <code class="codeph">TABLE</code> and <code class="codeph">MAP</code> statements.</p>
</li>
<li>
<p>Wildcards can be used in <code class="codeph">TABLE</code> and <code class="codeph">MAP</code> statements, even though they might resolve MQT names along with regular table names. Oracle GoldenGate automatically excludes MQTs from wildcarded table lists. However, any MQT that is explicitly listed in an Extract <code class="codeph">TABLE</code> statement by name will cause Extract to abend.</p>
</li>
</ul>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-8C940934-3A21-4272-A90E-FB13FB91006A">Preparing Tables for Processing</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-5638743D-95FD-41F0-AE29-764F7546F56E"></a>
<h2 id="GGHDB-GUID-5638743D-95FD-41F0-AE29-764F7546F56E" class="sect2"><span class="enumeration_section">2.3</span> Setting the Session Character Set</h2>
<div>
<div class="section">
<p>To support the conversion of character sets between the source and target databases, make certain that the session character set is the same as the database character set. You can set the session character set with the <code class="codeph">DB2CODEPAGE</code> environment variable.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-3255B9A9-ED32-49C0-BAA1-40C87341F665" title="This chapter describes how to prepare the environment to run Oracle GoldenGate on DB2 LUW.">Preparing the System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-1271DE51-6AD1-4946-815B-79AB27DA7DBD"></a>
<h2 id="GGHDB-GUID-1271DE51-6AD1-4946-815B-79AB27DA7DBD" class="sect2"><span class="enumeration_section">2.4</span> Preparing for Initial Extraction</h2>
<div>
<p>During the initialization of the Oracle GoldenGate environment, you will be doing an initial data synchronization and starting the Oracle GoldenGate processes for the first time. In conjunction with those procedures, you will be creating process groups. To create an Extract group, an initial start position must be established in the transaction log. This initial read position is on a transaction boundary that is based on one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>End of the transaction file</p>
</li>
<li>
<p>A specific LSN value</p>
</li>
</ul>
<p>The start point is specified with the <code class="codeph">BEGIN</code> option of the <code class="codeph">ADD EXTRACT</code> command.</p>
<p>When the Extract process starts for the first time, it captures all the transaction data that it encounters after the specified start point, but none of the data that occurred <span class="italic">before</span> that point. This can cause partial transactions to be captured if open transactions span the start point.</p>
<div class="section">
<p class="subhead2">To ensure initial transactional consistency:</p>
</div>
<!-- class="section" -->
<div class="section">
<p>To avoid the capture of partial transactions, initialize the Extract process at a point in time when the database is in a paused state. DB2 LUW provides a <code class="codeph">QUIESCE</code> command for such a purpose. This is the only way to ensure transactional consistency.</p>
<div class="infobox-note" id="GUID-1271DE51-6AD1-4946-815B-79AB27DA7DBD__GUID-E064E766-3F60-4621-A5AE-092146CF2DDB">
<p class="notep1">Note:</p>
<p>After the Extract is past the initialization, subsequent restarts of the Extract do not extract partial transactions, because the process uses recovery checkpoints to mark its last read position.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To view open transactions:</p>
</div>
<!-- class="section" -->
<div class="section">
<p>IBM provides a utility called <code class="codeph">db2pd</code> for monitoring DB2 databases and instances. You can use it to view information about open transactions and to determine if any of them span the start point. However, because DB2 LUW log records lack timestamps, it might not be possible to make an accurate assessment. If possible, quiesce the database prior to initialization of Oracle GoldenGate.</p>
<p>For more information on initializing the Oracle GoldenGate environment, see <a class="olink GWUAD546" target="_blank" href="../GWUAD/instantiating-oracle-goldengate-initial-load.htm#GWUAD546">Instantiating Oracle GoldenGate with an Initial Load</a> in <cite><span><cite>Administering Oracle GoldenGate</cite></span></cite>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-3255B9A9-ED32-49C0-BAA1-40C87341F665" title="This chapter describes how to prepare the environment to run Oracle GoldenGate on DB2 LUW.">Preparing the System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-0EAEC6F1-0994-4AC8-B864-83C3BA4BC5D7"></a>
<h2 id="GGHDB-GUID-0EAEC6F1-0994-4AC8-B864-83C3BA4BC5D7" class="sect2"><span class="enumeration_section">2.5</span> Specifying the DB2 LUW Database in Parameter Files</h2>
<div>
<div class="section">
<p>For an Oracle GoldenGate process to connect to the correct DB2 LUW database, you must specify the name (not an alias) of the DB2 LUW database with the following parameters:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Specify the DB2 source database with the Extract parameter <code class="codeph">SOURCEDB</code>.</p>
</li>
<li>
<p>Specify the DB2 target database name with the Replicat parameter <code class="codeph">TARGETDB</code>.</p>
</li>
</ul>
<p>For more information about these parameters, see the <a class="olink GWURF-GUID-2E0A4248-E8DA-4561-A77F-46206E6F1ECB" target="_blank" href="../GWURF/oracle-goldengate-parameters.htm#GWURF-GUID-2E0A4248-E8DA-4561-A77F-46206E6F1ECB">Reference for Oracle GoldenGate for Windows and UNIX</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-system-oracle-goldengate.htm#GUID-3255B9A9-ED32-49C0-BAA1-40C87341F665" title="This chapter describes how to prepare the environment to run Oracle GoldenGate on DB2 LUW.">Preparing the System for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment114">
<tr>
<td class="cellalignment121">
<table class="cellalignment119">
<tr>
<td class="cellalignment118"><a href="understanding-whats-supported-db2-luw.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment118"><a href="configuring-oracle-goldengate-db2-luw.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment123">
<table class="cellalignment117">
<tr>
<td class="cellalignment118"><a href="http://docs.oracle.com/goldengate/c1230/gg-winux/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment118"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment118"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
