<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Moving from a Test to Production Environment</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="Here you can learn about the scripts that we provide for you to migrate your test system to the production environment." />
<meta name="dcterms.created" content="2018-06-20T06:51:50Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="GoldenGate Administering Oracle GoldenGate Veridata" />
<meta name="dcterms.identifier" content="E78468-05" />
<meta name="dcterms.isVersionOf" content="GVDAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2014, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="oracle-goldengate-veridata-server-configuration-parameters.htm" title="Previous" type="text/html" />
<link rel="Next" href="sample-configuration-file.htm" title="Next" type="text/html" />
<link rel="alternate" href="GVDAD.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-020D4FD9-53AB-4F73-9688-9A4D06650E50"></a> <span id="PAGE" style="display:none;">11/14</span> <!-- End Header -->
<a id="GVDAD280"></a><a id="GVDAD1122"></a>
<h1 id="GVDAD-GUID-020D4FD9-53AB-4F73-9688-9A4D06650E50" class="sect1"><span class="enumeration_chapter">A</span> Moving from a Test to Production Environment</h1>
<div>
<div><span>Here you can learn about the scripts that we provide for you to migrate your test system to the production environment.</span></div>
<p>This appendix includes the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="moving-test-production-environment.htm#GUID-52DBAED3-66DD-4A50-AF06-2CA472995C8A">Moving Installations from a Source Environment to a Target Environment</a></p>
</li>
<li>
<p><a href="moving-test-production-environment.htm#GUID-ED423090-389A-43B5-9041-2E722573264D">Additional Steps for Moving Oracle GoldenGate Veridata Repository</a></p>
</li>
</ul>
</div>
<a id="GVDAD281"></a>
<div class="props_rev_3"><a id="GUID-52DBAED3-66DD-4A50-AF06-2CA472995C8A"></a>
<h2 id="GVDAD-GUID-52DBAED3-66DD-4A50-AF06-2CA472995C8A" class="sect2"><span class="enumeration_section">A.1</span> Moving Installations from a Source Environment to a Target Environment</h2>
<div>
<p>Oracle Fusion Middleware provides various scripts that you use to move your environment.</p>
<p>To move Oracle Home that contains all binary files of your Veridata installation, use the <code class="codeph">copyBinary</code> and <code class="codeph">pasteBinary</code> scripts. After moving the Oracle Home, use the <code class="codeph">copyConfig</code> and <code class="codeph">pasteConfig</code> scripts to move a copy of the Veridata domain configuration including the Administration Server, Managed Server, and other components in the domain to the target environment.</p>
<div class="infobox-note" id="GUID-52DBAED3-66DD-4A50-AF06-2CA472995C8A__GUID-F9CF505B-0585-4FE8-9F12-BC54FD4C26A5">
<p class="notep1">Note:</p>
<p>Test to production migration is not supported for a compact domain or for repository databases other than Oracle and SQL Server.</p>
</div>
</div>
</div>
<a id="GVDAD282"></a>
<div class="props_rev_3"><a id="GUID-ED423090-389A-43B5-9041-2E722573264D"></a>
<h2 id="GVDAD-GUID-ED423090-389A-43B5-9041-2E722573264D" class="sect2"><span class="enumeration_section">A.2</span> Additional Steps for Moving Oracle GoldenGate Veridata Repository</h2>
<div>
<p>In addition to the common procedures described in the guide , follow the instructions below for moving the Oracle GoldenGate Veridata repository to a target environment:</p>
</div>
<a id="GVDAD1118"></a><a id="GVDAD1117"></a>
<div class="props_rev_3"><a id="GUID-30CA9E81-2152-473D-9FA0-5BB212F0F161"></a>
<h3 id="GVDAD-GUID-30CA9E81-2152-473D-9FA0-5BB212F0F161" class="sect3"><span class="enumeration_section">A.2.1</span> Moving Veridata Configuration Data from Test to Production</h3>
<div>
<p>To export and import Veridata repository configuration data, use the scripts available in the <code class="codeph">DOMAIN_HOME/veridata/bin</code> directory use the following steps:</p>
<ol>
<li>
<p>To export the repository from the test environment, run the export script as follows:</p>
<pre dir="ltr">
DOMAIN_HOME/veridata/bin/veridata_export.sh  -export /tmp/export.xml -all -wluser <span class="italic">cmd_user</span> -exportPassword
</pre>
<p><a href="moving-test-production-environment.htm#GUID-30CA9E81-2152-473D-9FA0-5BB212F0F161__CACHBAFI" title="script arguments">Table A-1</a> describes the arguments you specify while running the export and import scripts.</p>
<div class="tblformal" id="GUID-30CA9E81-2152-473D-9FA0-5BB212F0F161__CACHBAFI">
<p class="titleintable">Table A-1 Arguments for the Veridata Test to Production Scripts</p>
<table class="cellalignment109" title="Arguments for the Veridata Test to Production Scripts" summary="script arguments">
<thead>
<tr class="cellalignment72">
<th class="cellalignment79" id="d25577e130">Argument</th>
<th class="cellalignment80" id="d25577e133">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment72">
<td class="cellalignment81" id="d25577e138" headers="d25577e130">
<p><code class="codeph">export</code></p>
</td>
<td class="cellalignment82" headers="d25577e138 d25577e133">
<p>Indicates that the script is exporting Veridata data from the test environment.</p>
</td>
</tr>
<tr class="cellalignment72">
<td class="cellalignment81" id="d25577e146" headers="d25577e130">
<p><code class="codeph">import</code></p>
</td>
<td class="cellalignment82" headers="d25577e146 d25577e133">
<p>Indicates that the script is importing Veridata data to the production environment.</p>
</td>
</tr>
<tr class="cellalignment72">
<td class="cellalignment81" id="d25577e154" headers="d25577e130">
<p><code class="codeph">wluser</code> <span class="italic"><code class="codeph">cmd_user</code></span></p>
</td>
<td class="cellalignment82" headers="d25577e154 d25577e133">
<p>Specifies the administrative WebLogic Server user.</p>
</td>
</tr>
<tr class="cellalignment72">
<td class="cellalignment81" id="d25577e166" headers="d25577e130">
<p><code class="codeph">exportPassword</code></p>
</td>
<td class="cellalignment82" headers="d25577e166 d25577e133">
<p>Indicates that the script is exporting the <span class="italic"><code class="codeph">cmd_user</code></span> password.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></li>
<li>
<p>Verify that any Veridata Agent host, port, and user password specifiers for the production host are updated in the just created <code class="codeph">/tmp/export.xml</code> file.</p>
</li>
<li>
<p>If the Veridata Agent host or port has changed, then you must manually update the generated <code class="codeph">export.xml</code> file with the new host and port informations for the Connections.</p>
</li>
<li>
<p>The export operation exports all of the data in the repository to XML file without validation. If your environment has some compare pairs for which the Validation Status is not successful, then the import operation will fail with the XML file generated by the export operation. To prevent failure of the import operation, you have the option to disable the compare pair validation. You can do this by updating the generated XML with these steps:</p>
<ol>
<li>
<p>Open the generated XML file.</p>
</li>
<li>
<p>Search for the <code class="codeph">configuration</code> tag. This tag has the <code class="codeph">validation</code> attribute, which is set to <code class="codeph">required</code>, by default.</p>
</li>
<li>
<p>Set the <code class="codeph">validation</code> attribute to one of the following values:</p>
<p><code class="codeph">omit-failures</code> &mdash; Indicates that all successfully validated compare pairs will be added to the repository and other specified compare pairs will be ignored.</p>
<p><code class="codeph">none</code> &mdash; Indicates that no compare pair validation is done before adding the compare pairs to the repository. You and then use the Veridata GUI to review and fix the validation problems. For example:</p>
<p>Old tag: <code class="codeph">&lt;configuration operation="update" validation="required"&gt;</code></p>
<p>Updated tag: <code class="codeph">&lt;configuration operation="update" validation="omit-failures"&gt;</code></p>
</li>
</ol>
</li>
<li>
<p>To import the repository to the production environment, run the import script as follows:</p>
<pre dir="ltr">
DOMAIN_HOME/veridata/bin/veridata_import.sh -update  /tmp/export.xml -wluser  <span class="italic">cmd_user</span>
</pre></li>
</ol>
</div>
</div>
<a id="GVDAD1175"></a><a id="GVDAD1176"></a><a id="GVDAD1119"></a>
<div class="sect3"><a id="GUID-7C4266F9-24D8-42E9-AEB2-893B7A84B3A1"></a>
<h3 id="GVDAD-GUID-7C4266F9-24D8-42E9-AEB2-893B7A84B3A1" class="sect3"><span class="enumeration_section">A.2.2</span> Applying Configuration Changes while Moving from Test to Production</h3>
<div>
<p>While moving from a test to production environment, if there are any configuration changes for the Veridata Agent such as host and port changes <span class="italic">or</span> if there is any schema or catalog name changes in the compare pairs, you must first execute the following statements:</p>
<dl>
<dt class="dlterm"><a id="GUID-7C4266F9-24D8-42E9-AEB2-893B7A84B3A1__GUID-4905FDA5-919B-4C90-A2CB-BFCC4595252F"><!-- --></a>Task 1&nbsp;&nbsp;&nbsp;For all databases</dt>
<dd>
<pre dir="ltr">
Update <span class="italic">DEV_VERIDATA</span>.TABLE_INFO set  SRC_SCHEMA_NAME = <span class="italic">production_source_schema</span> Where    SRC_SCHEMA_NAME  = <span class="italic">test_source_schema</span>
 Update TABLE_INFO set  TARG_SCHEMA_NAME = <span class="italic">production_target_schema</span> Where    TARG_SCHEMA_NAME  = <span class="italic">test_target_schema</span>
</pre>
<p>Where <span class="italic"><code class="codeph">DEV_VERIDATA</code></span> is the name of the production repository schema.</p>
<p>Where <span class="italic"><code class="codeph">production_source_schema</code></span> is the name of the production source schema and <span class="italic"><code class="codeph">production_target_schema</code></span> is the name of the production target schema.</p>
<p>Where <span class="italic"><code class="codeph">test_source_schema</code></span> is the name of the test source schema and <span class="italic"><code class="codeph">test_target_schema</code></span> is the name of the test target schema.</p>
</dd>
<dt class="dlterm"><a id="GUID-7C4266F9-24D8-42E9-AEB2-893B7A84B3A1__GUID-0F2BDFCA-0084-4F30-BF9C-700CB5BC04F9"><!-- --></a>Task 2&nbsp;&nbsp;&nbsp;Appropriate to your database</dt>
<dd>
<dl>
<dt class="dlterm"><a id="GUID-7C4266F9-24D8-42E9-AEB2-893B7A84B3A1__GUID-0A48F2E7-7568-4FF5-A50A-F57B70E4F3B8"><!-- --></a>Task 1&nbsp;&nbsp;&nbsp;For SQL Server and Sybase databases:</dt>
<dd>
<pre dir="ltr">
Update TABLE_INFO set  SRC_CATALOG_NAME = <span class="italic">production_source_catalog</span> Where    SRC_CATALOG_NAME  = <span class="italic">test_source_catalog</span>
</pre>
<pre dir="ltr">
Update TABLE_INFO set  TARG_CATALOG_NAME = <span class="italic">production_target_catalog</span> Where    TARG_CATALOG_NAME  = <span class="italic">test_target_catalog</span>
</pre>
<p>Where <span class="italic"><code class="codeph">production_source_catalog</code></span> is the name of the production source catalog and <span class="italic"><code class="codeph">production_target_catalog</code></span> is the name of the production target catalog.</p>
<p>Where <span class="italic"><code class="codeph">test_source_catalog</code></span> is the name of the test source catalog and <span class="italic"><code class="codeph">test_target _catalog</code></span> is the name of the test target catalog.</p>
</dd>
<dt class="dlterm"><a id="GUID-7C4266F9-24D8-42E9-AEB2-893B7A84B3A1__GUID-497CBF62-670D-4E9D-939D-22FF5A4D971D"><!-- --></a>Task 2&nbsp;&nbsp;&nbsp;For NSK:</dt>
<dd>
<p>Update the table names in the <code class="codeph">COMPARE_PAIR</code> table to replace the test node names and disk volume names with the production names using one of the following appropriate for your database:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">For Oracle:</span></p>
<pre dir="ltr">
Update COMPARE_PAIRS SET  SRC_TABLE_NAME = '\SPROD.$PDATA' ||    SUBSTR(SRC_TABLE_NAME, 12) Where SRC_TABLE_NAME like '\STEST.TDATA%'
Update COMPARE_PAIRS SET  TARG_TABLE_NAME = '\TPROD.$PDATA' ||
    SUBSTR(TARG_TABLE_NAME, 12) Where TARG_TABLE_NAME like '\TTEST.TDATA%'
</pre></li>
<li>
<p><span class="bold">For SQL Server:</span></p>
<pre dir="ltr">
Update COMPARE_PAIRS SET  SRC_TABLE_NAME = '\SPROD.$PDATA' +    SUBSTRING(SRC_TABLE_NAME, 12, LEN(SRC_TABLE_NAME) -  12) Where SRC_TABLE_
    NAME like '\STEST.TDATA%'
Update COMPARE_PAIRS SET  TARG_TABLE_NAME = '\TPROD.$PDATA' +    SUBSTRING(TARG_TABLE_NAME, 12, LEN(TARG_TABLE_NAME) -12) Where TARG_TABLE_
    NAME like '\TTEST.TDATA%'
</pre></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div>
</div>
<a id="GVDAD1120"></a>
<div class="props_rev_3"><a id="GUID-81A103D4-5443-4F2F-8F52-9DDC7CB2BA68"></a>
<h3 id="GVDAD-GUID-81A103D4-5443-4F2F-8F52-9DDC7CB2BA68" class="sect3"><span class="enumeration_section">A.2.3</span> Modifying the Agent details in the Production Environment</h3>
<div>
<p>Update the Veridata Agent details in the <code class="codeph">CONNECTIONS</code> table of the production environment host as described below:</p>
<ul style="list-style-type: disc;">
<li>
<p>If only the Agent host name needs to be changed, update the database as follows:</p>
<pre dir="ltr">
Update CONNECTIONS set MGR_NAME = 'prod host' where MGR_NAME 'test host'
</pre></li>
<li>
<p>If there are more changes to the Veridata Agent, such as changes to the port number, User ID, password, and Repair User ID, then you should start the Veridata application and update the environment using the UI or command-line tool.</p>
<p>For example, create an <code class="codeph">/tmp/con.xml</code> XML file as follows:</p>
<pre dir="ltr">
#Create xml as below by filling placeholders between @ and connections can be more than one.
    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;!DOCTYPE configuration SYSTEM
    "http://@VeridataServerHost@:@veridataServerPort@/veridata/configuration.dtd"&gt;
    &lt;configuration validation="required"&gt;
    &lt;connection name="@conneciotnName@" host="@sqlManagerHostSrc@" 
        port="@sqlManagerPortSrc@" user="@sqlConn0User@"
        password="@sqlConn0Password@" repairUser="@repairUsername@"
        repairPassword="@repairPassword@" agent-timeout="4000" 
        truncate-spaces="false" fetch-size="3" use-ssl="false"&gt;
           &lt;description&gt;
            &lt;![CDATA[
                SQL Scripting Source Connection
            ]]&gt;
            &lt;/description&gt;
   &lt;/connection&gt;
   &lt;/configuration&gt;
</pre>
<p>Update the Veridata Agent with your XML file using:</p>
<pre dir="ltr">
DOMAIN_HOME/veridata/bin/veridata_import.sh -update /tmp/con.xml -wlUser <span class="italic">cmd_user</span>
</pre>
<p>Start the Veridata Agent after making these changes.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment71">
<tr>
<td class="cellalignment83">
<table class="cellalignment76">
<tr>
<td class="cellalignment75"><a href="oracle-goldengate-veridata-server-configuration-parameters.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment75"><a href="sample-configuration-file.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2014, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment85">
<table class="cellalignment74">
<tr>
<td class="cellalignment75"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment75"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
