<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Preparing the System for Oracle GoldenGate</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1090" />
<meta name="description" content="This chapter contains guidelines for preparing the database and the system to support Oracle GoldenGate." />
<meta name="dcterms.created" content="2017-01-04T8:15:56Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Installing and Configuring Oracle GoldenGate for DB2 z/OS" />
<meta name="dcterms.identifier" content="E67824-01" />
<meta name="dcterms.isVersionOf" content="GIDBZ" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="ogg_wu_install_db2zos.htm" title="Previous" type="text/html" />
<link rel="Next" href="ogg_wu_logconfig_db2zos.htm" title="Next" type="text/html" />
<link rel="alternate" href="GIDBZ.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/9</span> <!-- End Header -->
<div id="GIDBZ157" class="chapter"><a id="sthref34"></a>
<h1 class="chapter"><span class="secnum">3</span> Preparing the System for Oracle GoldenGate</h1>
<p><a id="GIDBZ158"></a>This chapter contains guidelines for preparing the database and the system to support Oracle GoldenGate.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#CHDBAAJD">Preparing Tables for Processing</a></p>
</li>
<li>
<p><a href="#CHDEIDCA">Configuring Database Connections</a></p>
</li>
<li>
<p><a href="#CHDDBFEA">Accessing Load Modules</a></p>
</li>
<li>
<p><a href="#A1152506">Specifying Job Names and Owners</a></p>
</li>
<li>
<p><a href="#A1152441">Assigning WLM Velocity Goals</a></p>
</li>
<li>
<p><a href="#CHDCDGBJ">Monitoring Processes</a></p>
</li>
<li>
<p><a href="#CHDGIEFG">Supporting Globalization Functions</a></p>
</li>
</ul>
<a id="CHDBAAJD"></a>
<div id="GIDBZ159" class="sect1"><!-- infotype="Concept" -->
<h2 class="sect1"><span class="secnum">3.1</span> Preparing Tables for Processing</h2>
<p>The following table attributes must be addressed in an Oracle GoldenGate environment.</p>
<p><a href="#CHDEAJDD">Disabling Triggers and Cascade Constraints</a></p>
<p><a href="#CHDCAIDB">Assigning Row Identifiers</a></p>
<p><a href="#CHDBGHBA">Handling <code dir="ltr">ROWID</code> Columns</a></p>
<a id="CHDEAJDD"></a>
<div id="GIDBZ160" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.1.1</span> Disabling Triggers and Cascade Constraints</h3>
<p>Disable triggers, cascade delete constraints, and cascade update constraints on the target tables, or alter them to ignore changes made by the Oracle GoldenGate database user. Oracle GoldenGate replicates DML that results from a trigger or cascade constraint. If the same trigger or constraint gets activated on the target table, it becomes redundant because of the replicated version, and the database returns an error. Consider the following example, where the source tables are <code dir="ltr">emp_src</code> and <code dir="ltr">salary_src</code> and the target tables are <code dir="ltr">emp_targ</code> and <code dir="ltr">salary_targ.</code></p>
<ul>
<li>
<p>A delete is issued for <code dir="ltr">emp_src</code>.</p>
</li>
<li>
<p>It cascades a delete to <code dir="ltr">salary_src</code>.</p>
</li>
<li>
<p>Oracle GoldenGate sends both deletes to the target.</p>
</li>
<li>
<p>The parent delete arrives first and is applied to <code dir="ltr">emp_targ</code>.</p>
</li>
<li>
<p>The parent delete cascades a delete to <code dir="ltr">salary_targ</code>.</p>
</li>
<li>
<p>The cascaded delete from <code dir="ltr">salary_src</code> is applied to <code dir="ltr">salary_targ</code><span class="italic">.</span></p>
</li>
<li>
<p>The row cannot be located because it was already deleted in step 5.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDCAIDB"></a>
<div id="GIDBZ161" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.1.2</span> Assigning Row Identifiers</h3>
<p>Oracle GoldenGate requires some form of unique row identifier on the source and target tables to locate the correct target rows for replicated updates and deletes.</p>
<div id="GIDBZ162" class="sect3"><a id="sthref35"></a>
<h4 class="sect3"><span class="secnum">3.1.2.1</span> How Oracle GoldenGate Determines the Kind of Row Identifier to Use</h4>
<p>Unless a <code dir="ltr">KEYCOLS</code> clause is used in the <code dir="ltr">TABLE</code> or <code dir="ltr">MAP</code> statement, Oracle GoldenGate selects a row identifier to use in the following order of priority:</p>
<ol>
<li>
<p>Primary key</p>
</li>
<li>
<p>First unique key alphanumerically that does not contain a timestamp or non-materialized computed column.</p>
</li>
<li>
<p>If none of the preceding key types exist (even though there might be other types of keys defined on the table) Oracle GoldenGate constructs a pseudo key of all columns that the database allows to be used in a unique key, excluding those that are not supported by Oracle GoldenGate in a key or those that are excluded from the Oracle GoldenGate configuration.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
If there are other, non-usable keys on a table or if there are no keys at all on the table, Oracle GoldenGate logs an appropriate message to the report file. Constructing a key from all of the columns impedes the performance of Oracle GoldenGate on the source system. On the target, this key causes Replicat to use a larger, less efficient <code dir="ltr">WHERE</code> clause.</div>
</div>
<!-- class="sect3" -->
<div id="GIDBZ163" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref36"></a>
<h4 class="sect3"><span class="secnum">3.1.2.2</span> Using <code dir="ltr">KEYCOLS</code> to Specify a Custom Key</h4>
<p>If a table does not have one of the preceding types of row identifiers, or if you prefer those identifiers not to be used, you can define a substitute key if the table has columns that always contain unique values. You define this substitute key by including a <code dir="ltr">KEYCOLS</code> clause within the Extract <code dir="ltr">TABLE</code> parameter and the Replicat <code dir="ltr">MAP</code> parameter. The specified key will override any existing primary or unique key that Oracle GoldenGate finds. For more information, see the <a class="olink GWURF546" href="../GWURF/table-map.htm#GWURF546"><span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span></a>.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDBGHBA"></a>
<div id="GIDBZ164" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.1.3</span> Handling <code dir="ltr">ROWID</code> Columns</h3>
<p>Any attempt to insert into a target table that includes a column with a data type of <code dir="ltr">ROWID GENERATED ALWAYS</code> (the default) will fail with the following ODBC error:</p>
<pre dir="ltr">
ODBC error: SQLSTATE 428C9 native database error -798. {DB2 FOR OS/390}{ODBC DRIVER}{DSN08015} DSNT408I SQLCODE = -798, ERROR: YOU CANNOT INSERT A VALUE INTO A COLUMN THAT IS DEFINED WITH THE OPTION GENERATED ALWAYS. COLUMN NAME ROWIDCOL.
</pre>
<p>You can do one of the following to prepare tables with <code dir="ltr">ROWID</code> columns to be processed by Oracle GoldenGate:</p>
<ul>
<li>
<p>Ensure that any <code dir="ltr">ROWID</code> columns in target tables are defined as <code dir="ltr">GENERATED BY DEFAULT</code>.</p>
</li>
<li>
<p>If it is not possible to change the table definition, you can work around it with the following procedure.</p>
</li>
</ul>
<p class="subhead2"><a id="GIDBZ165"></a>To Work Around <code dir="ltr">ROWID GENERATE ALWAYS</code>:</p>
<ol>
<li>
<p>For the source table, create an Extract <code dir="ltr">TABLE</code> statement, and use a <code dir="ltr">COLSEXCEPT</code> clause in that statement that excludes the <code dir="ltr">ROWID</code> column. For example:</p>
<pre dir="ltr">
TABLE tab1, COLSEXCEPT (rowidcol);
</pre>
<p>The <code dir="ltr">COLSEXCEPT</code> clause excludes the <code dir="ltr">ROWID</code> column from being captured and replicated to the target table.</p>
</li>
<li>
<p>For the target table, ensure that Replicat does not attempt to use the <code dir="ltr">ROWID</code> column as the key. This can be done in one of the following ways:</p>
<ul>
<li>
<p>Specify a primary key in the target table definition.</p>
</li>
<li>
<p>If a key cannot be created, create a Replicat <code dir="ltr">MAP</code> parameter for the table, and use a <code dir="ltr">KEYCOLS</code> clause in that statement that contains any unique columns except for the <code dir="ltr">ROWID</code> column. Replicat will use those columns as a key. For example:</p>
<pre dir="ltr">
MAP tab1, TARGET tab1, KEYCOLS (num, ckey);
</pre></li>
</ul>
</li>
</ol>
<p>For more information about <code dir="ltr">KEYCOLS</code>, see <a href="#CHDCAIDB">Section 3.1.2, "Assigning Row Identifiers"</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDEIDCA"></a>
<div id="GIDBZ166" class="sect1"><!-- infotype="Concept" -->
<h2 class="sect1"><span class="secnum">3.2</span> Configuring Database Connections</h2>
<p>The following guidelines assume that an appropriate ODBC driver is installed and configured.</p>
<p><a href="#CHDIHBDE">Section 3.2.1, "Setting Initialization Parameters"</a></p>
<p><a href="#CHDJDIEG">Section 3.2.2, "Specifying the Path to the Initialization File"</a></p>
<p><a href="#CHDEAEJH">Section 3.2.3, "Ensuring ODBC Connection Compatibility"</a></p>
<p><a href="#CHDIDBHB">Section 3.2.4, "Specifying the Number of Connection Threads"</a></p>
<a id="CHDIHBDE"></a>
<div id="GIDBZ167" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.2.1</span> Setting Initialization Parameters</h3>
<p>The following DB2 for z/OS initialization parameters apply to Oracle GoldenGate and must be set correctly before starting Oracle GoldenGate processes.</p>
<ul>
<li>
<p><code dir="ltr">MVSDEFAULTSSID</code>: set to the DB2 subsystem.</p>
</li>
<li>
<p><code dir="ltr">LOCATION</code>: set to the DB2 location name as stored in the DB2 Boot Strap Dataset.</p>
</li>
<li>
<p><code dir="ltr">MVSATTACHTYPE</code>: set to <code dir="ltr">RRSAF</code> (Recoverable Resource Manager Services Attachment Facility) or <code dir="ltr">CAF</code> (Call Attachment Facility). IBM recommends using <code dir="ltr">RRSAF</code>.</p>
</li>
<li>
<p><code dir="ltr">MULTICONTEXT:</code> set to 1 if using <code dir="ltr">RRSAF</code>.</p>
</li>
<li>
<p><code dir="ltr">PLANNAME</code>: set to the DB2 plan. The default plan name is <code dir="ltr">DSNACLI</code>.</p>
</li>
</ul>
<p>Do not use the <code dir="ltr">CURRENTAPPENSCH</code> initialization parameter (keyword).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When using the <code dir="ltr">CAF</code> attachment type, you must use the Oracle GoldenGate <code dir="ltr">DBOPTIONS</code> parameter with the <code dir="ltr">NOCATALOGCONNECT</code> option in the parameter file of any Extract or Replicat process that connects to DB2. This parameter disables the usual attempt by Oracle GoldenGate to obtain a second thread for the DB2 catalog. Otherwise, you will receive error messages, such as: <code dir="ltr">ODBC operation failed: Couldn't connect to</code> <code dir="ltr"><span class="codeinlineitalic">data source</span></code> <code dir="ltr">for catalog queries.</code></div>
</div>
<!-- class="sect2" -->
<a id="CHDJDIEG"></a>
<div id="GIDBZ168" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.2.2</span> Specifying the Path to the Initialization File</h3>
<p>Specify the ODBC initialization file by setting the <code dir="ltr">DSNAOINI</code> environment variable in the z/OS UNIX profile, as in the following example:</p>
<pre dir="ltr">
export DSNAOINI="/etc/odbc810.ini"
</pre></div>
<!-- class="sect2" -->
<a id="CHDEAEJH"></a>
<div id="GIDBZ169" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.2.3</span> Ensuring ODBC Connection Compatibility</h3>
<p>To ensure that you configure the DB2 ODBC initialization file correctly, follow the guidelines in the <span class="italic">DB2 UDB for z/OS ODBC Guide and Reference</span> manual. One important consideration is the coding of the open and close square brackets (the [ character and the ] character). The square bracket characters are "variant" characters that are encoded differently in different coded character set identifiers (CCSID), but must be of the IBM-1047 CCSID in the ODBC initialization file. DB2 ODBC does not recognize brackets of any other CCSID. Note the following:</p>
<ul>
<li>
<p>The first (or open) bracket must use the hexadecimal characters <code dir="ltr">X'AD'</code> (<code dir="ltr">0xAD</code>).</p>
</li>
<li>
<p>The second (or close) bracket must use the hexadecimal characters <code dir="ltr">X'BD'</code> (<code dir="ltr">0xBD</code>).</p>
</li>
</ul>
<p>To set the correct code for square brackets, use any of the following methods.</p>
<ul>
<li>
<p>Use the <code dir="ltr">hex</code> command in OEDIT and change the hex code for each character appropriately.</p>
</li>
<li>
<p>Use the <code dir="ltr">iconv</code> utility to convert the ODBC initialization file. For example, to convert from CCSID IBM-037 to IBM-1047, use the following command:</p>
<pre dir="ltr">
iconv -f IBM-037 -t IBM-1047 ODBC.ini &gt; ODBC-1047.ini 
</pre>
<pre dir="ltr">
mv ODBC-1047.ini ODBC.ini 
</pre></li>
<li>
<p>Change your terminal emulator or terminal configuration to use CCSID IBM-1047 when you create or alter the file.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDIDBHB"></a>
<div id="GIDBZ170" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.2.4</span> Specifying the Number of Connection Threads</h3>
<p>Every Oracle GoldenGate process makes a database connection. Depending on the number of processes that you will be using and the number of other DB2 connections that you expect, you might need to adjust the following DB2 system parameters on the DSNTIPE DB2 Thread Management Panel:</p>
<ul>
<li>
<p><code dir="ltr">MAX USERS</code> (macro <code dir="ltr">DSN6SYSP CTHREAD</code>)</p>
</li>
<li>
<p><code dir="ltr">MAX TSO CONNECT</code> (macro <code dir="ltr">DSN6SYSP IDFORE</code>)</p>
</li>
<li>
<p><code dir="ltr">MAX BATCH CONNECT</code> (macro <code dir="ltr">DSN6SYSP IDBACK</code>)</p>
</li>
</ul>
<p>If using RRSAF, allow:</p>
<ul>
<li>
<p>Two DB2 threads per process for each of the following:</p>
<ul>
<li>
<p>Extract</p>
</li>
<li>
<p>Replicat</p>
</li>
<li>
<p>The GGSCI command <code dir="ltr">DBLOGIN</code> (logs into the database)</p>
</li>
<li>
<p><code dir="ltr">DEFGEN</code> utility (generates data definitions for column mapping)</p>
</li>
</ul>
</li>
<li>
<p>One extra DB2 thread for Extract for IFI calls.</p>
</li>
<li>
<p>One extra DB2 thread for each <code dir="ltr">SQLEXEC</code> parameter statement that will be issued by each Extract and Replicat process. For more information about <code dir="ltr">SQLEXEC</code>, see the <a class="olink GWURF660" href="../GWURF/sqlexec.htm#GWURF660"><span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span></a>.</p>
</li>
</ul>
<p>If using CAF, there can be only one thread per Oracle GoldenGate process.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDDBFEA"></a>
<div id="GIDBZ171" class="sect1"><!-- infotype="Concept" -->
<h2 class="sect1"><span class="secnum">3.3</span> Accessing Load Modules</h2>
<p>Grant Oracle GoldenGate USS access to the <code dir="ltr">SDSNLOAD</code> system load library and to the <code dir="ltr">DSNHDECP</code> load module. You can include the libraries in one of the following places:</p>
<ul>
<li>
<p>The z/OS system search order.</p>
</li>
<li>
<p>The USS profile of the Oracle GoldenGate user. Use a UNIX command similar to the following, where <code dir="ltr">DSN810</code> is the user-assigned data set prefix from the DB2 installation.</p>
<pre dir="ltr">
export STEPLIB='DSN810.SDSNEXIT:DSN810.SDSNLOAD'
</pre></li>
</ul>
<p>The preceding command will cause USS to allocate the equivalent of a <code dir="ltr">STEPLIB DD</code> statement whenever it executes a shell command or Oracle GoldenGate process. If using APF, all libraries in the <code dir="ltr">STEPLIB</code> concatenation must be APF-authorized.</p>
</div>
<!-- class="sect1" -->
<a id="A1152506"></a>
<div id="GIDBZ172" class="sect1"><!-- infotype="Concept" -->
<h2 class="sect1"><span class="secnum">3.4</span> Specifying Job Names and Owners</h2>
<p>By default, USS sets the job name and owner of all Oracle GoldenGate processes to that of the user who started them. You can change the job name or user by setting the <code dir="ltr">_BPX_JOBNAME</code> and <code dir="ltr">_BPX_USERID</code> environment variables, or you can create z/OS jobs or started-task procedures for the Oracle GoldenGate processes. To use the environment variable <code dir="ltr">_BPX_JOBNAME</code>, at a minimum you should have read access to the RACF <code dir="ltr">FACILITY</code> class and <code dir="ltr">BPX.JOBNAME</code> name. For more details, see <a href="ogg_wu_sysreq_db2zos.htm#BABHGGAG">Table 1-1, "Operating System Privileges"</a> and the IBM <span class="italic">z/OS System Services Planning</span> document.</p>
</div>
<!-- class="sect1" -->
<a id="A1152441"></a>
<div id="GIDBZ173" class="sect1"><!-- infotype="Concept" -->
<h2 class="sect1"><span class="secnum">3.5</span> Assigning WLM Velocity Goals</h2>
<p>The user who starts the Manager process is typically the user by which other Oracle GoldenGate processes run. Oracle GoldenGate work appears as forked child processes of WLM subsystem type OMVS. Assign the Oracle GoldenGate processes their Workload Manager (WLM) velocity goals based on the following guidelines.</p>
<ul>
<li>
<p>Assign the Extract process that reads the transaction logs a medium velocity goal, one that is below the velocity of the main DB2 address spaces, but above the velocity of most online transactions, TSO/E sessions, and z/OS batch work. The higher the velocity goal, the more processor power that Extract will receive, and the less lag that it will experience.</p>
</li>
<li>
<p>You can assign an initial-load Extract process a velocity goal, or you can treat it as a typical DB2 batch job. For more information about the initial-load processes, see <a class="olink GWUAD546" href="../GWUAD/instantiating-oracle-goldengate-initial-load.htm#GWUAD546"><span class="italic">Administering Oracle GoldenGate for Windows and UNIX</span></a>.</p>
</li>
<li>
<p>You might need to assign the Replicat process a higher velocity goal. Although Replicat is a typical DB2 batch application, it might require more processing power to prevent backlogs and latency.</p>
</li>
<li>
<p>You probably will run Oracle GoldenGate utilities, such as <code dir="ltr">DEFGEN</code> and LOGDUMP, only occasionally, so you can let them perform like the other UNIX terminal-oriented work.</p>
</li>
<li>
<p>If executing stored procedures with the <code dir="ltr">SQLEXEC</code> command, make certain that they do not become a bottleneck for Oracle GoldenGate. Their priority should be close to that of the calling Extract or Replicat process. WLM executes them with that priority, but the z/OS system executes them under the priority of a stored procedure as defined by the DB2 and z/OS system programmers.</p>
</li>
<li>
<p>If you run Oracle GoldenGate under the TSO/E <code dir="ltr">OMVS</code> command, the Oracle GoldenGate processes are subject to the system and WLM limits of the TSO/E user account, rather than those of the UNIX kernel. Very long TSO/E response times (up to 20 seconds), often with little service consumption, can be recorded for an OMVS user because of the way that OMVS polls for terminal input. This can affect those WLM goals that are based on response time.</p>
</li>
</ul>
<p>You can use multiple WLM service classes for the Oracle GoldenGate processes. The following is an example of how to maintain relative priorities for Oracle GoldenGate and other work, from highest priority to the lowest:</p>
<ol>
<li>
<p>z/OS system processes, including the UNIX kernel and IRLM.</p>
</li>
<li>
<p>DB2 for z/OS address spaces for the primary Extract group.</p>
</li>
<li>
<p>Primary Extract group configured for online or batch change synchronization, and any DB2 stored procedures that it calls.</p>
</li>
<li>
<p>z/OS transaction managers, such as CICS and IMS.</p>
</li>
<li>
<p>Collector (Server) for local Extract data pump, if used.</p>
</li>
<li>
<p>Local Extract data pump (reading from trail), if used.</p>
</li>
<li>
<p>Collector for remote trails (files received from a remote site). Such files include the QSAM file created with the Extract <code dir="ltr">RMTBATCH</code> parameter on a NonStop system.</p>
</li>
<li>
<p>Online Replicat groups and any DB2 stored procedures that they call.</p>
</li>
<li>
<p>Manager process (required only for startup of Oracle GoldenGate processes and trail cleanup).</p>
</li>
<li>
<p>GGSCI and other user UNIX and TSO/E terminal work.</p>
</li>
<li>
<p>Initial-load Extract and any DB2 stored procedures that it calls.</p>
</li>
<li>
<p>Initial-load Replicat and any DB2 stored procedures that it calls.</p>
</li>
<li>
<p>Other z/OS batch work.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDCDGBJ"></a>
<div id="GIDBZ174" class="sect1"><!-- infotype="Concept" -->
<h2 class="sect1"><span class="secnum">3.6</span> Monitoring Processes</h2>
<p>The following topics provide information about monitoring Oracle GoldenGate with z/OS system facilities.</p>
<p><a href="#CHDDHFAI">Section 3.6.1, "Viewing Oracle GoldenGate Messages"</a></p>
<p><a href="#CHDEEHIC">Section 3.6.2, "Identifying Oracle GoldenGate Processes"</a></p>
<p><a href="#CHDGJGDG">Section 3.6.3, "Interpreting Statistics for Update Operations"</a></p>
<p><a href="#CHDGJGDG">Section 3.6.3, "Interpreting Statistics for Update Operations"</a></p>
<a id="CHDDHFAI"></a>
<div id="GIDBZ175" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.6.1</span> Viewing Oracle GoldenGate Messages</h3>
<p>If the system log process (<code dir="ltr">syslog</code> daemon <code dir="ltr">syslogd</code> ) is running, USS routes Oracle GoldenGate messages to their configured destination by means of UNIX message priority. For more information about configuring <code dir="ltr">syslogd</code>, see the z/OS IP configuration documents and the <span class="italic">UNIX System Services Planning</span> document.</p>
<p>If <code dir="ltr">syslogd</code> is not running, Oracle GoldenGate writes its command output, status information, and error messages to the system console. You can redirect console messages to the Oracle GoldenGate USS session and to the Oracle GoldenGate report files by using the following UNIX command:</p>
<pre dir="ltr">
export _BPXK_JOBLOG=STDERR
</pre></div>
<!-- class="sect2" -->
<a id="CHDEEHIC"></a>
<div id="GIDBZ176" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.6.2</span> Identifying Oracle GoldenGate Processes</h3>
<p>The system management facility (SMF) typically creates a separate accounting record for each UNIX process, including Oracle GoldenGate processes. However, if a user invokes the UNIX shell by using the <code dir="ltr">OMVS</code> command with the default <code dir="ltr">SHAREAS</code> option, or if a user sets the environment variable <code dir="ltr">_BPX_SHAREAS</code> to <code dir="ltr">YES</code> , it could cause two or more processes to run in the same address space. SMF provides process identification only for the first process, but resource consumption is accumulated for all processes that are running. For Oracle GoldenGate, this means that the work probably will be recorded under the Manager process, which is named <code dir="ltr">mgr</code>.</p>
<p>If the DB2 accounting trace is also active to the SMF destination, DB2 will create an SMF accounting record for each of the following Oracle GoldenGate processes:</p>
<ul>
<li>
<p>Extract</p>
</li>
<li>
<p>Replicat</p>
</li>
<li>
<p>Manager, if performing maintenance on Oracle GoldenGate tables. Examples of Oracle GoldenGate tables are the marker table and the Replicat checkpoint table.</p>
</li>
<li>
<p>GGSCI sessions that issue the Oracle GoldenGate <code dir="ltr">DBLOGIN</code> command to log into the database.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDGJGDG"></a>
<div id="GIDBZ177" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.6.3</span> Interpreting Statistics for Update Operations</h3>
<p>The actual number of DML operations that are executed on the DB2 database might not match the number of extracted DML operations that are reported by Oracle GoldenGate. DB2 does not log update statements if they do not physically change a row, so Oracle GoldenGate cannot detect them or include them in statistics.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDGIEFG"></a>
<div id="GIDBZ178" class="sect1"><!-- infolevel="all" infotype="Concept" -->
<h2 class="sect1"><span class="secnum">3.7</span> Supporting Globalization Functions</h2>
<p>Oracle GoldenGate provides globalization support. The following are things to take into consideration when using this support.</p>
<p><a href="#CHDCGCHC">Replicating From a Source that Contains Both ASCII and EBCDIC</a></p>
<p><a href="#CHDEJBFA">Specifying Multi-Byte Characters in Object Names</a></p>
<a id="CHDCGCHC"></a>
<div id="GIDBZ179" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.7.1</span> Replicating From a Source that Contains Both ASCII and EBCDIC</h3>
<p>When replicating to or from a DB2 source system to a target that has a different character set, some consideration must be given to the encoding of the character data on the DB2 source if it contains a mix of ASCII and EBCDIC data. Character set conversion by any given Replicat requires source data to be in a single character set.</p>
<p>The source character set is specified in the trail header. Thus, the Oracle GoldenGate trail can contain either ASCII or EBCDIC data, but not both. Unicode tables are processed without any special configuration and are exempt from the one-character set requirement.</p>
<p>With respect to a source that contains both character encoding types, you have the following options:</p>
<ul>
<li>
<p>You can use one Extract for all of your tables, and have it write the character data to the trail as either ASCII or as EBCDIC.</p>
</li>
<li>
<p>You can use different Extracts: one Extract to write the ASCII character data to a trail, and another Extract to write the EBCDIC character data to a different trail. You then associate each trail with its own data pump process and Replicat process, so that the two data streams are processed separately.</p>
</li>
</ul>
<p>To output the correct character set in either of those scenarios, use the <code dir="ltr">TRAILCHARSETASCII</code> and <code dir="ltr">TRAILCHARSETEBCDIC</code> parameters. The default is <code dir="ltr">TRAILCHARSETEBCDIC</code>. Without these parameters, ASCII and EBCDIC data are written to the trail as-is. When using these parameters, note the following:</p>
<ul>
<li>
<p>If used on a single-byte DB2 subsystem, these parameters cause Extract to convert all of the character data to either the ASCII or EBCDIC single-byte CCSID of the subsystem to which Extract is connected, depending on which parameter is used (except for Unicode, which is processed as-is).</p>
</li>
<li>
<p>If used on a multi-byte DB2 subsystem, these parameters cause Extract to capture only ASCII or EBCDIC tables (and Unicode). Character data is written in either the ASCII or EBCDIC mixed CCSID (depending on the parameter used) of the DB2 z/OS subsystem to which Extract is connected.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDEJBFA"></a>
<div id="GIDBZ180" class="sect2"><!-- infolevel="all" infotype="Concept" -->
<h3 class="sect2"><span class="secnum">3.7.2</span> Specifying Multi-Byte Characters in Object Names</h3>
<p>If the name of a schema, table, column, or stored procedure in a parameter file contains a multi-byte character, the name must be double-quoted. For more information about specifying object names, see <a class="olink GWUAD182" href="../GWUAD/getting-started-oracle-goldengate-process-interfaces.htm#GWUAD182"><span class="italic">Administering Oracle GoldenGate for Windows and UNIX</span></a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment668">
<tr>
<td class="cellalignment675">
<table class="cellalignment673">
<tr>
<td class="cellalignment672"><a href="ogg_wu_install_db2zos.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment672"><a href="ogg_wu_logconfig_db2zos.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment677">
<table class="cellalignment671">
<tr>
<td class="cellalignment672"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment672"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
