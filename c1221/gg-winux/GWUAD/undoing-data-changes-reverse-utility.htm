<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Undoing Data Changes with the Reverse Utility</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This chapter describes how to undo data changes with the reverse utility." />
<meta name="dcterms.created" content="2018-07-19T06:21:43Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Administering Oracle GoldenGate for Windows and UNIX" />
<meta name="dcterms.identifier" content="E66357-07" />
<meta name="dcterms.isVersionOf" content="GWUAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2013, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="performing-administrative-operations.htm" title="Previous" type="text/html" />
<link rel="Next" href="supported-character-sets.htm" title="Next" type="text/html" />
<link rel="alternate" href="GWUAD.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-5D448F96-F036-4330-AD5E-EF71A6C18A0D"></a> <span id="PAGE" style="display:none;">28/34</span> <!-- End Header -->
<a id="GWUAD720"></a><a id="GWUAD719"></a>
<h1 id="GWUAD-GUID-5D448F96-F036-4330-AD5E-EF71A6C18A0D" class="sect1"><span class="enumeration_chapter">21</span> Undoing Data Changes with the Reverse Utility</h1>
<div>
<div><span>This chapter describes how to undo data changes with the reverse utility.</span></div>
<p>This chapter includes the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="undoing-data-changes-reverse-utility.htm#GUID-67667B92-8352-4275-910C-4511CC78BE6B">Overview of the Reverse Utility</a></p>
</li>
<li>
<p><a href="undoing-data-changes-reverse-utility.htm#GUID-336F1448-A7A7-4864-BDD4-927786F8135A">Reverse Utility Restrictions</a></p>
</li>
<li>
<p><a href="undoing-data-changes-reverse-utility.htm#GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192">Configuring the Reverse Utility</a></p>
</li>
<li>
<p><a href="undoing-data-changes-reverse-utility.htm#GUID-72D2700D-AA71-4BC7-A09C-B6914A30B340">Creating Process Groups and Trails for Reverse Processing</a></p>
</li>
<li>
<p><a href="undoing-data-changes-reverse-utility.htm#GUID-DBC41E05-3C44-48A6-87F9-862106706C87">Running the Reverse Utility</a></p>
</li>
<li>
<p><a href="undoing-data-changes-reverse-utility.htm#GUID-232A1C0A-266E-49D6-BF65-3E576CADEA07">Undoing the Changes Made by the Reverse Utility</a></p>
</li>
</ul>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="undoing-data-changes-reverse-utility.htm#GUID-67667B92-8352-4275-910C-4511CC78BE6B">Overview of the Reverse Utility</a><br /></li>
<li class="ulchildlink"><a href="undoing-data-changes-reverse-utility.htm#GUID-336F1448-A7A7-4864-BDD4-927786F8135A">Reverse Utility Restrictions</a><br /></li>
<li class="ulchildlink"><a href="undoing-data-changes-reverse-utility.htm#GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192">Configuring the Reverse Utility</a><br /></li>
<li class="ulchildlink"><a href="undoing-data-changes-reverse-utility.htm#GUID-72D2700D-AA71-4BC7-A09C-B6914A30B340">Creating Process Groups and Trails for Reverse Processing</a><br /></li>
<li class="ulchildlink"><a href="undoing-data-changes-reverse-utility.htm#GUID-DBC41E05-3C44-48A6-87F9-862106706C87">Running the Reverse Utility</a><br /></li>
<li class="ulchildlink"><a href="undoing-data-changes-reverse-utility.htm#GUID-232A1C0A-266E-49D6-BF65-3E576CADEA07">Undoing the Changes Made by the Reverse Utility</a><br /></li>
</ul>
</div>
<a id="GWUAD722"></a><a id="GWUAD721"></a>
<div class="props_rev_3"><a id="GUID-67667B92-8352-4275-910C-4511CC78BE6B"></a>
<h2 id="GWUAD-GUID-67667B92-8352-4275-910C-4511CC78BE6B" class="sect2"><span class="enumeration_section">21.1</span> Overview of the Reverse Utility</h2>
<div>
<p>The Reverse utility uses before images to undo database changes for specified tables, records, and time periods. It enables you to perform a selective backout, unlike other methods which require restoring the entire database.</p>
<p>You can use the Reverse utility for the following purposes:</p>
<ul style="list-style-type: disc;">
<li>
<p>To restore a test database to its original state before the test run. Because the Reverse utility only backs out changes, a test database can be restored in a matter of minutes, much more efficiently than a complete database restore, which can take hours.</p>
</li>
<li>
<p>To reverse errors caused by corrupt data or accidental deletions. For example, if an <code class="codeph">UPDATE</code> or <code class="codeph">DELETE</code> command is issued without a <code class="codeph">WHERE</code> clause, the Reverse utility reverses the operation.</p>
</li>
</ul>
<p>To use the Reverse utility, you do the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Run Extract to extract the before data.</p>
</li>
<li>
<p>Run the Reverse utility to perform the reversal of the transactions.</p>
</li>
<li>
<p>Run Replicat to apply the restored data to the target database.</p>
</li>
</ul>
<p>The Reverse utility reverses the forward operations by:</p>
<ul style="list-style-type: disc;">
<li>
<p>Reversing the ordering of database operations in an extract file, a series of extract files, or a trail so that they can be processed in reverse order, guaranteeing that records with the same key are properly applied.</p>
</li>
<li>
<p>Changing delete operations to inserts.</p>
</li>
<li>
<p>Changing inserts to deletes.</p>
</li>
<li>
<p>Changing update before images to update after images.</p>
</li>
<li>
<p>Reversing the begin and end transaction indicators.</p>
</li>
</ul>
<div class="figure" id="GUID-67667B92-8352-4275-910C-4511CC78BE6B__GUID-7E0253B5-96BE-46C4-B021-011E43F6C4EF">
<p class="titleinfigure">Figure 21-1 Reverse Utility Architecture</p>
<img width="767" height="108" src="img/dynamic_rollback.jpg" alt="Description of Figure 21-1 follows" title="Description of Figure 21-1 follows" /><br />
<a href="img_text/dynamic_rollback.htm">Description of "Figure 21-1 Reverse Utility Architecture"</a></div>
<!-- class="figure" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="undoing-data-changes-reverse-utility.htm#GUID-5D448F96-F036-4330-AD5E-EF71A6C18A0D" title="This chapter describes how to undo data changes with the reverse utility.">Undoing Data Changes with the Reverse Utility</a></p>
</div>
</div>
</div>
</div>
<a id="GWUAD724"></a><a id="GWUAD723"></a>
<div class="props_rev_3"><a id="GUID-336F1448-A7A7-4864-BDD4-927786F8135A"></a>
<h2 id="GWUAD-GUID-336F1448-A7A7-4864-BDD4-927786F8135A" class="sect2"><span class="enumeration_section">21.2</span> Reverse Utility Restrictions</h2>
<div>
<p>Observe the following restrictions on the reverse utility:</p>
<ul style="list-style-type: disc;">
<li>
<p>Commit timestamps are not changed during the reverse procedure, which causes the time sequencing in the trail to be backwards. Because of this, you cannot position Replicat based on a timestamp.</p>
</li>
<li>
<p>Oracle GoldenGate does not store the before images of the following data types, so these types are not supported by the Reverse utility. A before image is required to reverse update and delete operations</p>
</li>
</ul>
<div class="tblformalwide" id="GUID-336F1448-A7A7-4864-BDD4-927786F8135A__GUID-5531E331-21E8-4DE8-B0FA-5BE6D474B5CB">
<p class="titleintable">Table 21-1 Data types Not Supported by the Reverse Utility</p>
<table class="cellalignment49" title="Data types Not Supported by the Reverse Utility" summary="This table describes the data types not supported by the reverse utility.">
<thead>
<tr class="cellalignment25">
<th class="cellalignment74" id="d92842e208">DB2(all supported OS)</th>
<th class="cellalignment74" id="d92842e213">Oracle</th>
<th class="cellalignment74" id="d92842e216">SQL Server</th>
<th class="cellalignment74" id="d92842e219">Sybase</th>
<th class="cellalignment74" id="d92842e222">Teradata</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment25">
<td class="cellalignment75" id="d92842e227" headers="d92842e208">
<pre dir="ltr">
BLOB
CLOB
DBCLOB
</pre></td>
<td class="cellalignment75" headers="d92842e227 d92842e213">
<pre dir="ltr">
CLOB 
BLOB
NCLOB
LONG 
LONG RAW
XMLType
UDT
Nested Tables
VARRAY
</pre></td>
<td class="cellalignment75" headers="d92842e227 d92842e216">
<pre dir="ltr">
TEXT
IMAGE
NTEXT
VARCHAR (MAX)
</pre></td>
<td class="cellalignment75" headers="d92842e227 d92842e219">
<pre dir="ltr">
VARBINARY
BINARY
TEXT
IMAGE
</pre></td>
<td class="cellalignment75" headers="d92842e227 d92842e222">
<p>None supported. This is because only the after images of a row are captured by the Teradata vendor access module.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="undoing-data-changes-reverse-utility.htm#GUID-5D448F96-F036-4330-AD5E-EF71A6C18A0D" title="This chapter describes how to undo data changes with the reverse utility.">Undoing Data Changes with the Reverse Utility</a></p>
</div>
</div>
</div>
</div>
<a id="GWUAD726"></a><a id="GWUAD728"></a><a id="GWUAD727"></a><a id="GWUAD729"></a><a id="GWUAD725"></a>
<div class="props_rev_3"><a id="GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192"></a>
<h2 id="GWUAD-GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192" class="sect2"><span class="enumeration_section">21.3</span> Configuring the Reverse Utility</h2>
<div>
<p>The reversal process is performed with online Extract and Replicat processes that are created and started through GGSCI. These processes write to standard local or remote trails. Oracle GoldenGate automatically reverses the file order during reverse processing so that transaction sequencing is maintained.</p>
<p>To configure the Reverse utility, create Extract and Replicat parameter files with the parameters shown in <a href="undoing-data-changes-reverse-utility.htm#GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192__G1061134" title="This table describes the extract parameter file for the reverse utility.">Table 21-2</a> and <a href="undoing-data-changes-reverse-utility.htm#GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192__G1061165" title="This table describes the Replicat parameter file for the reverse utility.">Table 21-3</a>. In addition to these parameters, include any other optional parameters or special <code class="codeph">MAP</code> statements that are required for your synchronization configuration.</p>
<div class="tblformalwide" id="GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192__G1061134">
<p class="titleintable">Table 21-2 Extract Parameter File for the Reverse Utility</p>
<table class="cellalignment49" title="Extract Parameter File for the Reverse Utility" summary="This table describes the extract parameter file for the reverse utility.">
<thead>
<tr class="cellalignment25">
<th class="cellalignment76" id="d92842e353">Parameter</th>
<th class="cellalignment77" id="d92842e356">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment25">
<td class="cellalignment78" id="d92842e361" headers="d92842e353">
<pre dir="ltr">
EXTRACT <span class="italic">group</span>
</pre></td>
<td class="cellalignment79" headers="d92842e361 d92842e356">
<p><code class="codeph">EXTRACT</code> <span class="italic"><code class="codeph">group</code></span> specifies the Extract process. You will create this process in GGSCI.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment78" id="d92842e376" headers="d92842e353">
<pre dir="ltr">
END {<span class="italic">time</span> | RUNTIME}
</pre></td>
<td class="cellalignment79" headers="d92842e376 d92842e356">
<p><span class="italic"><code class="codeph">time</code></span> causes Extract to terminate when it reaches a record in the data source whose timestamp exceeds the one that is specified with this parameter. The valid format is as follows, based on a 24-hour clock:</p>
<p><code class="codeph">yyyy-mm-dd</code><code class="codeph">[ hh:mi[:ss[.cccccc]]</code></p>
<p><code class="codeph">RUNTIME</code> causes Extract to terminate when it reaches a record in the data source whose timestamp exceeds the current date and clock time. All unprocessed records with timestamps up to this point in time are processed. One advantage of using <code class="codeph">RUNTIME</code> is that you do not have to alter the parameter file to change dates and times from run to run. Instead, you can control the process start time within your batch programming.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment78" id="d92842e404" headers="d92842e353">
<pre dir="ltr">
[SOURCEDB <span class="italic">datasource</span>,]
[USERIDALIAS <span class="italic">alias</span> | USERID <span class="italic">user</span> [, <span class="italic">options</span>]]
</pre>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">SOURCEDB</code> specifies a data source name, if required in the connection information.</p>
</li>
<li>
<p><code class="codeph">USERID</code> and <code class="codeph">USERIDALIAS</code> specify authentication information.</p>
</li>
</ul>
</td>
<td class="cellalignment79" headers="d92842e404 d92842e356">
<p>Specifies database connection information. See <a href="configuring-oracle-goldengate-security.htm#GUID-E14F094A-A46B-4D31-857F-3916C0090875" title="This chapter describes how to configure Oracle GoldenGate security.">Configuring Oracle GoldenGate Security</a> for more information.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment78" id="d92842e447" headers="d92842e353">
<pre dir="ltr">
NOCOMPRESSDELETES
</pre></td>
<td class="cellalignment79" headers="d92842e447 d92842e356">
<p>Causes Extract to send all column data to the output, instead of only the primary key. Enables deletes to be converted back to inserts.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment78" id="d92842e454" headers="d92842e353">
<pre dir="ltr">
GETUPDATEBEFORES
</pre></td>
<td class="cellalignment79" headers="d92842e454 d92842e356">
<p>Directs Oracle GoldenGate to extract before images so that updates can be rolled back.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment78" id="d92842e461" headers="d92842e353">
<pre dir="ltr">
RMTHOST <span class="italic">hostname</span>
</pre></td>
<td class="cellalignment79" headers="d92842e461 d92842e356">
<p>The name or IP address of the target system.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment78" id="d92842e470" headers="d92842e353">
<pre dir="ltr">
{EXTTRAIL <span class="italic">input trail</span> |
RMTTRAIL <span class="italic">input trail</span>}
</pre></td>
<td class="cellalignment79" headers="d92842e470 d92842e356">
<ul style="list-style-type: disc;">
<li>
<p>Use <code class="codeph">EXTTRAIL</code> to specify an extract trail on the local system.</p>
</li>
<li>
<p>Use <code class="codeph">RMTTRAIL</code> to specify a remote trail on a remote system.</p>
</li>
</ul>
<p>Specify the relative or full path name of a trail, including the two-character trail name, for example:</p>
<pre dir="ltr">
EXTTRAIL /home/ggs/dirdat/rt
</pre></td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment78" id="d92842e501" headers="d92842e353">
<pre dir="ltr">
TABLE [<span class="italic">container</span>.]<span class="italic">owner.table</span>;
</pre></td>
<td class="cellalignment79" headers="d92842e501 d92842e356">
<p>The table or tables that are to be processed, specified with either multiple <code class="codeph">TABLE</code> statements or a wildcard. Include any special selection and mapping criteria.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>This example Extract parameter file uses a remote trail.</p>
<div class="tblformalwide" id="GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192__G1061165">
<p class="titleintable">Table 21-3 Replicat Parameter File for the Reverse Utility</p>
<table class="cellalignment49" title="Replicat Parameter File for the Reverse Utility" summary="This table describes the Replicat parameter file for the reverse utility.">
<thead>
<tr class="cellalignment25">
<th class="cellalignment36" id="d92842e530">Parameter</th>
<th class="cellalignment35" id="d92842e533">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment25">
<td class="cellalignment38" id="d92842e538" headers="d92842e530">
<pre dir="ltr">
REPLICAT <span class="italic">group</span>
</pre></td>
<td class="cellalignment37" headers="d92842e538 d92842e533">
<p><code class="codeph">REPLICAT</code> <span class="italic"><code class="codeph">group</code></span> specifies the Replicat process to be created in GGSCI.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment38" id="d92842e553" headers="d92842e530">
<pre dir="ltr">
END {<span class="italic">time</span> | RUNTIME}
</pre></td>
<td class="cellalignment37" headers="d92842e553 d92842e533">
<p><span class="italic"><code class="codeph">time</code></span> causes Extract to terminate when it reaches a record in the data source whose timestamp exceeds the one that is specified with this parameter. The valid format is as follows, based on a 24-hour clock:</p>
<p><code class="codeph">yyyy-mm-dd</code><code class="codeph">[ hh:mi[:ss[.cccccc]]</code></p>
<p><code class="codeph">RUNTIME</code> causes Replicat to terminate when it reaches a record in the data source whose timestamp exceeds the current date and clock time. All unprocessed records with timestamps up to this point in time are processed. One advantage of using <code class="codeph">RUNTIME</code> is that you do not have to alter the parameter file to change dates and times from run to run. Instead, you can control the process start time within your batch programming.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment38" id="d92842e581" headers="d92842e530">
<pre dir="ltr">
[TARGETDB <span class="italic">datasource</span>,]
[USERIDALIAS <span class="italic">alias</span> | USERID <span class="italic">user</span> [, <span class="italic">options</span>]]
</pre>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">TARGETDB</code> specifies a data source name, if required in the connection information.</p>
</li>
<li>
<p><code class="codeph">USERID</code> and <code class="codeph">USERIDALIAS</code> specify authentication information.</p>
</li>
</ul>
</td>
<td class="cellalignment37" headers="d92842e581 d92842e533">
<p>Specifies database connection information. See <a href="configuring-oracle-goldengate-security.htm#GUID-E14F094A-A46B-4D31-857F-3916C0090875" title="This chapter describes how to configure Oracle GoldenGate security.">Configuring Oracle GoldenGate Security</a> for more information about security options.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment38" id="d92842e624" headers="d92842e530">
<pre dir="ltr">
{SOURCEDEFS <span class="italic">full_pathname</span>} |
ASSUMETARGETDEFS
</pre>
<ul style="list-style-type: disc;">
<li>
<p>Use <code class="codeph">SOURCEDEFS</code> if the source and target tables have different definitions. Specify the source-definitions file generated by DEFGEN. for more information about DEFGEN, see <a href="associating-replicated-data-metadata.htm#GUID-6230CE3C-9C18-43E2-8C81-4847B4724E73" title="This chapter describes the uses of metadata and how to associate replicated data with metadata.">Associating Replicated Data with Metadata</a>..</p>
</li>
<li>
<p>Use <code class="codeph">ASSUMETARGETDEFS</code> if the source and target tables have the same definitions.</p>
</li>
</ul>
</td>
<td class="cellalignment37" headers="d92842e624 d92842e533">
<p>Specifies how to interpret data definitions.</p>
</td>
</tr>
<tr class="cellalignment25">
<td class="cellalignment38" id="d92842e654" headers="d92842e530">
<pre dir="ltr">
MAP [<span class="italic">container</span>.]<span class="italic">owner.table</span>],
TARGET owner.table;
</pre></td>
<td class="cellalignment37" headers="d92842e654 d92842e533">
<p>The table or tables (specified with either multiple <code class="codeph">MAP</code> statements or a wildcard) to which to post the reversed data. When reversing data from the source database, the source and target <code class="codeph">TABLE</code> entries are the same. When reversing replicated data from a target database, the source and target of each <code class="codeph">MAP</code> statement are different.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The following is an example Replicat parameter file.</p>
<div class="example" id="GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192__GUID-35250A08-3D47-4934-B32D-39285B389D19">
<p class="titleinexample">Example 21-1 Extracting a Parameter File Using a Remote Trail</p>
<pre dir="ltr">
EXTRACT ext_1
END 2011-01-09 14:12:20
USERIDALIAS ogg
GETUPDATEBEFORES
NOCOMPRESSDELETES
RMTHOST sysb, MGRPORT 8040
RMTTRAIL /home/ggs/dirdat/in
TABLE tcustmer;
TABLE tcustord;
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-1FF9670F-639D-46BE-8E90-EC2311DDC192__GUID-1CE352A8-C30E-42BC-AB5A-1DC8088C8CCF">
<p class="titleinexample">Example 21-2 Replicat Parameter File</p>
<pre dir="ltr">
REPLICAT rep_1
END RUNTIME
USERIDALIAS ogg
ASSUMETARGETDEFS
MAP tcustmer, TARGET tcustmer;
</pre></div>
<!-- class="example" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="undoing-data-changes-reverse-utility.htm#GUID-5D448F96-F036-4330-AD5E-EF71A6C18A0D" title="This chapter describes how to undo data changes with the reverse utility.">Undoing Data Changes with the Reverse Utility</a></p>
</div>
</div>
</div>
</div>
<a id="GWUAD1154"></a><a id="GWUAD1155"></a><a id="GWUAD1156"></a><a id="GWUAD1157"></a><a id="GWUAD730"></a>
<div class="props_rev_3"><a id="GUID-72D2700D-AA71-4BC7-A09C-B6914A30B340"></a>
<h2 id="GWUAD-GUID-72D2700D-AA71-4BC7-A09C-B6914A30B340" class="sect2"><span class="enumeration_section">21.4</span> Creating Process Groups and Trails for Reverse Processing</h2>
<div>
<div class="section">
<p>To create process groups to perform the backout procedure, you create the following:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>An online Extract group.</p>
</li>
<li>
<p>A local or remote trail that is linked to the Extract group. Extract captures the data from the database, and writes it to this trail, which serves as the input trail for the Reverse utility.</p>
</li>
<li>
<p>An online Replicat group.</p>
</li>
<li>
<p>Another local or remote trail that is linked to the Replicat group. This is the output trail that is written by the Reverse utility. Replicat reads this trail to apply the reversed data.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2"><span class="bold">To Create an Extract Group for Reverse Processing</span></p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">
ADD EXTRACT <span class="italic">group</span>, TRANLOG, BEGIN {NOW | <span class="italic">YYYY-MM-DD HH:MM[:SS[.CCCCCC</span> ]]}
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">group</code></span> is the name of the Extract group. A group name can contain up to eight characters, and is not case-sensitive.</p>
</li>
<li>
<p><code class="codeph">TRANLOG</code> specifies the transaction log as the data source.</p>
</li>
<li>
<p><code class="codeph">BEGIN</code> specifies a starting timestamp at which to begin processing. Use one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">NOW</code> to begin extracting changes that are timestamped at the point when the <code class="codeph">ADD EXTRACT</code> command is executed to create the group.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">YYYY-MM-DD HH:MM[:SS[.CCCCCC</code></span> <code class="codeph">]]</code> as the format for specifying an exact timestamp as the begin point.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2"><span class="bold">To Create an input Trail That is Linked to the Extract Group</span></p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">
ADD {EXTTRAIL | RMTTRAIL} <span class="italic">pathname</span>, EXTRACT <span class="italic">group</span>[, MEGABYTES <span class="italic">n</span>]
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">EXTTRAIL</code> specifies a trail on the local system. <code class="codeph">RMTTRAIL</code> specifies a trail on a remote system.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">pathname</code></span> is the relative or fully qualified name of the input trail, including a two-character name that can be any two alphanumeric characters, for example <code class="codeph">c:\ggs\dirdat\rt</code>. It must be the same name that you specified in the Extract parameter file.</p>
</li>
<li>
<p><code class="codeph">EXTRACT</code> <span class="italic"><code class="codeph">group</code></span> specifies the name of the Extract group.</p>
</li>
<li>
<p><code class="codeph">MEGABYTES</code> <span class="italic"><code class="codeph">n</code></span> is an optional argument with which you can set the size, in megabytes, of each trail file (default is 100).</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2"><span class="bold">To Create a Replicat Group for Reverse Processing</span></p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">
ADD REPLICAT <span class="italic">group</span>, EXTTRAIL <span class="italic">pathname</span>
[, BEGIN {NOW | <span class="italic">YYYY-MM-DD HH:MM[:SS[.CCCCCC</span> ]]} | , EXTSEQNO <span class="italic">seqno</span>, EXTRBA <span class="italic">rba</span>]
[, CHECKPOINTTABLE ]
[, NODBCHECKPOINT]
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">group</code></span> is the name of the Replicat group. A group name can contain up to eight characters, and is not case-sensitive.</p>
</li>
<li>
<p><code class="codeph">EXTTRAIL</code> <span class="italic"><code class="codeph">pathname</code></span> is the relative or fully qualified name of an output trail that you will be creating for this Replicat with the <code class="codeph">ADD RMTTRAIL</code> command.</p>
</li>
<li>
<p><code class="codeph">BEGIN</code> <code class="codeph">{NOW |</code> <span class="italic"><code class="codeph">YYYY-MM-DD HH:MM[:SS[.CCCCCC</code></span> <code class="codeph">]]}</code> defines an online Replicat group by establishing an initial checkpoint and start point for processing. Use one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use <code class="codeph">NOW</code> to begin replicating records that are timestamped at the point when the <code class="codeph">ADD REPLICAT</code> command is executed to create the group.</p>
</li>
<li>
<p>Use <span class="italic"><code class="codeph">YYYY-MM-DD HH:MM[:SS[.CCCCCC</code></span> <code class="codeph">]]</code> as the format for specifying an exact timestamp as the begin point.</p>
</li>
</ul>
</li>
</ul>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">EXTSEQNO</code> <span class="italic"><code class="codeph">seqno</code></span> specifies the sequence number of a file in the trail in which to start processing. <code class="codeph">EXTRBA</code> <span class="italic"><code class="codeph">rba</code></span> specifies a relative byte address as the start point within that file. By default, processing begins at the beginning of a trail unless this option is used. For the sequence number, specify the number, but not any zeroes used for padding. For example, if a trail file is <code class="codeph">c:\ggs\dirdat\aa000026</code>, you would specify <code class="codeph">EXTSEQNO 26</code>. Contact Oracle Support before using this option. For more information, go to <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>.</p>
</li>
<li>
<p><code class="codeph">CHECKPOINTTABLE</code> specifies the owner and name of a checkpoint table other than the default specified in the <code class="codeph">GLOBALS</code> file. To use this option, you must add the checkpoint table to the database with the <code class="codeph">ADD CHECKPOINTTABLE</code> command.</p>
</li>
<li>
<p><code class="codeph">NODBCHECKPOINT</code> specifies that this Replicat group will not use a checkpoint table.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2"><span class="bold">To Create an Output Trail That is Linked to the Replicat Group</span></p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">
ADD {EXTTRAIL | RMTTRAIL} <span class="italic">pathname</span>, REPLICAT <span class="italic">group</span>
[, MEGABYTES <span class="italic">n</span>]
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">EXTTRAIL</code> specifies a trail on the local system. <code class="codeph">RMTTRAIL</code> specifies a trail on a remote system.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">pathname</code></span> is the relative or fully qualified name of the output trail, including a two-character name that can be any two alphanumeric characters, for example <code class="codeph">c:\ggs\dirdat\rt</code>. This must be the trail that was specified with <code class="codeph">EXTTRAIL</code> in the <code class="codeph">ADD REPLICAT</code> command.</p>
</li>
<li>
<p><code class="codeph">REPLICAT</code> <span class="italic"><code class="codeph">group</code></span> specifies the name of the Replicat group.</p>
</li>
<li>
<p><code class="codeph">MEGABYTES</code> <span class="italic"><code class="codeph">n</code></span> is an optional argument with which you can set the size, in megabytes, of each trail file (default is 100).</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="undoing-data-changes-reverse-utility.htm#GUID-5D448F96-F036-4330-AD5E-EF71A6C18A0D" title="This chapter describes how to undo data changes with the reverse utility.">Undoing Data Changes with the Reverse Utility</a></p>
</div>
</div>
</div>
</div>
<a id="GWUAD731"></a>
<div class="props_rev_3"><a id="GUID-DBC41E05-3C44-48A6-87F9-862106706C87"></a>
<h2 id="GWUAD-GUID-DBC41E05-3C44-48A6-87F9-862106706C87" class="sect2"><span class="enumeration_section">21.5</span> Running the Reverse Utility</h2>
<div>
<ol>
<li class="stepexpand"><span>From GGSCI, run Extract.</span>
<div>
<pre dir="ltr">
START EXTRACT <span class="italic">group</span>
</pre></div>
</li>
<li class="stepexpand"><span>Issue the following command until <code class="codeph">at EOF</code> is returned, indicating that Extract is finished capturing the specified records.</span>
<div>
<pre dir="ltr">
SEND EXTRACT <span class="italic">group</span>, STATUS
</pre></div>
</li>
<li class="stepexpand"><span>Run the Reverse utility by using the fully qualified path name or by changing directories to the Oracle GoldenGate directory and running reverse from there.</span>
<div>
<div class="infobox-note" id="GUID-DBC41E05-3C44-48A6-87F9-862106706C87__GUID-D0DB7E8D-9A6F-4F2C-B5E7-876A9D0ED194">
<p class="notep1">Note:</p>
<p>Using a full path name or a path relative to the Oracle GoldenGate directory is especially important on UNIX systems, to prevent confusion with the UNIX <code class="codeph">reverse</code> command.</p>
</div>
<pre dir="ltr">
/<span class="italic">GoldenGate_directory</span>/reverse <span class="italic">input_file</span>, <span class="italic">output_file</span>
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">input_file</code></span> is the input file specified with <code class="codeph">EXTTRAIL</code> or <code class="codeph">RMTTRAIL</code> in the Extract parameter file.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">output_file</code></span> is the output file specified with <code class="codeph">EXTTRAIL</code> in the <code class="codeph">ADD REPLICAT</code> command.</p>
<pre dir="ltr">
\home\ggs\reverse input.c:\ggs\dirdat\et, output.c:\ggs\dirdat\rt
</pre></li>
</ul>
</div>
</li>
<li class="stepexpand"><span>When reverse is finished running, run Replicat to apply the reversed-out data to the database.</span>
<div>
<pre dir="ltr">
START REPLICAT <span class="italic">group</span>
</pre></div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="undoing-data-changes-reverse-utility.htm#GUID-5D448F96-F036-4330-AD5E-EF71A6C18A0D" title="This chapter describes how to undo data changes with the reverse utility.">Undoing Data Changes with the Reverse Utility</a></p>
</div>
</div>
</div>
</div>
<a id="GWUAD732"></a>
<div class="props_rev_3"><a id="GUID-232A1C0A-266E-49D6-BF65-3E576CADEA07"></a>
<h2 id="GWUAD-GUID-232A1C0A-266E-49D6-BF65-3E576CADEA07" class="sect2"><span class="enumeration_section">21.6</span> Undoing the Changes Made by the Reverse Utility</h2>
<div>
<div class="section">
<p>If the reverse processing produces unexpected or undesired results, you can reapply the original changes to the database. To do so, edit the Replicat parameter file and specify the input file in place of the output file, then run Replicat again.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="undoing-data-changes-reverse-utility.htm#GUID-5D448F96-F036-4330-AD5E-EF71A6C18A0D" title="This chapter describes how to undo data changes with the reverse utility.">Undoing Data Changes with the Reverse Utility</a></p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment24">
<tr>
<td class="cellalignment31">
<table class="cellalignment29">
<tr>
<td class="cellalignment28"><a href="performing-administrative-operations.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment28"><a href="supported-character-sets.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment33">
<table class="cellalignment27">
<tr>
<td class="cellalignment28"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment28"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
