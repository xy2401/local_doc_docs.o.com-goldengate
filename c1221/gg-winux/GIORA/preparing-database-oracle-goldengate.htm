<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Preparing the Database for Oracle GoldenGate</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This chapter contains steps to take so that the source Oracle Database is configured properly to support the capture of transactional changes." />
<meta name="dcterms.created" content="2018-07-19T06:26:07Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Installing and Configuring Oracle GoldenGate for Oracle Database" />
<meta name="dcterms.identifier" content="E66365-07" />
<meta name="dcterms.isVersionOf" content="GIORA" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2010, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="installing-oracle-goldengate.htm" title="Previous" type="text/html" />
<link rel="Next" href="establishing-oracle-goldengate-credentials.htm" title="Next" type="text/html" />
<link rel="alternate" href="GIORA.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-F069C961-4805-47ED-8D3F-E393541CB5FC"></a> <span id="PAGE" style="display:none;">10/31</span> <!-- End Header -->
<a id="GIORA545"></a><a id="GIORA357"></a>
<h1 id="GIORA-GUID-F069C961-4805-47ED-8D3F-E393541CB5FC" class="sect1"><span class="enumeration_chapter">3</span> Preparing the Database for Oracle GoldenGate</h1>
<div>
<div><span>This chapter contains steps to take so that the source Oracle Database is configured properly to support the capture of transactional changes.</span></div>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-database-oracle-goldengate.htm#GUID-A72C7E33-6AA6-4F88-9F01-E9FC0FDE0C46">Configuring Connections for Integrated Processes</a><br /></li>
<li class="ulchildlink"><a href="preparing-database-oracle-goldengate.htm#GUID-55E7046C-0550-40C2-A855-904A2049F31B">Configuring Logging Properties</a><br /></li>
<li class="ulchildlink"><a href="preparing-database-oracle-goldengate.htm#GUID-E1E99DEB-443E-431C-B6C0-B57DC72F567B">Enabling Oracle GoldenGate in the Database</a><br /></li>
<li class="ulchildlink"><a href="preparing-database-oracle-goldengate.htm#GUID-46F53DBD-CD36-42F0-8C0B-2D731C3ECB08">Setting Flashback Query</a><br /></li>
<li class="ulchildlink"><a href="preparing-database-oracle-goldengate.htm#GUID-F16C203E-CB16-44EC-A73B-6C9052A6A100">Managing Server Resources</a><br /></li>
</ul>
</div>
<a id="GIORA982"></a>
<div class="props_rev_3"><a id="GUID-A72C7E33-6AA6-4F88-9F01-E9FC0FDE0C46"></a>
<h2 id="GIORA-GUID-A72C7E33-6AA6-4F88-9F01-E9FC0FDE0C46" class="sect2"><span class="enumeration_section">3.1</span> Configuring Connections for Integrated Processes</h2>
<div>
<div class="section">
<p>If you will be using integrated capture and integrated Replicat, each requires a dedicated server connection in the <code class="codeph">tnsnames.ora</code> file. You direct the processes to use these connections with the <code class="codeph">USERID</code> or <code class="codeph">USERIDALIAS</code> parameter in the Extract and Replicat parameter files when you configure those processes.</p>
<p>The following is an example of the dedicated connection required for integrated capture (Extract) and integrated Replicat.</p>
<pre dir="ltr">
TEST =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = test2)(PORT = 1521))
    )
(CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = test)
  )
)
</pre>
<p>The following are the security options for specifying the connection string in the Extract or Replicat parameter file.</p>
<p>Password encryption method:</p>
<pre dir="ltr">
USERID intext@test, PASSWORD mypassword
</pre>
<p>Credential store method:</p>
<pre dir="ltr">
USERIDALIAS ext
</pre>
<p>In the case of <code class="codeph">USERIDALIAS</code>, the alias <code class="codeph">ext</code> is stored in the Oracle GoldenGate credential store with the actual connection string, as in the following example:</p>
<pre dir="ltr">
GGSCI&gt; INFO CREDENTIALSTORE DOMAIN support
Domain: Support
  Alias: ext
  Userid: intext@test
</pre>
<p>For more information about specifying database connection information in the parameter file, see <a class="olink GWUAD354" target="_blank" href="../GWUAD/configuring-oracle-goldengate-security.htm#GWUAD354"><span class="italic"><span id="GUID-A72C7E33-6AA6-4F88-9F01-E9FC0FDE0C46__GWUAD"><cite>Administering Oracle GoldenGate for Windows and UNIX</cite></span></span></a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-database-oracle-goldengate.htm#GUID-F069C961-4805-47ED-8D3F-E393541CB5FC" title="This chapter contains steps to take so that the source Oracle Database is configured properly to support the capture of transactional changes.">Preparing the Database for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<a id="GIORA365"></a><a id="GIORA364"></a>
<div class="props_rev_3"><a id="GUID-55E7046C-0550-40C2-A855-904A2049F31B"></a>
<h2 id="GIORA-GUID-55E7046C-0550-40C2-A855-904A2049F31B" class="sect2"><span class="enumeration_section">3.2</span> Configuring Logging Properties</h2>
<div>
<div class="section">
<p>Oracle GoldenGate relies on the redo logs to capture the data that it needs to replicate source transactions. The Oracle redo logs on the source system must be configured properly before you start Oracle GoldenGate processing.</p>
<div class="infobox-note" id="GUID-55E7046C-0550-40C2-A855-904A2049F31B__GUID-83790FFD-6A5D-4E6A-8860-63F1C86FD6E9">
<p class="notep1">Note:</p>
<p>Redo volume is increased as the result of this required logging. You can wait until you are ready to start Oracle GoldenGate processing to enable the logging.</p>
</div>
<p>This section addresses the following logging levels that apply to Oracle GoldenGate. Which logging level that you use is dependent on the Oracle GoldenGate feature or features that you are using.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="preparing-database-oracle-goldengate.htm#GUID-CBA43B2F-529B-4A52-B4EB-0CA63070A224">Enabling Minimum Database-level Supplemental Logging</a></p>
</li>
<li>
<p><a href="preparing-database-oracle-goldengate.htm#GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B">Enabling Schema-level Supplemental Logging</a></p>
</li>
<li>
<p><a href="preparing-database-oracle-goldengate.htm#GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719">Enabling Table-level Supplemental Logging</a></p>
</li>
</ul>
<p><a href="preparing-database-oracle-goldengate.htm#GUID-55E7046C-0550-40C2-A855-904A2049F31B__BABIIBFI" title="This table summarizes the supplemental logging options that are, or may be, required to support your intended Oracle GoldenGate use case.">Table 3-1</a> shows the Oracle GoldenGate use cases for the different logging properties. Detailed information follows.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-55E7046C-0550-40C2-A855-904A2049F31B__BABIIBFI">
<p class="titleintable">Table 3-1 Supplemental Logging Options Per Use Case</p>
<table class="cellalignment384" title="Supplemental Logging Options Per Use Case" summary="This table summarizes the supplemental logging options that are, or may be, required to support your intended Oracle GoldenGate use case.">
<thead>
<tr class="cellalignment378">
<th class="cellalignment402" id="d13482e184">Logging option</th>
<th class="cellalignment402" id="d13482e187">GGSCI command</th>
<th class="cellalignment402" id="d13482e190">What it does</th>
<th class="cellalignment402" id="d13482e193">Use case</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment378">
<td class="cellalignment406" id="d13482e198" headers="d13482e184">
<p>Forced logging mode</p>
</td>
<td class="cellalignment406" headers="d13482e198 d13482e187">
<p>None; enable through the database.</p>
</td>
<td class="cellalignment406" headers="d13482e198 d13482e190">
<p>Forces the logging of all transactions and loads.</p>
</td>
<td class="cellalignment406" headers="d13482e198 d13482e193">
<p>Strongly recommended for all Oracle GoldenGate use cases.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment406" id="d13482e211" headers="d13482e184">
<p>Minimum database-level supplemental logging</p>
</td>
<td class="cellalignment406" headers="d13482e211 d13482e187">
<p>None; enable through the database.</p>
</td>
<td class="cellalignment406" headers="d13482e211 d13482e190">
<p>Enables minimal supplemental logging to add row-chaining information to the redo log.</p>
</td>
<td class="cellalignment406" headers="d13482e211 d13482e193">
<p>Required for all Oracle GoldenGate use cases</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment406" id="d13482e224" headers="d13482e184">
<p>Schema-level supplemental logging, default setting</p>
<p>See <a href="preparing-database-oracle-goldengate.htm#GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B">Enabling Schema-level Supplemental Logging</a>.</p>
</td>
<td class="cellalignment406" headers="d13482e224 d13482e187">
<p><code class="codeph">ADD SCHEMATRANDATA</code></p>
</td>
<td class="cellalignment406" headers="d13482e224 d13482e190">
<p>Enables unconditional supplemental logging of the primary key and conditional supplemental logging of unique key(s) and foreign key(s) of all tables in a schema. All of these keys together are known as the <span class="italic">scheduling columns</span>.</p>
</td>
<td class="cellalignment406" headers="d13482e224 d13482e193">
<p>Enables the logging for all current and future tables in the schema. If the primary key, unique key, and foreign key columns are not identical at both source and target, use <code class="codeph">ALLCOLS</code>. Required when using DDL support.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment406" id="d13482e249" headers="d13482e184">
<p>Schema-level supplemental logging with unconditional logging for all supported columns. (See <a href="preparing-database-oracle-goldengate.htm#GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B">Enabling Schema-level Supplemental Logging</a> for non-supported column types.)</p>
</td>
<td class="cellalignment406" headers="d13482e249 d13482e187">
<p><code class="codeph">ADD SCHEMATRANDATA</code> with <code class="codeph">ALLCOLS</code> option</p>
</td>
<td class="cellalignment406" headers="d13482e249 d13482e190">
<p>Enables unconditional supplemental logging of all of the columns in a table, for all of the tables in a schema.</p>
</td>
<td class="cellalignment406" headers="d13482e249 d13482e193">
<p>Used for bidirectional and active-active configurations where all column values are checked, not just the changed columns, when attempting to perform an update or delete. This takes more resources though allows for the highest level of real-time data validation and thus conflict detection.</p>
<p>It can also be used when the source and target primary, unique, and foreign keys are not the same or are constantly changing between source and target.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment406" id="d13482e272" headers="d13482e184">
<p>Schema-level supplemental logging, minimal setting</p>
</td>
<td class="cellalignment406" headers="d13482e272 d13482e187">
<p><code class="codeph">ADD SCHEMATRANDATA</code> with <code class="codeph">NOSCHEDULINGCOLS</code> option</p>
</td>
<td class="cellalignment406" headers="d13482e272 d13482e190">
<p>Enables unconditional supplemental logging of the primary key and all valid unique indexes of all tables in a schema.</p>
</td>
<td class="cellalignment406" headers="d13482e272 d13482e193">
<p>Use only for nonintegrated Replicat. This is the minimum required schema-level logging.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment406" id="d13482e290" headers="d13482e184">
<p>Table-level supplemental logging with built-in support for integrated Replicat</p>
<p>See <a href="preparing-database-oracle-goldengate.htm#GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719">Enabling Table-level Supplemental Logging</a></p>
</td>
<td class="cellalignment406" headers="d13482e290 d13482e187">
<p><code class="codeph">ADD TRANDATA</code></p>
</td>
<td class="cellalignment406" headers="d13482e290 d13482e190">
<p>Enables unconditional supplemental logging of the primary key and conditional supplemental logging of unique key(s) and foreign key(s) of a table. All of these keys together are known as the <span class="italic">scheduling columns</span>.</p>
</td>
<td class="cellalignment406" headers="d13482e290 d13482e193">
<p>Required for all Oracle GoldenGate use cases unless schema-level supplemental logging is used. If the primary key, unique key, and foreign key columns are not identical at both source and target, use <code class="codeph">ALLCOLS</code>.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment406" id="d13482e314" headers="d13482e184">
<p>Table-level supplemental logging with unconditional logging for all supported columns. (See <a href="preparing-database-oracle-goldengate.htm#GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719">Enabling Table-level Supplemental Logging</a> for non-supported column types.)</p>
</td>
<td class="cellalignment406" headers="d13482e314 d13482e187">
<p><code class="codeph">ADD TRANDATA</code> with <code class="codeph">ALLCOLS</code> option</p>
</td>
<td class="cellalignment406" headers="d13482e314 d13482e190">
<p>Enables unconditional supplemental logging of all of the columns of the table.</p>
</td>
<td class="cellalignment406" headers="d13482e314 d13482e193">
<p>Used for bidirectional and active-active configurations where all column values are checked, not just the changed columns, when attempting to perform an update or delete. This takes more resources though allows for the highest level of real-time data validation and thus conflict detection.</p>
<p>It can also be used when the source and target primary, unique, and foreign keys are not the same or are constantly changing between source and target.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment406" id="d13482e337" headers="d13482e184">
<p>Table-level supplemental logging, minimal setting</p>
</td>
<td class="cellalignment406" headers="d13482e337 d13482e187">
<p><code class="codeph">ADD TRANDATA</code> with <code class="codeph">NOSCHEDULINGCOLS</code> option</p>
</td>
<td class="cellalignment406" headers="d13482e337 d13482e190">
<p>Enables unconditional supplemental logging of the primary key and all valid unique indexes of a table.</p>
</td>
<td class="cellalignment406" headers="d13482e337 d13482e193">
<p>Use only for nonintegrated Replicat. This is the minimum required table-level logging.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="preparing-database-oracle-goldengate.htm#GUID-CBA43B2F-529B-4A52-B4EB-0CA63070A224">Enabling Minimum Database-level Supplemental Logging</a><br /></li>
<li class="ulchildlink"><a href="preparing-database-oracle-goldengate.htm#GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B">Enabling Schema-level Supplemental Logging</a><br /></li>
<li class="ulchildlink"><a href="preparing-database-oracle-goldengate.htm#GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719">Enabling Table-level Supplemental Logging</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-database-oracle-goldengate.htm#GUID-F069C961-4805-47ED-8D3F-E393541CB5FC" title="This chapter contains steps to take so that the source Oracle Database is configured properly to support the capture of transactional changes.">Preparing the Database for Oracle GoldenGate</a></p>
</div>
</div>
</div>
<a id="GIORA366"></a>
<div class="props_rev_3"><a id="GUID-CBA43B2F-529B-4A52-B4EB-0CA63070A224"></a>
<h3 id="GIORA-GUID-CBA43B2F-529B-4A52-B4EB-0CA63070A224" class="sect3"><span class="enumeration_section">3.2.1</span> Enabling Minimum Database-level Supplemental Logging</h3>
<div>
<div class="section">
<p>Oracle strongly recommends putting the Oracle source database into forced logging mode. Forced logging mode forces the logging of all transactions and loads, overriding any user or storage settings to the contrary. This ensures that no source data in the Extract configuration gets missed.</p>
<p>In addition, minimal supplemental logging, a database-level option, is required for an Oracle source database when using Oracle GoldenGate. This adds row chaining information, if any exists, to the redo log for update operations.</p>
<div class="infobox-note" id="GUID-CBA43B2F-529B-4A52-B4EB-0CA63070A224__GUID-4CE15616-ABD2-417D-A854-D7632F76DC8E">
<p class="notep1">Note:</p>
<p>Database-level primary key (PK) and unique index (UI) logging is strongly discouraged because of the excessive additional overhead it creates on tables outside of replication. Unless those logging options are required for business purposes, you only need to enable minimal supplemental logging at the database level and force logging for Oracle GoldenGate.</p>
</div>
<p>Perform the following steps to verify and enable, if necessary, minimal supplemental logging and forced logging.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in to SQL*Plus as a user with <code class="codeph">ALTER SYSTEM</code> privilege.</span></li>
<li class="stepexpand"><span>Issue the following command to determine whether the database is in supplemental logging mode and in forced logging mode. If the result is <code class="codeph">YES</code> for both queries, the database meets the Oracle GoldenGate requirement.</span>
<div>
<pre dir="ltr">
SELECT supplemental_log_data_min, force_logging FROM v$database;
</pre></div>
</li>
<li class="stepexpand"><span>If the result is <code class="codeph">NO</code> for either or both properties, continue with these steps to enable them as needed:</span>
<div>
<pre dir="ltr">
SQL&gt; ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;
SQL&gt; ALTER DATABASE FORCE LOGGING;
</pre></div>
</li>
<li class="stepexpand"><span>Issue the following command to verify that these properties are now enabled.</span>
<div>
<pre dir="ltr">
SELECT supplemental_log_data_min, force_logging FROM v$database;
</pre>
<p>The output of the query must be <code class="codeph">YES</code> for both properties.</p>
</div>
</li>
<li class="stepexpand"><span>Switch the log files.</span>
<div>
<pre dir="ltr">
SQL&gt; ALTER SYSTEM SWITCH LOGFILE;
</pre></div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-database-oracle-goldengate.htm#GUID-55E7046C-0550-40C2-A855-904A2049F31B">Configuring Logging Properties</a></p>
</div>
</div>
</div>
</div>
<a id="GIORA367"></a>
<div class="props_rev_3"><a id="GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B"></a>
<h3 id="GIORA-GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B" class="sect3"><span class="enumeration_section">3.2.2</span> Enabling Schema-level Supplemental Logging</h3>
<div>
<div class="section">
<p>Oracle GoldenGate supports schema-level supplemental logging. Schema-level logging is required for an Oracle source database when using the Oracle GoldenGate DDL replication feature. In all other use cases, it is optional, but then you must use table-level logging instead (see <a href="preparing-database-oracle-goldengate.htm#GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719">Enabling Table-level Supplemental Logging</a>).</p>
<p>By default, schema-level logging automatically enables unconditional supplemental logging of the primary key and conditional supplemental logging of unique key(s) and foreign key(s) of all tables in a schema. Options enable you to alter the logging as needed.</p>
<div class="infobox-note" id="GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B__GUID-1F1C47CE-8143-46C4-B72E-27CE10110845">
<p class="notep1">Note:</p>
<p>Oracle strongly recommends using schema-level logging rather than table-level logging, because it ensures that any new tables added to a schema are captured if they satisfy wildcard specifications.</p>
</div>
<p>Perform the following steps on the source system to enable schema-level supplemental logging.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Apply Oracle Patch 13794550 to the source Oracle Database if the version is earlier than 11.2.0.2.</span></li>
<li class="stepexpand"><span>Run GGSCI on the source system.</span></li>
<li class="stepexpand"><span>Issue the <code class="codeph">DBLOGIN</code> command with the alias of a user in the credential store who has privilege to enable schema-level supplemental logging.</span>
<div>
<pre dir="ltr">
DBLOGIN USERIDALIAS <span class="italic">alias</span>
</pre>
<p>See <a class="olink GWURF251" target="_blank" href="../GWURF/dblogin.htm#GWURF251"><span class="italic"><span id="GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B__GWURF"><cite>Reference for Oracle GoldenGate for Windows and UNIX</cite></span></span></a> for more information about <code class="codeph">DBLOGIN</code> and additional options.</p>
</div>
</li>
<li class="stepexpand"><span>Issue the <code class="codeph">ADD SCHEMATRANDATA</code> command for each schema for which you want to capture data changes with Oracle GoldenGate.</span>
<div>
<pre dir="ltr">
ADD SCHEMATRANDATA <span class="italic">schema</span> [ALLCOLS | NOSCHEDULINGCOLS]
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p>Without options, <code class="codeph">ADD SCHEMATRANDATA</code> schema enables the unconditional supplemental logging on the source system of the primary key and the conditional supplemental logging of all unique key(s) and foreign key(s) of all current and future tables in the given schema. Unconditional logging forces the primary key values to the log whether or not the key was changed in the current operation. Conditional logging logs all of the column values of a foreign or unique key if at least one of them was changed in the current operation. The default is optional to support nonintegrated Replicat but is required to support integrated Replicat because primary key, unique keys, and foreign keys must all be available to the inbound server to compute dependencies. For more information about integrated Replicat, see <a href="choosing-capture-and-apply-modes.htm#GUID-8AC69DA1-1117-47DE-BD8C-DB3BC51A1DA1">Deciding Which Apply Method to Use</a>.</p>
</li>
<li>
<p><code class="codeph">ALLCOLS</code> can be used to enable the unconditional supplemental logging of all of the columns of a table and applies to all current and future tables in the given schema. Use to support integrated Replicat when the source and target tables have different scheduling columns. (<span class="italic">Scheduling columns</span> are the primary key, the unique key, and the foreign key.)</p>
</li>
<li>
<p><code class="codeph">NOSCHEDULINGCOLS</code> logs only the values of the primary key and all valid unique indexes for existing tables in the schema and new tables added later. This is the minimal required level of schema-level logging and is valid only for Replicat in nonintegrated mode.</p>
</li>
</ul>
<p>In the following example, the command enables default supplemental logging for the <code class="codeph">finance</code> schema.</p>
<pre dir="ltr">
ADD SCHEMATRANDATA finance
</pre>
<p>In the following example, the command enables the supplemental logging only for the primary key and valid unique indexes for the <code class="codeph">hr</code> schema.</p>
<pre dir="ltr">
ADD SCHEMATRANDATA hr NOSCHEDULINGCOLS
</pre>
<p>See <a class="olink GWURF265" target="_blank" href="../GWURF/add-schematrandata.htm#GWURF265"><span class="italic"><span><cite>Reference for Oracle GoldenGate for Windows and UNIX</cite></span></span></a> for more information about <code class="codeph">ADD SCHEMATRANDATA</code>.</p>
</div>
</li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-database-oracle-goldengate.htm#GUID-55E7046C-0550-40C2-A855-904A2049F31B">Configuring Logging Properties</a></p>
</div>
</div>
</div>
</div>
<a id="GIORA368"></a>
<div class="sect3"><a id="GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719"></a>
<h3 id="GIORA-GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719" class="sect3"><span class="enumeration_section">3.2.3</span> Enabling Table-level Supplemental Logging</h3>
<div>
<p>Enable table-level supplemental logging on the source system in the following cases:</p>
<ul style="list-style-type: disc;">
<li>
<p>To enable the required level of logging when not using schema-level logging (see <a href="preparing-database-oracle-goldengate.htm#GUID-421AEAF8-C78B-499F-B73A-DB234FBBFE5B">Enabling Schema-level Supplemental Logging</a>). Either schema-level or table-level logging must be used. By default, table-level logging automatically enables unconditional supplemental logging of the primary key and conditional supplemental logging of unique key(s) and foreign key(s) of a table. Options enable you to alter the logging as needed.</p>
</li>
<li>
<p>To prevent the logging of the primary key for any given table.</p>
</li>
<li>
<p>To log non-key column values at the table level to support specific Oracle GoldenGate features, such as filtering and conflict detection and resolution logic.</p>
</li>
</ul>
<p>Perform the following steps on the source system to enable table-level supplemental logging or use the optional features of the command.</p>
<ol>
<li>
<p>Run GGSCI on the source system.</p>
</li>
<li>
<p>Issue the <code class="codeph">DBLOGIN</code> command using the alias of a user in the credential store who has privilege to enable table-level supplemental logging.</p>
<pre dir="ltr">
DBLOGIN USERIDALIAS <span class="italic">alias</span>
</pre>
<p>See <a class="olink GWURF251" target="_blank" href="../GWURF/dblogin.htm#GWURF251"><span class="italic"><span id="GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719__GWURF"><cite>Reference for Oracle GoldenGate for Windows and UNIX</cite></span></span></a> for more information about <code class="codeph">DBLOGIN</code> and additional options.</p>
</li>
<li>
<p>Issue the <code class="codeph">ADD TRANDATA</code> command.</p>
<pre dir="ltr">
ADD TRANDATA [<span class="italic">container</span>.]<span class="italic">schema.</span><span class="italic">table</span> [, COLS (<span class="italic">columns)</span>] [, NOKEY] [, ALLCOLS | NOSCHEDULINGCOLS]
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">container</code></span> is the name of the root container or pluggable database if the table is in a multitenant container database.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">schema</code></span> is the source schema that contains the table.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">table</code></span> is the name of the table. See <a class="olink GWUAD192" target="_blank" href="../GWUAD/getting-started-oracle-goldengate-process-interfaces.htm#GWUAD192"><span class="italic"><span id="GUID-E516F9DC-FD8A-485C-8C95-C4B5E07CD719__GWUAD"><cite>Administering Oracle GoldenGate for Windows and UNIX</cite></span></span></a> for instructions for specifying object names.</p>
</li>
<li>
<p><code class="codeph">ADD TRANDATA</code> without other options automatically enables unconditional supplemental logging of the primary key and conditional supplemental logging of unique key(s) and foreign key(s) of the table. Unconditional logging forces the primary key values to the log whether or not the key was changed in the current operation. Conditional logging logs all of the column values of a foreign or unique key if at least one of them was changed in the current operation. The default is optional to support nonintegrated Replicat (see also <code class="codeph">NOSCHEDULINGCOLS</code>) but is required to support integrated Replicat because primary key, unique keys, and foreign keys must all be available to the inbound server to compute dependencies. For more information about integrated Replicat, see <a href="choosing-capture-and-apply-modes.htm#GUID-8AC69DA1-1117-47DE-BD8C-DB3BC51A1DA1">Deciding Which Apply Method to Use</a>.</p>
</li>
<li>
<p><code class="codeph">ALLCOLS</code> enables the unconditional supplemental logging of all of the columns of the table. Use to support integrated Replicat when the source and target tables have different scheduling columns. (<span class="italic">Scheduling columns</span> are the primary key, the unique key, and the foreign key.)</p>
</li>
<li>
<p><code class="codeph">NOSCHEDULINGCOLS</code> is valid for Replicat in nonintegrated mode only. It issues an <code class="codeph">ALTER TABLE</code> command with an <code class="codeph">ADD SUPPLEMENTAL LOG DATA ALWAYS</code> clause that is appropriate for the type of unique constraint that is defined for the table, or all columns in the absence of a unique constraint. This command satisfies the basic table-level logging requirements of Oracle GoldenGate when schema-level logging will not be used. See <a href="additional-oracle-goldengate-configuration-considerations.htm#GUID-F0BE6B03-2622-4D05-9E6B-3E7684963451">Ensuring Row Uniqueness in Source and Target Tables</a> for how Oracle GoldenGate selects a key or index.</p>
</li>
<li>
<p><code class="codeph">COLS</code> <span class="italic"><code class="codeph">columns</code></span> logs non-key columns that are required for a <code class="codeph">KEYCOLS</code> clause or for filtering and manipulation. The parentheses are required. These columns will be logged in addition to the primary key unless the <code class="codeph">NOKEY</code> option is also present.</p>
</li>
<li>
<p><code class="codeph">NOKEY</code> prevents the logging of the primary key or unique key. Requires a <code class="codeph">KEYCOLS</code> clause in the <code class="codeph">TABLE</code> and <code class="codeph">MAP</code> parameters and a <code class="codeph">COLS</code> clause in the <code class="codeph">ADD TRANDATA</code> command to log the alternate <code class="codeph">KEYCOLS</code> columns.</p>
</li>
</ul>
</li>
<li>
<p>If using <code class="codeph">ADD TRANDATA</code> with the <code class="codeph">COLS</code> option, create a unique index for those columns on the target to optimize row retrieval. If you are logging those columns as a substitute key for a <code class="codeph">KEYCOLS</code> clause, make a note to add the <code class="codeph">KEYCOLS</code> clause to the <code class="codeph">TABLE</code> and <code class="codeph">MAP</code> statements when you configure the Oracle GoldenGate processes.</p>
</li>
</ol>
<p>See <a class="olink GWURF268" target="_blank" href="../GWURF/add-trandata.htm#GWURF268"><span class="italic"><span><cite>Reference for Oracle GoldenGate for Windows and UNIX</cite></span></span></a> for more information about <code class="codeph">ADD TRANDATA</code>.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-database-oracle-goldengate.htm#GUID-55E7046C-0550-40C2-A855-904A2049F31B">Configuring Logging Properties</a></p>
</div>
</div>
</div>
</div>
</div>
<a id="GIORA983"></a>
<div class="props_rev_3"><a id="GUID-E1E99DEB-443E-431C-B6C0-B57DC72F567B"></a>
<h2 id="GIORA-GUID-E1E99DEB-443E-431C-B6C0-B57DC72F567B" class="sect2"><span class="enumeration_section">3.3</span> Enabling Oracle GoldenGate in the Database</h2>
<div>
<div class="section">
<p>The database services required to support Oracle GoldenGate capture and apply must be enabled explicitly for an Oracle 11.2.0.4 or greater database. This is required for all modes of Extract and Replicat.</p>
<p>To enable Oracle GoldenGate, set the following database initialization parameter. All instances in Oracle RAC must have the same setting.</p>
<pre dir="ltr">
ENABLE_GOLDENGATE_REPLICATION=true
</pre>
<p>For more information about this parameter, see <a class="olink REFRN-GUID-6F1C3203-0AA0-4AF1-921C-A027DD7CB6A9" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E66315-01&amp;id=REFRN-GUID-6F1C3203-0AA0-4AF1-921C-A027DD7CB6A9">Initialization Parameters</a>.</p>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-database-oracle-goldengate.htm#GUID-F069C961-4805-47ED-8D3F-E393541CB5FC" title="This chapter contains steps to take so that the source Oracle Database is configured properly to support the capture of transactional changes.">Preparing the Database for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<a id="GIORA375"></a><a id="GIORA374"></a>
<div class="props_rev_3"><a id="GUID-46F53DBD-CD36-42F0-8C0B-2D731C3ECB08"></a>
<h2 id="GIORA-GUID-46F53DBD-CD36-42F0-8C0B-2D731C3ECB08" class="sect2"><span class="enumeration_section">3.4</span> Setting Flashback Query</h2>
<div>
<div class="section">
<p>To process certain update records, Extract fetches additional row data from the source database. Oracle GoldenGate fetches data for the following:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>User-defined types</p>
</li>
<li>
<p>Nested tables</p>
</li>
<li>
<p>XMLType objects</p>
</li>
</ul>
<p>By default, Oracle GoldenGate uses Flashback Query to fetch the values from the undo (rollback) tablespaces. That way, Oracle GoldenGate can reconstruct a read-consistent row image as of a specific time or SCN to match the redo record.</p>
<p>For best fetch results, configure the source database as follows:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Set a sufficient amount of redo retention by setting the Oracle initialization parameters <code class="codeph">UNDO_MANAGEMENT</code> and <code class="codeph">UNDO_RETENTION</code> as follows (in seconds).</span>
<div>
<pre dir="ltr">
UNDO_MANAGEMENT=AUTO

UNDO_RETENTION=86400 

UNDO_RETENTION can be adjusted upward in high-volume environments.
</pre></div>
</li>
<li class="stepexpand"><span>Calculate the space that is required in the undo tablespace by using the following formula.</span>
<div>
<pre dir="ltr">
<span class="italic">undo_space</span> = UNDO_RETENTION * <span class="italic">UPS</span> + <span class="italic">overhead</span>
</pre>
<p>Where:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">undo_space</code></span> is the number of undo blocks.</p>
</li>
<li>
<p><code class="codeph">UNDO_RETENTION</code> is the value of the <code class="codeph">UNDO_RETENTION</code> parameter (in seconds).</p>
</li>
<li>
<p><span class="italic"><code class="codeph">UPS</code></span> is the number of undo blocks for each second.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">overhead</code></span> is the minimal overhead for metadata (transaction tables, etc.).</p>
</li>
</ul>
<p>Use the system view <code class="codeph">V$UNDOSTAT</code> to estimate <span class="italic"><code class="codeph">UPS</code></span> and <span class="italic"><code class="codeph">overhead</code></span>.</p>
</div>
</li>
<li class="stepexpand"><span>For tables that contain <code class="codeph">LOBs</code>, do one of the following:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>Set the <code class="codeph">LOB</code> storage clause to <code class="codeph">RETENTION</code>. This is the default for tables that are created when <code class="codeph">UNDO_MANAGEMENT</code> is set to <code class="codeph">AUTO</code>.</p>
</li>
<li>
<p>If using <code class="codeph">PCTVERSION</code> instead of <code class="codeph">RETENTION</code>, set <code class="codeph">PCTVERSION</code> to an initial value of 25. You can adjust it based on the fetch statistics that are reported with the <code class="codeph">STATS EXTRACT</code> command (see <a href="preparing-database-oracle-goldengate.htm#GUID-46F53DBD-CD36-42F0-8C0B-2D731C3ECB08__BABBEDDF" title="This table describes the Oracle GoldenGate parameters and commands to manage fetching.">Table 3-2</a>). If the value of the <code class="codeph">STAT_OPER_ROWFETCH</code> <code class="codeph">CURRENTBYROWID</code> or <code class="codeph">STAT_OPER_ROWFETCH_CURRENTBYKEY</code> field in these statistics is high, increase <code class="codeph">PCTVERSION</code> in increments of 10 until the statistics show low values.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Grant either of the following privileges to the Oracle GoldenGate Extract user:</span>
<div>
<pre dir="ltr">
GRANT FLASHBACK ANY TABLE TO <span class="italic">db_user</span>

GRANT FLASHBACK ON <span class="italic">schema.table</span> TO <span class="italic">db_user</span>
</pre></div>
</li>
</ol>
<div class="section">
<p>Oracle GoldenGate provides the following parameters to manage fetching.</p>
<div class="tblformalwide" id="GUID-46F53DBD-CD36-42F0-8C0B-2D731C3ECB08__BABBEDDF">
<p class="titleintable">Table 3-2 Oracle GoldenGate Parameters and Commands to Manage Fetching</p>
<table class="cellalignment389" title="Oracle GoldenGate Parameters and Commands to Manage Fetching" summary="This table describes the Oracle GoldenGate parameters and commands to manage fetching.">
<thead>
<tr class="cellalignment378">
<th class="cellalignment417" id="d13482e1057">Parameter or Command</th>
<th class="cellalignment418" id="d13482e1060">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment378">
<td class="cellalignment419" id="d13482e1065" headers="d13482e1057">
<p><code class="codeph">STATS EXTRACT</code> command with <code class="codeph">REPORTFETCH</code> option</p>
</td>
<td class="cellalignment420" headers="d13482e1065 d13482e1060">
<p>Shows Extract fetch statistics on demand.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment419" id="d13482e1077" headers="d13482e1057">
<p><code class="codeph">STATOPTIONS</code> parameter with <code class="codeph">REPORTFETCH</code> option</p>
</td>
<td class="cellalignment420" headers="d13482e1077 d13482e1060">
<p>Sets the <code class="codeph">STATS EXTRACT</code> command so that it always shows fetch statistics.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment419" id="d13482e1092" headers="d13482e1057">
<p><code class="codeph">MAXFETCHSTATEMENTS</code> parameter</p>
</td>
<td class="cellalignment420" headers="d13482e1092 d13482e1060">
<p>Controls the number of open cursors for prepared queries that Extract maintains in the source database, and also for <code class="codeph">SQLEXEC</code> operations.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment419" id="d13482e1104" headers="d13482e1057">
<p><code class="codeph">MAXFETCHSTATEMENTS</code> parameter</p>
</td>
<td class="cellalignment420" headers="d13482e1104 d13482e1060">
<p>Controls the default fetch behavior of Extract: whether Extract performs a flashback query or fetches the current image from the table.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment419" id="d13482e1113" headers="d13482e1057">
<p><code class="codeph">FETCHOPTIONS</code> parameter with the <code class="codeph">USELATESTVERSION</code> or <code class="codeph">NOUSELATESTVERSION</code> option</p>
</td>
<td class="cellalignment420" headers="d13482e1113 d13482e1060">
<p>Handles the failure of an Extract flashback query, such as if the undo retention expired or the structure of a table changed. Extract can fetch the current image from the table or ignore the failure.</p>
</td>
</tr>
<tr class="cellalignment378">
<td class="cellalignment419" id="d13482e1128" headers="d13482e1057">
<p><code class="codeph">REPFETCHEDCOLOPTIONS</code> parameter</p>
</td>
<td class="cellalignment420" headers="d13482e1128 d13482e1060">
<p>Controls the response by Replicat when it processes trail records that include fetched data or column-missing conditions.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-database-oracle-goldengate.htm#GUID-F069C961-4805-47ED-8D3F-E393541CB5FC" title="This chapter contains steps to take so that the source Oracle Database is configured properly to support the capture of transactional changes.">Preparing the Database for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
<a id="GIORA234"></a>
<div class="props_rev_3"><a id="GUID-F16C203E-CB16-44EC-A73B-6C9052A6A100"></a>
<h2 id="GIORA-GUID-F16C203E-CB16-44EC-A73B-6C9052A6A100" class="sect2"><span class="enumeration_section">3.5</span> Managing Server Resources</h2>
<div>
<div class="section">
<p>In integrated mode, Extract interacts with an underlying logmining server in the source database and Replicat interacts with an inbound server in the target database. This section provides guidelines for managing the shared memory consumed by the these servers.</p>
<p>The shared memory that is used by the servers comes from the Streams pool portion of the System Global Area (SGA) in the database. Therefore, you must set the database initialization parameter <code class="codeph">STREAMS_POOL_SIZE</code> high enough to keep enough memory available for the number of Extract and Replicat processes that you expect to run in integrated mode. Note that Streams pool is also used by other components of the database (like Oracle Streams, Advanced Queuing, and Datapump export/import), so make certain to take them into account while sizing the Streams pool for Oracle GoldenGate.</p>
<p>By default, one integrated capture Extract requests the logmining server to run with <code class="codeph">MAX_SGA_SIZE</code> of 1GB. Thus, if you are running three Extracts in integrated capture mode in the same database instance, you need at least 3 GB of memory allocated to the Streams pool. As a best practice, keep 25 percent of the Streams pool available. For example, if there are 3 Extracts in integrated capture mode, set <code class="codeph">STREAMS_POOL_SIZE</code> for the database to the following value:</p>
<pre dir="ltr">
3 GB * 1.25 = 3.75 GB
</pre></div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="preparing-database-oracle-goldengate.htm#GUID-F069C961-4805-47ED-8D3F-E393541CB5FC" title="This chapter contains steps to take so that the source Oracle Database is configured properly to support the capture of transactional changes.">Preparing the Database for Oracle GoldenGate</a></p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment377">
<tr>
<td class="cellalignment396">
<table class="cellalignment382">
<tr>
<td class="cellalignment381"><a href="installing-oracle-goldengate.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment381"><a href="establishing-oracle-goldengate-credentials.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2010, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment398">
<table class="cellalignment380">
<tr>
<td class="cellalignment381"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment381"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
