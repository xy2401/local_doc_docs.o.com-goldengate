<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Integrating Data</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="You can integrate only the data you require by using parameters, clauses, column mapping, and functions." />
<meta name="keywords" content="records, selecting, columns, comparing, mapping, rules for, tables, dissimilar, mapping, tokens, user, using, default, column mapping" />
<meta name="dcterms.created" content="2018-06-07T00:11:41Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Administering Oracle GoldenGate for HP NonStop (Guardian)" />
<meta name="dcterms.identifier" content="E57712-04" />
<meta name="dcterms.isVersionOf" content="GNSAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2014, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/goldengate/ns1221/gg-nsk/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="configuring-custom-operations.htm" title="Previous" type="text/html" />
<link rel="Next" href="managing-and-monitoring.htm" title="Next" type="text/html" />
<link rel="alternate" href="GNSAD.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-C4B02280-6DD9-4BBB-B167-A80EF43FDB74"></a> <span id="PAGE" style="display:none;">11/15</span> <!-- End Header -->
<a id="GNSAD369"></a><a id="GNSAD368"></a>
<h1 id="GNSAD-GUID-C4B02280-6DD9-4BBB-B167-A80EF43FDB74" class="sect1"><span class="enumeration_chapter">8</span> Integrating Data</h1>
<div>
<div><span>You can integrate only the data you require by using parameters, clauses, column mapping, and functions.</span></div>
<p>This topic includes the following sections:</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="integrating-data.htm#GUID-8314A496-CD08-4005-A8A4-105C94E0532E">Selecting Records</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-A4DB6C05-6B44-4C58-9A4E-C98F2F2FB0CA">Column Mapping</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-57F0B301-5D5E-483A-A6BE-1CEF0B2A4FA3">Field Conversion Functions</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-E8F182AD-0FF9-41F6-A2CF-31EB25F3CDEE">Retrieving Before Values</a><br /></li>
</ul>
</div>
<a id="GNSAD370"></a>
<div class="props_rev_3"><a id="GUID-8314A496-CD08-4005-A8A4-105C94E0532E"></a>
<h2 id="GNSAD-GUID-8314A496-CD08-4005-A8A4-105C94E0532E" class="sect2">Selecting Records</h2>
<div>
<p>Y<a id="d22150e66" class="indexterm-anchor"></a>ou can select specific records to extract or replicate using the <code class="codeph">FILTER</code> and <code class="codeph">WHERE</code> clauses of the <code class="codeph">TABLE</code> or <code class="codeph">MAP</code> parameters. <code class="codeph">FILTER</code> is the more powerful tool, letting you filter records on a variety of criteria. You may specify multiple filters in one <code class="codeph">FILE</code>, <code class="codeph">TABLE</code>, or <code class="codeph">MAP</code> statement. However, <code class="codeph">WHERE</code> is a quick, simple way to select a record that matches a single criteria. You may only have one <code class="codeph">WHERE</code> clause per statement.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="integrating-data.htm#GUID-9AD5AA35-6D88-4891-B42E-322B28EA99DD">Selecting Records with FILTER</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-C5F3D5C2-70CC-4EFE-9BC0-E23E03B35CA9">Selecting Records with WHERE</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-C4B02280-6DD9-4BBB-B167-A80EF43FDB74" title="You can integrate only the data you require by using parameters, clauses, column mapping, and functions.">Integrating Data</a></p>
</div>
</div>
</div>
<a id="GNSAD371"></a>
<div class="props_rev_3"><a id="GUID-9AD5AA35-6D88-4891-B42E-322B28EA99DD"></a>
<h3 id="GNSAD-GUID-9AD5AA35-6D88-4891-B42E-322B28EA99DD" class="sect3">Selecting Records with FILTER</h3>
<div>
<p>Use the <a id="d22150e150" class="indexterm-anchor"></a><a id="d22150e152" class="indexterm-anchor"></a><code class="codeph">FILTER</code> clause of <code class="codeph">FILE</code>, <code class="codeph">TABLE</code>, or <code class="codeph">MAP</code> to select specific records within a file or table for Extract or Replicat. <code class="codeph">FILTER</code> uses the Oracle GoldenGate field conversion functions to evaluate whether to process a record. For example, the following statement extracts records in which the price multiplied by the amount exceeds <code class="codeph">10000</code>:</p>
<pre dir="ltr">
TABLE $DATA.MASTER.CUSTOMER, FILTER ((PRODUCT_PRICE*PRODUCT_AMOUNT)&gt;10000);
</pre>
<p>In another example, the following extracts records containing a string <code class="codeph">JOE</code>:</p>
<pre dir="ltr">
TABLE $DATA.MASTER.CUSTOMER, FILTER (@STRFIND(NAME, "JOE")&gt;0);
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-8314A496-CD08-4005-A8A4-105C94E0532E">Selecting Records</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD372"></a>
<div class="props_rev_3"><a id="GUID-C5F3D5C2-70CC-4EFE-9BC0-E23E03B35CA9"></a>
<h3 id="GNSAD-GUID-C5F3D5C2-70CC-4EFE-9BC0-E23E03B35CA9" class="sect3">Selecting Records with WHERE</h3>
<div>
<p>Use the <a id="d22150e210" class="indexterm-anchor"></a><code class="codeph">WHERE</code> clause in <code class="codeph">TABLE</code> or <code class="codeph">MAP</code> to select specific records within a table to be extracted or replicated.</p>
<p>The <code class="codeph">WHERE</code> clause consists of the following elements and must be enclosed in parentheses.</p>
<div class="tblformal" id="GUID-C5F3D5C2-70CC-4EFE-9BC0-E23E03B35CA9__GUID-1B672F05-4607-41DE-B301-5EDB211FC04C">
<table class="cellalignment198" summary="This table lists the elements of the WHERE clause and gives an example of each element.">
<thead>
<tr class="cellalignment192">
<th class="cellalignment232" id="d22150e234">Element</th>
<th class="cellalignment233" id="d22150e237">Example</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e242" headers="d22150e234">
<p>Columns from the row</p>
</td>
<td class="cellalignment235" headers="d22150e242 d22150e237">
<p><code class="codeph">PRODUCT_AMT</code></p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e250" headers="d22150e234">
<p>Numeric values</p>
</td>
<td class="cellalignment235" headers="d22150e250 d22150e237">
<pre dir="ltr">
-123, 5500.123
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e257" headers="d22150e234">
<p>Literal strings enclosed in quotation marks</p>
</td>
<td class="cellalignment235" headers="d22150e257 d22150e237">
<pre dir="ltr">
 "AUTO", "Ca"
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e264" headers="d22150e234">
<p>Column tests</p>
</td>
<td class="cellalignment235" headers="d22150e264 d22150e237">
<p><code class="codeph">@NULL</code>, <code class="codeph">@PRESENT</code>, <code class="codeph">@ABSENT</code> (column is null, present or absent in the record)</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e279" headers="d22150e234">
<p>Comparison operators</p>
</td>
<td class="cellalignment235" headers="d22150e279 d22150e237">
<pre dir="ltr">
 =, &lt;&gt;, &gt;, &lt;, &gt;=, &lt;=
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e286" headers="d22150e234">
<p>Conjunctive operators</p>
</td>
<td class="cellalignment235" headers="d22150e286 d22150e237">
<pre dir="ltr">
AND, OR
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e293" headers="d22150e234">
<p>Grouping parentheses</p>
</td>
<td class="cellalignment235" headers="d22150e293 d22150e237">
<p>open and close parentheses <code class="codeph">()</code> for logical grouping</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><a id="d22150e303" class="indexterm-anchor"></a>Arithmetic operators and floating point data types are not supported. To perform more complex selection conditions, use <code class="codeph">FILTER</code>.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="integrating-data.htm#GUID-CE3259E1-F105-4749-99B4-14FC8E75209D">Comparing Fields</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-9788AA4E-5CA9-4D63-96B7-9F5A66E7D8BA">Compressed Update Considerations</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-81B24E18-0F7F-4681-8049-CE580F9D226C">Testing for NULL Values</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-8314A496-CD08-4005-A8A4-105C94E0532E">Selecting Records</a></p>
</div>
</div>
</div>
<a id="GNSAD373"></a>
<div class="props_rev_3"><a id="GUID-CE3259E1-F105-4749-99B4-14FC8E75209D"></a>
<h4 id="GNSAD-GUID-CE3259E1-F105-4749-99B4-14FC8E75209D" class="sect4">Comparing Fields</h4>
<div>
<p>Ensure that the variable and value you specify in a comparison match appropriately. Compare:</p>
<ul style="list-style-type: disc;">
<li>
<p>Characters with literal string</p>
</li>
<li>
<p>Numeric fields with numeric values, which can include a sign and decimal point</p>
</li>
<li>
<p><a id="d22150e372" class="indexterm-anchor"></a>SQL datetime types to literal strings, using the format in which the field is retrieved by a program</p>
</li>
</ul>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-C5F3D5C2-70CC-4EFE-9BC0-E23E03B35CA9">Selecting Records with WHERE</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD374"></a>
<div class="props_rev_3"><a id="GUID-9788AA4E-5CA9-4D63-96B7-9F5A66E7D8BA"></a>
<h4 id="GNSAD-GUID-9788AA4E-5CA9-4D63-96B7-9F5A66E7D8BA" class="sect4">Compressed Update Considerations</h4>
<div>
<p>When a compressed update record is encountered for a table, only part of the record image is available for the condition evaluation. By default, when a column required by the condition evaluation is missing, the record is ignored and output to the discard file, and a warning is issued.</p>
<ul style="list-style-type: disc;">
<li>
<p>Use only columns that appear in the primary key of the record, since key fields are always present in compressed records.</p>
</li>
<li>
<p>Test for a column's presence first, then for the column's value.</p>
</li>
</ul>
<p>To test for a column's presence, use the following syntax:</p>
<pre dir="ltr">
<span class="variable">field</span> [= | &lt;&gt;] [@PRESENT | @ABSENT]
</pre>
<p>The following example returns all records when the <code class="codeph">AMOUNT</code> field is over <code class="codeph">10000</code> and does not cause a record to be discarded when <code class="codeph">AMOUNT</code> is absent.</p>
<pre dir="ltr">
WHERE (AMOUNT = @PRESENT AND AMOUNT &gt; 10000)
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-C5F3D5C2-70CC-4EFE-9BC0-E23E03B35CA9">Selecting Records with WHERE</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD375"></a>
<div class="props_rev_3"><a id="GUID-81B24E18-0F7F-4681-8049-CE580F9D226C"></a>
<h4 id="GNSAD-GUID-81B24E18-0F7F-4681-8049-CE580F9D226C" class="sect4">Testing for NULL Values</h4>
<div>
<p>Evaluate SQL columns for <a id="d22150e458" class="indexterm-anchor"></a><a id="d22150e460" class="indexterm-anchor"></a><code class="codeph">NULL</code> values with the <code class="codeph">@NULL</code> clause.</p>
<p>The following test returns <code class="codeph">TRUE</code> if the column is <code class="codeph">NULL</code>, and <code class="codeph">FALSE</code> for all other cases (including a column missing from the record).</p>
<pre dir="ltr">
WHERE (AMOUNT = @NULL)
</pre>
<p>The following test returns <code class="codeph">TRUE</code> only if the column is present in the record and not <code class="codeph">NULL</code>.</p>
<pre dir="ltr">
WHERE (AMOUNT = @PRESENT AND AMOUNT &lt;&gt; @NULL)
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-C5F3D5C2-70CC-4EFE-9BC0-E23E03B35CA9">Selecting Records with WHERE</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<a id="GNSAD376"></a>
<div class="props_rev_3"><a id="GUID-A4DB6C05-6B44-4C58-9A4E-C98F2F2FB0CA"></a>
<h2 id="GNSAD-GUID-A4DB6C05-6B44-4C58-9A4E-C98F2F2FB0CA" class="sect2">Column Mapping</h2>
<div>
<p>Oracle GoldenGate provides the capability to transform data between two dissimilarly structured database tables or files. These features are implemented with the <code class="codeph">COLMAP</code> clause in the <code class="codeph">TABLE</code> or <code class="codeph">MAP</code> parameters described in this chapter.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-C4B02280-6DD9-4BBB-B167-A80EF43FDB74" title="You can integrate only the data you require by using parameters, clauses, column mapping, and functions.">Integrating Data</a></p>
</div>
</div>
</div>
<a id="GNSAD377"></a>
<div class="props_rev_3"><a id="GUID-43EFB16C-4C30-4264-8EFD-303C201B8755"></a>
<h3 id="GNSAD-GUID-43EFB16C-4C30-4264-8EFD-303C201B8755" class="sect3">Mapping Between Different Database Structures</h3>
<div>
<div class="section">
<p>Using Oracle GoldenGate, you can transform data to accommodate differences in source and target database structures.</p>
<p>For example:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>The source is a NonStop Enscribe file (<code class="codeph">ACCTFL</code>), while the target is a SQL table (<code class="codeph">ACCTTAB</code>).</p>
</li>
<li>
<p>75 fields exist in <code class="codeph">ACCTFL</code>, while <code class="codeph">ACCTTAB</code> contains only nine columns.</p>
</li>
<li>
<p>Five columns in <code class="codeph">ACCTTAB</code> have corresponding field names in the <code class="codeph">ACCTFL</code> (<code class="codeph">ADDRESS</code>, <code class="codeph">CITY</code>, <code class="codeph">STATE</code>, <code class="codeph">ZIPCODE</code>, <code class="codeph">SOCIAL_SECURITY_NO</code>).</p>
</li>
<li>
<p>A ten digit phone number field in <code class="codeph">ACCTFL</code> corresponds to separate area code, prefix, and phone number columns in <code class="codeph">ACCTTAB</code>.</p>
</li>
<li>
<p>A date column in <code class="codeph">ACCTTAB</code> is computed from year, month and day fields in <code class="codeph">ACCTFL</code>.</p>
</li>
</ul>
<p>In this scenario, you can design a column map in a Replicat parameter file <code class="codeph">MAP</code> statement on NonStop. For example:</p>
<pre dir="ltr">
MAP $DATA.MASTER.ACCTFL, DEF ACCOUNT-REC,
TARGET $DATA.MASTER.ACCTTAB,
COLMAP (
   USEDEFAULTS,
   NAME = CUST-NAME,
   TRANSACTION_DATE = @DATE ("YYYY-MM-DD",
                      "YY", TRDATE.YEAR,
                      "MM", TRDATE.MONTH,
                      "DD", TRDATE.DAY),
   AREA_CODE = @STREXT (PHONE, 1, 3),
   PHONE_PREFIX = @STREXT (PHONE, 4, 6),
   PHONE_NUMBER = @STREXT (PHONE, 7, 10)
);
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">This statement is composed of the following elements:</p>
<ol>
<li>
<p>The source file (<code class="codeph">ACCTFL</code>) and corresponding DDL definition for <code class="codeph">ACCOUNT-REC</code>.</p>
</li>
<li>
<p>The target table name (<code class="codeph">ACCTTAB</code>). No definition is required for the SQL table since it is retrieved automatically from a catalog.</p>
</li>
<li>
<p>The <code class="codeph">COLMAP</code> parameter.</p>
</li>
<li>
<p><code class="codeph">USEDEFAULTS</code>, which directs Replicat to move all fields in <code class="codeph">ACCTFL</code> that have matching columns in <code class="codeph">ACCTTAB</code> into the <code class="codeph">ACCTTAB</code> table. Data translation between different data types is automatic.</p>
</li>
<li>
<p>An explicit assignment of the <code class="codeph">CUST-NAME</code> field to the <code class="codeph">NAME</code> column. This is required because the names are different.</p>
</li>
<li>
<p>A date calculation for <code class="codeph">TRANSACTION_DATE</code> based on three fields in <code class="codeph">ACCTFL</code>.</p>
</li>
<li>
<p>Extracting parts of <code class="codeph">PHONE-NO</code> into <code class="codeph">AREA_CODE</code>, <code class="codeph">PHONE_PREFIX</code> and <code class="codeph">PHONE_NUMBER</code>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="integrating-data.htm#GUID-2BBD7B0F-1700-4AA6-856B-AE20DBD1BD26">Data Type Conversions</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-3DD25C83-1928-49DC-92E0-990A4E0CF81F">Oracle GoldenGate User Tokens</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-5B2F375E-EBCC-46D8-AA2A-6438735E6281">Populating User Tokens in the Trail Header</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-DBA433B9-B0DF-4213-8298-523F0D209D3E">Retrieving Values</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-4E831FDA-452A-446A-939F-54F7C157BCDF">Default Mapping</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-08E0460B-93E5-460D-9DAE-8782D7474E64">Mapping Examples</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-BE302D41-93EC-4244-A617-DCD3A844A6CE">Legal Column Mapping</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-D8B40368-40C4-4F1F-8A4E-BA262C40E935">Dangerous Mapping if AUDITCOMPRESS Used on Source File</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-3640A1DC-87D9-4015-A067-FD495C205DFD">Using Constants, Taking Default Values.</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-A4DB6C05-6B44-4C58-9A4E-C98F2F2FB0CA">Column Mapping</a></p>
</div>
</div>
</div>
<a id="GNSAD378"></a>
<div class="props_rev_3"><a id="GUID-2BBD7B0F-1700-4AA6-856B-AE20DBD1BD26"></a>
<h4 id="GNSAD-GUID-2BBD7B0F-1700-4AA6-856B-AE20DBD1BD26" class="sect4">Data Type Conversions</h4>
<div>
<p>Numeric fields are <a id="d22150e803" class="indexterm-anchor"></a><a id="d22150e805" class="indexterm-anchor"></a>converted from one type and scale to match the type and scale of the target. If the scale of the source is larger than that of the target, the number is truncated on the right. If the target scale is larger than the source, the number is padded with zeros.</p>
<p>Varchar and character columns can accept other character, varchar, group, and datetime columns, or string literals enclosed in quotation marks. If the target character column is smaller than that of the source, the character column is truncated on the right.</p>
<p><a id="d22150e811" class="indexterm-anchor"></a>Date-time fields can accept datetime and character columns, as well as string literals. If you attempt to map a character into a datetime column, make sure it conforms to the Oracle GoldenGate external SQL format (<code class="codeph">YYYY-MM-DD:HH:MI:SS.FFFFFF</code>). Required precision varies according to data type and target platform. Datetime columns are truncated on the right as necessary. If the source column is not as long as the target, the column is extended on the right with the values for the current date and time.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD380"></a><a id="GNSAD381"></a><a id="GNSAD379"></a>
<div class="props_rev_3"><a id="GUID-3DD25C83-1928-49DC-92E0-990A4E0CF81F"></a>
<h4 id="GNSAD-GUID-3DD25C83-1928-49DC-92E0-990A4E0CF81F" class="sect4">Oracle GoldenGate User Tokens</h4>
<div>
<div class="section">
<p>Oracle GoldenGate user tokens let you capture data and values for use in data integration. User tokens are composed of alphanumeric data from your source system, database, transactions, and/or records. They can also transfer values into other user tokens generated by queries, procedures, or other called functions.</p>
<div class="infobox-note" id="GUID-3DD25C83-1928-49DC-92E0-990A4E0CF81F__GUID-A206437B-E91B-4371-AC2C-82FB887C7E79">
<p class="notep1">Note:</p>
<p>The user token area is limited to 2000 bytes of information. Token names, data length, and the data itself are all used to calculate the user token area size.</p>
</div>
<p>User tokens are stored in each record's trail header, and retrieved by the appropriate Oracle GoldenGate component.</p>
<p>The following tables outline types of data that appear in user tokens.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-3DD25C83-1928-49DC-92E0-990A4E0CF81F__GUID-E1E30C8A-F5DD-425F-8EF5-BF05BC3A8129">
<p class="titleintable">Table 8-1 Sample Environmental Data for User Tokens</p>
<table class="cellalignment198" title="Sample Environmental Data for User Tokens " summary="This table lists and describes the sample environmental data for user tokens.">
<thead>
<tr class="cellalignment192">
<th class="cellalignment236" id="d22150e871">Environmental Detail</th>
<th class="cellalignment237" id="d22150e874">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e879" headers="d22150e871">
<pre dir="ltr">
GROUPNAME
</pre></td>
<td class="cellalignment239" headers="d22150e879 d22150e874">
<p>Extract or Replicat group name.</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e886" headers="d22150e871">
<pre dir="ltr">
HOSTNAME
</pre></td>
<td class="cellalignment239" headers="d22150e886 d22150e874">
<p>Host name running the Extract or Replicat.</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e893" headers="d22150e871">
<pre dir="ltr">
OSUSERNAME
</pre></td>
<td class="cellalignment239" headers="d22150e893 d22150e874">
<p>The user name that started Extract or Replicat.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="tblformal" id="GUID-3DD25C83-1928-49DC-92E0-990A4E0CF81F__GUID-EB3E4419-01E7-4255-8E5B-D9D05382A57E">
<p class="titleintable">Table 8-2 Sample Header Details and Their Description</p>
<table class="cellalignment198" title="Sample Header Details and Their Description " summary="This table lists and describes the sample header details.">
<thead>
<tr class="cellalignment192">
<th class="cellalignment236" id="d22150e909">Header Detail</th>
<th class="cellalignment237" id="d22150e912">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e917" headers="d22150e909">
<pre dir="ltr">
BEFOREAFTERINDICATOR
</pre></td>
<td class="cellalignment239" headers="d22150e917 d22150e912">
<p>Before/after indicator</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e924" headers="d22150e909">
<pre dir="ltr">
COMMITTIMESTAMP
</pre></td>
<td class="cellalignment239" headers="d22150e924 d22150e912">
<p>Commit timestamp</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e931" headers="d22150e909">
<pre dir="ltr">
LOGPOSITION
</pre></td>
<td class="cellalignment239" headers="d22150e931 d22150e912">
<p>Log position</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e938" headers="d22150e909">
<pre dir="ltr">
LOGRBA
</pre></td>
<td class="cellalignment239" headers="d22150e938 d22150e912">
<p>Log RBA</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e945" headers="d22150e909">
<pre dir="ltr">
TABLENAME
</pre></td>
<td class="cellalignment239" headers="d22150e945 d22150e912">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e952" headers="d22150e909">
<pre dir="ltr">
OPTYPE
</pre></td>
<td class="cellalignment239" headers="d22150e952 d22150e912">
<p>Operation type</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e959" headers="d22150e909">
<pre dir="ltr">
RECORDLENGTH
</pre></td>
<td class="cellalignment239" headers="d22150e959 d22150e912">
<p>Record length</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment238" id="d22150e966" headers="d22150e909">
<pre dir="ltr">
TRANSACTIONINDICATOR
</pre></td>
<td class="cellalignment239" headers="d22150e966 d22150e912">
<p>Transaction indicator</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD382"></a>
<div class="props_rev_3"><a id="GUID-5B2F375E-EBCC-46D8-AA2A-6438735E6281"></a>
<h4 id="GNSAD-GUID-5B2F375E-EBCC-46D8-AA2A-6438735E6281" class="sect4">Populating User Tokens in the Trail Header</h4>
<div>
<div class="section">
<p>To populate user tokens in the trail header, you must include a <code class="codeph">TOKEN</code> clause on the <code class="codeph">FILE</code> or <code class="codeph">TABLE</code> parameter in the Extract parameter file. To do so, complete the following procedure:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Edit the Extract parameter file.</span>
<div>
<pre dir="ltr">
GGSCI&gt; TEDIT PARAMS EXTDEMO
</pre></div>
</li>
<li class="stepexpand"><span>Specify a table name</span>
<div>
<pre dir="ltr">
TABLE $DATA.MASTER.PRODUCT,
</pre></div>
</li>
<li class="stepexpand"><span>Enter the desired tokens. The <code class="codeph">@GETENV</code> function, quotation marks and comma delimiter are required.</span>
<div>
<pre dir="ltr">
TOKENS
  (
   TKN-GROUP-NAME   =@GETENV ("GGENVIRONMENT", "GROUPNAME"),
   TKN-HOST-NAME    =@GETENV ("GGENVIRONMENT", "HOSTNAME"),
   TKN-OS-USER      =@GETENV ("GGENVIRONMENT", "OSUSERNAME"),
   TKN-BA           =@GETENV ("GGHEADER", "BEFOREAFTERINDICATOR"),
   TKN-COMMIT-TS    =@GETENV ("GGHEADER", "COMMITTIMESTAMP"),
   TKN-LOG-POSITION =@GETENV ("GGHEADER", "LOGPOSITION"),
   TKN-LOG-RBA      =@GETENV ("GGHEADER", "LOGRBA"),
   TKN-TABLE        =@GETENV ("GGHEADER", "TABLENAME"),
   TKN-OP-TYPE      =@GETENV ("GGHEADER", "OPTYPE"),
   TKN-REC-LEN      =@GETENV ("GGHEADER", "RECORDLENGTH"),
   TKN-TRNS-IND     =@GETENV ("GGHEADER", "TRANSACTION INDICATOR"),
  );
</pre></div>
</li>
<li class="stepexpand"><span>Exit the parameter file.</span></li>
</ol>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD383"></a>
<div class="props_rev_3"><a id="GUID-DBA433B9-B0DF-4213-8298-523F0D209D3E"></a>
<h4 id="GNSAD-GUID-DBA433B9-B0DF-4213-8298-523F0D209D3E" class="sect4">Retrieving Values</h4>
<div>
<p>To retrieve values, you must include a <code class="codeph">MAP</code> parameter and a <code class="codeph">COLMAP</code> clause in the Replicat parameter file, then use the <code class="codeph">@TOKEN</code> function to specify the values to retrieve.</p>
<pre dir="ltr">
MAP $DATA.MASTER.PRODUCT, TARGET $DATA.MASTER.PRODUCT_CHANGES,
  COLMAP (USEDEFAULTS,
          SOURCE_GROUP      =@TOKEN ("TKN-GROUP-NAME"),
          SOURCE_HOST       =@TOKEN ("TKN-HOST-NAME"),
          SOURCE_USER       =@TOKEN ("TKN-OS-USER"),
          BEFORE_AFTER_IND  =@TOKEN ("TKN-BA"),
          TIMESTAMP         =@TOKEN ("TKN-COMMIT-TS"),
          SOURCE_TABLE      =@TOKEN ("TKN-TABLE"),
          IO_TYPE           =@TOKEN ("TKN-OP-TYPE"));
</pre>
<p>The <code class="codeph">@TOKEN</code> function requires quotation marks.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD384"></a>
<div class="props_rev_3"><a id="GUID-4E831FDA-452A-446A-939F-54F7C157BCDF"></a>
<h4 id="GNSAD-GUID-4E831FDA-452A-446A-939F-54F7C157BCDF" class="sect4">Default Mapping</h4>
<div>
<p>When you specify <code class="codeph">COLMAP USEDEFAULTS</code>, Extract maps columns in the source table to columns in the target with the same name. At startup, Extract outputs column names that match and will map to each other.</p>
<p>The <code class="codeph">USEDEFAULTS</code> parameter allows matching columns to be mapped, plus additional columns. This can be useful when the source and target definitions are similar but not identical.</p>
<p>If you set up global column mapping rules with <code class="codeph">COLMATCH</code> parameters, you can map columns with different names to each other using default mapping. See the Extract and Replicat <code class="codeph">COLMATCH</code> parameter for more details.</p>
<p>When unspecified or no match is found in a default map, a target field defaults to one of the following:</p>
<div class="tblformal" id="GUID-4E831FDA-452A-446A-939F-54F7C157BCDF__GUID-C762571F-2E6D-4073-92FA-34AB3EE6766D">
<table class="cellalignment198" summary="This table lists the column names and their values used by the USEDEFAULTS parameter.">
<thead>
<tr class="cellalignment192">
<th class="cellalignment240" id="d22150e1137">Column</th>
<th class="cellalignment241" id="d22150e1140">Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment192">
<td class="cellalignment242" id="d22150e1145" headers="d22150e1137">
<p>Numeric</p>
</td>
<td class="cellalignment243" headers="d22150e1145 d22150e1140">
<p>Zero</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment242" id="d22150e1152" headers="d22150e1137">
<p>Character or varchar</p>
</td>
<td class="cellalignment243" headers="d22150e1152 d22150e1140">
<p>Spaces</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment242" id="d22150e1159" headers="d22150e1137">
<p>Datetime</p>
</td>
<td class="cellalignment243" headers="d22150e1159 d22150e1140">
<p>Current date and time</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment242" id="d22150e1166" headers="d22150e1137">
<p>Columns that can take a <code class="codeph">NULL</code> value</p>
</td>
<td class="cellalignment243" headers="d22150e1166 d22150e1140">
<p><code class="codeph">NULL</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>If the target table contains names corresponding to the transactional columns described above, the special column values are mapped to the target record format.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD385"></a>
<div class="props_rev_3"><a id="GUID-08E0460B-93E5-460D-9DAE-8782D7474E64"></a>
<h4 id="GNSAD-GUID-08E0460B-93E5-460D-9DAE-8782D7474E64" class="sect4">Mapping Examples</h4>
<div>
<p>The following is the source Enscribe DDL for the examples in this section.</p>
<pre dir="ltr">
RECORD PRODUCT-REC.
FILE IS PRODDAT KEY-SEQUENCED AUDIT.
05 PROD-KEY.
   10 CODE1 PIC X(2).
   10 CODE2 PIC 9(2).
05 PROD-INDEX1.
   10 PRICE PIC 9(7)V9(2) COMP.
   10 CODE1 PIC X(2).
   10 CODE2 PIC 9(2).
05 PROD-INDEX2.
   10 INVENTORY PIC 9(5).
   10 CODE1 PIC X(2).
   10 CODE2 PIC 9(2).
05 DESC     PIC X(40).
KEY IS PROD-KEY.
END.
</pre>
<p>The following is the target SQL DDL for the examples in this section.</p>
<pre dir="ltr">
Target SQL DDL
CREATE TABLE PRODTAB
(
CODE CHAR(4) NOT NULL
, PRICE NUMERIC (8,2) NOT NULL
, INVENTORY DECIMAL (6)
, MANAGER CHAR (20) NOT NULL
, DESC VARCHAR (30)
, UPDATE_TIME DATETIME YEAR TO SECOND NOT NULL
, PRIMARY KEY (CODE)
);
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD386"></a>
<div class="props_rev_3"><a id="GUID-BE302D41-93EC-4244-A617-DCD3A844A6CE"></a>
<h4 id="GNSAD-GUID-BE302D41-93EC-4244-A617-DCD3A844A6CE" class="sect4">Legal Column Mapping</h4>
<div>
<p>Note that one can move a group level (<code class="codeph">PROD-KEY</code>) to a character field. This is feasible since <code class="codeph">CODE2</code> is a <code class="codeph">DISPLAY</code> field, not a <code class="codeph">COMP</code>. Also, the user does not have to qualify <code class="codeph">PRICE</code>, <code class="codeph">INVENTORY</code> or <code class="codeph">DESC</code> since they are all unique in the source definition. <code class="codeph">UPDATE_TIME</code> will default to the time at which <code class="codeph">EXTRACT</code> processes the record. <code class="codeph">PRICE</code> may be truncated since it has one more significant digit in the source field than in the target.</p>
<pre dir="ltr">
FILE $DAT11.OLDAPP.PRODFL,
DEF PRODUCT-REC,
TARGET $DATA6.NEWAPP.PRODTAB,
COLMAP
  (CODE      = PROD-KEY,
   PRICE     = PROD-INDEX1.PRICE,
   INVENTORY = INVENTORY,
   MANAGER   = "Jack Smith",
   DESC      = DESC);
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD387"></a>
<div class="props_rev_3"><a id="GUID-D8B40368-40C4-4F1F-8A4E-BA262C40E935"></a>
<h4 id="GNSAD-GUID-D8B40368-40C4-4F1F-8A4E-BA262C40E935" class="sect4">Dangerous Mapping if AUDITCOMPRESS Used on Source File</h4>
<div>
<p>Since this mapping takes the primary key value from a non-primary key source, it discards the result whenever a source record is updated without updating the price. In the following example, even if <code class="codeph">AUDITCOMPRESS</code> is used, updates can be delivered since the primary key is always present.</p>
<pre dir="ltr">
FILE $DAT11.OLDAPP.PRODFL,
DEF PRODUCT-REC,
TARGET $DATA6.NEWAPP.PRODTAB,
COLMAP
  (CODE      = PROD-INDEX1.CD1,
   PRICE     = PROD-INDEX1.PRICE,
   INVENTORY = INVENTORY,
   MANAGER   = "Unknown",
   DESC      = DESC);
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD388"></a>
<div class="sect4"><a id="GUID-3640A1DC-87D9-4015-A067-FD495C205DFD"></a>
<h4 id="GNSAD-GUID-3640A1DC-87D9-4015-A067-FD495C205DFD" class="sect4">Using Constants, Taking Default Values.</h4>
<div>
<p>This mapping sets <code class="codeph">PRICE</code> to zero and Manager to spaces since they are not null fields, and sets <code class="codeph">INVENTORY</code> and <code class="codeph">DESC</code> to <code class="codeph">NULL</code> since they can take null values.</p>
<pre dir="ltr">
TABLE $DAT11.OLDAPP.PRODFL,
DEF PRODUCT-REC,
TARGET $DATA6.NEWAPP.PRODTAB,
COLMAP
  (CODE = PROD-KEY,
   UPDATE_TIME = "2009-01-01:08:00:00");<a id="d22150e1345" class="indexterm-anchor"></a>
</pre></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-43EFB16C-4C30-4264-8EFD-303C201B8755">Mapping Between Different Database Structures</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<a id="GNSAD389"></a>
<div class="props_rev_3"><a id="GUID-57F0B301-5D5E-483A-A6BE-1CEF0B2A4FA3"></a>
<h2 id="GNSAD-GUID-57F0B301-5D5E-483A-A6BE-1CEF0B2A4FA3" class="sect2">Field Conversion Functions</h2>
<div>
<p>Using field <a id="d22150e1376" class="indexterm-anchor"></a><a id="d22150e1378" class="indexterm-anchor"></a><a id="d22150e1380" class="indexterm-anchor"></a><a id="d22150e1384" class="indexterm-anchor"></a>conversion functions, you can manipulate numbers, strings and source column or field values into the appropriate format for target columns.</p>
<p>See <a class="olink GNSRF-GUID-079394D4-2ED3-48F6-9C87-8793E0770BDA" target="_blank" href="../GNSRF/GUID-079394D4-2ED3-48F6-9C87-8793E0770BDA.htm#GNSRF-GUID-079394D4-2ED3-48F6-9C87-8793E0770BDA">Field Conversion Functions</a> for more information about column conversion functions.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="integrating-data.htm#GUID-C4E626A0-CDB1-4165-B73A-F9D473181A51">Function Arguments</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-2743467B-2434-4531-881D-D424E9B6C98F">Arithmetic Expressions</a><br /></li>
<li class="ulchildlink"><a href="integrating-data.htm#GUID-1BAD5898-9B72-4683-85C4-A073B569B749">Null, Invalid, and Missing Columns and Fields</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-C4B02280-6DD9-4BBB-B167-A80EF43FDB74" title="You can integrate only the data you require by using parameters, clauses, column mapping, and functions.">Integrating Data</a></p>
</div>
</div>
</div>
<a id="GNSAD390"></a>
<div class="props_rev_3"><a id="GUID-C4E626A0-CDB1-4165-B73A-F9D473181A51"></a>
<h3 id="GNSAD-GUID-C4E626A0-CDB1-4165-B73A-F9D473181A51" class="sect3">Function Arguments</h3>
<div>
<p>Column conversion functions can take one or more of the following parameters.</p>
<div class="tblformal" id="GUID-C4E626A0-CDB1-4165-B73A-F9D473181A51__GUID-9A36E296-5998-4A9E-AF80-3592FA93BF0E">
<table class="cellalignment198" summary="This table summarizes the parameters accepted by column conversion functions and gives an example of each parameter.">
<thead>
<tr class="cellalignment192">
<th class="cellalignment232" id="d22150e1451">Parameter</th>
<th class="cellalignment233" id="d22150e1454">Example</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e1459" headers="d22150e1451">
<p>A numeric constant</p>
</td>
<td class="cellalignment235" headers="d22150e1459 d22150e1454">
<pre dir="ltr">
 123
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e1466" headers="d22150e1451">
<p>A string constant</p>
</td>
<td class="cellalignment235" headers="d22150e1466 d22150e1454">
<pre dir="ltr">
"ABCD"
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e1473" headers="d22150e1451">
<p>A column or field from the source table or file</p>
</td>
<td class="cellalignment235" headers="d22150e1473 d22150e1454">
<pre dir="ltr">
PHONE-NO.AREA-CODE or COLUMN_3
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e1480" headers="d22150e1451">
<p>An arithmetic expression</p>
</td>
<td class="cellalignment235" headers="d22150e1480 d22150e1454">
<pre dir="ltr">
COL2 * 100
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e1487" headers="d22150e1451">
<p>A comparison expression</p>
</td>
<td class="cellalignment235" headers="d22150e1487 d22150e1454">
<pre dir="ltr">
COL3 &gt; 100 AND COL4 &gt; 0
</pre></td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment234" id="d22150e1494" headers="d22150e1451">
<p>A field conversion function</p>
</td>
<td class="cellalignment235" headers="d22150e1494 d22150e1454">
<p>its own parameters</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-note" id="GUID-C4E626A0-CDB1-4165-B73A-F9D473181A51__GUID-102442F8-C52E-404B-80F6-D83910EF8233">
<p class="notep1">Note:</p>
<p>Argument checking at run-time is not always strict and errors in argument passing are sometimes not detected until records are processed.</p>
</div>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-57F0B301-5D5E-483A-A6BE-1CEF0B2A4FA3">Field Conversion Functions</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD391"></a>
<div class="props_rev_3"><a id="GUID-2743467B-2434-4531-881D-D424E9B6C98F"></a>
<h3 id="GNSAD-GUID-2743467B-2434-4531-881D-D424E9B6C98F" class="sect3">Arithmetic Expressions</h3>
<div>
<p><a id="d22150e1530" class="indexterm-anchor"></a>Arithmetic expressions can be combinations of the following elements.</p>
<ul style="list-style-type: disc;">
<li>
<p>Numbers</p>
</li>
<li>
<p>Columns that contain numbers</p>
</li>
<li>
<p>Functions that return numbers</p>
</li>
<li>
<p>Arithmetic operators: <code class="codeph">+</code> (plus), - (minus), * (multiply), <code class="codeph">/</code> (divide), \&nbsp;(remainder)</p>
</li>
<li>
<p>Comparison operators: <code class="codeph">&gt;</code> (greater than), <code class="codeph">&gt;=</code> (greater than or equal), <code class="codeph">&lt;</code> (less than), <code class="codeph">&lt;=</code> (less than or equal), <code class="codeph">=</code> (equal), <code class="codeph">&lt;&gt;</code> (not equal)</p>
</li>
<li>
<p>Parentheses (for grouping results in the expression)</p>
</li>
<li>
<p>Conjunction operators: <code class="codeph">AND, OR</code></p>
</li>
</ul>
<p>To return the result of an arithmetic expression to a column, use the <a id="d22150e1586" class="indexterm-anchor"></a><code class="codeph">COMPUTE</code> function.</p>
<p>The <code class="codeph">COMPUTE</code> function is not required when an expression is passed as an argument, as in <code class="codeph">@STRNUM (AMOUNT1 + AMOUNT2, RIGHT)</code>.</p>
<p><code class="codeph">@STRNUM (@COMPUTE(AMOUNT1 + AMOUNT2), RIGHT)</code> would return the same result.</p>
<p>Arithmetic results derived from comparisons are zero (indicating <code class="codeph">FALSE</code>) or non-zero (indicating <code class="codeph">TRUE</code>).</p>
<p>When conjunction operators are involved in an expression, only the necessary part of the expression is evaluated. Once a statement is <code class="codeph">FALSE</code>, the rest of the expression is ignored. This can be valuable when evaluating fields that may be missing or null.</p>
<p>For example, assume the value of <code class="codeph">COL1</code> is <code class="codeph">25</code> and the value of <code class="codeph">COL2</code> is <code class="codeph">10</code>:</p>
<pre dir="ltr">
@COMPUTE (COL1 &gt; 0 AND COL2 &lt; 3) returns 0
@COMPUTE (COL1 &lt; 0 AND COL2 &lt; 3) returns 0 (and COL2 &lt; 3 is never evaluated)
@COMPUTE ((COL1 + COL2)/5) returns 7
</pre>
<p>See <a class="olink GNSRF-GUID-079394D4-2ED3-48F6-9C87-8793E0770BDA" target="_blank" href="../GNSRF/GUID-079394D4-2ED3-48F6-9C87-8793E0770BDA.htm#GNSRF-GUID-079394D4-2ED3-48F6-9C87-8793E0770BDA">Field Conversion Functions</a> for details about the functions.</p>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-57F0B301-5D5E-483A-A6BE-1CEF0B2A4FA3">Field Conversion Functions</a></p>
</div>
</div>
</div>
</div>
<a id="GNSAD393"></a><a id="GNSAD392"></a>
<div class="props_rev_3"><a id="GUID-1BAD5898-9B72-4683-85C4-A073B569B749"></a>
<h3 id="GNSAD-GUID-1BAD5898-9B72-4683-85C4-A073B569B749" class="sect3">Null, Invalid, and Missing Columns and Fields</h3>
<div>
<p>One problem encountered when calculating column values is that some data may be missing from the expression.</p>
<p><a href="integrating-data.htm#GUID-1BAD5898-9B72-4683-85C4-A073B569B749__BABIEIEA" title="This table lists and describes the Null, Invalid, and Missing columns and fields.">Table 8-3</a> summarizes the status conditions that the source columns or fields may assume.</p>
<div class="tblformal" id="GUID-1BAD5898-9B72-4683-85C4-A073B569B749__BABIEIEA">
<p class="titleintable">Table 8-3 Explanation of Null, Invalid, and Missing Columns and field</p>
<table class="cellalignment198" title="Explanation of Null, Invalid, and Missing Columns and field" summary="This table lists and describes the Null, Invalid, and Missing columns and fields.">
<thead>
<tr class="cellalignment192">
<th class="cellalignment244" id="d22150e1682">Column Status</th>
<th class="cellalignment245" id="d22150e1685">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment192">
<td class="cellalignment246" id="d22150e1690" headers="d22150e1682">
<p><code class="codeph">Missing</code></p>
</td>
<td class="cellalignment247" headers="d22150e1690 d22150e1685">
<p>Frequently, data is missing in compressed update records. Compressed update records contain only those source columns that changed, plus the key of the source file or table.</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment246" id="d22150e1698" headers="d22150e1682">
<p><code class="codeph">Null</code></p>
</td>
<td class="cellalignment247" headers="d22150e1698 d22150e1685">
<p>A source column may contain a null value, which makes a calculation difficult.</p>
</td>
</tr>
<tr class="cellalignment192">
<td class="cellalignment246" id="d22150e1706" headers="d22150e1682">
<p><code class="codeph">Invalid</code></p>
</td>
<td class="cellalignment247" headers="d22150e1706 d22150e1685">
<p>The source data is invalid.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>When one of these conditions occurs, by default the condition is returned as the result of the function.</p>
<p>For example, if <code class="codeph">BALANCE</code> is <code class="codeph">1000</code>, but <code class="codeph">AMOUNT</code> is <code class="codeph">NULL</code>, the following expression returns <code class="codeph">NULL</code>.</p>
<pre dir="ltr">
NEW_BALANCE = @COMPUTE (BALANCE + AMOUNT)
</pre>
<p>As another example, the <code class="codeph">AMOUNT</code> field is defined as <code class="codeph">PIC 9(5)V99</code> in an Enscribe record definition, but contains spaces. In that case, the above expression returns <code class="codeph">INVALID</code>, and the record is discarded.</p>
<p>If <code class="codeph">AMOUNT</code>, but not <code class="codeph">BALANCE</code>, is present in the update record, the field is not mapped.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="integrating-data.htm#GUID-4A1A0C19-2B62-48CD-9D3F-9B858A39800E">Overriding Exceptional Conditions</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-57F0B301-5D5E-483A-A6BE-1CEF0B2A4FA3">Field Conversion Functions</a></p>
</div>
</div>
</div>
<a id="GNSAD394"></a>
<div class="sect4"><a id="GUID-4A1A0C19-2B62-48CD-9D3F-9B858A39800E"></a>
<h4 id="GNSAD-GUID-4A1A0C19-2B62-48CD-9D3F-9B858A39800E" class="sect4">Overriding Exceptional Conditions</h4>
<div>
<p>The <code class="codeph">IF</code>, <code class="codeph">COLSTAT</code> and <code class="codeph">COLTEST</code> functions recognize null, invalid, or missing columns and can compute alternative values.</p>
<p>For example:</p>
<pre dir="ltr">
NEW_BALANCE = @IF (@COLTEST (BALANCE, NULL, INVALID) OR
                   @COLTEST (AMOUNT, NULL, INVALID),
                   @COLSTAT (NULL),
                   BALANCE + AMOUNT)
</pre>
<p>This returns one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">NULL</code> when <code class="codeph">BALANCE</code> or <code class="codeph">AMOUNT</code> is <code class="codeph">NULL</code> or <code class="codeph">INVALID</code></p>
</li>
<li>
<p><code class="codeph">MISSING</code> when either column is missing</p>
</li>
<li>
<p>The sum of the columns</p>
</li>
</ul>
</div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-1BAD5898-9B72-4683-85C4-A073B569B749">Null, Invalid, and Missing Columns and Fields</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-E8F182AD-0FF9-41F6-A2CF-31EB25F3CDEE"></a>
<h2 id="GNSAD-GUID-E8F182AD-0FF9-41F6-A2CF-31EB25F3CDEE" class="sect2">Retrieving Before Values</h2>
<div>
<p>For update operations, it can be advantageous to retrieve the <span class="italic">before</span> values of source columns: the values before the update occurred. These values are stored in the trail and can be used in <span class="bold">Filters</span>, <span class="bold">SQLEXEC</span>, <span class="bold">EventActions</span>, and <span class="bold">column mapping</span>. For example, you can:</p>
<ul style="list-style-type: disc;">
<li>
<p>Retrieve the before image of a row as part of a column-mapping specification in an exceptions MAP statement, and map those values to an exceptions table for use in testing or troubleshooting.</p>
</li>
<li>
<p>Perform delta calculations. For example, if a table has a Balance column, you can calculate the net result of a particular transaction by subtracting the original balance from the new balance, as in the following example:</p>
<pre dir="ltr">
MAP $VOL.SUBVOL.TABLE, TARGET $VOL.SUBVOL.TABLE,
COLMAP (PK1 = PK1, delta = balance &ndash; @GETVAL(BEFORE.balance));
</pre></li>
</ul>
<div class="section">
<p class="subhead2">To Reference the Before Value</p>
<ol>
<li>
<p>Use the <code class="codeph">BEFORE</code> keyword, then a dot (.), then the name of the column for which you want a before value, then wrapping the entire clause in a valid @function such as:</p>
<pre dir="ltr">
@GETVAL(BEFORE.&lt;column_name&gt;)
</pre></li>
<li>
<p>Use the <code class="codeph">GETUPDATEBEFORES</code> parameter in the Extract parameter file to capture before images from the transaction record, or use it in the Replicat parameter file to use the before image in a column mapping or filter. If the database uses compressed updates, using the BEFORE prefix results in a &ldquo;column missing&rdquo; condition and the column map is executed as if the column were not in the record. To ensure that column values are available, see "<a href="integrating-data.htm#GUID-9788AA4E-5CA9-4D63-96B7-9F5A66E7D8BA">Compressed Update Considerations</a>.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
<div>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="integrating-data.htm#GUID-C4B02280-6DD9-4BBB-B167-A80EF43FDB74" title="You can integrate only the data you require by using parameters, clauses, column mapping, and functions.">Integrating Data</a></p>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment191">
<tr>
<td class="cellalignment228">
<table class="cellalignment196">
<tr>
<td class="cellalignment195"><a href="configuring-custom-operations.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment195"><a href="managing-and-monitoring.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2014, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment230">
<table class="cellalignment194">
<tr>
<td class="cellalignment195"><a href="http://docs.oracle.com/goldengate/ns1221/gg-nsk/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment195"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment195"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment195"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
