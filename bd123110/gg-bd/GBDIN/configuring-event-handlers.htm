<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Configuring Event Handlers</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This chapter discusses types of event handlers explaining how to specify the event handler to use and what your options are. It explains how to format the output and what you can expect from the Oracle GoldenGate Report file." />
<meta name="keywords" content="configure, event handlers, configuring, handlers, JMS handler, handler, JMS, jms, JMS handler types, aq, jms_map, file handler, file, formatting, output" />
<meta name="dcterms.created" content="2017-08-22T11:32:14Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Fusion Middleware Administering Oracle GoldenGate for Big Data" />
<meta name="dcterms.identifier" content="E89479-01" />
<meta name="dcterms.isVersionOf" content="GBDIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2015, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="running-java-delivery.htm" title="Previous" type="text/html" />
<link rel="Next" href="java-delivery-properties.htm" title="Next" type="text/html" />
<link rel="alternate" href="GBDIN.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-AE752000-B425-474B-BA88-FD030AB70E15"></a> <span id="PAGE" style="display:none;">15/21</span> <!-- End Header -->
<a id="GBDIN546"></a><a id="GBDIN319"></a>
<h1 id="GBDIN-GUID-AE752000-B425-474B-BA88-FD030AB70E15" class="sect1"><span class="enumeration_chapter">9</span> Configuring Event Handlers</h1>
<div>
<div><span>This chapter discusses types of event handlers explaining how to specify the event handler to use and what your options are. It explains how to format the output and what you can expect from the Oracle GoldenGate Report file.</span></div>
<p>This chapter includes the following sections.</p>
<p><span class="bold">Topics:</span></p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="configuring-event-handlers.htm#GUID-B77BABB8-3A9F-49B9-872C-0BF8A0D6E0DB">Specifying Event Handlers</a><br /></li>
<li class="ulchildlink"><a href="configuring-event-handlers.htm#GUID-2DD3CA53-D486-4702-8F78-55BC8F1AFE7F">JMS Handler</a><br /></li>
<li class="ulchildlink"><a href="configuring-event-handlers.htm#GUID-9F97DC5B-28D1-464F-85B1-C845FAC273C9">File Handler</a><br /></li>
<li class="ulchildlink"><a href="configuring-event-handlers.htm#GUID-488EAEA3-6D3D-4D52-80C5-2644EA666087">Custom Handlers</a><br /></li>
<li class="ulchildlink"><a href="configuring-event-handlers.htm#GUID-891513A1-7FAE-40F4-9C3C-6F6074B440AC">Formatting the Output</a><br /></li>
<li class="ulchildlink"><a href="configuring-event-handlers.htm#GUID-D24AF24B-C5B6-4369-848D-5E5D35AE4F5D">Reporting</a><br /></li>
</ul>
<div class="familylinks">
<div class="parentlink">
<p><strong>Parent topic:</strong> <a href="java-delivery.htm">Oracle GoldenGate Java Delivery</a></p>
</div>
</div>
</div>
<a id="GBDIN320"></a>
<div class="props_rev_3"><a id="GUID-B77BABB8-3A9F-49B9-872C-0BF8A0D6E0DB"></a>
<h2 id="GBDIN-GUID-B77BABB8-3A9F-49B9-872C-0BF8A0D6E0DB" class="sect2"><span class="enumeration_section">9.1</span> Specifying Event Handlers</h2>
<div>
<div class="section">
<p>Processing transaction, operation and metadata events in Java works as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>The Oracle GoldenGate Replicat or Extract process reads local trail data and passes the transactions, operations and database metadata to the Java Delivery Module. Metadata can come from the trail itself, a source definitions file.</p>
</li>
<li>
<p>Events are fired by the Java framework, optionally filtered by custom Event Filters.</p>
</li>
<li>
<p>Handlers (event listeners) process these events, and process the transactions, operations and metadata. Custom formatters may be applied for certain types of targets.</p>
</li>
</ul>
<p>There are several existing handlers:</p>
<ul style="list-style-type: disc;">
<li>
<p>Various built in Big Data handlers to apply records to supported Big Data targets, see <a class="olink GADBD-GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9" target="_blank" href="../GADBD/introduction1.htm#GADBD-GUID-A6C0DEC9-480F-4782-BD2A-54FEDDE2FDD9">Introduction to GoldenGate for Big Data</a> to configure this type of handler.</p>
</li>
<li>
<p>JMS message handlers to send to a JMS provider using either a <code class="codeph">MapMessage</code>, or using a <code class="codeph">TextMessage</code> with customized formatters.</p>
</li>
<li>
<p>A specialized message handler to send JMS messages to Oracle Advanced Queuing (AQ).</p>
</li>
<li>
<p>A file writer handler, for writing to a single file, or a rolling file.</p>
<div class="infobox-note" id="GUID-B77BABB8-3A9F-49B9-872C-0BF8A0D6E0DB__GUID-08EC3F30-F3B4-4ACC-9BD4-96CB9A56AB21">
<p class="notep1">Note:</p>
<p>The file writer handler is particularly useful as development utility, since the file writer can take the exact same formatter as the JMS <code class="codeph">TextMessage</code> handler. Using the file writer provides a simple way to test and tune the formatters for JMS without actually sending the messages to JMS</p>
</div>
</li>
</ul>
<p>Event handlers can be configured using the main Java property file or they may optionally read in their own properties directly from yet another property file (depending on the handler implementation). Handler properties are set using the following syntax:</p>
<pre dir="ltr">
gg.handler.{<span class="italic">name</span>}.<span class="italic">someproperty</span>=<span class="italic">somevalue</span>
</pre>
<p>This will cause the property <span class="italic"><code class="codeph">someproperty</code></span> to be set to the value <span class="italic"><code class="codeph">somevalue</code></span> for the handler instance identified in the property file by <span class="italic"><code class="codeph">name</code></span>. This <span class="italic"><code class="codeph">name</code></span> is used in the property file to define active handlers and set their properties; it is user-defined.</p>
<p>Implementation note (for Java developers): Following the preceding example: when the handler is instantiated, the method <code class="codeph">void</code> <code class="codeph">setSomeProperty</code>(String value) will be called on the handler instance, passing in the String value <span class="italic"><code class="codeph">somevalue</code></span>. A JavaBean <code class="codeph">PropertyEditor</code> may also be defined for the handler, in which case the string can be automatically converted to the appropriate type for the setter method. For example, in the Java application properties file, we may have the following:</p>
<pre dir="ltr">
# the list of active handlers: only two are active
gg.handlerlist=one, two
# set properties on 'one'
gg.handler.one.type=file
gg.handler.one.format=com.mycompany.MyFormatter
gg.handler.one.file=output.xml
# properties for handler 'two'
gg.handler.two.type=jms_text
gg.handler.two.format=com.mycompany.MyFormatter
gg.handler.two.properties=jboss.properties
# set properties for handler 'foo'; this handler is ignored
gg.handler.foo.type=com.mycompany.MyHandler
gg.handler.foo.someproperty=somevalue
</pre>
<p>The type identifies the handler class; the other properties depend on the type of handler created. If a separate properties file is used to initialize the handler (such as the JMS handlers), the properties file is found in the classpath. For example, if properties file is at: <code class="codeph">{</code><span class="italic"><code class="codeph">gg_install_dir</code></span><code class="codeph">}/dirprm/foo.properties</code>, then specify in the properties file as follows: <code class="codeph">gg.handler.</code><span class="italic"><code class="codeph">name</code></span><code class="codeph">.properties=foo.properties</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GBDIN321"></a>
<div class="props_rev_3"><a id="GUID-2DD3CA53-D486-4702-8F78-55BC8F1AFE7F"></a>
<h2 id="GBDIN-GUID-2DD3CA53-D486-4702-8F78-55BC8F1AFE7F" class="sect2"><span class="enumeration_section">9.2</span> JMS Handler</h2>
<div>
<div class="section">
<p>The main Java property file identifies active handlers. The JMS handler may optionally use a separate property file for JMS-specific configuration. This allows more than one JMS handler to be configured to run at the same time.</p>
<p>There are examples included for several <a id="d14890e253" class="indexterm-anchor"></a>JMS providers (<a id="d14890e256" class="indexterm-anchor"></a>JBoss, <a id="d14890e259" class="indexterm-anchor"></a>TIBCO, <a id="d14890e262" class="indexterm-anchor"></a>Solace, <a id="d14890e265" class="indexterm-anchor"></a>ActiveMQ, <a id="d14890e269" class="indexterm-anchor"></a>WebLogic). For a specific JMS provider, you can choose the appropriate properties files as a starting point for your environment. Each JMS provider has slightly different settings, and your environment will have unique settings as well.</p>
<p>The installation directory for the Java JARs (<code class="codeph">ggjava</code>) contains the core application JARs (<code class="codeph">ggjava.jar</code>) and its dependencies in <code class="codeph">resources/lib/*.jar</code>. The resources directory contains all dependencies and configuration, and is in the classpath.</p>
<p>If the JMS client JARs already exist somewhere on the system, they can be referenced directly and added to the classpath without copying them.</p>
<p>The following types of JMS handlers can be specified:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">jms</span> &ndash; sends text messages to a topic or queue. The messages may be formatted using Velocity templates or by writing a formatter in Java. The same formatters can be used for a <code class="codeph">jms_text message</code> as for writing to files. (<code class="codeph">jms_text</code> is a synonym for <code class="codeph">jms</code>.)</p>
</li>
<li>
<p><span class="bold">aq</span> &ndash; sends text messages to Oracle Advanced Queuing (AQ). The <code class="codeph">aq</code> handler is a <code class="codeph">jms</code> handler configured for delivery to AQ. The messages can be formatted using Velocity templates or a custom formatter.</p>
</li>
<li>
<p><span class="bold">jms_map</span> &ndash; sends a JMS MapMessage to a topic or queue. The <code class="codeph">JMSType</code> of the message is set to the name of the table. The body of the message consists of the following metadata, followed by column name and column value pairs:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">GG_ID</code> &ndash; position of the record, uniquely identifies this operation</p>
</li>
<li>
<p><code class="codeph">GG_OPTYPE</code> &ndash; type of SQL (insert/update/delete),</p>
</li>
<li>
<p><code class="codeph">GG_TABLE</code> &ndash; table name on which the operation occurred</p>
</li>
<li>
<p><code class="codeph">GG_TIMESTAMP</code> &ndash; timestamp of the operation</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="GBDIN322"></a>
<div class="props_rev_3"><a id="GUID-9F97DC5B-28D1-464F-85B1-C845FAC273C9"></a>
<h2 id="GBDIN-GUID-9F97DC5B-28D1-464F-85B1-C845FAC273C9" class="sect2"><span class="enumeration_section">9.3</span> File Handler</h2>
<div>
<div class="section">
<p>The file handler is often used to verify the message format when the actual target is JMS, and the message format is being developed using custom Java or Velocity templates. Here is a property file using a file handler:</p>
<pre dir="ltr">
# one file handler active, using Velocity template formatting
gg.handlerlist=myfile
gg.handler.myfile.type=file
gg.handler.myfile.rollover.size=5M
gg.handler.myfile.format=sample2xml.vm
gg.handler.myfile.file=output.xml
</pre>
<p>This example uses a single handler (though, a JMS handler and the file handler could be used at the same time), writing to a file called <code class="codeph">output.xml</code>, using a Velocity template called <code class="codeph">sample2xml.vm</code>. The template is found using the classpath.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GBDIN323"></a>
<div class="props_rev_3"><a id="GUID-488EAEA3-6D3D-4D52-80C5-2644EA666087"></a>
<h2 id="GBDIN-GUID-488EAEA3-6D3D-4D52-80C5-2644EA666087" class="sect2"><span class="enumeration_section">9.4</span> Custom Handlers</h2>
<div>
<div class="section">
<p>For information on coding a custom handler, see <a href="developing-custom-filters-formatters-and-handlers.htm#GUID-A4F9F3B7-829C-4BAA-9179-F9EA645BA99C">Coding a Custom Handler in Java</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GBDIN324"></a>
<div class="props_rev_3"><a id="GUID-891513A1-7FAE-40F4-9C3C-6F6074B440AC"></a>
<h2 id="GBDIN-GUID-891513A1-7FAE-40F4-9C3C-6F6074B440AC" class="sect2"><span class="enumeration_section">9.5</span> Formatting the Output</h2>
<div>
<div class="section">
<p>As previously described, the existing JMS and file output handlers can be configured through the properties file. Each handler has its own specific properties that can be set: for example, the output file can be set for the file handler, and the JMS destination can be set for the JMS handler. Both of these handlers may also specify a custom formatter. The same formatter may be used for both handlers. As an alternative to writing Java code for custom formatting, a Velocity template may be specified For further information, see <a href="developing-custom-filters-formatters-and-handlers.htm#GUID-14C1D4BD-FBA4-43BB-8E0C-4F7FEC1151C3">Filtering Events</a>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="GBDIN325"></a>
<div class="sect2"><a id="GUID-D24AF24B-C5B6-4369-848D-5E5D35AE4F5D"></a>
<h2 id="GBDIN-GUID-D24AF24B-C5B6-4369-848D-5E5D35AE4F5D" class="sect2"><span class="enumeration_section">9.6</span> Reporting</h2>
<div>
<p>Summary statistics about the throughput and amount of data processed are generated when the Replicat or Extract process stops. Additionally, statistics can be written periodically either after a specified amount of time or after a specified number of records have been processed. If both time and number of records are specified, then the report is generated for whichever event happens first. These statistical summaries are written to the Oracle GoldenGate report file and the log files.</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1">
<tr>
<td class="cellalignment8">
<table class="cellalignment6">
<tr>
<td class="cellalignment5"><a href="running-java-delivery.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5"><a href="java-delivery-properties.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2015, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment10">
<table class="cellalignment4">
<tr>
<td class="cellalignment5"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
