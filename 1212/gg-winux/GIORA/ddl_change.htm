<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>16 Managing the DDL Replication Environment</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056" />
<meta name="description" content="This chapter contains instructions for making changes to the database environment or the Oracle GoldenGate environment when the Oracle GoldenGate DDL trigger is being used to support DDL replication." />
<meta name="dcterms.created" content="2015-06-05T14:9:49Z" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Oracle&reg; GoldenGate Installing and Configuring Oracle GoldenGate for Oracle Database" />
<meta name="dcterms.identifier" content="E29644-07" />
<meta name="dcterms.isVersionOf" content="GIORA" />
<link rel="Start" href="../../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="instantiate.htm" title="Previous" type="text/html" />
<link rel="Next" href="uninstall.htm" title="Next" type="text/html" />
<link rel="alternate" href="../GIORA.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="../GIORA.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="../GIORA.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns"><div id="BREADCRUMBS"><a href="http://docs.oracle.com">Home</a> / <a href="../../index.html">Middleware</a> / <a href="../index.html">Oracle GoldenGate for Windows and UNIX</a>
</div>

<span id="PAGE" style="display:none;">19/27</span>
<!-- End Header -->
<div id="GIORA452" class="chapter"><a id="sthref198"></a>
<h1 class="chapter"><span class="secnum">16</span> Managing the DDL Replication Environment</h1>
<p><a id="GIORA575"></a>This chapter contains instructions for making changes to the database environment or the Oracle GoldenGate environment when the Oracle GoldenGate DDL trigger is being used to support DDL replication. See <a href="ddl_install.htm#CHDDIBBE">Appendix D, "Installing Trigger-Based DDL Capture"</a> for more information about the DDL objects.</p>
<p>This chapter includes the following sections:</p>
<ul>
<li>
<p><a href="#A1943612">Disabling DDL Processing Temporarily</a></p>
</li>
<li>
<p><a href="#A1678786">Enabling and Disabling the DDL Trigger</a></p>
</li>
<li>
<p><a href="#A1678896">Maintaining the DDL Marker Table</a></p>
</li>
<li>
<p><a href="#A1679104">Deleting the DDL Marker Table</a></p>
</li>
<li>
<p><a href="#A1683775">Maintaining the DDL History Table</a></p>
</li>
<li>
<p><a href="#A1688022">Deleting the DDL History Table</a></p>
</li>
<li>
<p><a href="#A1694967">Purging the DDL Trace File</a></p>
</li>
<li>
<p><a href="#A1695384">Applying Database Patches and Upgrades when DDL Support is Enabled</a></p>
</li>
<li>
<p><a href="#A1697899">Applying Oracle GoldenGate Patches and Upgrades when DDL support is Enabled</a></p>
</li>
<li>
<p><a href="#BBABJAJI">Restoring an Existing DDL Environment to a Clean State</a></p>
</li>
<li>
<p><a href="#BBAEGGFE">Removing the DDL Objects from the System</a></p>
</li>
</ul>
<p>For instructions on configuring Oracle GoldenGate DDL support, see <a href="ddl.htm#CHDHJEDE">Chapter 13, "Configuring DDL Support"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This chapter is only relevant for classic capture mode or integrated capture mode in which trigger-based DDL capture is being used.</div>
<a id="A1943612"></a>
<div id="GIORA951" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.1</span> Disabling DDL Processing Temporarily</h2>
<p>You must disable DDL activities before performing an instantiation or other tasks, if directed. You can resume DDL processing after the task is finished.</p>
<ol>
<li>
<p>Disable user DDL operations on the source database.</p>
</li>
<li>
<p>If there are previous DDL replication processes that are still active, make certain that the last executed DDL operation was applied to the target before stopping those processes, so that the load data is applied to objects that have the correct metadata.</p>
</li>
<li>
<p>Comment out the <code dir="ltr">DDL</code> parameter in the Extract and Replicat parameter files that you configured for the new Oracle GoldenGate environment. Comment out any other parameters that support DDL.</p>
</li>
<li>
<p>Disable the Oracle GoldenGate DDL trigger, if one is in use. See <a href="#A1678786">Section 16.2, "Enabling and Disabling the DDL Trigger"</a>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="A1678786"></a>
<div id="GIORA453" class="sect1">
<h2 class="sect1"><span class="secnum">16.2</span> Enabling and Disabling the DDL Trigger</h2>
<p>You can enable and disable the trigger that captures DDL operations without making any configuration changes within Oracle GoldenGate. The following scripts control the DDL trigger.</p>
<ul>
<li>
<p><code dir="ltr">ddl_disable</code>: Disables the trigger. No further DDL operations are captured or replicated after you disable the trigger.</p>
</li>
<li>
<p><code dir="ltr">ddl_enable</code>: Enables the trigger. When you enable the trigger, Oracle GoldenGate starts capturing current DDL changes, but does not capture DDL that was generated while the trigger was disabled.</p>
</li>
</ul>
<p>Before running these scripts, disable all sessions that ever issued DDL, including those of the Oracle GoldenGate processes, SQL*Plus, business applications, and any other software that uses Oracle. Otherwise the database might generate an ORA-04021 error. Do not use these scripts if you intend to maintain consistent DDL on the source and target systems.</p>
</div>
<!-- class="sect1" -->
<a id="A1678896"></a>
<div id="GIORA454" class="sect1">
<h2 class="sect1"><span class="secnum">16.3</span> Maintaining the DDL Marker Table</h2>
<p>You can purge rows from the marker table at any time. It does not keep DDL history. To purge the marker table, use the Manager parameter <code dir="ltr">PURGEMARKERHISTORY</code>. Manager gets the name of the marker table from one of the following:</p>
<ol>
<li>
<p>The name given with the <code dir="ltr">MARKERTABLE</code> parameter in the <code dir="ltr">GLOBALS</code> file, if specified.</p>
</li>
<li>
<p>The default name of <code dir="ltr">GGS_MARKER</code>.</p>
</li>
</ol>
<p><code dir="ltr">PURGEMARKERHISTORY</code> provides options to specify maximum and minimum lengths of time to keep a row, based on the last modification date. For more information, see <a class="olink GWURF596" href="../../gg-winux/GWURF/gg_parameters121.htm#GWURF596"><span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span></a>.</p>
</div>
<!-- class="sect1" -->
<a id="A1679104"></a>
<div id="GIORA455" class="sect1">
<h2 class="sect1"><span class="secnum">16.4</span> Deleting the DDL Marker Table</h2>
<p>Do not delete the DDL marker table unless you want to discontinue synchronizing DDL. The marker table and the DDL trigger are interdependent. An attempt to drop the marker table fails if the DDL trigger is enabled. This is a safety measure to prevent the trigger from becoming invalid and missing DDL operations. If you remove the marker table, the following error is generated:</p>
<pre dir="ltr">
ORA-04098: trigger 'SYS.GGS_DDL_TRIGGER_BEFORE' is invalid and failed re-validation
</pre>
<p>The proper way to remove an Oracle GoldenGate DDL object depends on your plans for the rest of the DDL environment. To choose the correct procedure, see one of the following:</p>
<ul>
<li>
<p><a href="#BBABJAJI">Section 16.10, "Restoring an Existing DDL Environment to a Clean State"</a></p>
</li>
<li>
<p><a href="#BBAEGGFE">Section 16.11, "Removing the DDL Objects from the System"</a></p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="A1683775"></a>
<div id="GIORA456" class="sect1">
<h2 class="sect1"><span class="secnum">16.5</span> Maintaining the DDL History Table</h2>
<p>You can purge the DDL history table to control its size, but do so carefully. The DDL history table maintains the integrity of the DDL synchronization environment. Purges to this table cannot be recovered through the Oracle GoldenGate interface.</p>
<ol>
<li>
<p>To prevent any possibility of DDL history loss, make regular full backups of the history table.</p>
</li>
<li>
<p>To ensure that purged DDL can be recovered, enable Oracle Flashback for the history table. Set the flashback retention time well past the point where it could be needed. For example, if your full backups are at most one week old, retain two weeks of flashback. Oracle GoldenGate can be positioned backward into the flashback for reprocessing.</p>
</li>
<li>
<p>If possible, purge the DDL history table manually to ensure that essential rows are not purged accidentally. If you require an automated purging mechanism, use the <code dir="ltr">PURGEDDLHISTORY</code> parameter in the Manager parameter file. You can specify maximum and minimum lengths of time to keep a row. For more information, see <a class="olink GWURF596" href="../../gg-winux/GWURF/gg_parameters121.htm#GWURF596"><span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span></a>.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Temporary tables created by Oracle GoldenGate to increase performance might be purged at the same time as the DDL history table, according to the same rules. The names of these tables are derived from the name of the history table, and their purging is reported in the Manager report file. This is normal behavior.</div>
</div>
<!-- class="sect1" -->
<a id="A1688022"></a>
<div id="GIORA457" class="sect1">
<h2 class="sect1"><span class="secnum">16.6</span> Deleting the DDL History Table</h2>
<p>Do not delete the DDL history table unless you want to discontinue synchronizing DDL. The history table contains a record of DDL operations that were issued. Once an Extract switches from using the DDL trigger to not using the trigger, as when source database redo compatibility is advanced to 11.2.0.4 or greater, these objects can be deleted though <span class="italic">not immediately</span>. It is imperative that all mining of the redo generated before the compatibility change be complete and that this redo not need to be mined again.</p>
<p>The history table and the DDL trigger are interdependent. An attempt to drop the history table fails if the DDL trigger is enabled. This is a safety measure to prevent the trigger from becoming invalid and missing DDL operations. If you remove the history table, the following error is generated:</p>
<pre dir="ltr">
ORA-04098: trigger 'SYS.GGS_DDL_TRIGGER_BEFORE' is invalid and failed re-validation
</pre>
<p>The proper way to remove an Oracle GoldenGate DDL object depends on your plans for the rest of the DDL environment. To choose the correct procedure, see one of the following:</p>
<ul>
<li>
<p><a href="#BBABJAJI">Section 16.10, "Restoring an Existing DDL Environment to a Clean State"</a></p>
</li>
<li>
<p><a href="#BBAEGGFE">Section 16.11, "Removing the DDL Objects from the System"</a></p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="A1694967"></a>
<div id="GIORA458" class="sect1">
<h2 class="sect1"><span class="secnum">16.7</span> Purging the DDL Trace File</h2>
<p>To prevent the DDL trace file from consuming excessive disk space, run the <code dir="ltr">ddl_cleartrace</code> script on a regular basis. This script deletes the trace file, but Oracle GoldenGate will create it again.</p>
<p>The default name of the DDL trace file is <code dir="ltr">ggs_ddl_trace.log</code>. It is in the <code dir="ltr">USER_DUMP_DEST</code> directory of Oracle. The <code dir="ltr">ddl_cleartrace</code> script is in the Oracle GoldenGate directory.</p>
</div>
<!-- class="sect1" -->
<a id="A1695384"></a>
<div id="GIORA459" class="sect1">
<h2 class="sect1"><span class="secnum">16.8</span> Applying Database Patches and Upgrades when DDL Support is Enabled</h2>
<p>Database patches and upgrades usually invalidate the Oracle GoldenGate DDL trigger and other Oracle GoldenGate DDL objects. Before applying a database patch, do the following.</p>
<ol>
<li>
<p>Log in to SQL*Plus as a user that has <code dir="ltr">SYSDBA</code> privileges.</p>
</li>
<li>
<p>Disable the Oracle GoldenGate DDL trigger by running the <code dir="ltr">ddl_disable</code> script in SQL*Plus.</p>
</li>
<li>
<p>Apply the patch.</p>
</li>
<li>
<p>Enable the DDL trigger by running the <code dir="ltr">ddl_enable</code> script in SQL*Plus.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Database upgrades and patches generally operate on Oracle objects. Because Oracle GoldenGate filters out those objects automatically, DDL from those procedures is not replicated when replication starts again.</div>
<p>To avoid recompile errors after the patch or upgrade, which are caused if the trigger is not disabled before the procedure, consider adding calls to <code dir="ltr">@ddl_disable</code> and <code dir="ltr">@ddl_enable</code> at the appropriate locations within your scripts.</p>
</div>
<!-- class="sect1" -->
<a id="A1697899"></a>
<div id="GIORA460" class="sect1">
<h2 class="sect1"><span class="secnum">16.9</span> Applying Oracle GoldenGate Patches and Upgrades when DDL support is Enabled</h2>
<p>This section explains how to apply Oracle GoldenGate patches and upgrades when DDL support is enabled.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the release notes or upgrade documentation for your Oracle GoldenGate release contain instructions similar to those provided in this section, follow those instructions instead the ones in this section. Do not use this procedure for an upgrade from an Oracle GoldenGate version that does not support DDL statements that are larger than 30K (pre-version 10.4). To upgrade in that case, follow the instructions in <a href="#BBABJAJI">Section 16.10, "Restoring an Existing DDL Environment to a Clean State"</a>.</div>
<p>Use the following steps to apply a patch or upgrade to the DDL objects. This procedure may or may not preserve the current DDL synchronization configuration, depending on whether the new build requires a clean installation.</p>
<ol>
<li>
<p>Run GGSCI. Keep the session open for the duration of this procedure.</p>
</li>
<li>
<p>Stop Extract to stop DDL capture.</p>
<pre dir="ltr">
STOP EXTRACT <span class="codeinlineitalic">group</span>
</pre></li>
<li>
<p>Stop Replicat to stop DDL replication.</p>
<pre dir="ltr">
STOP REPLICAT <span class="codeinlineitalic">group</span>
</pre></li>
<li>
<p>Download or extract the patch or upgrade files according to the instructions provided by Oracle GoldenGate.</p>
</li>
<li>
<p>Change directories to the Oracle GoldenGate installation directory.</p>
</li>
<li>
<p>Log in to SQL*Plus as a user that has <code dir="ltr">SYSDBA</code> privileges.</p>
</li>
<li>
<p>Disconnect all sessions that ever issued DDL, including those of Oracle GoldenGate processes, SQL*Plus, business applications, and any other software that uses Oracle. Otherwise the database might generate an ORA-04021 error.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_disable</code> script to disable the DDL trigger.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_setup</code> script. You are prompted for the name of the Oracle GoldenGate DDL schema. If you changed the schema name, use the new one.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_enable.sql</code> script to enable the DDL trigger.</p>
</li>
<li>
<p>In GGSCI, start Extract to resume DDL capture.</p>
<pre dir="ltr">
START EXTRACT <span class="codeinlineitalic">group</span>
</pre></li>
<li>
<p>Start Replicat to start DDL replication.</p>
<pre dir="ltr">
START REPLICAT <span class="codeinlineitalic">group</span>
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BBABJAJI"></a>
<div id="GIORA461" class="sect1">
<h2 class="sect1"><span class="secnum">16.10</span> Restoring an Existing DDL Environment to a Clean State</h2>
<p>Follow these steps to completely remove, and then reinstall, the Oracle GoldenGate DDL objects. This procedure creates a new DDL environment and removes any current DDL history.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Due to object interdependencies, all objects must be removed and reinstalled in this procedure.</div>
<ol>
<li>
<p>If you are performing this procedure in conjunction with the installation of a new Oracle GoldenGate version, download and install the Oracle GoldenGate files, and create or update process groups and parameter files as necessary.</p>
</li>
<li>
<p>(Optional) To preserve the continuity of source and target structures, stop DDL activities and then make certain that Replicat finished processing all of the DDL and DML data in the trail. To determine when Replicat is finished, issue the following command until you see a message that there is no more data to process.</p>
<pre dir="ltr">
INFO REPLICAT <span class="codeinlineitalic">group</span>
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Instead of using <code dir="ltr">INFO REPLICAT</code>, you can use the <code dir="ltr">EVENTACTIONS</code> option of <code dir="ltr">TABLE</code> and <code dir="ltr">MAP</code> to stop the Extract and Replicat processes after the DDL and DML has been processed.</div>
</li>
<li>
<p>Run GGSCI.</p>
</li>
<li>
<p>Stop Extract to stop DDL capture.</p>
<pre dir="ltr">
STOP EXTRACT <span class="codeinlineitalic">group</span>
</pre></li>
<li>
<p>Stop Replicat to stop DDL replication.</p>
<pre dir="ltr">
STOP REPLICAT <span class="codeinlineitalic">group</span>
</pre></li>
<li>
<p>Change directories to the Oracle GoldenGate installation directory.</p>
</li>
<li>
<p>Log in to SQL*Plus as a user that has <code dir="ltr">SYSDBA</code> privileges.</p>
</li>
<li>
<p>Disconnect all sessions that ever issued DDL, including those of Oracle GoldenGate processes, SQL*Plus, business applications, and any other software that uses Oracle. Otherwise the database might generate an ORA-04021 error.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_disable</code> script to disable the DDL trigger.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_remove</code> script to remove the Oracle GoldenGate DDL trigger, the DDL history and marker tables, and other associated objects. This script produces a <code dir="ltr">ddl_remove_spool.txt</code> file that logs the script output and a <code dir="ltr">ddl_remove_set.txt</code> file that logs environment settings in case they are needed for debugging.</p>
</li>
<li>
<p>Run the <code dir="ltr">marker_remove</code> script to remove the Oracle GoldenGate marker support system. This script produces a <code dir="ltr">marker_remove_spool.txt</code> file that logs the script output and a <code dir="ltr">marker_remove_set.txt</code> file that logs environment settings in case they are needed for debugging.</p>
</li>
<li>
<p>If you are changing the DDL schema for this installation, grant the following permission to the Oracle GoldenGate schema.</p>
<pre dir="ltr">
GRANT EXECUTE ON utl_file TO <span class="codeinlineitalic">schema</span>;
</pre></li>
<li>
<p>If you are changing the DDL schema for this installation, the schema's default tablespace must be dedicated to that schema; do not allow any other schema to share it. <code dir="ltr">AUTOEXTEND</code> must be set to <code dir="ltr">ON</code> for this tablespace, and the tablespace must be sized to accommodate the growth of the <code dir="ltr">GGS_DDL_HIST</code> and <code dir="ltr">GGS_MARKER</code> tables. The <code dir="ltr">GGS_DDL_HIST</code> table, in particular, will grow in proportion to overall DDL activity.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the DDL tablespace fills up, Extract stops capturing DDL. To cause user DDL activity to fail when that happens, edit the <code dir="ltr">params.sql</code> script and set the <code dir="ltr">ddl_fire_error_in_trigger</code> parameter to <code dir="ltr">TRUE</code>. Stopping user DDL gives you time to extend the tablespace size and prevent the loss of DDL capture. Managing tablespace sizing this way, however, requires frequent monitoring of the business applications and Extract to avoid business disruptions. Instead, Oracle recommends that you size the tablespace appropriately and set <code dir="ltr">AUTOEXTEND</code> to <code dir="ltr">ON</code> so that the tablespace does not fill up.</div>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">Do not edit any other parameters in <code dir="ltr">params.sql</code> except if you need to follow documented instructions to change certain object names.</p>
</div>
</li>
<li>
<p>If you are changing the DDL schema for this installation, edit the <code dir="ltr">GLOBALS</code> file and specify the new schema name with the following parameter.</p>
<pre dir="ltr">
GGSCHEMA <span class="codeinlineitalic">schema_name</span>
</pre></li>
<li>
<p>Run the <code dir="ltr">marker_setup</code> script to reinstall the Oracle GoldenGate marker support system. You are prompted for the name of the Oracle GoldenGate schema.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_setup</code> script. You are prompted for the name of the Oracle GoldenGate DDL schema.</p>
</li>
<li>
<p>Run the <code dir="ltr">role_setup</code> script to recreate the Oracle GoldenGate DDL role.</p>
</li>
<li>
<p>Grant the role to all Oracle GoldenGate users under which the following Oracle GoldenGate processes run: Extract, Replicat, GGSCI, and Manager. You might need to make multiple grants if the processes have different user names.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_enable.sql</code> script to enable the DDL trigger.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BBAEGGFE"></a>
<div id="GIORA462" class="sect1">
<h2 class="sect1"><span class="secnum">16.11</span> Removing the DDL Objects from the System</h2>
<p>This procedure removes the DDL environment and removes the history that maintains continuity between source and target DDL operations.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Due to object interdependencies, all objects must be removed.</div>
<ol>
<li>
<p>Run GGSCI.</p>
</li>
<li>
<p>Stop Extract to stop DDL capture.</p>
<pre dir="ltr">
STOP EXTRACT <span class="codeinlineitalic">group</span>
</pre></li>
<li>
<p>Stop Replicat to stop DDL replication.</p>
<pre dir="ltr">
STOP REPLICAT <span class="codeinlineitalic">group</span>
</pre></li>
<li>
<p>Change directories to the Oracle GoldenGate installation directory.</p>
</li>
<li>
<p>Run SQL*Plus and log in as a user that has <code dir="ltr">SYSDBA</code> privileges.</p>
</li>
<li>
<p>Disconnect all sessions that ever issued DDL, including those of Oracle GoldenGate processes, SQL*Plus, business applications, and any other software that uses Oracle. Otherwise the database might generate an ORA-04021 error.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_disable</code> script to disable the DDL trigger.</p>
</li>
<li>
<p>Run the <code dir="ltr">ddl_remove</code> script to remove the Oracle GoldenGate DDL trigger, the DDL history and marker tables, and the associated objects. This script produces a <code dir="ltr">ddl_remove_spool.txt</code> file that logs the script output and a <code dir="ltr">ddl_remove_set.txt</code> file that logs current user environment settings in case they are needed for debugging.</p>
</li>
<li>
<p>Run the <code dir="ltr">marker_remove</code> script to remove the Oracle GoldenGate marker support system. This script produces a <code dir="ltr">marker_remove_spool.txt</code> file that logs the script output and a <code dir="ltr">marker_remove_set.txt</code> file that logs environment settings in case they are needed for debugging.</p>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment233">
<tr>
<td class="cellalignment240"><table class="cellalignment238">
<tr>
<td class="cellalignment237"><a href="instantiate.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>

<td class="cellalignment237"><a href="uninstall.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table></td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2010, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment242">
<table class="cellalignment236">
<tr>
<td class="cellalignment237"><a href="../../index.html"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment237"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment237"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
