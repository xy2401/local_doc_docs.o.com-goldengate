<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>13 Associating Replicated Data with Metadata</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1028" />
<meta name="description" content="This chapter describes the uses of metadata and how to associate replicated data with metadata." />
<meta name="dcterms.created" content="2014-11-11T22:58:6Z" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Oracle&reg; GoldenGate Administering Oracle GoldenGate for Windows and UNIX" />
<meta name="dcterms.identifier" content="E29388-06" />
<meta name="dcterms.isVersionOf" content="GWUAD" />
<link rel="Start" href="../../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="wu_datainteg.htm" title="Previous" type="text/html" />
<link rel="Next" href="wu_changesync.htm" title="Next" type="text/html" />
<link rel="alternate" href="../GWUAD.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="../GWUAD.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="../GWUAD.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns"><div id="BREADCRUMBS"><a href="http://docs.oracle.com">Home</a> / <a href="../../index.html">Middleware</a> / <a href="../index.html">Oracle GoldenGate for Windows and UNIX</a>
</div>

<span id="PAGE" style="display:none;">16/30</span>
<!-- End Header -->
<div id="GWUAD473" class="chapter"><a id="g1086762"></a> <a id="i1054930"></a>
<h1 class="chapter"><span class="secnum">13</span> Associating Replicated Data <a id="sthref635"></a>with Metadata</h1>
<p><a id="GWUAD474"></a>This chapter describes the uses of metadata and how to associate replicated data with metadata.</p>
<p>This chapter includes the following sections:</p>
<ul>
<li>
<p><a href="#CIHHECAJ">Overview</a></p>
</li>
<li>
<p><a href="#CIHIIDDA">Configuring Oracle GoldenGate to Assume Identical Metadata</a></p>
</li>
<li>
<p><a href="#CIHDIEAF">Configuring Oracle GoldenGate to Assume Dissimilar Metadata</a></p>
</li>
<li>
<p><a href="#i1061541">Configuring Oracle GoldenGate to Use a Combination of Similar and Dissimilar Definitions</a></p>
</li>
</ul>
<a id="CIHHECAJ"></a>
<div id="GWUAD475" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">13.1</span> Overview</h2>
<p>When replicating data from one table to another, an important consideration is whether the column structures (metadata) of the source and target tables are identical. Oracle GoldenGate looks up metadata for the following purposes:</p>
<ul>
<li>
<p>On the source, to supply complete information about captured operations to the Replicat process.</p>
</li>
<li>
<p>On the target, to determine the structures of the target tables, so that the replicated data is correctly mapped and converted (if needed) by Replicat.</p>
</li>
</ul>
<p>In each of the following scenarios, you must use a different parameter or set of parameters to describe the metadata properly to the Oracle GoldenGate process that is processing it:</p>
<ul>
<li>
<p>You are replicating a source table to a target table that has identical metadata definitions (homogeneous replication).</p>
</li>
<li>
<p>You are replicating a source table to a target table that has different metadata definitions.</p>
</li>
<li>
<p>You are replicating a source table to two target tables, one with identical definitions and one that has different definitions.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CIHIIDDA"></a>
<div id="GWUAD476" class="sect1">
<h2 class="sect1"><span class="secnum">13.2</span> Configuring Oracle GoldenGate to Assume Identical Metadata</h2>
<p>When source and target tables have identical metadata definitions, use the <code dir="ltr">ASSUMETARGETDEFS</code> parameter in the Replicat parameter file. This parameter directs Replicat to assume that the target definitions are the same as those of the source, and to apply those definitions to the replicated data when constructing SQL statements. The source and target tables must be identical in every way, thus needing no conversion processing, although their catalogs or containers, owners and/or names can be different.</p>
<a id="i1055063"></a>
<div id="GWUAD477" class="sect2">
<h3 class="sect2"><span class="secnum">13.2.1</span> Rules for Tables to be Considered Identical</h3>
<p>For source and target structures to be identical, they must:</p>
<ul>
<li>
<p>be of the same database type, that is, all Oracle.</p>
</li>
<li>
<p>have the same character set and locale, for example <code dir="ltr">american_AMERICA.</code></p>
</li>
<li>
<p>contain the same number of columns.</p>
</li>
<li>
<p>have identical column names (including case, white spaces, and quotes if applicable).</p>
</li>
<li>
<p>have identical data types.</p>
</li>
<li>
<p>have identical column lengths.</p>
</li>
<li>
<p>have the same column length semantics for character columns (bytes versus characters).</p>
</li>
<li>
<p>define all of the columns in the same order.</p>
</li>
</ul>
<p>The following is a simple Replicat parameter file that illustrates the use of <code dir="ltr">ASSUMETARGETDEFS</code>. For more information, see <code dir="ltr">ASSUMETARGETDEFS</code> in <a class="olink GWURF401" href="../../gg-winux/GWURF/gg_parameters008.htm#GWURF401"><span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span></a>.</p>
<pre dir="ltr">
-- Specifies the group name.
REPLICAT acctrep
-- Specifies database login with an alias to a credential in the credential store.
USERIDALIAS ogg
-- Specifies a file for discard output.
DISCARDFILE ./dirrpt/backup/r_prod.dsc, APPEND
-- States that source and target definitions are identical.
ASSUMETARGETDEFS
-- Maps source tables to target tables.
MAP hq.product, TARGET region1.product;
MAP hq.price, TARGET region1.price;
</pre>
<p>When source and target structures are different, use the <code dir="ltr">SOURCEDEFS</code> parameter. See <a href="#CIHDIEAF">Section 13.3, "Configuring Oracle GoldenGate to Assume Dissimilar Metadata."</a> <code dir="ltr">ASSUMETARGETDEFS</code> and <code dir="ltr">SOURCEDEFS</code> cannot be used in the same parameter file.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHDIEAF"></a>
<div id="GWUAD478" class="sect1">
<h2 class="sect1"><span class="secnum">13.3</span> Configuring<a id="sthref636"></a><a id="sthref637"></a><a id="sthref638"></a><a id="sthref639"></a><a id="sthref640"></a> Oracle GoldenGate to <a id="sthref641"></a>Assume Dissimilar Metadata</h2>
<p>Source and target metadata definitions are not considered identical if they do not meet the rules in <a href="#i1055063">Section 13.2.1, "Rules for Tables to be Considered Identical"</a>. When source and target table definitions are dissimilar, Oracle GoldenGate must perform a conversion from one format to the other. To perform conversions, both sets of definitions must be known to Oracle GoldenGate. Oracle GoldenGate can query the local database to get one set of definitions, but it must rely on a <span class="italic">data-definitions file</span> to get definitions from the remote database. The data-definitions file contains information about the metadata of the data that is being replicated. There are two types of definitions files:</p>
<ul>
<li>
<p>A <span class="italic">source-definitions file</span> contains the definitions of source tables.</p>
</li>
<li>
<p>A <span class="italic"><a id="sthref642"></a>target-definitions file</span> contains the definitions of the target tables.</p>
</li>
</ul>
<p>You can use multiple data-definitions files in a parameter file. For example, each one can contain the definitions for a distinct application.</p>
<div id="GWUAD479" class="sect2"><a id="sthref643"></a>
<h3 class="sect2"><span class="secnum">13.3.1</span> Contents of the Definitions File</h3>
<p>The format of a data-definitions file is for internal use and should not be edited by an Oracle GoldenGate user unless instructed to do so in documented procedures or by a support representative. The file begins with a file header that shows the version of DEFGEN, information about character sets, the database type, the locale, and internal metadata that indicates other data properties. Following the header are the table-definition sections. Each table-definition section contains a table name, record length, number of columns, and one or more column definitions.</p>
</div>
<!-- class="sect2" -->
<div id="GWUAD480" class="sect2"><a id="sthref644"></a>
<h3 class="sect2"><span class="secnum">13.3.2</span> Which Definitions File Type to Use, and Where</h3>
<p>The type of definitions file to use depends on where column mapping and conversion will be performed.</p>
<ul>
<li>
<p>When replicating from any type of Windows or UNIX-based database system to any other Windows or UNIX-based system, the mapping and conversion can be performed by Extract, a data-pump Extract, or Replicat, but is usually performed by Replicat on the target system. However, if Oracle GoldenGate must convert between different character sets, the mapping and conversion must be performed by Replicat on the target. See <a href="#i1061691">Section 13.3.3, "Understanding the Effect of Character Sets on Definitions Files."</a></p>
</li>
<li>
<p>When replicating from any Windows, UNIX, or Linux-based database system to an Enscribe target on a NonStop system, the mapping and conversion must be performed on the Windows, UNIX, or Linux system: Only Extract can convert two- and three-part SQL names and data types to the three-part file names that are used on the NonStop platform. In this scenario, Oracle GoldenGate cannot convert between source and target character sets. See <a href="#i1061691">Section 13.3.3, "Understanding the Effect of Character Sets on Definitions Files."</a></p>
</li>
</ul>
<p>Therefore:</p>
<ul>
<li>
<p>To perform column mapping and conversion on the target, use a <span class="italic">source-definitions file</span> that was generated on the source to supply the source definitions to Replicat.</p>
</li>
<li>
<p>To perform column mapping and conversion on the source, use a <span class="italic"><a id="sthref645"></a>target-definitions file</span> that was generated on the target to supply target definitions to the primary Extract or a data-pump Extract, depending on which process does the conversion<span class="italic">.</span></p>
</li>
<li>
<p>To perform column mapping or transformation on an intermediary system, you may need to use multiple definition file types. See <a href="wu_live_reporting.htm#i1008368">Section 5.4, "Creating a Reporting Configuration with a Data Pump on an Intermediary System"</a> and <a href="wu_live_reporting.htm#i1001238">Section 5.5, "Creating a Cascading Reporting Configuration."</a> Note that if there is not a Replicat on the intermediary system, conversion between character sets cannot be performed.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i1061691"></a>
<div id="GWUAD481" class="sect2">
<h3 class="sect2"><span class="secnum">13.3.3</span> Understanding the Effect of Character Sets on Definitions Files</h3>
<p>Oracle GoldenGate takes into consideration the character set encoding of the database when performing data conversion, and it takes into consideration the character set of the local operating system when creating a definitions file. Take the following guidelines into account when the source and target data have different character sets.</p>
<div id="GWUAD482" class="sect3"><a id="sthref646"></a>
<h4 class="sect3"><span class="secnum">13.3.3.1</span> Confining Data Mapping and Conversion to the Replicat Process</h4>
<p>Replicat is the only process that converts replicated data between different character sets. It converts data <span class="italic">from</span> the source database character set <span class="italic">to</span> the target database character set (or to the character set of the database on an intermediary system in a cascading configuration). As a result, data mapping and conversion must be performed by Replicat if source and target character sets are different. It cannot be performed on a source system, nor on an intermediary system that only contains a data pump. A target-definitions file is invalid in these cases.</p>
</div>
<!-- class="sect3" -->
<div id="GWUAD483" class="sect3"><a id="sthref647"></a>
<h4 class="sect3"><span class="secnum">13.3.3.2</span> Avoiding File Corruptions Due to Operating System Character Sets</h4>
<p>By default, DEFGEN writes the definitions file itself in the character set of the local operating system. A definitions file can be created on the local system and transferred to the remote system without any encoding-related problems if the following is true:</p>
<ul>
<li>
<p>The remote system to which you are transfering the definitions file has the same or equivalent operating-system character set as the local system</p>
</li>
<li>
<p>The operating-system character set of the remote system is a subset of the operating-system character set of the local system, For example, if the source and target character sets both are ASCII-compatible or EBCDIC-compatible and all table and column names use only 7-bit US-ASCII or equivalent characters, you can move the definition file between those systems.</p>
</li>
</ul>
<p>Many operating-system character sets have little or no compatibility between them. To write the definitions file in a character set that is compatible with, or the same as, the one used by the remote system, use the <code dir="ltr">CHARSET</code> option of the <code dir="ltr">DEFSFILE</code> parameter when you configure DEFGEN.</p>
</div>
<!-- class="sect3" -->
<a id="i1062012"></a>
<div id="GWUAD484" class="sect3">
<h4 class="sect3"><span class="secnum">13.3.3.3</span> Changing the Character Set of Existing Definitions Files</h4>
<p>In the case of an existing definitions file that is transfered to an operating system with an incompatible character set, you can run the DEFGEN utility on that system to convert the character set of the file to the required one. This procedure takes two input arguments: the name of the definitions file and the <code dir="ltr"><a id="sthref648"></a>UPDATECS</code> <code dir="ltr"><span class="codeinlineitalic">character_set</span></code> parameter. For example:</p>
<pre dir="ltr">
defgen ./dirdef/source.def UPDATECS UTF-8
</pre>
<p><code dir="ltr">UPDATECS</code> helps in situations such as when a <a id="sthref649"></a>Japanese table name on Japanese Windows is written in <a id="sthref650"></a>Windows CP932 to the data-definitions file, and then the definitions file is transferred to Japanese UNIX. The file cannot be used unless the UNIX is configured in PCK locale. Thus, you must use <code dir="ltr">UPDATECS</code> to convert the encoding of the definitions file to the correct format.</p>
</div>
<!-- class="sect3" -->
<div id="GWUAD1105" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref651"></a>
<h4 class="sect3"><span class="secnum">13.3.3.4</span> Downloading from a z/OS system to another platform</h4>
<p>Definitions files generated on an IBM z/OS platform must be downloaded in <code dir="ltr">BINARY</code> mode when transferring them to a non-z/OS platform.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="GWUAD485" class="sect2"><a id="sthref652"></a>
<h3 class="sect2"><span class="secnum">13.3.4</span> Using a Definitions Template</h3>
<p>When you create a definitions file, you can specify a definitions<a id="sthref653"></a><a id="sthref654"></a> template that reduces the need to create new definitions files when tables are added to the Oracle GoldenGate configuration after the initial startup. To use a template, all of the new tables must have identical structures, such as in a customer database where there are separate but identical tables for each customer (see <a href="#i1055063">Section 13.2.1, "Rules for Tables to be Considered Identical"</a>).</p>
<p>If you do not use a template and new tables are added after startup, you must generate a definitions file for each new table that is added to the Oracle GoldenGate configuration, then copy their contents to the existing master definitions file, and then restart the process.</p>
</div>
<!-- class="sect2" -->
<div id="GWUAD486" class="sect2"><a id="sthref655"></a>
<h3 class="sect2"><span class="secnum">13.3.5</span> Configuring Oracle GoldenGate to Capture Data-definitions</h3>
<p>To configure Oracle GoldenGate to use a data-definitions file and template (if needed), you will:</p>
<ul>
<li>
<p><a href="#i1060109">Configure DEFGEN</a></p>
</li>
<li>
<p><a href="#i1060113">Run DEFGEN</a></p>
</li>
<li>
<p><a href="#i1061185">Transfer the Definitions File to the Remote System</a></p>
</li>
<li>
<p><a href="#i1060124">Specify the Definitions File</a></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not create a data-definitions file for Oracle sequences. It is not needed and DEFGEN does not support it.</div>
</li>
</ul>
<a id="i1060109"></a>
<div id="GWUAD487" class="sect3">
<h4 class="sect3"><span class="secnum">13.3.5.1</span> Configure DEFGEN</h4>
<p>Perform these steps on the system from which you want to obtain metadata definitions.</p>
<ol>
<li>
<p>From the Oracle GoldenGate directory, run GGSCI.</p>
</li>
<li>
<p>In GGSCI, issue the following command to create a DEFGEN parameter file.</p>
<pre dir="ltr">
EDIT PARAMS DEFGEN
</pre></li>
<li>
<p>Enter the parameters listed in <a href="#g1083696">Table 13-1</a> in the order shown, starting a new line for each parameter statement.</p>
<div id="GWUAD488" class="tblhruleformalwide"><p class="titleintable"><a id="sthref656"></a><a id="g1083696"></a>Table 13-1 <a id="sthref657"></a><a id="sthref658"></a>DEFGEN Parameters</p>
<table class="cellalignment160" title="DEFGEN Parameters" summary="This table describes the DEFGEN parameters.">
<thead>
<tr class="cellalignment151">
<th class="cellalignment161" id="r1c1-t3">Parameter</th>
<th class="cellalignment161" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment151">
<td class="cellalignment157" id="r2c1-t3" headers="r1c1-t3">
<pre dir="ltr">
CHARSET <span class="codeinlineitalic">character_set</span>
</pre></td>
<td class="cellalignment157" headers="r2c1-t3 r1c2-t3">
<p>Use this parameter to specify a character set that DEFGEN will use to read the parameter file. By default, the character set of the parameter file is that of the local operating system. If used, <code dir="ltr">CHARSET</code> must be the first line of the parameter file.</p>
</td>
</tr>
<tr class="cellalignment151">
<td class="cellalignment157" id="r3c1-t3" headers="r1c1-t3">
<pre dir="ltr">
<a id="sthref659"></a>DEFSFILE <span class="codeinlineitalic">file_name</span> [APPEND | PURGE] [CHARSET <span class="codeinlineitalic">character_set</span>] [FORMAT RELEASE <span class="codeinlineitalic">major</span>.<span class="codeinlineitalic">minor</span>]
</pre>
<ul>
<li>
<p><code dir="ltr">APPEND</code> directs DEFGEN to write new content (from the current run) at the end of any existing content, if the specified file already exists.</p>
</li>
<li>
<p><code dir="ltr">PURGE</code> directs DEFGEN to purge the specified file before writing new content from the current run. This is the default.</p>
</li>
<li>
<p><code dir="ltr">CHARSET</code> generates the definitions file in the specified character set instead of the default character set of the operating system.</p>
</li>
<li>
<p><code dir="ltr">FORMAT</code> <code dir="ltr">RELEASE</code> specifies the Oracle GoldenGate release version of the definitions file. Use when the definitions file will be read by a process that is in an earlier version of Oracle GoldenGate than the DEFGEN process.</p>
</li>
</ul>
</td>
<td class="cellalignment157" headers="r3c1-t3 r1c2-t3">
<p>Specifies the relative or fully qualified name of the data-definitions file that is to be the output of DEFGEN.</p>
<p>See <a class="olink GWURF461" href="../../gg-winux/GWURF/gg_parameters043.htm#GWURF461"><span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span></a> for important information about these parameter options and their effect on character sets.</p>
<p>See <a href="#i1061691">Section 13.3.3, "Understanding the Effect of Character Sets on Definitions Files"</a> for more information.</p>
</td>
</tr>
<tr class="cellalignment151">
<td class="cellalignment157" id="r4c1-t3" headers="r1c1-t3">
<pre dir="ltr">
[{SOURCEDB | TARGETDB} <span class="codeinlineitalic">datasource</span>]
{USERIDALIAS <span class="codeinlineitalic">alias</span> | USERID <span class="codeinlineitalic">user</span>, PASSWORD <span class="codeinlineitalic">password</span> [<span class="codeinlineitalic">encryption_options</span>]}
</pre>
<ul>
<li>
<p><code dir="ltr">SOURCEDB | TARGETDB</code> specifies a data source name, if required as part of the connection information. Not required for Oracle.</p>
</li>
<li>
<p><code dir="ltr">USERID</code> <code dir="ltr"><span class="codeinlineitalic">user</span></code><code dir="ltr">, PASSWORD</code> <code dir="ltr"><span class="codeinlineitalic">password</span></code> <code dir="ltr"><span class="codeinlineitalic">[encryption_options]</span></code> specifies a user name and password, with optional encryption options.</p>
</li>
<li>
<p><code dir="ltr">USERIDALIAS</code> supplies database authentication through credentials stored in the Oracle GoldenGate credential store.</p>
</li>
</ul>
</td>
<td class="cellalignment157" headers="r4c1-t3 r1c2-t3">
<p>Specifies database connection information.</p>
<p>The <code dir="ltr"><span class="codeinlineitalic">datasource</span></code> can be a DSN (Datasource Name), a SQL/MX catalog, or a container of an Oracle container database (CDB). If connecting to an Oracle container database, connect to the root container as the common user if you need to generate definitions for objects in more than one container. Otherwise, you can connect to a specific container to generate definitions only for that container.</p>
<p>For more information about <code dir="ltr">SOURCEDB</code>, <code dir="ltr">USERID</code>, and <code dir="ltr">USERIDALIAS</code>, including the databases they support, see <a class="olink GWURF978" href="../../gg-winux/GWURF/gg_parameters.htm#GWURF978"><span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span></a>.</p>
</td>
</tr>
<tr class="cellalignment151">
<td class="cellalignment157" id="r5c1-t3" headers="r1c1-t3">
<p><code dir="ltr">NOCATALOG</code></p>
</td>
<td class="cellalignment157" headers="r5c1-t3 r1c2-t3">
<p>Removes the container name (Oracle) or the catalog name (SQL/MX) from table names before their definitions are written to the definitions file. Use this parameter if the definitions file is to be used for mapping to a database that only supports two-part names (<code dir="ltr"><span class="codeinlineitalic">owner.object</span></code>).</p>
</td>
</tr>
<tr class="cellalignment151">
<td class="cellalignment157" id="r6c1-t3" headers="r1c1-t3">
<pre dir="ltr">
TABLE <span class="codeinlineitalic">[container. | catalog.]owner</span>.<span class="codeinlineitalic">table</span>
[, {DEF | TARGETDEF} <span class="codeinlineitalic">template</span>];
</pre>
<p>Where:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">container</span></code> is a container in an Oracle container database.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">catalog</span></code> is a catalog in a SQL/MX database.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">owner</span></code> is the name of the schema that contains the table to be defined.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">table</span></code> is the table that is to be defined.</p>
</li>
<li>
<p><code dir="ltr">[, {DEF | TARGETDEF}</code> <code dir="ltr"><span class="codeinlineitalic">template</span></code><code dir="ltr">]</code> additionally creates a definitions template based on the metadata of this table. This option is not supported for initial loads. See <a class="olink GWURF546" href="../../gg-winux/GWURF/gg_parameters160.htm#GWURF546"><span class="italic">Reference for Oracle GoldenGate for Windows and UNIX</span></a> for information about this option.</p>
</li>
</ul>
</td>
<td class="cellalignment157" headers="r6c1-t3 r1c2-t3">
<p>Specifies the fully qualified name of a table or tables for which definitions will be defined and optionally uses the metadata of the table as a basis for a definitions template. Case-sensitivity of both table name and template name is preserved for case-sensitive databases. See <a href="wu_gettingstarted.htm#i1074957">Section 4.5, "Specifying Object Names in Oracle GoldenGate Input"</a> for instructions on wildcarding and case-sensitivity.</p>
<p>Specify a source table(s) if generating a source-definitions file or a target table(s) if generating a target-definitions file.</p>
<p>To exclude tables from a wildcard specification, use the <code dir="ltr">TABLEEXCLUDE</code> parameter.</p>
<p>Note that DEFGEN does not support UDTs.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" --></li>
<li>
<p>Save and close the file.</p>
</li>
<li>
<p>Exit GGSCI.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="i1060113"></a>
<div id="GWUAD489" class="sect3">
<h4 class="sect3"><span class="secnum">13.3.5.2</span> Run DEFGEN</h4>
<ol>
<li>
<p>From the directory where Oracle GoldenGate is installed, run DEFGEN using the following arguments. This example shows a UNIX file system structure.</p>
<pre dir="ltr">
defgen paramfile dirprm/defgen.prm [reportfile dirrpt/defgen.rpt]
[NOEXTATTR]
</pre>
<p>Where:</p>
<ul>
<li>
<p><code dir="ltr">defgen</code> is the name of the program.</p>
</li>
<li>
<p><code dir="ltr">paramfile</code> is a required keyword. <code dir="ltr">dirprm/defgen.prm</code> is the relative or full path name of the DEFGEN parameter file. (The typical location is shown in the example.)</p>
</li>
<li>
<p><code dir="ltr">reportfile</code> is a required keyword. <code dir="ltr">dirrpt/defgen.rpt</code> sends output to the screen and to the designated report file. (The typical location is shown in the example.) You can omit the <code dir="ltr">reportfile</code> argument to print to the screen only.</p>
</li>
<li>
<p><code dir="ltr"><a id="sthref660"></a>NOEXTATTR</code> can be used to support backward compatibility with Oracle GoldenGate versions that are older than Release 11.2.1 and do not support character sets other than ASCII, nor case-sensitivity or object names that are quoted with spaces. <code dir="ltr">NOEXTATTR</code> prevents DEFGEN from including the database locale and character set that support the globalization features that were introduced in Oracle GoldenGate Release 11.2.1. If the table or column name has multi-byte or special characters such as white spaces, DEFGEN does not include the table definition when <code dir="ltr">NOEXTATTR</code> is specified. If <code dir="ltr">APPEND</code> mode is used in the parameter file, <code dir="ltr">NOEXTATTR</code> is ignored, and the new table definition is appended in the existing file format, whether with the extra attributes or not.</p>
</li>
</ul>
</li>
<li>
<p>Repeat these steps for any additional definitions files that you want to create.</p>
</li>
<li>
<p>Using ASCII mode, FTP the definitions file (or files) from the local Oracle GoldenGate <code dir="ltr">dirdef</code> sub-directory to the remote <code dir="ltr">dirdef</code> sub-directory.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="i1061185"></a>
<div id="GWUAD490" class="sect3">
<h4 class="sect3"><span class="secnum">13.3.5.3</span> Transfer the Definitions File to the Remote System</h4>
<p>Use <code dir="ltr">BINARY</code> mode to FTP the data definitions file to the remote system if the local and remote operating systems are different and the definitions file is created for the remote operating system character set. This avoids unexpected characters to be placed in the file by the FTP program, such as new-line and line-feed characters. Always use <code dir="ltr">BINARY</code> mode when transferring definitions files from z/OS to a non-z/OS platform.</p>
</div>
<!-- class="sect3" -->
<a id="i1060124"></a>
<div id="GWUAD491" class="sect3">
<h4 class="sect3"><span class="secnum">13.3.5.4</span> Specify the Definitions File</h4>
<p>Associate a data-definitions file with the correct Oracle GoldenGate process in the following ways:</p>
<ul>
<li>
<p>Associate a target-definitions file with an Extract group or data pump by using the <code dir="ltr">TARGETDEFS</code> parameter in the Extract parameter file.</p>
</li>
<li>
<p>Associate a source-definitions file with the Replicat group by using the <code dir="ltr"><a id="sthref661"></a>SOURCEDEFS</code> parameter in the Replicat parameter file.</p>
</li>
<li>
<p>If Oracle GoldenGate is to perform mapping or conversion on an intermediary system that contains neither the source nor target database, associate a source-definitions file and a target-definitions file with the data pump Extract by using <code dir="ltr">SOURCEDEFS</code> and <code dir="ltr">TARGETDEFS</code> in the parameter file. For Oracle databases, the Oracle libraries also must be present on the intermediary system.</p>
</li>
</ul>
<p>See <a href="#i1057799">Section 13.3.7, "Examples of Using a Definitions File"</a> for the correct way to specify multiple definitions files.</p>
<p>Do not use <code dir="ltr">SOURCEDEFS</code> and <code dir="ltr">ASSUMETARGETDEFS</code> in the same parameter file. See <a href="#CIHIIDDA">Section 13.2, "Configuring Oracle GoldenGate to Assume Identical Metadata"</a> for more information about <code dir="ltr">ASSUMETARGETDEFS</code>.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="GWUAD492" class="sect2"><a id="sthref662"></a>
<h3 class="sect2"><span class="secnum">13.3.6</span> Adding Tables that Satisfy a Definitions Template</h3>
<p>To map a new table in the Oracle GoldenGate configuration to a definitions template, use the following options of the <code dir="ltr">TABLE</code> and <code dir="ltr">MAP</code> parameters, as appropriate:</p>
<ul>
<li>
<p><code dir="ltr">DEF</code> to specify the name of a source-definitions template.</p>
</li>
<li>
<p><code dir="ltr">TARGETDEF</code> to specify the name of a target-definitions template.</p>
</li>
</ul>
<p>Because these options direct the Extract or Replicat process to use the same definitions as the specified template, you need not create a new definitions file for the new table, nor restart the process.</p>
</div>
<!-- class="sect2" -->
<a id="i1057799"></a>
<div id="GWUAD493" class="sect2">
<h3 class="sect2"><span class="secnum">13.3.7</span> Examples of Using a Definitions File</h3>
<p>This topic contains some basic use cases that include a definitions file.</p>
<p><a href="#CIHGJCAH">Creating a Source-definitions file for Use on a Target System</a></p>
<p><a href="#CIHGCEHA">Creating Target-definitions Files for Use on a Source System</a></p>
<p><a href="#CIHCADFE">Creating Multiple Source-definitions Files for Use on a Target System</a></p>
<a id="CIHGJCAH"></a>
<div id="GWUAD1106" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">13.3.7.1</span> Creating a Source-definitions file for Use on a Target System</h4>
<p>The following configuration uses a DEFGEN parameter file that creates a source-definitions file as output. This example is for tables from an Oracle database.</p>
<pre dir="ltr">
DEFSFILE C:\ggs\dirdef\record.def
USERIDALIAS ogg
TABLE acct.cust100, DEF custdef;
TABLE ord.*;
TABLE hr.*;
</pre>
<p>The results of this DEFGEN configuration are:</p>
<ul>
<li>
<p>Individual definitions by name are created for all tables in the <code dir="ltr">ord</code> and <code dir="ltr">hr</code> schemas.</p>
</li>
<li>
<p>A <code dir="ltr">custdef</code> template is created based on table <code dir="ltr">acct.cust100</code>. In the database, there are other <code dir="ltr">acct.cust*</code> tables, each with identical definitions to <code dir="ltr">acct.cust100</code>.</p>
</li>
</ul>
<p>The tables are mapped in the Replicat parameter file as follows:</p>
<pre dir="ltr">
-- This is a simplified parameter file. Your requirements may vary.
REPLICAT acctrep
USERIDALIAS ogg
SOURCEDEFS c:\ggs\dirdef\record.def
MAP acct.cust*, TARGET acct.cust*, DEF custdef;
MAP ord.prod, TARGET ord.prod;
MAP ord.parts, TARGET ord.parts;
MAP hr.emp, TARGET hr.emp;
MAP hr.salary, TARGET hr.salary;
</pre>
<p>Note that definitions for tables that satisfy the wildcard specification <code dir="ltr">acct.cust*</code> are obtained from the <code dir="ltr">custdef</code> template, as directed by the <code dir="ltr">DEF</code> option of the first <code dir="ltr">MAP</code> statement.</p>
</div>
<!-- class="sect3" -->
<a id="CIHGCEHA"></a>
<div id="GWUAD1107" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">13.3.7.2</span> Creating Target-definitions Files for Use on a Source System</h4>
<p>If target definitions are required for the same tables, those tables can be mapped for a primary Extract or a data pump.</p>
<ul>
<li>
<p>Target definitions are required instead of source definitions if the target is an Enscribe database.</p>
</li>
<li>
<p>Target definitions are required in addition to source definitions if mapping and conversion are to be done on an intermediary system.</p>
</li>
</ul>
<p>The DEFGEN configuration to make the target-definitions file looks similar to the following:</p>
<pre dir="ltr">
DEFSFILE C:\ggs\dirdef\trecord.def
USERIDALIAS ogg
TABLE acct.cust100, DEF tcustdef;
TABLE ord.*;
TABLE hr.*;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
See the previous example for the DEFGEN configuration that makes the source-definitions file.</div>
<p>The Extract configuration looks similar to the following:</p>
<pre dir="ltr">
-- This is a simplified parameter file. Your requirements may vary.
EXTRACT acctex
USERIDALIAS ogg
RMTHOSTOPTIONS sysb, MGRPORT 7890, ENCRYPT AES192 KEYNAME mykey1
ENCRYPTTRAIL AES192
RMTTRAIL $data.ggsdat.rt
SOURCEDEFS c:\ggs\dirdef\record.def
TARGETDEFS c:\ggs\dirdef\trecord.def
TABLE acct.cust*, TARGET acct.cust*, DEF custdef, TARGETDEF tcustdef;
TABLE ord.prod, TARGET ord.prod;
TABLE ord.parts, TARGET ord.parts;
TABLE hr.emp, TARGET hr.emp;
TABLE hr.salary, TARGET hr.salary;
</pre>
<p>In this example, the source template named <code dir="ltr">custdef</code> (from the <code dir="ltr">record.def</code> file) and a target template named <code dir="ltr">tcustdef</code> (from the <code dir="ltr">trecord.def</code> file) are used for the <code dir="ltr">acc.cust*</code> tables. Definitions for the tables from the <code dir="ltr">ord</code> and <code dir="ltr">hr</code> schemas are obtained from explicit definitions based on the table names (but a wildcard specification could have been used here, instead)</p>
</div>
<!-- class="sect3" -->
<a id="CIHCADFE"></a>
<div id="GWUAD1108" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">13.3.7.3</span> Creating Multiple Source-definitions Files for Use on a Target System</h4>
<p>This is a simple example of how to use multiple definitions files. Your parameter requirements may vary, based on the Oracle GoldenGate topology and database type.</p>
<p>The following is the DEFGEN parameter file that creates the first data-definitions file.</p>
<pre dir="ltr">
DEFSFILE C:\ggs\dirdef\sales.def
USERIDALIAS ogg
TABLE ord.*;
</pre>
<p>The following is the DEFGEN parameter file that creates the second data-definitions file. Note the file name and table specification are different from the first one.</p>
<pre dir="ltr">
DEFSFILE C:\ggs\dirdef\admin.def
USERIDALIAS ogg
TABLE hr.*;
</pre>
<p>The tables for the first and second definitions file are mapped in the same Replicat parameter file as follows:</p>
<pre dir="ltr">
REPLICAT acctrep
USERIDALIAS ogg
SOURCEDEFS c:\ggs\dirdef\sales.def
MAP ord.*, TARGET ord.*;
SOURCEDEFS c:\ggs\dirdef\admin.def
MAP hr.*, TARGET hr.*;
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1061541"></a>
<div id="GWUAD495" class="sect1">
<h2 class="sect1"><span class="secnum">13.4</span> Configuring Oracle GoldenGate to Use a Combination of Similar and Dissimilar Definitions</h2>
<p><code dir="ltr">ASSUMETARGETDEFS</code> and <code dir="ltr">SOURCEDEFS</code> can be used in the same parameter file. This can be done when column mapping or conversion must be performed between some of the source-target table pairs, but not for other table pairs that are identical.</p>
<p>The following is an example of how to use <code dir="ltr">SOURCEDEFS</code> and <code dir="ltr">ASSUMETARGETDEFS</code> in the same parameter file. This example builds on the previous examples where tables in the <code dir="ltr">acct</code>, <code dir="ltr">ord</code>, and <code dir="ltr">hr</code> schemas require <code dir="ltr">SOURCEDEFS</code>, but it adds a <code dir="ltr">rpt</code> schema with tables that are dynamically created with the name <code dir="ltr">stock</code> appended with a random numerical value. For Oracle GoldenGate to replicate the DDL as well as the DML, the target tables must be identical. In that case, <code dir="ltr">ASSUMETARGETDEFS</code> is required.</p>
<pre dir="ltr">
REPLICAT acctrep
USERIDALIAS ogg
SOURCEDEFS c:\ggs\dirdef\record.def
MAP acct.cust*, TARGET acct.cust*, DEF custdef;
MAP ord.prod, TARGET ord.prod;
MAP ord.parts, TARGET ord.parts;
MAP hr.emp, TARGET hr.emp;
MAP hr.salary, TARGET hr.salary;
ASSUMETARGETDEFS
MAP rpt.stock, TARGET rpt.stock;
</pre></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment150">
<tr>
<td class="cellalignment157"><table class="cellalignment155">
<tr>
<td class="cellalignment154"><a href="wu_datainteg.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>

<td class="cellalignment154"><a href="wu_changesync.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table></td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment159">
<table class="cellalignment153">
<tr>
<td class="cellalignment154"><a href="../../index.html"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment154"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment154"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment154"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
