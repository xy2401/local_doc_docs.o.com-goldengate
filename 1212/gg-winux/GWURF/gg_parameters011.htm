<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>BATCHSQL</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056" />
<meta name="description" content="Contains instructions for using Oracle GoldenGate commands, parameters, and functions." />
<meta name="dcterms.created" content="2015-06-05T16:33:45Z" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Oracle&reg; GoldenGate Reference for Oracle GoldenGate for Windows and UNIX" />
<meta name="dcterms.identifier" content="E29392-08" />
<meta name="dcterms.isVersionOf" content="GWURF" />
<link rel="Start" href="../../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="gg_parameters010.htm" title="Previous" type="text/html" />
<link rel="Next" href="gg_parameters012.htm" title="Next" type="text/html" />
<link rel="alternate" href="../GWURF.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="../GWURF.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="../GWURF.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns"><div id="BREADCRUMBS"><a href="http://docs.oracle.com">Home</a> / <a href="../../index.html">Middleware</a> / <a href="../index.html">Oracle GoldenGate for Windows and UNIX</a>
</div>

<span id="PAGE" style="display:none;">127/413</span>
<!-- End Header --><a id="i1025987"></a>
<div id="GWURF404" class="refsect1">
<h1 class="refsect1">BATCHSQL</h1>
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref539"></a>Valid For</p>
<p>Replicat</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref540"></a>Description</p>
<p>Use the <code dir="ltr">BATCHSQL</code> parameter to increase the performance of Replicat. <code dir="ltr">BATCHSQL</code> causes Replicat to organize similar SQL statements into arrays and apply them at an accelerated rate. In its normal mode, Replicat applies one SQL statement at a time.</p>
<p><code dir="ltr">BATCHSQL</code> is valid for:</p>
<ul>
<li>
<p>DB2 for i (except V5R4 or i6.1)</p>
</li>
<li>
<p>DB2 LUW</p>
</li>
<li>
<p>DB2 on z/OS</p>
</li>
<li>
<p>Oracle</p>
</li>
<li>
<p>NonStop SQL/MX</p>
</li>
<li>
<p>PostgreSQL</p>
</li>
<li>
<p>SQL Server</p>
</li>
<li>
<p>Teradata</p>
</li>
</ul>
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="sthref541"></a>How BATCHSQL Works</p>
<p>In <code dir="ltr">BATCHSQL</code> mode, Replicat organizes similar SQL statements into batches within a memory queue, and then it applies each batch in one database operation. A batch contains SQL statements that affect the same table, operation type (insert, update, or delete), and column list. For example, each of the following is a batch:</p>
<ul>
<li>
<p>Inserts to table A</p>
</li>
<li>
<p>Inserts to table B</p>
</li>
<li>
<p>Updates to table A</p>
</li>
<li>
<p>Updates to table B</p>
</li>
<li>
<p>Deletes from table A</p>
</li>
<li>
<p>Deletes from table B</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle GoldenGate analyzes foreign-key referential dependencies in the batches before executing them. If dependencies exist among statements that are in different batches, more than one SQL statement per batch might be required to maintain the referential integrity.</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="sthref542"></a>Controlling the Number of Cached Statements</p>
<p>The <code dir="ltr">MAXSQLSTATEMENTS</code> parameter controls the number of statements that are cached. See <a href="gg_parameters104.htm#i1059576">"MAXSQLSTATEMENTS"</a> for more information. Old statements are recycled using a least-recently-used algorithm. The batches are executed based on a specified threshold (see <a href="#i2789998">"Managing Memory"</a>).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="sthref543"></a>Usage Restrictions</p>
<p>SQL statements that are treated as exceptions include:</p>
<ul>
<li>
<p>Statements that contain <code dir="ltr">LOB</code> or <code dir="ltr">LONG</code> data.</p>
</li>
<li>
<p>Statements that contain rows longer than 25k in length.</p>
</li>
<li>
<p>Statements where the target table has one or more unique keys besides the primary key. Such statements cannot be processed in batches because <code dir="ltr">BATCHSQL</code> does not guarantee the correct ordering for non-primary keys if their values could change.</p>
</li>
<li>
<p>(SQL Server) Statements where the target table has a trigger.</p>
</li>
<li>
<p>Statements that cause errors.</p>
</li>
</ul>
<p>When Replicat encounters exceptions in batch mode, it rolls back the batch operation and then tries to apply the exceptions in the following ways, always maintaining transaction integrity:</p>
<ul>
<li>
<p>First Replicat tries to use normal mode: one SQL statement at a time within the transaction boundaries that are set with the <code dir="ltr">GROUPTRANSOPS</code> parameter. See <a href="gg_parameters080.htm#i1006598">"GROUPTRANSOPS"</a> for more information.</p>
</li>
<li>
<p>If normal mode fails, Replicat tries to use source mode: apply the SQL within the same transaction boundaries that were used on the source.</p>
</li>
</ul>
<p>When finished processing exceptions, Replicat resumes <code dir="ltr">BATCHSQL</code> mode.</p>
<div id="GWURF405" class="tblformalwide"><p class="titleintable"><a id="sthref544"></a><a id="sthref545"></a>Table 3-31 Replicat Modes Comparison</p>
<table class="cellalignment145" title="Replicat Modes Comparison" summary="This table compares the Replicat operating modes. These modes are normal mode (apply serially), BATCHSQL mode (apply like operations in batches) and source mode (use the source transaction boundaries).">
<thead>
<tr class="cellalignment136">
<th class="cellalignment146" id="r1c1-t34">Source Transactions <span class="italic">(Assumes same table and column list)</span></th>
<th class="cellalignment146" id="r1c2-t34">Replicat Transaction in Normal Mode</th>
<th class="cellalignment146" id="r1c3-t34">Replicat Transaction in BATCHSQL Mode</th>
<th class="cellalignment146" id="r1c4-t34">Replicat Transactions in Source Mode</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment136">
<td class="cellalignment142" id="r2c1-t34" headers="r1c1-t34">
<p><span class="bold">Transaction 1:</span></p>
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
<p><span class="bold">Transaction2:</span></p>
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
<p><span class="bold">Transaction 3:</span></p>
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
</td>
<td class="cellalignment142" headers="r2c1-t34 r1c2-t34">
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
</td>
<td class="cellalignment142" headers="r2c1-t34 r1c3-t34">
<p><code dir="ltr">INSERT</code> (x3)</p>
<p><code dir="ltr">DELETE</code> (x3)</p>
</td>
<td class="cellalignment142" headers="r2c1-t34 r1c4-t34">
<p><span class="bold">Transaction 1:</span></p>
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
<p><span class="bold">Transaction 2:</span></p>
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
<p><span class="bold">Transaction 3:</span></p>
<p><code dir="ltr">INSERT</code></p>
<p><code dir="ltr">DELETE</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="sthref546"></a>When to Use BATCHSQL</p>
<p>When Replicat is in <code dir="ltr">BATCHSQL</code> mode, smaller row changes will show a higher gain in performance than larger row changes. At 100 bytes of data per row change, <code dir="ltr">BATCHSQL</code> has been known to improve the performance of Replicat by up to 300 percent, but actual performance benefits will vary, depending on the mix of operations. At around 5,000 bytes of data per row change, the benefits of using <code dir="ltr">BATCHSQL</code> diminish.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="i2789998"></a>Managing Memory</p>
<p>The gathering of SQL statements into batches improves efficiency but also consumes memory. To maintain optimum performance, use the following <code dir="ltr">BATCHSQL</code> options:</p>
<pre dir="ltr">
BATCHESPERQUEUE 
BYTESPERQUEUE 
OPSPERBATCH 
OPSPERQUEUE 
</pre>
<p>As a benchmark for setting values, assume that a batch of 1,000 SQL statements at 500 bytes each would require less than 10 megabytes of memory.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref547"></a>Default</p>
<p>Disabled (Process in normal Replicat mode)</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref548"></a>Syntax</p>
<pre dir="ltr">
BATCHSQL
[BATCHERRORMODE | NOBATCHERRORMODE]
[BATCHESPERQUEUE <span class="italic">n</span>]
[BATCHTRANSOPS <span class="italic">n</span>]
[BYTESPERQUEUE <span class="italic">n</span>]
[OPSPERBATCH <span class="italic">n</span>]
[OPSPERQUEUE <span class="italic">n</span>]
[THREADS (<span class="codeinlineitalic">threadID</span>[, <span class="codeinlineitalic">threadID</span>][, ...][, <span class="codeinlineitalic">thread_range</span>[, <span class="codeinlineitalic">thread_range</span>][, ...])]
[TRACE]
</pre>
<dl>
<dt><code dir="ltr">BATCHERRORMODE | NOBATCHERRORMODE</code></dt>
<dd>
<p>Sets the response of Replicat to errors that occur during <code dir="ltr">BATCHSQL</code> processing mode.</p>
<dl>
<dt><code dir="ltr">BATCHERRORMODE</code></dt>
<dd>
<p>Causes Replicat to try to resolve errors without leaving <code dir="ltr">BATCHSQL</code> mode. It converts inserts that fail on duplicate-record errors to updates, and it ignores missing-record errors for deletes. When using <code dir="ltr">BATCHERRORMODE</code>, use the <code dir="ltr">HANDLECOLLISIONS</code> parameter to prevent Replicat from abending.</p>
</dd>
<dt><code dir="ltr">NOBATCHERRORMODE</code></dt>
<dd>
<p>The default, causes Replicat to disable <code dir="ltr">BATCHSQL</code> processing temporarily when there is an error, and then retry the transaction first in normal mode and then, if normal mode fails, in source mode (same transaction boundaries as on the source).</p>
</dd>
</dl>
</dd>
<dt><code dir="ltr">BATCHESPERQUEUE</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Controls the maximum number of batches that one memory queue can contain. After <code dir="ltr">BATCHESPERQUEUE</code> is reached, a target transaction is executed.</p>
<ul>
<li>
<p>Minimum value is 1.</p>
</li>
<li>
<p>Maximum value is 1000.</p>
</li>
<li>
<p>Default is 50.</p>
</li>
</ul>
</dd>
<dt><code dir="ltr">BATCHTRANSOPS</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Controls the maximum number of batch operations that can be grouped into a transaction before requiring a commit. When <code dir="ltr">BATCHTRANSOPS</code> is reached, the operations are applied to the target.</p>
<ul>
<li>
<p>Minimum value is 1.</p>
</li>
<li>
<p>Maximum value is 100000.</p>
</li>
<li>
<p>Default is 1000 for nonintegrated Replicat (all database types) and 50 for an integrated Oracle Replicat.</p>
</li>
</ul>
</dd>
<dt><code dir="ltr">BYTESPERQUEUE</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Sets the maximum number of bytes that one queue can contain. After <code dir="ltr">BYTESPERQUEUE</code> is reached, a target transaction is executed.</p>
<ul>
<li>
<p>Minimum value is 1000000 bytes (1 megabyte).</p>
</li>
<li>
<p>Maximum value is 1000000000 bytes (1 gigabyte).</p>
</li>
<li>
<p>Default is 2000000 bytes (20 megabytes).</p>
</li>
</ul>
</dd>
<dt><code dir="ltr">OPSPERBATCH</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Sets the maximum number of row operations that one batch can contain. After <code dir="ltr">OPSPERBATCH</code> is reached, a target transaction is executed.</p>
<ul>
<li>
<p>Minimum value is 1.</p>
</li>
<li>
<p>Maximum value is 100000.</p>
</li>
<li>
<p>Default is 1200.</p>
</li>
</ul>
</dd>
<dt><code dir="ltr">OPSPERQUEUE</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Sets the maximum number of row operations in all batches that one queue can contain. After <code dir="ltr">OPSPERQUEUE</code> is reached, a target transaction is executed.</p>
<ul>
<li>
<p>Minimum value is 1.</p>
</li>
<li>
<p>Maximum value is 100000.</p>
</li>
<li>
<p>Default is 1200.</p>
</li>
</ul>
</dd>
<dt><code dir="ltr">THREADS (</code><code dir="ltr"><span class="codeinlineitalic">threadID</span></code><code dir="ltr">[,</code> <code dir="ltr"><span class="codeinlineitalic">threadID</span></code><code dir="ltr">][, ...][,</code> <code dir="ltr"><span class="codeinlineitalic">thread_range</span></code><code dir="ltr">[,</code> <code dir="ltr"><span class="codeinlineitalic">thread_range</span></code><code dir="ltr">][, ...]</code><code dir="ltr">)</code></dt>
<dd>
<p>Valid for <code dir="ltr">BATCHESPERQUEUE</code>, <code dir="ltr">BATCHTRANSOPS</code>, and <code dir="ltr">BYTESPERQUEUE</code>. Applies these options to the specified thread or threads of a coordinated Replicat.</p>
<dl>
<dt><code dir="ltr"><span class="codeinlineitalic">threadID</span></code><code dir="ltr">[,</code> <code dir="ltr"><span class="codeinlineitalic">threadID</span></code><code dir="ltr">][, ...]</code></dt>
<dd>
<p>Specifies a thread ID or a comma-delimited list of threads in the format of <code dir="ltr">threadID, threadID, threadID</code>.</p>
</dd>
<dt><code dir="ltr">[,</code> <code dir="ltr"><span class="codeinlineitalic">thread_range</span></code><code dir="ltr">[,</code> <code dir="ltr"><span class="codeinlineitalic">thread_range</span></code><code dir="ltr">][, ...]</code></dt>
<dd>
<p>Specifies a range of threads in the form of <code dir="ltr">threadIDlow-threadIDhigh</code> or a comma-delimted list of ranges in the format of <code dir="ltr">threadIDlow-threadIDhigh</code>, <code dir="ltr">threadIDlow-threadIDhigh</code>.</p>
</dd>
</dl>
<p>A combination of these formats is permitted, such as threadID, threadID, <code dir="ltr">threadIDlow-threadIDhigh</code>.</p>
</dd>
<dt><code dir="ltr">TRACE</code></dt>
<dd>
<p>Enables detailed tracing of <code dir="ltr">BATCHSQL</code> activity to the console and to the report file. Do not set tracing without the guidance of an Oracle Support analyst.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref549"></a>Example</p>
<pre dir="ltr">
BATCHSQL BATCHESPERQUEUE 100, OPSPERBATCH 2000
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment135">
<tr>
<td class="cellalignment142"><table class="cellalignment140">
<tr>
<td class="cellalignment139"><a href="gg_parameters010.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>

<td class="cellalignment139"><a href="gg_parameters012.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table></td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment144">
<table class="cellalignment138">
<tr>
<td class="cellalignment139"><a href="../../index.html"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment139"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment139"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
