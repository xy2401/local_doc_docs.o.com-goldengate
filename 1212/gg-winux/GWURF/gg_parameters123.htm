<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>PURGEOLDEXTRACTS for Manager</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056" />
<meta name="description" content="Contains instructions for using Oracle GoldenGate commands, parameters, and functions." />
<meta name="dcterms.created" content="2015-06-05T16:34:19Z" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Oracle&reg; GoldenGate Reference for Oracle GoldenGate for Windows and UNIX" />
<meta name="dcterms.identifier" content="E29392-08" />
<meta name="dcterms.isVersionOf" content="GWURF" />
<link rel="Start" href="../../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="gg_parameters122.htm" title="Previous" type="text/html" />
<link rel="Next" href="gg_parameters124.htm" title="Next" type="text/html" />
<link rel="alternate" href="../GWURF.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="../GWURF.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="../GWURF.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns"><div id="BREADCRUMBS"><a href="http://docs.oracle.com">Home</a> / <a href="../../index.html">Middleware</a> / <a href="../index.html">Oracle GoldenGate for Windows and UNIX</a>
</div>

<span id="PAGE" style="display:none;">239/413</span>
<!-- End Header -->
<div id="GWURF1025" class="refsect1"><a id="sthref1192"></a>
<h1 class="refsect1">PURGEOLDEXTRACTS for Manager</h1>
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref1193"></a>Valid For</p>
<p>Manager</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref1194"></a>Description</p>
<p>Use the <code dir="ltr">PURGEOLDEXTRACTS</code> parameter in a Manager parameter file to purge trail files when Oracle GoldenGate has finished processing them. Without using <code dir="ltr">PURGEOLDEXTRACTS</code>, no purging is performed, and trail files can consume significant disk space.</p>
<p>Using <code dir="ltr">PURGEOLDEXTRACTS</code> as a Manager parameter is preferred over using the Extract or Replicat version of <code dir="ltr">PURGEOLDEXTRACTS</code>. As a Manager parameter, <code dir="ltr">PURGEOLDEXTRACTS</code> allows you to manage trail files in a centralized fashion and take into account multiple processes.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref1195"></a>How to Use PURGEOLDEXTRACTS for Manager</p>
<p>To control the purging, follow these rules:</p>
<ul>
<li>
<p><code dir="ltr">USECHECKPOINTS</code> triggers a purge when all processes are finished with a file as indicated by their checkpoints. Basing the purges on checkpoints ensures that Manager does not delete any data until all processes are finished with it. This is essential in a production environment to ensure data integrity. <code dir="ltr">USECHECKPOINTS</code> considers the checkpoints of both Extract and Replicat before purging. Because <code dir="ltr">USECHECKPOINTS</code> is the default, it need not be specified in the <code dir="ltr">PURGEOLDEXTRACTS</code> statement. Manager obeys <code dir="ltr">USECHECKPOINTS</code> unless there is an explicit <code dir="ltr">NOUSECHECKPOINTS</code> entry.</p>
</li>
<li>
<p>Use the <code dir="ltr">MINKEEP</code> rules to set a minimum amount of time to keep data:</p>
<ul>
<li>
<p>Use <code dir="ltr">MINKEEPHOURS</code> or <code dir="ltr">MINKEEPDAYS</code> to keep data for <code dir="ltr"><span class="codeinlineitalic">n</span></code> hours or days.</p>
</li>
<li>
<p>Use <code dir="ltr">MINKEEPFILES</code> to keep at least <code dir="ltr"><span class="codeinlineitalic">n</span></code> trail files including the active file. The default number of files to keep is <code dir="ltr">1</code>.</p>
</li>
</ul>
<p>Use only one of the <code dir="ltr">MINKEEP</code> options. If more than one is used, Oracle GoldenGate selects one of them based on the following:</p>
<ul>
<li>
<p>If both <code dir="ltr">MINKEEPHOURS</code> and <code dir="ltr">MINKEEPDAYS</code> are specified, only the last one is accepted, and the other is ignored.</p>
</li>
<li>
<p>If either <code dir="ltr">MINKEEPHOURS</code> or <code dir="ltr">MINKEEPDAYS</code> is used with <code dir="ltr">MINKEEPFILES</code>, then <code dir="ltr">MINKEEPHOURS</code> or <code dir="ltr">MINKEEPDAYS</code> is accepted, and <code dir="ltr">MINKEEPFILES</code> is ignored.</p>
</li>
</ul>
</li>
</ul>
<p>Manager evaluates potential maintenance tasks based on the value set for the <code dir="ltr">CHECKMINUTES</code> parameter. When that value is reached, Manager determines which files to purge based on the Extract and Replicat processes configured on the local system. If at least one process reads a trail file, Manager applies the specified rules; otherwise, the rules do not take effect. The following are possible <code dir="ltr">PURGEOLDEXTRACT</code> rule combinations and the actions that Manager takes for them:</p>
<ul>
<li>
<p><code dir="ltr">USECHECKPOINTS</code> without <code dir="ltr">MINKEEP</code> rules: If checkpoints indicate that a file has been processed completely, it will be purged unless doing so would violate the default rule to keep at least one file.</p>
</li>
<li>
<p><code dir="ltr">USECHECKPOINTS</code> with <code dir="ltr">MINKEEP</code> rules: If checkpoints indicate that a file has been processed completely, it will be purged unless doing so would violate the <code dir="ltr">MINKEEP</code> rules.</p>
</li>
<li>
<p><code dir="ltr">NOUSECHECKPOINTS</code> without <code dir="ltr">MINKEEP</code> rules: The checkpoints are not considered, and the file will be purged unless doing so would violate the default rule to keep at least one file.</p>
</li>
<li>
<p><code dir="ltr">NOUSECHECKPOINTS</code> with <code dir="ltr">MINKEEP</code> rules: A file will be purged unless doing so would violate the <code dir="ltr">MINKEEP</code> rules.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref1196"></a>Additional Guidelines for PURGEOLDEXTRACTS for Manager</p>
<ul>
<li>
<p>Do not use more than 500 <code dir="ltr">PURGEOLDEXTRACTS</code> parameter statements in the same Manager parameter file.</p>
</li>
<li>
<p>When using this parameter, do not permit trail files to be deleted by any user or program other than Oracle GoldenGate. It will cause <code dir="ltr">PURGEOLDEXTRACTS</code> to function improperly.</p>
</li>
<li>
<p>When trails are stored on NFS, there is a difference in system time between the NFS drive and the local system where Manager is running. The trail is created with the NFS time, but the timestamps of the records in the trail are compared with the local system time to determine whether to purge them or not. Take into account any time differences when you create your <code dir="ltr">MINKEEP</code> rules.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref1197"></a>Default</p>
<pre dir="ltr">
USECHECKPOINTS
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref1198"></a>Syntax</p>
<pre dir="ltr">
PURGEOLDEXTRACTS <span class="italic">trail</span>
[, USECHECKPOINTS | NOUSECHECKPOINTS]
[, <span class="italic">MINKEEP_rule</span>]
[, <span class="italic">frequency</span>]
</pre>
<dl>
<dt><code dir="ltr"><span class="codeinlineitalic">trail</span></code></dt>
<dd>
<p>The trail to purge. Use a relative or fully qualified name.</p>
</dd>
<dt><code dir="ltr">USECHECKPOINTS</code></dt>
<dd>
<p>Allows purging according to any <code dir="ltr">MINKEEP</code> rules after all Extract and Replicat processes are done with the data as indicated by checkpoints. When using <code dir="ltr">USECHECKPOINTS</code>, you can use the <code dir="ltr">USERID</code> or <code dir="ltr">USERIDALIAS</code> parameters in the Manager parameter file, so that Manager can query the Replicat checkpoint table to get checkpoint information though it is not required.</p>
</dd>
<dt><code dir="ltr">NOUSECHECKPOINTS</code></dt>
<dd>
<p>Allows purging without considering checkpoints, based either on the default rule to keep a minimum of one file (if no <code dir="ltr">MINKEEP</code> rule is used) or the number of files specified with a <code dir="ltr">MINKEEP</code> rule.</p>
</dd>
<dt><code dir="ltr"><span class="codeinlineitalic">MINKEEP_rule</span></code></dt>
<dd>
<p>Can be one of the following to set rules for the minimum amount of time to keep an inactive file.</p>
<dl>
<dt><code dir="ltr">MINKEEPHOURS</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Keeps an inactive file for at least the specified number of hours.</p>
</dd>
<dt><code dir="ltr">MINKEEPDAYS</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Keeps an inactive file for at least the specified number of days.</p>
</dd>
<dt><code dir="ltr">MINKEEPFILES</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Keeps at least <code dir="ltr"><span class="codeinlineitalic">n</span></code> trail files, including the active file.</p>
</dd>
</dl>
</dd>
<dt><code dir="ltr"><span class="codeinlineitalic">frequency</span></code></dt>
<dd>
<p>Sets the frequency with which to purge inactive trail files. The default time for Manager to evaluate potential maintenance tasks is 10 minutes, as specified with the <code dir="ltr">CHECKMINUTES</code> parameter. At that interval, Manager evaluates the <code dir="ltr">PURGEOLDEXTRACTS</code> frequency and conducts the purge after the specified <code dir="ltr"><span class="codeinlineitalic">frequency</span></code>.</p>
<p><code dir="ltr"><span class="codeinlineitalic">frequency</span></code> can be one of the following:</p>
<dl>
<dt><code dir="ltr">FREQUENCYMINUTES</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Sets the frequency in minutes. The default purge frequency is 60 minutes.</p>
</dd>
<dt><code dir="ltr">FREQUENCYHOURS</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></dt>
<dd>
<p>Sets the frequency in hours.</p>
</dd>
</dl>
</dd>
</dl>
<p>See <a href="gg_parameters021.htm#i2753350">"CHECKMINUTES"</a> for more information about controlling the Manager maintenance check interval.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref1199"></a>Examples</p>
<dl>
<dd><a id="GWURF598"></a><a id="sthref1200"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p><code dir="ltr"><span class="codeinlineitalic">Status:</span></code> Trail files <code dir="ltr">AA000000</code>, <code dir="ltr">AA000001</code>, and <code dir="ltr">AA000002</code> exist. Replicat has been stopped for four hours and is not finished processing any of the files<code dir="ltr">.</code> The Manager parameters include:</p>
<pre dir="ltr">
PURGEOLDEXTRACTS /ggs/dirdat/AA*, USECHECKPOINTS, MINKEEPHOURS 2
</pre>
<p><code dir="ltr"><span class="codeinlineitalic">Result:</span></code> The amount of time that files must be retained was exceeded, but no files will be purged because checkpoints indicate that Replicat is not finished processing them.</p>
</dd>
<dd><a id="GWURF599"></a><a id="sthref1201"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p><code dir="ltr"><span class="codeinlineitalic">Status:</span></code> Trail files <code dir="ltr">AA000000</code>, <code dir="ltr">AA000001</code>, and <code dir="ltr">AA000002</code> exist. Replicat has been stopped for four hours and is not finished processing any of the files<code dir="ltr">.</code> The Manager parameters include:</p>
<pre dir="ltr">
PURGEOLDEXTRACTS /ggs/dirdat/AA*, NOUSECHECKPOINTS, MINKEEPHOURS 2
</pre>
<p><code dir="ltr"><span class="codeinlineitalic">Result:</span></code> All of the trail files will be purged because the minimum time to keep them was satisfied, and checkpoints are not considered before purging.</p>
</dd>
<dd><a id="GWURF600"></a><a id="sthref1202"></a></dd>
<dt class="seghead">Example 3&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p><code dir="ltr"><span class="codeinlineitalic">Status:</span></code> Replicat and Extract are finished processing data. There has been no access to the trail files for the last five hours. Trail files <code dir="ltr">AA000000</code>, <code dir="ltr">AA000001</code>, and <code dir="ltr">AA000002</code> exist. The Manager parameters include:</p>
<pre dir="ltr">
PURGEOLDEXTRACTS /ggs/dirdat/AA*, USECHECKPOINTS, MINKEEPHOURS 4, &amp;
MINKEEPFILES 4
</pre>
<p><code dir="ltr"><span class="codeinlineitalic">Result:</span></code> This is an example of why only one of the <code dir="ltr">MINKEEP</code> options should be set. <code dir="ltr">USECHECKPOINTS</code> requirements were satisfied, so the <code dir="ltr">MINKEEP</code> rules are considered when determining whether to purge <code dir="ltr">AA000002</code>. Only two files will remain if <code dir="ltr">AA000002</code> is purged, and that violates the <code dir="ltr">MINKEEPFILES</code> rule. Because both <code dir="ltr">MINKEEPFILES</code> and <code dir="ltr">MINKEEPHOURS</code> are specified, however, <code dir="ltr">MINKEEPFILES</code> is ignored. The file will be purged because it has not been accessed for five hours, and that satisfies the <code dir="ltr">MINKEEPHOURS</code> requirement of four hours.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment135">
<tr>
<td class="cellalignment142"><table class="cellalignment140">
<tr>
<td class="cellalignment139"><a href="gg_parameters122.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>

<td class="cellalignment139"><a href="gg_parameters124.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table></td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment144">
<table class="cellalignment138">
<tr>
<td class="cellalignment139"><a href="../../index.html"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment139"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment139"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
