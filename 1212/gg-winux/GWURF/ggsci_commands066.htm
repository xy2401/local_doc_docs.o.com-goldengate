<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>ADD SCHEMATRANDATA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056" />
<meta name="description" content="Contains instructions for using Oracle GoldenGate commands, parameters, and functions." />
<meta name="dcterms.created" content="2015-06-05T16:33:40Z" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Oracle&reg; GoldenGate Reference for Oracle GoldenGate for Windows and UNIX" />
<meta name="dcterms.identifier" content="E29392-08" />
<meta name="dcterms.isVersionOf" content="GWURF" />
<link rel="Start" href="../../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="ggsci_commands065.htm" title="Previous" type="text/html" />
<link rel="Next" href="ggsci_commands067.htm" title="Next" type="text/html" />
<link rel="alternate" href="../GWURF.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="../GWURF.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="../GWURF.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns"><div id="BREADCRUMBS"><a href="http://docs.oracle.com">Home</a> / <a href="../../index.html">Middleware</a> / <a href="../index.html">Oracle GoldenGate for Windows and UNIX</a>
</div>

<span id="PAGE" style="display:none;">70/413</span>
<!-- End Header --><a id="i1436643"></a>
<div id="GWURF265" class="refsect1">
<h1 class="refsect1">ADD SCHEMATRANDATA</h1>
<p>Valid for Oracle. Use <code dir="ltr">ADD SCHEMATRANDATA</code> to enable schema-level supplemental logging for a table. <code dir="ltr">ADD SCHEMATRANDATA</code> acts on all of the current and future tables in a given schema to automatically log a superset of available keys that Oracle GoldenGate needs for row identification.</p>
<p><code dir="ltr">ADD SCHEMATRANDATA</code> is valid for both integrated and classic capture and does the following:</p>
<ul>
<li>
<p>Enables Oracle supplemental logging for new tables created with a <code dir="ltr">CREATE TABLE</code>.</p>
</li>
<li>
<p>Updates supplemental logging for tables affected by an <code dir="ltr">ALTER TABLE</code> to add or drop columns.</p>
</li>
<li>
<p>Updates supplemental logging for tables that are renamed.</p>
</li>
<li>
<p>Updates supplemental logging for tables for which unique or primary keys are added or dropped.</p>
</li>
</ul>
<p>By default, <code dir="ltr">ADD SCHEMATRANDATA</code> logs the key columns of a table in the following order of priority:</p>
<ol>
<li>
<p>Primary key</p>
</li>
<li>
<p>In the absence of a primary key, all of the unique keys of the table, including those that are disabled, unusable or invisible. Unique keys that contain ADT member columns are also logged. Only unique keys on virtual columns (function-based indexes) are not logged.</p>
</li>
<li>
<p>If none of the preceding exists, all scalar columns of the table are logged. (System-generated row-OIDs are always logged.)</p>
</li>
</ol>
<p><code dir="ltr">ADD SCHEMATRANDATA</code> also supports the conditional or unconditional logging requirements for using integrated Replicat.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Apply Oracle Patch 10423000 to the source database if the Oracle version is earlier than 11.2.0.2.</div>
<p class="subhead2"><a id="GWURF967"></a>When to Use ADD SCHEMATRANDATA</p>
<p><code dir="ltr">ADD SCHEMATRANDATA</code> must be used in the following cases:</p>
<ul>
<li>
<p>For all tables that are part of an Extract group that is to be configured for integrated capture. <code dir="ltr">ADD SCHEMATRANDATA</code> ensures that the correct key is logged by logging all of the keys.</p>
</li>
<li>
<p>For all source tables that will be processed in an integrated Replicat group. Options are provided that enable the logging of the primary, unique, and foreign keys to support the computation of dependencies among relational tables being processed through different apply servers.</p>
</li>
<li>
<p>When DDL replication is active and DML is concurrent with DDL that creates new tables or alters key columns. It best handles scenarios where DML can be applied to objects very shortly after DDL is issued on them. <code dir="ltr">ADD SCHEMATRANDATA</code> causes the appropriate key values to be logged in the redo log atomically with each DDL operation, thus ensuring metadata continuity for the DML when it is captured from the log, despite any lag in Extract processing.</p>
</li>
</ul>
<p class="subhead2"><a id="GWURF968"></a>Database-level Logging Requirements for Using ADD SCHEMATRANDATA</p>
<p>Oracle strongly encourages putting the source database into forced logging mode and enabling minimal supplemental logging at the database level when using Oracle GoldenGate. This adds row chaining information, if any exists, to the redo log for update operations. See <a class="olink GIORA364" href="../../gg-winux/GIORA/setup.htm#GIORA364"><span class="italic">Installing and Configuring Oracle GoldenGate for Oracle Database</span></a> for more information about configuring logging to support Oracle GoldenGate.</p>
<p class="subhead2"><a id="GWURF969"></a>Additional Considerations for Using ADD SCHEMATRANDATA</p>
<ul>
<li>
<p>Before using <code dir="ltr">ADD SCHEMATRANDATA</code>, issue the <code dir="ltr">DBLOGIN</code> command. The user who issues the command must be granted the Oracle Streams administrator privilege.</p>
<pre dir="ltr">
SQL&gt; exec dbms_streams_auth.grant_admin_privilege('<span class="italic">user</span>')
</pre></li>
<li>
<p><code dir="ltr">ADD SCHEMATRANDATA</code> can be used instead of the <code dir="ltr">ADD TRANDATA</code> command when DDL replication is not enabled. Note, however, that if a table has no primary key but has multiple unique keys, <code dir="ltr">ADD SCHEMATRANDATA</code> causes the database to log all of the unique keys. In such cases, <code dir="ltr">ADD SCHEMATRANDATA</code> causes the database to log more redo data than does <code dir="ltr">ADD TRANDATA</code>. To avoid the extra logging, designate one of the unique keys as a primary key, if possible.</p>
</li>
<li>
<p>For tables with a primary key, with a single unique key, or without a key, <code dir="ltr">ADD SCHEMATRANDATA</code> adds no additional logging overhead, as compared to <code dir="ltr">ADD TRANDATA</code>. For more information, see <a href="ggsci_commands067.htm#i1408622">"ADD TRANDATA"</a>.</p>
</li>
<li>
<p>If you must log additional, non-key columns of a specific table (or tables) for use by Oracle GoldenGate, such as those needed for <code dir="ltr">FILTER</code> statements and <code dir="ltr">KEYCOLS</code> clauses in the <code dir="ltr">TABLE</code> and <code dir="ltr">MAP</code> parameters, issue an <code dir="ltr">ADD TRANDATA</code> command for those columns. That command has a <code dir="ltr">COLS</code> option to issue table-level supplemental logging for the columns, and it can be used in conjunction with <code dir="ltr">ADD SCHEMATRANDATA</code>.</p>
</li>
</ul>
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref301"></a>Syntax</p>
<pre dir="ltr">
ADD SCHEMATRANDATA schema {
[ALLOWNONVALIDATEDKEYS] [NOSCHEDULINGCOLS | ALLCOLS]}
</pre>
<dl>
<dt><code dir="ltr"><span class="codeinlineitalic">schema</span></code></dt>
<dd>
<p>The schema for which you want the supplementary key information to be logged. Do not use a wildcard. To issue <code dir="ltr">ADD SCHEMATRANDATA</code> for schemas in more than one pluggable database of a multitenant container database, log in to each pluggable database separately with <code dir="ltr">DBLOGIN</code> and then issue <code dir="ltr">ADD SCHEMATRANDATA</code>. See <a href="ggsci_commands059.htm#i971525">DBLOGIN</a> for more information.</p>
</dd>
<dt><code dir="ltr">ALLOWNONVALIDATEDKEYS</code></dt>
<dd>
<p>This option is valid for Oracle 11.2.0.4 and later 11g versions and Oracle 12.1.0.2 and later 12<span class="italic">c</span> versions. (Not valid for Oracle 11.2.0.3 or 12.1.0.1.) It includes <code dir="ltr">NON VALIDATED</code> and <code dir="ltr">NOT VALID</code> primary keys in the supplemental logging. These keys override the normal key selection criteria that is used by Oracle GoldenGate. If the <code dir="ltr">GLOBALS</code> parameter <code dir="ltr">ALLOWNONVALIDATEDKEYS</code> is being used, <code dir="ltr">ADD SCHEMATRANDATA</code> runs with <code dir="ltr">ALLOWNONVALIDATEDKEYS</code> whether or not it is specified. By default <code dir="ltr">NON VALIDATED</code> and <code dir="ltr">NOT VALID</code> primary keys are not logged. For more information, see the <code dir="ltr">GLOBALS</code> <a href="gg_parameters004.htm#BABBFECA">ALLOWNONVALIDATEDKEYS</a> parameter.</p>
</dd>
<dt><code dir="ltr">NOSCHEDULINGCOLS | ALLCOLS</code></dt>
<dd>
<p>These options control supplemental logging for an Oracle target database. You can use these options together though the latter option is used. For example, with the <code dir="ltr">ADD SCHEMATRANDATA oggadm_ext ALLCOL NOSCHEDULINGCOLS</code> command the <code dir="ltr">NOSCHEDULINGCOLS</code> option would be used.</p>
<dl>
<dt><code dir="ltr">NOSCHEDULINGCOLS</code></dt>
<dd>
<p>Disables the logging of scheduling columns. By default, <code dir="ltr">ADD SCHEMATRANDATA</code> enables the unconditional logging of the primary key and the conditional supplemental logging of all unique key(s) and foreign key(s) of all current and future tables in the given schema. Unconditional logging forces the primary key values to the log whether or not the key was changed in the current operation. Conditional logging logs all of the column values of a foreign or unique key if at least one of them was changed in the current operation. The integrated Replicat primary key, unique keys, and foreign keys must all be available to the inbound server to compute dependencies. For more information about integrated Replicat, see <a class="olink GIORA218" href="../../gg-winux/GIORA/process_mode.htm#GIORA218"><span class="italic">Installing and Configuring Oracle GoldenGate for Oracle Database</span></a>.</p>
</dd>
<dt><code dir="ltr">ALLCOLS</code></dt>
<dd>
<p>Enables the unconditional supplemental logging of all supported key and non-key columns for all current and future tables in the given schema. This option enables the logging of the keys required to compute dependencies, plus columns that are required for filtering, conflict resolution, or other purposes. Columns like LOB, LONG, and ADT are not included.</p>
</dd>
</dl>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref302"></a>Example</p>
<dl>
<dd><a id="GWURF266"></a><a id="sthref303"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following enables supplemental logging for the schema <code dir="ltr">scott</code>.</p>
<pre dir="ltr">
ADD SCHEMATRANDATA scott
</pre></dd>
<dd><a id="GWURF267"></a><a id="sthref304"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example logs all supported key and non-key columns for all current and future tables in the schema named <code dir="ltr">scott</code>.</p>
<pre dir="ltr">
ADD SCHEMATRANDATA scott ALLCOLS
</pre></dd>
</dl>
<pre dir="ltr">
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment135">
<tr>
<td class="cellalignment142"><table class="cellalignment140">
<tr>
<td class="cellalignment139"><a href="ggsci_commands065.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>

<td class="cellalignment139"><a href="ggsci_commands067.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table></td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment144">
<table class="cellalignment138">
<tr>
<td class="cellalignment139"><a href="../../index.html"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment139"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment139"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
