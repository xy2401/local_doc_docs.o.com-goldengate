<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>CACHEMGR</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056" />
<meta name="description" content="Contains instructions for using Oracle GoldenGate commands, parameters, and functions." />
<meta name="dcterms.created" content="2015-06-05T16:33:48Z" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Oracle&reg; GoldenGate Reference for Oracle GoldenGate for Windows and UNIX" />
<meta name="dcterms.identifier" content="E29392-08" />
<meta name="dcterms.isVersionOf" content="GWURF" />
<link rel="Start" href="../../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="gg_parameters016.htm" title="Previous" type="text/html" />
<link rel="Next" href="gg_parameters018.htm" title="Next" type="text/html" />
<link rel="alternate" href="../GWURF.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="../GWURF.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="../GWURF.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns"><div id="BREADCRUMBS"><a href="http://docs.oracle.com">Home</a> / <a href="../../index.html">Middleware</a> / <a href="../index.html">Oracle GoldenGate for Windows and UNIX</a>
</div>

<span id="PAGE" style="display:none;">133/413</span>
<!-- End Header --><a id="i1198123"></a>
<div id="GWURF413" class="refsect1">
<h1 class="refsect1">CACHEMGR</h1>
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref584"></a>Valid For</p>
<p>Extract and Replicat, all databases except DB2 on z/OS</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref585"></a>Description</p>
<p>Use the <code dir="ltr">CACHEMGR</code> parameter to control the amount of virtual memory and temporary disk space that is available for caching uncommitted transaction data.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Before changing this parameter from its default cache settings, contact Oracle Support for guidance. The cache manager of Oracle GoldenGate is internally self-configuring and self-adjusting, and most production environments will not require changes to this parameter. You can, however, specify the directory for the page files without assistance.</div>
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="sthref586"></a>About Memory Management</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
While described as accurately as possible here, the underlying design of the memory management component is always subject to changes that may be required by ongoing product improvements.</div>
<p>Because Oracle GoldenGate replicates only committed transactions, it stores the operations of each transaction in a managed virtual-memory pool known as a <span class="italic">cache</span> until it receives either a commit or a rollback for that transaction. One global cache operates as a shared resource of an Extract or Replicat process. The following sub-pools of virtual memory are allocated from the global cache:</p>
<ul>
<li>
<p>One sub-pool per Extract log reader thread or Replicat trail reader thread for most transaction row data.</p>
</li>
<li>
<p>One sub-pool for BLOB data and possibly other large items.</p>
</li>
</ul>
<p>Within each sub-pool, individual buffers are allocated from the global cache. Each buffer contains information that is relative to a transaction that is being processed by Oracle GoldenGate.</p>
<p>The Oracle GoldenGate cache manager takes advantage of the memory management functions of the operating system to ensure that Oracle GoldenGate processes work in a sustained and efficient manner. Within its cache, it makes use of modern virtual memory techniques by:</p>
<ul>
<li>
<p>Allocating and managing active buffers efficiently.</p>
</li>
<li>
<p>Recycling old buffers instead of paging to disk, when possible.</p>
</li>
<li>
<p>Paging less-used information to disk, when necessary.</p>
</li>
</ul>
<p>The actual amount of physical memory that is used by any Oracle GoldenGate process is controlled by the operating system, not the Oracle GoldenGate program.</p>
<p>The cache manager keeps an Oracle GoldenGate process working within the soft limit of its global cache size, only allocating virtual memory on demand. (The cache manager does not allocate physical memory, over which it has no control.) System calls to increase the cache size are made only as a last resort and, when used, are always followed by the release of virtual memory back to the system.</p>
<p>The system must have sufficient swap space for each Oracle GoldenGate Extract and Replicat process that will be running. To determine the required swap space:</p>
<ol>
<li>
<p>Start one Extract process and one Replicat process.</p>
</li>
<li>
<p>Run GGSCI.</p>
</li>
<li>
<p>View the report file of each running process and find the line <code dir="ltr">PROCESS VM AVAIL FROM OS (min)</code>.</p>
</li>
<li>
<p>Round up each value to the next full gigabyte if needed. For example, round up 1.76GB to 2 GB.</p>
</li>
<li>
<p>Multiply the rounded-up Extract value by the number of Extract processes.</p>
</li>
<li>
<p>Multiply the rounded-up Replicat value by the number of Replicat processes.</p>
</li>
<li>
<p>Add the two results, plus any additional swap space required by other Oracle GoldenGate processes and other processes on the system.</p>
<pre dir="ltr">
(<span class="italic">PROCESS_VM</span> x <span class="italic">number_Extracts</span>) + (<span class="italic">PROCESS_VM</span> x <span class="italic">number_Replicats</span>) +
(<span class="italic">swap_for_other_processes</span>) = max_swap_space_on_system
</pre>
<p>This sum is the maximum amount of swap space that could be needed for those processes. The actual amount of physical memory that is used by any Oracle GoldenGate process is controlled by the operating system, not the Oracle GoldenGate process. The global cache size is controlled by the <code dir="ltr">CACHESIZE</code> option of <code dir="ltr">CACHEMGR</code>.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
The cache manager is also used internally by Oracle GoldenGate for other purposes besides the BLOB sub-pool and the sub-pool for other transaction data. You may see these additional memory pools when you view the statistics.</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="i1197738"></a>When to Adjust CACHEMGR</p>
<p>The memory manager generates statistics that can be viewed with the <code dir="ltr">SEND EXTRACT</code> or <code dir="ltr">SEND REPLICAT</code> command when used with the <code dir="ltr">CACHEMANAGER</code> option. The statistics show the size of the memory pool, the paging frequency, the size of the transactions, and other information that creates a system profile.</p>
<p>Based on this profile, you might need to make adjustments to the memory cache if you see performance problems that appear to be related to file caching. The first step is to modify the <code dir="ltr">CACHESIZE</code> parameter. You might need to use a higher or lower cache size based on the size and type of transactions that are being generated.</p>
<p>It is possible, however, that operating system constraints could limit the effect of modifying any components of the <code dir="ltr">CACHEMGR</code> parameter. In particular, if the operating system has a small per-process virtual memory limit, it will force more file caching, regardless of the <code dir="ltr">CACHEMGR</code> configuration.</p>
<p>See <a href="ggsci_commands014.htm#i1432262">"SEND EXTRACT"</a> and <a href="ggsci_commands028.htm#i935638">"SEND REPLICAT"</a> for more information.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="sthref587"></a>Viewing Basic Statistics in the Report File</p>
<p>Upon completing its initialization, the cache manager writes the following statistics to the process report file:</p>
<pre dir="ltr">
CACHEMGR virtual memory values (may have been adjusted)
CACHESIZE: 32G
CACHEPAGEOUTSIZE (normal): 8M 
PROCESS VM AVAIL FROM OS (min): 63.97G
CACHESIZEMAX (strict force to disk): 48G
</pre>
<p>Where:</p>
<ul>
<li>
<p><code dir="ltr">CACHESIZE</code> shows the soft limit of virtual memory that is available to the process for caching transaction data. It is determined dynamically, based on the value of <code dir="ltr">PROCESS VM AVAIL FROM OS (min)</code>. It can be controlled with the <code dir="ltr">CACHESIZE</code> option of <code dir="ltr">CACHEMGR</code>.</p>
</li>
<li>
<p><code dir="ltr">PROCESS VM AVAIL FROM OS (min)</code> shows the approximate amount of virtual memory that the process has determined it can use. For internal reasons, this amount may be less than what the operating system shows as being available.</p>
</li>
<li>
<p><code dir="ltr">CACHESIZEMAX (strict force to disk)</code> is derived from <code dir="ltr">PROCESS VM AVAIL FROM OS</code> and <code dir="ltr">CACHESIZE</code>. It can be understood in terms of how the cache manager determines which transactions are eligible to be paged out to disk. Normally, only those whose current virtual memory buffers exceed a specific internal value are eligible to be paged. When the total memory requested exceeds <code dir="ltr">CACHESIZE</code>, the cache manager looks for transactions to write to disk and chooses them from the list of eligible ones. If the eligible ones have been paged to disk already, and the virtual memory in use now exceeds <code dir="ltr">CACHESIZEMAX (strict force to disk)</code>, then any transaction that requires additional buffers can be eligible for paging. This guarantees that virtual memory will always be available.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="sthref588"></a>Identifying the Paging Directory</p>
<p>By default, Oracle GoldenGate maintains data that it swaps to disk in the <code dir="ltr">dirtmp</code> sub-directory of the Oracle GoldenGate installation directory. The cache manager assumes that all of the free space on the file system is available. This directory can fill up quickly if there is a large transaction volume with large transaction sizes. To prevent I/O contention and possible disk-related Extract failures, dedicate a disk to this directory. You can assign a name and size to this directory with the <code dir="ltr">CACHEDIRECTORY</code> option of the <code dir="ltr">CACHEMGR</code> parameter. The <code dir="ltr">CACHESIZE</code> option of <code dir="ltr">CACHEMGR</code> sets a soft limit for the amount of virtual memory (cache size) that is available for caching transaction data.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect2"><a id="sthref589"></a>Guidelines for Using CACHEMGR</p>
<ul>
<li>
<p>This parameter is valid for all databases supported by Oracle GoldenGate.</p>
</li>
<li>
<p>At least one argument must be supplied. <code dir="ltr">CACHEMGR</code> by itself is invalid.</p>
</li>
<li>
<p>Parameter options can be listed in any order.</p>
</li>
<li>
<p>Only one <code dir="ltr">CACHEMGR</code> parameter is permitted in a parameter file.</p>
</li>
<li>
<p>To use this parameter correctly (other than specifying the directory for the page files), you must know the profile of the system and the kinds of transactions that are being propagated from your applications. In normal environments, you should not need to change this parameter, because the cache manager is self-adjusting. If you feel that an adjustment is warranted, please open an Oracle service request at http://support.oracle.com.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref590"></a>Default</p>
<p>None</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref591"></a>Syntax</p>
<pre dir="ltr">
CACHEMGR {
  [, CACHESIZE <span class="italic">size</span>]
  [, CACHEDIRECTORY <span class="italic">path</span> [<span class="italic">size</span>] [, ...]]
CACHEMGR CACHEFSOPTION { MS_SYNC | MS_ASYNC } |
}
</pre>
<dl>
<dt><code dir="ltr">CACHESIZE</code> <code dir="ltr"><span class="codeinlineitalic">size</span></code></dt>
<dd>
<p>Sets a soft limit for the amount of virtual memory (cache size) that is available for caching transaction data. On 64-bit systems, the default is 64 GB. On 32-bit systems, the cache size is determined dynamically by the cache manager.</p>
<p>The memory is allocated on demand. By default, the cache manager dynamically determines the amount of virtual memory that is available to it from the operating system and determines the appropriate cache size. The available virtual memory is reported with the <code dir="ltr">PROCESS VM AVAIL FROM OS</code> value in the report file. The <code dir="ltr">CACHESIZE</code> value will be sized down if it is larger than, or sufficiently close to, the amount of virtual memory that is available to the process. However, for systems with large address spaces, the cache manager does no further determination once an internal limit is reached.</p>
<p>The <code dir="ltr">CACHESIZE</code> value will always be a power of two, rounded down from the value of <code dir="ltr">PROCESS VM AVAIL FROM OS</code>, unless the latter is itself a power of two, in which case it is halved. After the specified size is consumed by data, the memory manager will try to free up memory by paging data to disk or by reusing aged buffers, before requesting more memory from the system.</p>
<p>If a transaction's cache virtual memory requirements grow beyond the initial buffer allocation, the additional amount of cache memory that is allocated by the cache manager is determined dynamically based on factors such as the current size of the cached data of this transaction, the size needed for the new data, and the amount of virtual memory that is being used conjointly by all the transactions.</p>
</dd>
<dt><code dir="ltr">CACHEDIRECTORY</code> <code dir="ltr"><span class="codeinlineitalic">path [size]</span></code></dt>
<dd>
<p>Specifies the name of the directory to which Oracle GoldenGate writes transaction data to disk temporarily when necessary. The default without this parameter is the <code dir="ltr">dirtmp</code> sub-directory of the Oracle GoldenGate installation directory. Any directory for temporary files can be on an Oracle Database File System, but cannot be on a direct I/O or concurrent I/O mounted file system that does not support the <code dir="ltr">mmap()</code> system call, such as AIX.</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">path</span></code> is a fully qualified directory name.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">size</span></code> sets a maximum amount of disk space that can be allocated to the specified directory. The upper limit is that which is imposed by the file system, such as maximum file size or number of files. The minimum size is 2 GB, which is enforced. There is no default. Do not use this option unless you must constrain the swap space that is used by Oracle GoldenGate because of resource limitations.</p>
</li>
</ul>
<p>You can specify more than one directory by using a <code dir="ltr">CACHEDIRECTORY</code> clause for each one. The maximum number of directories is 100.</p>
<p>The value can be specified in bytes or in terms of gigabytes, megabytes, or kilobytes in any of the following forms:</p>
<p><code dir="ltr">GB | MB | KB | G | M | K | gb | mb | kb | g | m | k</code></p>
</dd>
<dt><code dir="ltr">CACHEMGR CACHEFSOPTION {MS_SYNC | MS_ASYNC}</code></dt>
<dd>
<p>Performs synchronous or asynchronous writes of the mapped data in the Oracle GoldenGate memory cache manager.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect"><p class="titleinrefsubsect"><a id="sthref592"></a>Example</p>
<pre dir="ltr">
CACHEMGR CACHESIZE 500MB, CACHEDIRECTORY /ggs/temp 2GB, CACHEDIRECTORY /ggs2/temp 2GB
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment135">
<tr>
<td class="cellalignment142"><table class="cellalignment140">
<tr>
<td class="cellalignment139"><a href="gg_parameters016.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>

<td class="cellalignment139"><a href="gg_parameters018.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table></td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2013, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment144">
<table class="cellalignment138">
<tr>
<td class="cellalignment139"><a href="../../index.html"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment139"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment139"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
