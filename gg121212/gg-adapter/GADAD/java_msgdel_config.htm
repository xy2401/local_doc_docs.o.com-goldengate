<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>12 Configuring Message Delivery</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023">
<meta name="description" content="This chapter explains how to configure the adapter for delivering messages. To do this, you must set up the properties in the user exit properties file, configure an Extract as a data pump to run the user exit, and identify the built-in or custom event handlers you will use.">
<meta name="dcterms.created" content="2015-04-08T9:18:57Z">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="robots" content="all">
<meta name="dcterms.title" content="Oracle&reg; GoldenGate Application Adapters Administering Oracle GoldenGate Adapters">
<meta name="dcterms.identifier" content="E61853-01">
<meta name="partno" content="E64636-01">

<meta name="dcterms.isVersionOf" content="GADAD">
<link rel="Start" href="../../index.htm" title="Home" type="text/html">
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html">

<script type="application/javascript" src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html">
<link rel="Prev" href="java_msgdel_part.htm" title="Previous" type="text/html">
<link rel="Next" href="java_msgdel_using.htm" title="Next" type="text/html">
<link rel="alternate" href="../GADAD.pdf" title="PDF version" type="application/pdf">
<link rel="alternate" href="../GADAD.epub" title="ePub version" type="application/epub+zip">
<link rel="alternate" href="../GADAD.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook">
<link rel="schema.dcterms" href="http://purl.org/dc/terms/">
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="application/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53addf516e0e58a5"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>

                    <script>var w=window;if(w.performance||w.mozPerformance||w.msPerformance||w.webkitPerformance){var d=document;AKSB=w.AKSB||{},AKSB.q=AKSB.q||[],AKSB.mark=AKSB.mark||function(e,_){AKSB.q.push(["mark",e,_||(new Date).getTime()])},AKSB.measure=AKSB.measure||function(e,_,t){AKSB.q.push(["measure",e,_,t||(new Date).getTime()])},AKSB.done=AKSB.done||function(e){AKSB.q.push(["done",e])},AKSB.mark("firstbyte",(new Date).getTime()),AKSB.prof={custid:"322179",ustr:"",originlat:"0",clientrtt:"1",ghostip:"23.212.3.15",ipv6:false,pct:"10",clientip:"45.78.37.67",requestid:"2a825738",region:"32996",protocol:"",blver:14,akM:"dsca",akN:"ae",akTT:"O",akTX:"1",akTI:"2a825738",ai:"206465",ra:"false",pmgn:"",pmgi:"",pmp:"",qc:""},function(e){var _=d.createElement("script");_.async="async",_.src=e;var t=d.getElementsByTagName("script"),t=t[t.length-1];t.parentNode.insertBefore(_,t)}(("https:"===d.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/aksb.min.js")}</script>
                    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Skip Headers</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns"><div id="BREADCRUMBS"><a href="http://docs.oracle.com">Home</a> / <a href="../../index.html">Middleware</a> / <a href="../index.html">Oracle GoldenGate Adapters</a>
</div>

<span id="PAGE" style="display:none;">19/28</span>
<!-- End Header -->
<div id="GADAD311" class="chapter"><a id="CBDHFBFG"></a>
<h1 class="chapter"><span class="secnum">12</span> Configuring Message Delivery</h1>
<p><a id="GADAD544"></a>This chapter explains how to configure the adapter for delivering messages. To do this, you must set up the properties in the user exit properties file, configure an Extract as a data pump to run the user exit, and identify the built-in or custom event handlers you will use.</p>
<p>This chapter includes the following sections:</p>
<ul>
<li>
<p><a href="#h_s_e_d_m_a">Configure the JRE in the User Exit Properties File</a></p>
</li>
<li>
<p><a href="#A998892">Configure a Data Pump to Run the User Exit</a></p>
</li>
<li>
<p><a href="#A999416">Configure the Java Handlers</a></p>
</li>
</ul>
<a id="h_s_e_d_m_a"></a>
<div id="GADAD312" class="sect1">
<h2 class="sect1"><span class="secnum">12.1</span> Configure the JRE in the User Exit Properties File</h2>
<p>Modify the user exit properties file to point to the location of the Oracle GoldenGate for Java main jar (ggjava.jar) and set any additional JVM runtime boot options as required (these are passed directly to the JVM at startup):</p>
<pre>
jvm.bootoptions=-Djava.class.path=ggjava/ggjava.jar
-Dlog4j.configuration=log4j.properties -Xmx512m
</pre>
<p>Note the following options in particular:</p>
<ul>
<li>
<p>java.class.path can include any custom jars in addition to the core application (<code>ggjava.jar</code>). The current directory (.) is included by default in the class path. You can reference files relative to the Oracle GoldenGate install directory, to allow storing Java property files, Velocity templates and other class path resources in the <code>dirprm</code> subdirectory. It is also possible to append to the class path in the Java application properties file.</p>
</li>
<li>
<p>The log4j.configuration option specifies a log4j properties file, found in the class path. There are pre-configured default log4j settings for basic logging (<code>log4j.properties</code>), debug logging (<code>debug-log4j.properties</code>), and detailed trace-level logging (<code>trace-log4j.properties</code>), found in the resources/classes directory.</p>
</li>
</ul>
<p>Once the user exit properties file is correctly configured for your system, it usually remains unchanged. See <a href="java_msgdel_properties.htm#i1013678">Section 15.1, "User Exit Properties,"</a> for additional configuration options.</p>
</div>
<!-- class="sect1" -->
<a id="A998892"></a>
<div id="GADAD313" class="sect1">
<h2 class="sect1"><span class="secnum">12.2</span> Configure a Data Pump to Run the User Exit</h2>
<p>The user exit Extract is configured as a data pump. The data pump consumes a local trail (for example <code>dirdat/aa</code>) and sends the data to the user exit. The user exit is responsible for processing all the data.</p>
<p>Following is an example of adding a data pump Extract:</p>
<pre>
ADD EXTRACT javaue, EXTTRAILSOURCE ./dirdat/aa
</pre>
<p>The process names and trail names used above can be replaced with any valid name. Process names must be 8 characters or less, trail names must to be two characters. In the user exit Extract parameter file (<code>javaue.prm</code>) specify the location of the user exit library.</p>
<div id="GADAD314" class="tblhruleformal"><p class="titleintable"><a id="sthref296"></a><a id="sthref297"></a>Table 12-1 User Exit Extract Parameters</p>
<table class="cellalignment24" title="User Exit Extract Parameters" summary="This two column table lists and explains the user exit extract parameters.">
<thead>
<tr class="cellalignment13">
<th class="cellalignment25" id="r1c1-t2">Parameter</th>
<th class="cellalignment25" id="r1c2-t2">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment13">
<th class="cellalignment19" id="r2c1-t2" headers="r1c1-t2">
<pre>
EXTRACT javaue
</pre></th>
<td class="cellalignment19" headers="r2c1-t2 r1c2-t2">
<p>All Extract parameter files start with the Extract name</p>
</td>
</tr>
<tr class="cellalignment13">
<th class="cellalignment19" id="r3c1-t2" headers="r1c1-t2">
<pre>
SOURCEDEFS ./dirdef/tcust.def
</pre></th>
<td class="cellalignment19" headers="r3c1-t2 r1c2-t2">
<p>The Extract process requires metadata describing the trail data. This can come from a database or a source definitions file. This metadata defines the column names and data types in the trail being read (<code>./dirdat/aa</code>).</p>
</td>
</tr>
<tr class="cellalignment13">
<th class="cellalignment19" id="r4c1-t2" headers="r1c1-t2">
<pre>
SETENV (GGS_USEREXIT_CONF = "dirprm/javaue.properties")
</pre></th>
<td class="cellalignment19" headers="r4c1-t2 r1c2-t2">
<p>(Optional) An absolute or relative path (relative to the Extract executable) to the properties file for the C user exit library. The default value is <code><span class="codeinlineitalic">extract_name</span></code>.<code>properties</code> in the <code>dirprm</code> directory.</p>
</td>
</tr>
<tr class="cellalignment13">
<th class="cellalignment19" id="r5c1-t2" headers="r1c1-t2">
<pre>
SETENV (GGS_JAVAUSEREXIT_CONF = "dirprm/javaue.properties")
</pre></th>
<td class="cellalignment19" headers="r5c1-t2 r1c2-t2">
<p>(Optional) The Java properties.This example places the properties file in the <code>dirpm</code> directory.</p>
</td>
</tr>
<tr class="cellalignment13">
<th class="cellalignment19" id="r6c1-t2" headers="r1c1-t2">
<pre>
CUSEREXIT ggjava_ue.dll CUSEREXIT
PASSTHRU
INCLUDEUPDATEBEFORES
</pre></th>
<td class="cellalignment19" headers="r6c1-t2 r1c2-t2">
<p>The <code>CUSEREXIT</code> parameter includes the following:</p>
<ul>
<li>
<p>The location of the user exit library. For UNIX, the library would be suffixed <code>.so</code></p>
</li>
<li>
<p><code>CUSEREXIT</code> - the callback function name that must be uppercase.</p>
</li>
<li>
<p><code>PASSTHRU</code> - avoids the need for a dummy target trail.</p>
</li>
<li>
<p><code>INCLUDEUPDATEBEFORES</code> - needed for transaction integrity.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment13">
<th class="cellalignment19" id="r7c1-t2" headers="r1c1-t2">
<pre>
TABLE schema.*;
</pre></th>
<td class="cellalignment19" headers="r7c1-t2 r1c2-t2">
<p>The tables to pass to the User Exit; tables not included will be skipped. <span class="italic">No filtering</span> may be done in the user exit Extract; otherwise transaction markers will be missed. You can filter in the primary Extract, or use another, upstream data pump, or filter data directly in the Java application.</p>
</td>
</tr>
</tbody>
</table>
<br></div>
<!-- class="tblhruleformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Using <code>PASSTHRU</code> disables the statistical reporting that allows report counts to be included in the processing report. To collect report count statistics and send them to the Extract from the user exit, use the property <code>gg.report.time</code>.</div>
<p>The two environment properties shown above are optional.</p>
<ul>
<li>
<p><code>SETENV (GGS_USEREXIT_CONF = "dirprm/javaue.properties")</code></p>
<p>This changes the default configuration file used for the User Exit shared library. The value given is either an absolute path, or a path relative to Extract (or Replicat). The example above uses a relative path to put this property file in the <code>dirprm</code> directory.</p>
<p>The default file used is <code><span class="codeinlineitalic">extract_name</span></code>.<code>properties</code>, located in the <code>dirprm</code> directory. So, if the Extract name is <code>pumpA</code>, then the <code>prm</code> file is <code>dirprm</code>/<code>pumpA</code>.<code>prm</code> and the properties file is <code>dirprm</code>/<code>pumpA</code>.<code>properties</code>.</p>
</li>
<li>
<p><code>SETENV (GGS_JAVAUSEREXIT_CONF = "dirprm/javaue.properties")</code></p>
<p>This changes the default properties file used for the Oracle GoldenGate for Java framework. The value found is a path to a file found in the class path or in a normal file system path.</p>
<p>Both <code>GGS_USEREXIT_CONF</code> and <code>GGS_JAVAUSEREXIT_CONF</code> default to the same file; <code>dirprm/</code><code><span class="codeinlineitalic">extract_name</span></code>.<code>properties</code>.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="A999416"></a>
<div id="GADAD315" class="sect1">
<h2 class="sect1"><span class="secnum">12.3</span> Configure the Java Handlers</h2>
<p>The Oracle GoldenGate Java API has a property file used to configure active event handlers. To test the configuration, you may use the built-in file handler. Here are some example properties, followed by explanations of the properties (comment lines start with #):</p>
<pre>
# the list of active handlers
gg.handlerlist=myhandler
# set properties on 'myhandler'
gg.handler.myhandler.type=file
gg.handler.myhandler.format=tx2xml.vm
gg.handler.myhandler.file=output.xml
</pre>
<p>This property file declares the following:</p>
<ul>
<li>
<p>Active event handlers. In the example a single event handler is active, called <code>myhandler</code>. Multiple handlers may be specified, separated by commas. For example: <code>gg.handlerlist=myhandler, yourhandler</code></p>
</li>
<li>
<p>Configuration of the handlers. In the example <code>myhandler</code> is declared to be a <code>file</code> type of handler: <code>gg.handler.myhandler.type=file</code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
See the documentation for each type of handler (e.g. the JMS handler or the file writer handler) for the list of valid properties that can be set.</div>
</li>
<li>
<p>The format of the output is defined by the Velocity template <code>tx2xml.vm</code>. You may specify your own custom template to define the message format; just specify the path to your template relative to the Java class path (this is discussed later).</p>
</li>
</ul>
<p>This property file is actually a complete example that will write captured transactions to the output file output.xml. Other handler types can be specified using the key words: <code>jms_text</code> (or <code>jms</code>), <code>jms_map</code>, <code>singlefile</code> (a file that does not roll), and others. Custom handlers can be implemented, in which case the type would be the fully qualified name of the Java class for the handler.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr>
<table class="cellalignment12">
<tr>
<td class="cellalignment19"><table class="cellalignment17">
<tr>
<td class="cellalignment16"><a href="java_msgdel_part.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page"><br>
<span class="icon">Previous</span></a></td>

<td class="cellalignment16"><a href="java_msgdel_using.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page"><br>
<span class="icon">Next</span></a></td>
</tr>
</table></td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle"><br>
Copyright&nbsp;&copy;&nbsp;2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br>
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment21">
<table class="cellalignment15">
<tr>
<td class="cellalignment16"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home"><br>
<span class="icon">Home</span></a></td>
<td class="cellalignment16"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents"><br>
<span class="icon">Contents</span></a></td>
<td class="cellalignment16"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page"><br>
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
